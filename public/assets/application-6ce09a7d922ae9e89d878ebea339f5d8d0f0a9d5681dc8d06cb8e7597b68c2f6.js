!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(E,t){function s(t){var e=!!t&&"length"in t&&t.length,n=ft.type(t);return"function"!==n&&!ft.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}function e(t,n,i){if(ft.isFunction(n))return ft.grep(t,function(t,e){return!!n.call(t,e,t)!==i});if(n.nodeType)return ft.grep(t,function(t){return t===n!==i});if("string"==typeof n){if(Et.test(n))return ft.filter(n,t,i);n=ft.filter(n,t)}return ft.grep(t,function(t){return-1<ft.inArray(t,n)!==i})}function n(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t){var n={};return ft.each(t.match(Lt)||[],function(t,e){n[e]=!0}),n}function r(){it.addEventListener?(it.removeEventListener("DOMContentLoaded",o),E.removeEventListener("load",o)):(it.detachEvent("onreadystatechange",o),E.detachEvent("onload",o))}function o(){(it.addEventListener||"load"===E.event.type||"complete"===it.readyState)&&(r(),ft.ready())}function l(t,e,n){if(n===undefined&&1===t.nodeType){var i="data-"+e.replace(Ot,"-$1").toLowerCase();if("string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:It.test(n)?ft.parseJSON(n):n)}catch(r){}ft.data(t,e,n)}else n=undefined}return n}function u(t){var e;for(e in t)if(("data"!==e||!ft.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function i(t,e,n,i){if(Pt(t)){var r,o,a=ft.expando,s=t.nodeType,l=s?ft.cache:t,u=s?t[a]:t[a]&&a;if(u&&l[u]&&(i||l[u].data)||n!==undefined||"string"!=typeof e)return u||(u=s?t[a]=nt.pop()||ft.guid++:a),l[u]||(l[u]=s?{}:{toJSON:ft.noop}),"object"!=typeof e&&"function"!=typeof e||(i?l[u]=ft.extend(l[u],e):l[u].data=ft.extend(l[u].data,e)),o=l[u],i||(o.data||(o.data={}),o=o.data),n!==undefined&&(o[ft.camelCase(e)]=n),"string"==typeof e?null==(r=o[e])&&(r=o[ft.camelCase(e)]):r=o,r}}function a(t,e,n){if(Pt(t)){var i,r,o=t.nodeType,a=o?ft.cache:t,s=o?t[ft.expando]:ft.expando;if(a[s]){if(e&&(i=n?a[s]:a[s].data)){r=(e=ft.isArray(e)?e.concat(ft.map(e,ft.camelCase)):e in i?[e]:(e=ft.camelCase(e))in i?[e]:e.split(" ")).length;for(;r--;)delete i[e[r]];if(n?!u(i):!ft.isEmptyObject(i))return}(n||(delete a[s].data,u(a[s])))&&(o?ft.cleanData([t],!0):ht.deleteExpando||a!=a.window?delete a[s]:a[s]=undefined)}}}function h(t,e,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return ft.css(t,e,"")},l=s(),u=n&&n[3]||(ft.cssNumber[e]?"":"px"),c=(ft.cssNumber[e]||"px"!==u&&+l)&&jt.exec(ft.css(t,e));if(c&&c[3]!==u)for(u=u||c[3],n=n||[],c=+l||1;c/=o=o||".5",ft.style(t,e,c+u),o!==(o=s()/l)&&1!==o&&--a;);return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}function m(t){var e=Kt.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function v(t,e){var n,i,r=0,o="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):undefined;if(!o)for(o=[],n=t.childNodes||t;null!=(i=n[r]);r++)!e||ft.nodeName(i,e)?o.push(i):ft.merge(o,v(i,e));return e===undefined||e&&ft.nodeName(t,e)?ft.merge([t],o):o}function y(t,e){for(var n,i=0;null!=(n=t[i]);i++)ft._data(n,"globalEval",!e||ft._data(e[i],"globalEval"))}function b(t){Wt.test(t.type)&&(t.defaultChecked=t.checked)}function g(t,e,n,i,r){for(var o,a,s,l,u,c,h,d=t.length,f=m(e),p=[],g=0;g<d;g++)if((a=t[g])||0===a)if("object"===ft.type(a))ft.merge(p,a.nodeType?[a]:a);else if(Yt.test(a)){for(l=l||f.appendChild(e.createElement("div")),u=(Gt.exec(a)||["",""])[1].toLowerCase(),h=Xt[u]||Xt._default,l.innerHTML=h[1]+ft.htmlPrefilter(a)+h[2],o=h[0];o--;)l=l.lastChild;if(!ht.leadingWhitespace&&Vt.test(a)&&p.push(e.createTextNode(Vt.exec(a)[0])),!ht.tbody)for(o=(a="table"!==u||$t.test(a)?"<table>"!==h[1]||$t.test(a)?0:l:l.firstChild)&&a.childNodes.length;o--;)ft.nodeName(c=a.childNodes[o],"tbody")&&!c.childNodes.length&&a.removeChild(c);for(ft.merge(p,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=f.lastChild}else p.push(e.createTextNode(a));for(l&&f.removeChild(l),ht.appendChecked||ft.grep(v(p,"input"),b),g=0;a=p[g++];)if(i&&-1<ft.inArray(a,i))r&&r.push(a);else if(s=ft.contains(a.ownerDocument,a),l=v(f.appendChild(a),"script"),s&&y(l),n)for(o=0;a=l[o++];)zt.test(a.type||"")&&n.push(a);return l=null,f}function d(){return!0}function f(){return!1}function p(){try{return it.activeElement}catch(t){}}function w(t,e,n,i,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=undefined),e)w(t,s,n,i,e[s],o);return t}if(null==i&&null==r?(r=n,i=n=undefined):null==r&&("string"==typeof n?(r=i,i=undefined):(r=i,i=n,n=undefined)),!1===r)r=f;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return ft().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=ft.guid++)),t.each(function(){ft.event.add(this,e,r,i,n)})}function T(t,e){return ft.nodeName(t,"table")&&ft.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function S(t){return t.type=(null!==ft.find.attr(t,"type"))+"/"+t.type,t}function A(t){var e=se.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function x(t,e){if(1===e.nodeType&&ft.hasData(t)){var n,i,r,o=ft._data(t),a=ft._data(e,o),s=o.events;if(s)for(n in delete a.handle,a.events={},s)for(i=0,r=s[n].length;i<r;i++)ft.event.add(e,n,s[n][i]);a.data&&(a.data=ft.extend({},a.data))}}function C(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ht.noCloneEvent&&e[ft.expando]){for(i in(r=ft._data(e)).events)ft.removeEvent(e,i,r.handle);e.removeAttribute(ft.expando)}"script"===n&&e.text!==t.text?(S(e).text=t.text,A(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ht.html5Clone&&t.innerHTML&&!ft.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Wt.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}function _(n,i,r,o){i=ot.apply([],i);var t,e,a,s,l,u,c=0,h=n.length,d=h-1,f=i[0],p=ft.isFunction(f);if(p||1<h&&"string"==typeof f&&!ht.checkClone&&ae.test(f))return n.each(function(t){var e=n.eq(t);p&&(i[0]=f.call(this,t,e.html())),_(e,i,r,o)});if(h&&(t=(u=g(i,n[0].ownerDocument,!1,n,o)).firstChild,1===u.childNodes.length&&(u=t),t||o)){for(a=(s=ft.map(v(u,"script"),S)).length;c<h;c++)e=u,c!==d&&(e=ft.clone(e,!0,!0),a&&ft.merge(s,v(e,"script"))),r.call(n[c],e,c);if(a)for(l=s[s.length-1].ownerDocument,ft.map(s,A),c=0;c<a;c++)e=s[c],zt.test(e.type||"")&&!ft._data(e,"globalEval")&&ft.contains(l,e)&&(e.src?ft._evalUrl&&ft._evalUrl(e.src):ft.globalEval((e.text||e.textContent||e.innerHTML||"").replace(le,"")));u=t=null}return n}function k(t,e,n){for(var i,r=e?ft.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||ft.cleanData(v(i)),i.parentNode&&(n&&ft.contains(i.ownerDocument,i)&&y(v(i,"script")),i.parentNode.removeChild(i));return t}function R(t,e){var n=ft(e.createElement(t)).appendTo(e.body),i=ft.css(n[0],"display");return n.detach(),i}function L(t){var e=it,n=he[t];return n||("none"!==(n=R(t,e))&&n||((e=((ce=(ce||ft("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||ce[0].contentDocument).document).write(),e.close(),n=R(t,e),ce.detach()),he[t]=n),n}function D(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function P(t){if(t in Ce)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=xe.length;n--;)if((t=xe[n]+e)in Ce)return t}function I(t,e){for(var n,i,r,o=[],a=0,s=t.length;a<s;a++)(i=t[a]).style&&(o[a]=ft._data(i,"olddisplay"),n=i.style.display,e?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Ut(i)&&(o[a]=ft._data(i,"olddisplay",L(i.nodeName)))):(r=Ut(i),(n&&"none"!==n||!r)&&ft._data(i,"olddisplay",r?n:ft.css(i,"display"))));for(a=0;a<s;a++)(i=t[a]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[a]||"":"none"));return t}function O(t,e,n){var i=Se.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function N(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=ft.css(t,n+Ht[o],!0,r)),i?("content"===n&&(a-=ft.css(t,"padding"+Ht[o],!0,r)),"margin"!==n&&(a-=ft.css(t,"border"+Ht[o]+"Width",!0,r))):(a+=ft.css(t,"padding"+Ht[o],!0,r),"padding"!==n&&(a+=ft.css(t,"border"+Ht[o]+"Width",!0,r)));return a}function M(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=me(t),a=ht.boxSizing&&"border-box"===ft.css(t,"boxSizing",!1,o);if(r<=0||null==r){if(((r=ve(t,e,o))<0||null==r)&&(r=t.style[e]),fe.test(r))return r;i=a&&(ht.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+N(t,e,n||(a?"border":"content"),i,o)+"px"}function F(t,e,n,i,r){return new F.prototype.init(t,e,n,i,r)}function B(){return E.setTimeout(function(){_e=undefined}),_e=ft.now()}function j(t,e){var n,i={height:t},r=0;for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=Ht[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function H(t,e,n){for(var i,r=(W.tweeners[e]||[]).concat(W.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function U(e,t,n){var i,r,o,a,s,l,u,c=this,h={},d=e.style,f=e.nodeType&&Ut(e),p=ft._data(e,"fxshow");for(i in n.queue||(null==(s=ft._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,ft.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===("none"===(u=ft.css(e,"display"))?ft._data(e,"olddisplay")||L(e.nodeName):u)&&"none"===ft.css(e,"float")&&(ht.inlineBlockNeedsLayout&&"inline"!==L(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ht.shrinkWrapBlocks()||c.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),t)if(r=t[i],Oe.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!p||p[i]===undefined)continue;f=!0}h[i]=p&&p[i]||ft.style(e,i)}else u=undefined;if(ft.isEmptyObject(h))"inline"===("none"===u?L(e.nodeName):u)&&(d.display=u);else for(i in p?"hidden"in p&&(f=p.hidden):p=ft._data(e,"fxshow",{}),o&&(p.hidden=!f),f?ft(e).show():c.done(function(){ft(e).hide()}),c.done(function(){var t;for(t in ft._removeData(e,"fxshow"),h)ft.style(e,t,h[t])}),h)a=H(f?p[i]:0,i,c),i in p||(p[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}function q(t,e){var n,i,r,o,a;for(n in t)if(r=e[i=ft.camelCase(n)],o=t[n],ft.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(a=ft.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}function W(o,t,e){var n,a,i=0,r=W.prefilters.length,s=ft.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=_e||B(),e=Math.max(0,u.startTime+u.duration-t),n=1-(e/u.duration||0),i=0,r=u.tweens.length;i<r;i++)u.tweens[i].run(n);return s.notifyWith(o,[u,n,e]),n<1&&r?e:(s.resolveWith(o,[u]),!1)},u=s.promise({elem:o,props:ft.extend({},t),opts:ft.extend(!0,{specialEasing:{},easing:ft.easing._default},e),originalProperties:t,originalOptions:e,startTime:_e||B(),duration:e.duration,tweens:[],createTween:function(t,e){var n=ft.Tween(o,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var e=0,n=t?u.tweens.length:0;if(a)return this;for(a=!0;e<n;e++)u.tweens[e].run(1);return t?(s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u,t])):s.rejectWith(o,[u,t]),this}}),c=u.props;for(q(c,u.opts.specialEasing);i<r;i++)if(n=W.prefilters[i].call(u,o,c,u.opts))return ft.isFunction(n.stop)&&(ft._queueHooks(u.elem,u.opts.queue).stop=ft.proxy(n.stop,n)),n;return ft.map(c,H,u),ft.isFunction(u.opts.start)&&u.opts.start.call(o,u),ft.fx.timer(ft.extend(l,{elem:o,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function G(t){return ft.attr(t,"class")||""}function z(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,r=t.toLowerCase().match(Lt)||[];if(ft.isFunction(e))for(;n=r[i++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function V(e,r,o,a){function s(t){var i;return l[t]=!0,ft.each(e[t]||[],function(t,e){var n=e(r,o,a);return"string"!=typeof n||u||l[n]?u?!(i=n):void 0:(r.dataTypes.unshift(n),s(n),!1)}),i}var l={},u=e===an;return s(r.dataTypes[0])||!l["*"]&&s("*")}function K(t,e){var n,i,r=ft.ajaxSettings.flatOptions||{};for(i in e)e[i]!==undefined&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&ft.extend(!0,t,n),t}function X(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),r===undefined&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){o=a;break}i||(i=a)}o=o||i}if(o)return o!==l[0]&&l.unshift(o),n[o]}function Y(t,e,n,i){var r,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(r in u)if((s=r.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[r]:!0!==u[r]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function $(t){return t.style&&t.style.display||ft.css(t,"display")}function J(t){if(!ft.contains(t.ownerDocument||it,t))return!0;for(;t&&1===t.nodeType;){if("none"===$(t)||"hidden"===t.type)return!0;t=t.parentNode}return!1}function Q(n,t,i,r){var e;if(ft.isArray(t))ft.each(t,function(t,e){i||hn.test(n)?r(n,e):Q(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,i,r)});else if(i||"object"!==ft.type(t))r(n,t);else for(e in t)Q(n+"["+e+"]",t[e],i,r)}function Z(){try{return new E.XMLHttpRequest}catch(t){}}function tt(){try{return new E.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function et(t){return ft.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var nt=[],it=E.document,rt=nt.slice,ot=nt.concat,at=nt.push,st=nt.indexOf,lt={},ut=lt.toString,ct=lt.hasOwnProperty,ht={},dt="1.12.4",ft=function(t,e){return new ft.fn.init(t,e)},pt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,gt=/^-ms-/,mt=/-([\da-z])/gi,vt=function(t,e){return e.toUpperCase()};ft.fn=ft.prototype={jquery:dt,constructor:ft,selector:"",length:0,toArray:function(){return rt.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:rt.call(this)},pushStack:function(t){var e=ft.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return ft.each(this,t)},map:function(n){return this.pushStack(ft.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(rt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:at,sort:nt.sort,splice:nt.splice},ft.extend=ft.fn.extend=function(t){var e,n,i,r,o,a,s=t||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"==typeof s||ft.isFunction(s)||(s={}),l===u&&(s=this,l--);l<u;l++)if(null!=(o=arguments[l]))for(r in o)e=s[r],s!==(i=o[r])&&(c&&i&&(ft.isPlainObject(i)||(n=ft.isArray(i)))?(n?(n=!1,a=e&&ft.isArray(e)?e:[]):a=e&&ft.isPlainObject(e)?e:{},s[r]=ft.extend(c,a,i)):i!==undefined&&(s[r]=i));return s},ft.extend({expando:"jQuery"+(dt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ft.type(t)},isArray:Array.isArray||function(t){return"array"===ft.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){var e=t&&t.toString();return!ft.isArray(t)&&0<=e-parseFloat(e)+1},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==ft.type(t)||t.nodeType||ft.isWindow(t))return!1;try{if(t.constructor&&!ct.call(t,"constructor")&&!ct.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(!ht.ownFirst)for(e in t)return ct.call(t,e);for(e in t);return e===undefined||ct.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?lt[ut.call(t)]||"object":typeof t},globalEval:function(t){t&&ft.trim(t)&&(E.execScript||function(t){E.eval.call(E,t)})(t)},camelCase:function(t){return t.replace(gt,"ms-").replace(mt,vt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,i=0;if(s(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(pt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(s(Object(t))?ft.merge(n,"string"==typeof t?[t]:t):at.call(n,t)),n},inArray:function(t,e,n){var i;if(e){if(st)return st.call(e,t,n);for(i=e.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;)t[r++]=e[i++];if(n!=n)for(;e[i]!==undefined;)t[r++]=e[i++];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,a=!n;r<o;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,a=[];if(s(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&a.push(r);return ot.apply([],a)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(r=t[e],e=t,t=r),ft.isFunction(t)?(n=rt.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(rt.call(arguments)))}).guid=t.guid=t.guid||ft.guid++,i):undefined},now:function(){return+new Date},support:ht}),"function"==typeof Symbol&&(ft.fn[Symbol.iterator]=nt[Symbol.iterator]),ft.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){lt["[object "+e+"]"]=e.toLowerCase()});var yt=function(n){function w(t,e,n,i){var r,o,a,s,l,u,c,h,d=e&&e.ownerDocument,f=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return n;if(!i&&((e?e.ownerDocument||e:H)!==P&&D(e),e=e||P,O)){if(11!==f&&(u=vt.exec(t)))if(r=u[1]){if(9===f){if(!(a=e.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(d&&(a=d.getElementById(r))&&B(e,a)&&a.id===r)return n.push(a),n}else{if(u[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((r=u[3])&&v.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(r)),n}if(v.qsa&&!z[t+" "]&&(!N||!N.test(t))){if(1!==f)d=e,h=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(bt,"\\$&"):e.setAttribute("id",s=j),o=(c=x(t)).length,l=dt.test(s)?"#"+s:"[id='"+s+"']";o--;)c[o]=l+" "+m(c[o]);h=c.join(","),d=yt.test(t)&&g(e.parentNode)||e}if(h)try{return Q.apply(n,d.querySelectorAll(h)),n}catch(p){}finally{s===j&&e.removeAttribute("id")}}}return _(t.replace(st,"$1"),e,n,i)}function t(){function n(t,e){return i.push(t+" ")>S.cacheLength&&delete n[i.shift()],n[t+" "]=e}var i=[];return n}function l(t){return t[j]=!0,t}function r(t){var e=P.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function e(t,e){for(var n=t.split("|"),i=n.length;i--;)S.attrHandle[n[i]]=e}function u(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||K)-(~t.sourceIndex||K);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function i(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function o(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function a(a){return l(function(o){return o=+o,l(function(t,e){for(var n,i=a([],t.length,o),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}function g(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function s(){}function m(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function h(s,t,e){var l=t.dir,u=e&&"parentNode"===l,c=q++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||u)return s(t,e,n)}:function(t,e,n){var i,r,o,a=[U,c];if(n){for(;t=t[l];)if((1===t.nodeType||u)&&s(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||u){if((i=(r=(o=t[j]||(t[j]={}))[t.uniqueID]||(o[t.uniqueID]={}))[l])&&i[0]===U&&i[1]===c)return a[2]=i[2];if((r[l]=a)[2]=s(t,e,n))return!0}}}function d(r){return 1<r.length?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function y(t,e,n){for(var i=0,r=e.length;i<r;i++)w(t,e[i],n);return n}function T(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),u&&e.push(s)));return a}function b(f,p,g,m,v,t){return m&&!m[j]&&(m=b(m)),v&&!v[j]&&(v=b(v,t)),l(function(t,e,n,i){var r,o,a,s=[],l=[],u=e.length,c=t||y(p||"*",n.nodeType?[n]:n,[]),h=!f||!t&&p?c:T(c,s,f,n,i),d=g?v||(t?f:u||m)?[]:e:h;if(g&&g(h,d,n,i),m)for(r=T(d,l),m(r,[],n,i),o=r.length;o--;)(a=r[o])&&(d[l[o]]=!(h[l[o]]=a));if(t){if(v||f){if(v){for(r=[],o=d.length;o--;)(a=d[o])&&r.push(h[o]=a);v(null,d=[],r,i)}for(o=d.length;o--;)(a=d[o])&&-1<(r=v?tt(t,a):s[o])&&(t[r]=!(e[r]=a))}}else d=T(d===e?d.splice(u,d.length):d),v?v(null,e,d,i):Q.apply(e,d)})}function f(t){for(var r,e,n,i=t.length,o=S.relative[t[0].type],a=o||S.relative[" "],s=o?1:0,l=h(function(t){return t===r},a,!0),u=h(function(t){return-1<tt(r,t)},a,!0),c=[function(t,e,n){var i=!o&&(n||e!==k)||((r=e).nodeType?l(t,e,n):u(t,e,n));return r=null,i}];s<i;s++)if(e=S.relative[t[s].type])c=[h(d(c),e)];else{if((e=S.filter[t[s].type].apply(null,t[s].matches))[j]){for(n=++s;n<i&&!S.relative[t[n].type];n++);return b(1<s&&d(c),1<s&&m(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),e,s<n&&f(t.slice(s,n)),n<i&&f(t=t.slice(n)),n<i&&m(t))}c.push(e)}return d(c)}function c(m,v){var y=0<v.length,b=0<m.length,t=function(t,e,n,i,r){var o,a,s,l=0,u="0",c=t&&[],h=[],d=k,f=t||b&&S.find.TAG("*",r),p=U+=null==d?1:Math.random()||.1,g=f.length;for(r&&(k=e===P||e||r);u!==g&&null!=(o=f[u]);u++){if(b&&o){for(a=0,e||o.ownerDocument===P||(D(o),n=!O);s=m[a++];)if(s(o,e||P,n)){i.push(o);break}r&&(U=p)}y&&((o=!s&&o)&&l--,t&&c.push(o))}if(l+=u,y&&u!==l){for(a=0;s=v[a++];)s(c,h,e,n);if(t){if(0<l)for(;u--;)c[u]||h[u]||(h[u]=$.call(i));h=T(h)}Q.apply(i,h),r&&!t&&0<h.length&&1<l+v.length&&w.uniqueSort(i)}return r&&(U=p,k=d),c};return y?l(t):t}var p,v,S,E,A,x,C,_,k,R,L,D,P,I,O,N,M,F,B,j="sizzle"+1*new Date,H=n.document,U=0,q=0,W=t(),G=t(),z=t(),V=function(t,e){return t===e&&(L=!0),0},K=1<<31,X={}.hasOwnProperty,Y=[],$=Y.pop,J=Y.push,Q=Y.push,Z=Y.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",ot=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ct=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(ot),dt=new RegExp("^"+it+"$"),ft={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),Tt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},St=function(){D()};try{Q.apply(Y=Z.call(H.childNodes),H.childNodes),Y[H.childNodes.length].nodeType}catch(Et){Q={apply:Y.length?function(t,e){J.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}for(p in v=w.support={},A=w.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},D=w.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:H;return i!==P&&9===i.nodeType&&i.documentElement&&(I=(P=i).documentElement,O=!A(P),(n=P.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",St,!1):n.attachEvent&&n.attachEvent("onunload",St)),v.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),v.getElementsByTagName=r(function(t){return t.appendChild(P.createComment("")),!t.getElementsByTagName("*").length}),v.getElementsByClassName=mt.test(P.getElementsByClassName),v.getById=r(function(t){return I.appendChild(t).id=j,!P.getElementsByName||!P.getElementsByName(j).length}),v.getById?(S.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&O){var n=e.getElementById(t);return n?[n]:[]}},S.filter.ID=function(t){var e=t.replace(wt,Tt);return function(t){return t.getAttribute("id")===e}}):(delete S.find.ID,S.filter.ID=function(t){var n=t.replace(wt,Tt);return function(t){var e="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}}),S.find.TAG=v.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):v.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},S.find.CLASS=v.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&O)return e.getElementsByClassName(t)},M=[],N=[],(v.qsa=mt.test(P.querySelectorAll))&&(r(function(t){I.appendChild(t).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||N.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+j+"-]").length||N.push("~="),t.querySelectorAll(":checked").length||N.push(":checked"),t.querySelectorAll("a#"+j+"+*").length||N.push(".#.+[+~]")}),r(function(t){var e=P.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&N.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),N.push(",.*:")})),(v.matchesSelector=mt.test(F=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&r(function(t){v.disconnectedMatch=F.call(t,"div"),F.call(t,"[s!='']:x"),M.push("!=",ot)}),N=N.length&&new RegExp(N.join("|")),M=M.length&&new RegExp(M.join("|")),e=mt.test(I.compareDocumentPosition),B=e||mt.test(I.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return L=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!v.sortDetached&&e.compareDocumentPosition(t)===n?t===P||t.ownerDocument===H&&B(H,t)?-1:e===P||e.ownerDocument===H&&B(H,e)?1:R?tt(R,t)-tt(R,e):0:4&n?-1:1)}:function(t,e){if(t===e)return L=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t===P?-1:e===P?1:r?-1:o?1:R?tt(R,t)-tt(R,e):0;if(r===o)return u(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?u(a[i],s[i]):a[i]===H?-1:s[i]===H?1:0}),P},w.matches=function(t,e){return w(t,null,null,e)},w.matchesSelector=function(t,e){if((t.ownerDocument||t)!==P&&D(t),e=e.replace(ct,"='$1']"),v.matchesSelector&&O&&!z[e+" "]&&(!M||!M.test(e))&&(!N||!N.test(e)))try{var n=F.call(t,e);if(n||v.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(Et){}return 0<w(e,P,null,[t]).length},w.contains=function(t,e){return(t.ownerDocument||t)!==P&&D(t),B(t,e)},w.attr=function(t,e){(t.ownerDocument||t)!==P&&D(t);var n=S.attrHandle[e.toLowerCase()],i=n&&X.call(S.attrHandle,e.toLowerCase())?n(t,e,!O):undefined;return i!==undefined?i:v.attributes||!O?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},w.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},w.uniqueSort=function(t){var e,n=[],i=0,r=0;if(L=!v.detectDuplicates,R=!v.sortStable&&t.slice(0),t.sort(V),L){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return R=null,t},E=w.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=E(e);return n},(S=w.selectors={cacheLength:50,createPseudo:l,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(wt,Tt),t[3]=(t[3]||t[4]||t[5]||"").replace(wt,Tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||w.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&w.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ht.test(n)&&(e=x(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(wt,Tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(t){var e=w.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===r:"!="===i?e!==r:"^="===i?r&&0===e.indexOf(r):"*="===i?r&&-1<e.indexOf(r):"$="===i?r&&e.slice(-r.length)===r:"~="===i?-1<(" "+e.replace(at," ")+" ").indexOf(r):"|="===i&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,t,e,g,m){var v="nth"!==p.slice(0,3),y="last"!==p.slice(-4),b="of-type"===t;return 1===g&&0===m?function(t){return!!t.parentNode}:function(t,e,n){var i,r,o,a,s,l,u=v!==y?"nextSibling":"previousSibling",c=t.parentNode,h=b&&t.nodeName.toLowerCase(),d=!n&&!b,f=!1;if(c){if(v){for(;u;){for(a=t;a=a[u];)if(b?a.nodeName.toLowerCase()===h:1===a.nodeType)return!1;l=u="only"===p&&!l&&"nextSibling"}return!0}if(l=[y?c.firstChild:c.lastChild],y&&d){for(f=(s=(i=(r=(o=(a=c)[j]||(a[j]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===U&&i[1])&&i[2],a=s&&c.childNodes[s];a=++s&&a&&a[u]||(f=s=0)||l.pop();)if(1===a.nodeType&&++f&&a===t){r[p]=[U,s,f];break}}else if(d&&(f=s=(i=(r=(o=(a=t)[j]||(a[j]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===U&&i[1]),!1===f)for(;(a=++s&&a&&a[u]||(f=s=0)||l.pop())&&((b?a.nodeName.toLowerCase()!==h:1!==a.nodeType)||!++f||(d&&((r=(o=a[j]||(a[j]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]=[U,f]),a!==t)););return(f-=m)===g||f%g==0&&0<=f/g}}},PSEUDO:function(t,o){var e,a=S.pseudos[t]||S.setFilters[t.toLowerCase()]||w.error("unsupported pseudo: "+t);return a[j]?a(o):1<a.length?(e=[t,t,"",o],S.setFilters.hasOwnProperty(t.toLowerCase())?l(function(t,e){for(var n,i=a(t,o),r=i.length;r--;)t[n=tt(t,i[r])]=!(e[n]=i[r])}):function(t){return a(t,0,e)}):a}},pseudos:{
not:l(function(t){var i=[],r=[],s=C(t.replace(st,"$1"));return s[j]?l(function(t,e,n,i){for(var r,o=s(t,null,i,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,e,n){return i[0]=t,s(i,null,n,r),i[0]=null,!r.pop()}}),has:l(function(e){return function(t){return 0<w(e,t).length}}),contains:l(function(e){return e=e.replace(wt,Tt),function(t){return-1<(t.textContent||t.innerText||E(t)).indexOf(e)}}),lang:l(function(n){return dt.test(n||"")||w.error("unsupported lang: "+n),n=n.replace(wt,Tt).toLowerCase(),function(t){var e;do{if(e=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===I},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!S.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:a(function(){return[0]}),last:a(function(t,e){return[e-1]}),eq:a(function(t,e,n){return[n<0?n+e:n]}),even:a(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:a(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:a(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:a(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=S.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[p]=i(p);for(p in{submit:!0,reset:!0})S.pseudos[p]=o(p);return s.prototype=S.filters=S.pseudos,S.setFilters=new s,x=w.tokenize=function(t,e){var n,i,r,o,a,s,l,u=G[t+" "];if(u)return e?0:u.slice(0);for(a=t,s=[],l=S.preFilter;a;){for(o in n&&!(i=lt.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(r=[])),n=!1,(i=ut.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(st," ")}),a=a.slice(n.length)),S.filter)!(i=ft[o].exec(a))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?w.error(t):G(t,s).slice(0)},C=w.compile=function(t,e){var n,i=[],r=[],o=z[t+" "];if(!o){for(e||(e=x(t)),n=e.length;n--;)(o=f(e[n]))[j]?i.push(o):r.push(o);(o=z(t,c(r,i))).selector=t}return o},_=w.select=function(t,e,n,i){var r,o,a,s,l,u="function"==typeof t&&t,c=!i&&x(t=u.selector||t);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&v.getById&&9===e.nodeType&&O&&S.relative[o[1].type]){if(!(e=(S.find.ID(a.matches[0].replace(wt,Tt),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=ft.needsContext.test(t)?0:o.length;r--&&(a=o[r],!S.relative[s=a.type]);)if((l=S.find[s])&&(i=l(a.matches[0].replace(wt,Tt),yt.test(o[0].type)&&g(e.parentNode)||e))){if(o.splice(r,1),!(t=i.length&&m(o)))return Q.apply(n,i),n;break}}return(u||C(t,c))(i,e,!O,n,!e||yt.test(t)&&g(e.parentNode)||e),n},v.sortStable=j.split("").sort(V).join("")===j,v.detectDuplicates=!!L,D(),v.sortDetached=r(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||e("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),v.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||e("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||e(et,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),w}(E);ft.find=yt,ft.expr=yt.selectors,ft.expr[":"]=ft.expr.pseudos,ft.uniqueSort=ft.unique=yt.uniqueSort,ft.text=yt.getText,ft.isXMLDoc=yt.isXML,ft.contains=yt.contains;var bt=function(t,e,n){for(var i=[],r=n!==undefined;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&ft(t).is(n))break;i.push(t)}return i},wt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},Tt=ft.expr.match.needsContext,St=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Et=/^.[^:#\[\.,]*$/;ft.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?ft.find.matchesSelector(i,t)?[i]:[]:ft.find.matches(t,ft.grep(e,function(t){return 1===t.nodeType}))},ft.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(ft(t).filter(function(){for(e=0;e<r;e++)if(ft.contains(i[e],this))return!0}));for(e=0;e<r;e++)ft.find(t,i[e],n);return(n=this.pushStack(1<r?ft.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(e(this,t||[],!1))},not:function(t){return this.pushStack(e(this,t||[],!0))},is:function(t){return!!e(this,"string"==typeof t&&Tt.test(t)?ft(t):t||[],!1).length}});var At,xt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ft.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||At,"string"==typeof t){if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:xt.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof ft?e[0]:e,ft.merge(this,ft.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:it,!0)),St.test(i[1])&&ft.isPlainObject(e))for(i in e)ft.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if((r=it.getElementById(i[2]))&&r.parentNode){if(r.id!==i[2])return At.find(t);this.length=1,this[0]=r}return this.context=it,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ft.isFunction(t)?"undefined"!=typeof n.ready?n.ready(t):t(ft):(t.selector!==undefined&&(this.selector=t.selector,this.context=t.context),ft.makeArray(t,this))}).prototype=ft.fn,At=ft(it);var Ct=/^(?:parents|prev(?:Until|All))/,_t={children:!0,contents:!0,next:!0,prev:!0};ft.fn.extend({has:function(t){var e,n=ft(t,this),i=n.length;return this.filter(function(){for(e=0;e<i;e++)if(ft.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,o=[],a=Tt.test(t)||"string"!=typeof t?ft(t,e||this.context):0;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ft.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?ft.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?ft.inArray(this[0],ft(t)):ft.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ft.uniqueSort(ft.merge(this.get(),ft(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ft.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return bt(t,"parentNode")},parentsUntil:function(t,e,n){return bt(t,"parentNode",n)},next:function(t){return n(t,"nextSibling")},prev:function(t){return n(t,"previousSibling")},nextAll:function(t){return bt(t,"nextSibling")},prevAll:function(t){return bt(t,"previousSibling")},nextUntil:function(t,e,n){return bt(t,"nextSibling",n)},prevUntil:function(t,e,n){return bt(t,"previousSibling",n)},siblings:function(t){return wt((t.parentNode||{}).firstChild,t)},children:function(t){return wt(t.firstChild)},contents:function(t){return ft.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ft.merge([],t.childNodes)}},function(i,r){ft.fn[i]=function(t,e){var n=ft.map(this,r,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=ft.filter(e,n)),1<this.length&&(_t[i]||(n=ft.uniqueSort(n)),Ct.test(i)&&(n=n.reverse())),this.pushStack(n)}});var kt,Rt,Lt=/\S+/g;for(Rt in ft.Callbacks=function(i){i="string"==typeof i?c(i):ft.extend({},i);var r,t,e,n,o=[],a=[],s=-1,l=function(){for(n=i.once,e=r=!0;a.length;s=-1)for(t=a.shift();++s<o.length;)!1===o[s].apply(t[0],t[1])&&i.stopOnFalse&&(s=o.length,t=!1);i.memory||(t=!1),r=!1,n&&(o=t?[]:"")},u={add:function(){return o&&(t&&!r&&(s=o.length-1,a.push(t)),function n(t){ft.each(t,function(t,e){ft.isFunction(e)?i.unique&&u.has(e)||o.push(e):e&&e.length&&"string"!==ft.type(e)&&n(e)})}(arguments),t&&!r&&l()),this},remove:function(){return ft.each(arguments,function(t,e){for(var n;-1<(n=ft.inArray(e,o,n));)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?-1<ft.inArray(t,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return n=a=[],o=t="",this},disabled:function(){return!o},lock:function(){return n=!0,t||u.disable(),this},locked:function(){return!!n},fireWith:function(t,e){return n||(e=[t,(e=e||[]).slice?e.slice():e],a.push(e),r||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!e}};return u},ft.extend({Deferred:function(t){var o=[["resolve","done",ft.Callbacks("once memory"),"resolved"],["reject","fail",ft.Callbacks("once memory"),"rejected"],["notify","progress",ft.Callbacks("memory")]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var r=arguments;return ft.Deferred(function(i){ft.each(o,function(t,e){var n=ft.isFunction(r[t])&&r[t];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&ft.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this===a?i.promise():this,n?[t]:arguments)})}),r=null}).promise()},promise:function(t){return null!=t?ft.extend(t,a):a}},s={};return a.pipe=a.then,ft.each(o,function(t,e){var n=e[2],i=e[3];a[e[1]]=n.add,i&&n.add(function(){r=i},o[1^t][2].disable,o[2][2].lock),s[e[0]]=function(){return s[e[0]+"With"](this===s?a:this,arguments),this},s[e[0]+"With"]=n.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){var r,e,n,i=0,o=rt.call(arguments),a=o.length,s=1!==a||t&&ft.isFunction(t.promise)?a:0,l=1===s?t:ft.Deferred(),u=function(e,n,i){return function(t){n[e]=this,i[e]=1<arguments.length?rt.call(arguments):t,i===r?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(1<a)for(r=new Array(a),e=new Array(a),n=new Array(a);i<a;i++)o[i]&&ft.isFunction(o[i].promise)?o[i].promise().progress(u(i,e,r)).done(u(i,n,o)).fail(l.reject):--s;return s||l.resolveWith(n,o),l.promise()}}),ft.fn.ready=function(t){return ft.ready.promise().done(t),this},ft.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ft.readyWait++:ft.ready(!0)},ready:function(t){(!0===t?--ft.readyWait:ft.isReady)||(ft.isReady=!0)!==t&&0<--ft.readyWait||(kt.resolveWith(it,[ft]),ft.fn.triggerHandler&&(ft(it).triggerHandler("ready"),ft(it).off("ready")))}}),ft.ready.promise=function(e){if(!kt)if(kt=ft.Deferred(),"complete"===it.readyState||"loading"!==it.readyState&&!it.documentElement.doScroll)E.setTimeout(ft.ready);else if(it.addEventListener)it.addEventListener("DOMContentLoaded",o),E.addEventListener("load",o);else{it.attachEvent("onreadystatechange",o),E.attachEvent("onload",o);var n=!1;try{n=null==E.frameElement&&it.documentElement}catch(i){}n&&n.doScroll&&function t(){if(!ft.isReady){try{n.doScroll("left")}catch(i){return E.setTimeout(t,50)}r(),ft.ready()}}()}return kt.promise(e)},ft.ready.promise(),ft(ht))break;ht.ownFirst="0"===Rt,ht.inlineBlockNeedsLayout=!1,ft(function(){var t,e,n,i;(n=it.getElementsByTagName("body")[0])&&n.style&&(e=it.createElement("div"),(i=it.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),"undefined"!=typeof e.style.zoom&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ht.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=it.createElement("div");ht.deleteExpando=!0;try{delete t.test}catch(e){ht.deleteExpando=!1}t=null}();var Dt,Pt=function(t){var e=ft.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return(1===n||9===n)&&(!e||!0!==e&&t.getAttribute("classid")===e)},It=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ot=/([A-Z])/g;ft.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?ft.cache[t[ft.expando]]:t[ft.expando])&&!u(t)},data:function(t,e,n){return i(t,e,n)},removeData:function(t,e){return a(t,e)},_data:function(t,e,n){return i(t,e,n,!0)},_removeData:function(t,e){return a(t,e,!0)}}),ft.fn.extend({data:function(t,e){var n,i,r,o=this[0],a=o&&o.attributes;if(t===undefined){if(this.length&&(r=ft.data(o),1===o.nodeType&&!ft._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&l(o,i=ft.camelCase(i.slice(5)),r[i]);ft._data(o,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){ft.data(this,t)}):1<arguments.length?this.each(function(){ft.data(this,t,e)}):o?l(o,t,ft.data(o,t)):undefined},removeData:function(t){return this.each(function(){ft.removeData(this,t)})}}),ft.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=ft._data(t,e),n&&(!i||ft.isArray(n)?i=ft._data(t,e,ft.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=ft.queue(t,e),i=n.length,r=n.shift(),o=ft._queueHooks(t,e),a=function(){ft.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ft._data(t,n)||ft._data(t,n,{empty:ft.Callbacks("once memory").add(function(){ft._removeData(t,e+"queue"),ft._removeData(t,n)})})}}),ft.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?ft.queue(this[0],e):n===undefined?this:this.each(function(){var t=ft.queue(this,e,n);ft._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ft.dequeue(this,e)})},dequeue:function(t){return this.each(function(){ft.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=ft.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=undefined),t=t||"fx";a--;)(n=ft._data(o[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}}),ht.shrinkWrapBlocks=function(){return null!=Dt?Dt:(Dt=!1,(e=it.getElementsByTagName("body")[0])&&e.style?(t=it.createElement("div"),(n=it.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(n).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(it.createElement("div")).style.width="5px",Dt=3!==t.offsetWidth),e.removeChild(n),Dt):void 0);var t,e,n};var Nt,Mt,Ft,Bt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,jt=new RegExp("^(?:([+-])=|)("+Bt+")([a-z%]*)$","i"),Ht=["Top","Right","Bottom","Left"],Ut=function(t,e){return t=e||t,"none"===ft.css(t,"display")||!ft.contains(t.ownerDocument,t)},qt=function(t,e,n,i,r,o,a){var s=0,l=t.length,u=null==n;if("object"===ft.type(n))for(s in r=!0,n)qt(t,e,s,n[s],!0,o,a);else if(i!==undefined&&(r=!0,ft.isFunction(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(ft(t),n)})),e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:u?e.call(t):l?e(t[0],n):o},Wt=/^(?:checkbox|radio)$/i,Gt=/<([\w:-]+)/,zt=/^$|\/(?:java|ecma)script/i,Vt=/^\s+/,Kt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";Nt=it.createElement("div"),Mt=it.createDocumentFragment(),Ft=it.createElement("input"),Nt.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ht.leadingWhitespace=3===Nt.firstChild.nodeType,ht.tbody=!Nt.getElementsByTagName("tbody").length,ht.htmlSerialize=!!Nt.getElementsByTagName("link").length,ht.html5Clone="<:nav></:nav>"!==it.createElement("nav").cloneNode(!0).outerHTML,Ft.type="checkbox",Ft.checked=!0,Mt.appendChild(Ft),ht.appendChecked=Ft.checked,Nt.innerHTML="<textarea>x</textarea>",ht.noCloneChecked=!!Nt.cloneNode(!0).lastChild.defaultValue,Mt.appendChild(Nt),(Ft=it.createElement("input")).setAttribute("type","radio"),Ft.setAttribute("checked","checked"),Ft.setAttribute("name","t"),Nt.appendChild(Ft),ht.checkClone=Nt.cloneNode(!0).cloneNode(!0).lastChild.checked,ht.noCloneEvent=!!Nt.addEventListener,Nt[ft.expando]=1,ht.attributes=!Nt.getAttribute(ft.expando);var Xt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ht.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Xt.optgroup=Xt.option,Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td;var Yt=/<|&#?\w+;/,$t=/<tbody/i;!function(){var t,e,n=it.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})e="on"+t,(ht[t]=e in E)||(n.setAttribute(e,"t"),ht[t]=!1===n.attributes[e].expando);n=null}();var Jt=/^(?:input|select|textarea)$/i,Qt=/^key/,Zt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,te=/^(?:focusinfocus|focusoutblur)$/,ee=/^([^.]*)(?:\.(.+)|)/;ft.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,u,c,h,d,f,p,g,m=ft._data(t);if(m){for(n.handler&&(n=(l=n).handler,r=l.selector),n.guid||(n.guid=ft.guid++),(a=m.events)||(a=m.events={}),(c=m.handle)||((c=m.handle=function(t){return void 0===ft||t&&ft.event.triggered===t.type?undefined:ft.event.dispatch.apply(c.elem,arguments)}).elem=t),s=(e=(e||"").match(Lt)||[""]).length;s--;)f=g=(o=ee.exec(e[s])||[])[1],p=(o[2]||"").split(".").sort(),f&&(u=ft.event.special[f]||{},f=(r?u.delegateType:u.bindType)||f,u=ft.event.special[f]||{},h=ft.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&ft.expr.match.needsContext.test(r),namespace:p.join(".")},l),(d=a[f])||((d=a[f]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,i,p,c)||(t.addEventListener?t.addEventListener(f,c,!1):t.attachEvent&&t.attachEvent("on"+f,c))),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),ft.event.global[f]=!0);t=null}},remove:function(t,e,n,i,r){var o,a,s,l,u,c,h,d,f,p,g,m=ft.hasData(t)&&ft._data(t);if(m&&(c=m.events)){for(u=(e=(e||"").match(Lt)||[""]).length;u--;)if(f=g=(s=ee.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),f){for(h=ft.event.special[f]||{},d=c[f=(i?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)a=d[o],!r&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(d.splice(o,1),a.selector&&d.delegateCount--,h.remove&&h.remove.call(t,a));l&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,m.handle)||ft.removeEvent(t,f,m.handle),delete c[f])}else for(f in c)ft.event.remove(t,f+e[u],n,i,!0);ft.isEmptyObject(c)&&(delete m.handle,ft._removeData(t,"events"))}},trigger:function(t,e,n,i){var r,o,a,s,l,u,c,h=[n||it],d=ct.call(t,"type")?t.type:t,f=ct.call(t,"namespace")?t.namespace.split("."):[];if(a=u=n=n||it,3!==n.nodeType&&8!==n.nodeType&&!te.test(d+ft.event.triggered)&&(-1<d.indexOf(".")&&(d=(f=d.split(".")).shift(),f.sort()),o=d.indexOf(":")<0&&"on"+d,(t=t[ft.expando]?t:new ft.Event(d,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=n),e=null==e?[t]:ft.makeArray(e,[t]),l=ft.event.special[d]||{},i||!l.trigger||!1!==l.trigger.apply(n,e))){if(!i&&!l.noBubble&&!ft.isWindow(n)){for(s=l.delegateType||d,te.test(s+d)||(a=a.parentNode);a;a=a.parentNode)h.push(a),u=a;u===(n.ownerDocument||it)&&h.push(u.defaultView||u.parentWindow||E)}for(c=0;(a=h[c++])&&!t.isPropagationStopped();)t.type=1<c?s:l.bindType||d,(r=(ft._data(a,"events")||{})[t.type]&&ft._data(a,"handle"))&&r.apply(a,e),(r=o&&a[o])&&r.apply&&Pt(a)&&(t.result=r.apply(a,e),!1===t.result&&t.preventDefault());if(t.type=d,!i&&!t.isDefaultPrevented()&&(!l._default||!1===l._default.apply(h.pop(),e))&&Pt(n)&&o&&n[d]&&!ft.isWindow(n)){(u=n[o])&&(n[o]=null),ft.event.triggered=d;try{n[d]()}catch(p){}ft.event.triggered=undefined,u&&(n[o]=u)}return t.result}},dispatch:function(t){t=ft.event.fix(t);var e,n,i,r,o,a=[],s=rt.call(arguments),l=(ft._data(this,"events")||{})[t.type]||[],u=ft.event.special[t.type]||{};if((s[0]=t).delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(a=ft.event.handlers.call(this,t,l),e=0;(r=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,(i=((ft.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s))!==undefined&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(i=[],n=0;n<s;n++)i[r=(o=e[n]).selector+" "]===undefined&&(i[r]=o.needsContext?-1<ft(r,this).index(l):ft.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&a.push({elem:l,handlers:i})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},fix:function(t){if(t[ft.expando])return t;var e,n,i,r=t.type,o=t,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Zt.test(r)?this.mouseHooks:Qt.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new ft.Event(o),e=i.length;e--;)t[n=i[e]]=o[n];return t.target||(t.target=o.srcElement||it),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,o=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(r=(i=t.target.ownerDocument||it).documentElement,n=i.body,t.pageX=e.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||o===undefined||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===p()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ft.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return ft.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==undefined&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n){var i=ft.extend(new ft.Event,n,{type:t,isSimulated:!0});ft.event.trigger(i,null,e),i.isDefaultPrevented()&&n.preventDefault()}},ft.removeEvent=it.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)}:function(t,e,n){var i="on"+e;t.detachEvent&&("undefined"==typeof t[i]&&(t[i]=null),t.detachEvent(i,n))},ft.Event=function(t,e){if(!(this instanceof ft.Event))return new ft.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&!1===t.returnValue?d:f):this.type=t,e&&ft.extend(this,e),this.timeStamp=t&&t.timeStamp||ft.now(),this[ft.expando]=!0},ft.Event.prototype={constructor:ft.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&!this.isSimulated&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},ft.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){ft.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=this,i=t.relatedTarget,r=t.handleObj;return i&&(i===n||ft.contains(n,i))||(t.type=r.origType,e=r.handler.apply(this,arguments),t.type=o),e}}}),ht.submit||(ft.event.special.submit={setup:function(){if(ft.nodeName(this,"form"))return!1;ft.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=ft.nodeName(e,"input")||ft.nodeName(e,"button")?ft.prop(e,"form"):undefined;n&&!ft._data(n,"submit")&&(ft.event.add(n,"submit._submit",function(t){t._submitBubble=!0}),ft._data(n,"submit",!0))})},postDispatch:function(t){t._submitBubble&&(delete t._submitBubble,this.parentNode&&!t.isTrigger&&ft.event.simulate("submit",this.parentNode,t))},teardown:function(){if(ft.nodeName(this,"form"))return!1;ft.event.remove(this,"._submit")}}),ht.change||(ft.event.special.change={setup:function(){if(Jt.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(ft.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._justChanged=!0)}),ft.event.add(this,"click._change",function(t){this._justChanged&&!t.isTrigger&&(this._justChanged=!1),ft.event.simulate("change",this,t)})),!1;ft.event.add(this,"beforeactivate._change",function(t){var e=t.target;Jt.test(e.nodeName)&&!ft._data(e,"change")&&(ft.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ft.event.simulate("change",this.parentNode,t)}),ft._data(e,"change",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return ft.event.remove(this,"._change"),!Jt.test(this.nodeName)}}),ht.focusin||ft.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(t){ft.event.simulate(i,t.target,ft.event.fix(t))};ft.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=ft._data(t,i);e||t.addEventListener(n,r,!0),ft._data(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=ft._data(t,i)-1;e?ft._data(t,i,e):(t.removeEventListener(n,r,!0),ft._removeData(t,i))}}}),ft.fn.extend({on:function(t,e,n,i){return w(this,t,e,n,i)},one:function(t,e,n,i){return w(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,ft(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=undefined),!1===n&&(n=f),this.each(function(){ft.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){ft.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return ft.event.trigger(t,e,n,!0)}});var ne=/ jQuery\d+="(?:null|\d+)"/g,ie=new RegExp("<(?:"+Kt+")[\\s/>]","i"),re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,oe=/<script|<style|<link/i,ae=/checked\s*(?:[^=]|=\s*.checked.)/i,se=/^true\/(.*)/,le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ue=m(it).appendChild(it.createElement("div"));ft.extend({htmlPrefilter:function(t){return t.replace(re,"<$1></$2>")},clone:function(t,e,n){var i,r,o,a,s,l=ft.contains(t.ownerDocument,t);if(ht.html5Clone||ft.isXMLDoc(t)||!ie.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(ue.innerHTML=t.outerHTML,ue.removeChild(o=ue.firstChild)),!(ht.noCloneEvent&&ht.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ft.isXMLDoc(t)))for(i=v(o),s=v(t),a=0;null!=(r=s[a]);++a)i[a]&&C(r,i[a]);if(e)if(n)for(s=s||v(t),i=i||v(o),a=0;null!=(r=s[a]);a++)x(r,i[a]);else x(t,o);return 0<(i=v(o,"script")).length&&y(i,!l&&v(t,"script")),i=s=r=null,o},cleanData:function(t,e){for(var n,i,r,o,a=0,s=ft.expando,l=ft.cache,u=ht.attributes,c=ft.event.special;null!=(n=t[a]);a++)if((e||Pt(n))&&(o=(r=n[s])&&l[r])){if(o.events)for(i in o.events)c[i]?ft.event.remove(n,i):ft.removeEvent(n,i,o.handle);l[r]&&(delete l[r],u||"undefined"==typeof n.removeAttribute?n[s]=undefined:n.removeAttribute(s),nt.push(r))}}}),ft.fn.extend({domManip:_,detach:function(t){return k(this,t,!0)},remove:function(t){return k(this,t)},text:function(t){return qt(this,function(t){return t===undefined?ft.text(this):this.empty().append((this[0]&&this[0].ownerDocument||it).createTextNode(t))},null,t,arguments.length)},append:function(){return _(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||T(this,t).appendChild(t)})},prepend:function(){return _(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=T(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return _(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return _(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ft.cleanData(v(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ft.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return ft.clone(this,t,e)})},html:function(t){return qt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(t===undefined)return 1===e.nodeType?e.innerHTML.replace(ne,""):undefined;if("string"==typeof t&&!oe.test(t)&&(ht.htmlSerialize||!ie.test(t))&&(ht.leadingWhitespace||!Vt.test(t))&&!Xt[(Gt.exec(t)||["",""])[1].toLowerCase()]){t=ft.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(ft.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return _(this,arguments,function(t){var e=this.parentNode;ft.inArray(this,n)<0&&(ft.cleanData(v(this)),e&&e.replaceChild(t,this))},n)}}),ft.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){ft.fn[t]=function(t){for(var e,n=0,i=[],r=ft(t),o=r.length-1;n<=o;n++)e=n===o?this:this.clone(!0),ft(r[n])[a](e),at.apply(i,e.get());return this.pushStack(i)}});var ce,he={HTML:"block",BODY:"block"},de=/^margin/,fe=new RegExp("^("+Bt+")(?!px)[a-z%]+$","i"),pe=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=a[o];return r},ge=it.documentElement;!function(){function t(){var t,e,n=it.documentElement;n.appendChild(u),c.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i=o=l=!1,r=s=!0,E.getComputedStyle&&(e=E.getComputedStyle(c),i="1%"!==(e||{}).top,l="2px"===(e||{}).marginLeft,o="4px"===(e||{width:"4px"}).width,c.style.marginRight="50%",r="4px"===(e||{marginRight:"4px"}).marginRight,(t=c.appendChild(it.createElement("div"))).style.cssText=c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",c.style.width="1px",s=!parseFloat((E.getComputedStyle(t)||{}).marginRight),c.removeChild(t)),c.style.display="none",(a=0===c.getClientRects().length)&&(c.style.display="",c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c.childNodes[0].style.borderCollapse="separate",(
t=c.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(a=0===t[0].offsetHeight)&&(t[0].style.display="",t[1].style.display="none",a=0===t[0].offsetHeight)),n.removeChild(u)}var i,r,o,a,s,l,u=it.createElement("div"),c=it.createElement("div");c.style&&(c.style.cssText="float:left;opacity:.5",ht.opacity="0.5"===c.style.opacity,ht.cssFloat=!!c.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",ht.clearCloneStyle="content-box"===c.style.backgroundClip,(u=it.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",c.innerHTML="",u.appendChild(c),ht.boxSizing=""===c.style.boxSizing||""===c.style.MozBoxSizing||""===c.style.WebkitBoxSizing,ft.extend(ht,{reliableHiddenOffsets:function(){return null==i&&t(),a},boxSizingReliable:function(){return null==i&&t(),o},pixelMarginRight:function(){return null==i&&t(),r},pixelPosition:function(){return null==i&&t(),i},reliableMarginRight:function(){return null==i&&t(),s},reliableMarginLeft:function(){return null==i&&t(),l}}))}();var me,ve,ye=/^(top|right|bottom|left)$/;E.getComputedStyle?(me=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=E),e.getComputedStyle(t)},ve=function(t,e,n){var i,r,o,a,s=t.style;return""!==(a=(n=n||me(t))?n.getPropertyValue(e)||n[e]:undefined)&&a!==undefined||ft.contains(t.ownerDocument,t)||(a=ft.style(t,e)),n&&!ht.pixelMarginRight()&&fe.test(a)&&de.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o),a===undefined?a:a+""}):ge.currentStyle&&(me=function(t){return t.currentStyle},ve=function(t,e,n){var i,r,o,a,s=t.style;return null==(a=(n=n||me(t))?n[e]:undefined)&&s&&s[e]&&(a=s[e]),fe.test(a)&&!ye.test(e)&&(i=s.left,(o=(r=t.runtimeStyle)&&r.left)&&(r.left=t.currentStyle.left),s.left="fontSize"===e?"1em":a,a=s.pixelLeft+"px",s.left=i,o&&(r.left=o)),a===undefined?a:a+""||"auto"});var be=/alpha\([^)]*\)/i,we=/opacity\s*=\s*([^)]*)/i,Te=/^(none|table(?!-c[ea]).+)/,Se=new RegExp("^("+Bt+")(.*)$","i"),Ee={position:"absolute",visibility:"hidden",display:"block"},Ae={letterSpacing:"0",fontWeight:"400"},xe=["Webkit","O","Moz","ms"],Ce=it.createElement("div").style;ft.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=ve(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ht.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=ft.camelCase(e),l=t.style;if(e=ft.cssProps[s]||(ft.cssProps[s]=P(s)||s),a=ft.cssHooks[e]||ft.cssHooks[s],n===undefined)return a&&"get"in a&&(r=a.get(t,!1,i))!==undefined?r:l[e];if("string"===(o=typeof n)&&(r=jt.exec(n))&&r[1]&&(n=h(t,e,r),o="number"),null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(ft.cssNumber[s]?"":"px")),ht.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&(n=a.set(t,n,i))===undefined)))try{l[e]=n}catch(u){}}},css:function(t,e,n,i){var r,o,a,s=ft.camelCase(e);return e=ft.cssProps[s]||(ft.cssProps[s]=P(s)||s),(a=ft.cssHooks[e]||ft.cssHooks[s])&&"get"in a&&(o=a.get(t,!0,n)),o===undefined&&(o=ve(t,e,i)),"normal"===o&&e in Ae&&(o=Ae[e]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),ft.each(["height","width"],function(t,r){ft.cssHooks[r]={get:function(t,e,n){if(e)return Te.test(ft.css(t,"display"))&&0===t.offsetWidth?pe(t,Ee,function(){return M(t,r,n)}):M(t,r,n)},set:function(t,e,n){var i=n&&me(t);return O(t,e,n?N(t,r,n,ht.boxSizing&&"border-box"===ft.css(t,"boxSizing",!1,i),i):0)}}}),ht.opacity||(ft.cssHooks.opacity={get:function(t,e){return we.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=ft.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=i&&i.filter||n.filter||"";((n.zoom=1)<=e||""===e)&&""===ft.trim(o.replace(be,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=be.test(o)?o.replace(be,r):o+" "+r)}}),ft.cssHooks.marginRight=D(ht.reliableMarginRight,function(t,e){if(e)return pe(t,{display:"inline-block"},ve,[t,"marginRight"])}),ft.cssHooks.marginLeft=D(ht.reliableMarginLeft,function(t,e){if(e)return(parseFloat(ve(t,"marginLeft"))||(ft.contains(t.ownerDocument,t)?t.getBoundingClientRect().left-pe(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}):0))+"px"}),ft.each({margin:"",padding:"",border:"Width"},function(r,o){ft.cssHooks[r+o]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[r+Ht[e]+o]=i[e]||i[e-2]||i[0];return n}},de.test(r)||(ft.cssHooks[r+o].set=O)}),ft.fn.extend({css:function(t,e){return qt(this,function(t,e,n){var i,r,o={},a=0;if(ft.isArray(e)){for(i=me(t),r=e.length;a<r;a++)o[e[a]]=ft.css(t,e[a],!1,i);return o}return n!==undefined?ft.style(t,e,n):ft.css(t,e)},t,e,1<arguments.length)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ut(this)?ft(this).show():ft(this).hide()})}}),(ft.Tween=F).prototype={constructor:F,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||ft.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(ft.cssNumber[n]?"":"px")},cur:function(){var t=F.propHooks[this.prop];return t&&t.get?t.get(this):F.propHooks._default.get(this)},run:function(t){var e,n=F.propHooks[this.prop];return this.options.duration?this.pos=e=ft.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):F.propHooks._default.set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=ft.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){ft.fx.step[t.prop]?ft.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[ft.cssProps[t.prop]]&&!ft.cssHooks[t.prop]?t.elem[t.prop]=t.now:ft.style(t.elem,t.prop,t.now+t.unit)}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ft.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},ft.fx=F.prototype.init,ft.fx.step={};var _e,ke,Re,Le,De,Pe,Ie,Oe=/^(?:toggle|show|hide)$/,Ne=/queueHooks$/;ft.Animation=ft.extend(W,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return h(n.elem,t,jt.exec(e),n),n}]},tweener:function(t,e){ft.isFunction(t)?(e=t,t=["*"]):t=t.match(Lt);for(var n,i=0,r=t.length;i<r;i++)n=t[i],W.tweeners[n]=W.tweeners[n]||[],W.tweeners[n].unshift(e)},prefilters:[U],prefilter:function(t,e){e?W.prefilters.unshift(t):W.prefilters.push(t)}}),ft.speed=function(t,e,n){var i=t&&"object"==typeof t?ft.extend({},t):{complete:n||!n&&e||ft.isFunction(t)&&t,duration:t,easing:n&&e||e&&!ft.isFunction(e)&&e};return i.duration=ft.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ft.fx.speeds?ft.fx.speeds[i.duration]:ft.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){ft.isFunction(i.old)&&i.old.call(this),i.queue&&ft.dequeue(this,i.queue)},i},ft.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ut).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var r=ft.isEmptyObject(e),o=ft.speed(t,n,i),a=function(){var t=W(this,ft.extend({},e),o);(r||ft._data(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(r,t,o){var a=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof r&&(o=t,t=r,r=undefined),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",n=ft.timers,i=ft._data(this);if(e)i[e]&&i[e].stop&&a(i[e]);else for(e in i)i[e]&&i[e].stop&&Ne.test(e)&&a(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=r&&n[e].queue!==r||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||ft.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=ft._data(this),n=e[a+"queue"],i=e[a+"queueHooks"],r=ft.timers,o=n?n.length:0;for(e.finish=!0,ft.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===a&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),ft.each(["toggle","show","hide"],function(t,i){var r=ft.fn[i];ft.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(j(i,!0),t,e,n)}}),ft.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){ft.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),ft.timers=[],ft.fx.tick=function(){var t,e=ft.timers,n=0;for(_e=ft.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||ft.fx.stop(),_e=undefined},ft.fx.timer=function(t){ft.timers.push(t),t()?ft.fx.start():ft.timers.pop()},ft.fx.interval=13,ft.fx.start=function(){ke||(ke=E.setInterval(ft.fx.tick,ft.fx.interval))},ft.fx.stop=function(){E.clearInterval(ke),ke=null},ft.fx.speeds={slow:600,fast:200,_default:400},ft.fn.delay=function(i,t){return i=ft.fx&&ft.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=E.setTimeout(t,i);e.stop=function(){E.clearTimeout(n)}})},Le=it.createElement("input"),De=it.createElement("div"),Pe=it.createElement("select"),Ie=Pe.appendChild(it.createElement("option")),(De=it.createElement("div")).setAttribute("className","t"),De.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",Re=De.getElementsByTagName("a")[0],Le.setAttribute("type","checkbox"),De.appendChild(Le),(Re=De.getElementsByTagName("a")[0]).style.cssText="top:1px",ht.getSetAttribute="t"!==De.className,ht.style=/top/.test(Re.getAttribute("style")),ht.hrefNormalized="/a"===Re.getAttribute("href"),ht.checkOn=!!Le.value,ht.optSelected=Ie.selected,ht.enctype=!!it.createElement("form").enctype,Pe.disabled=!0,ht.optDisabled=!Ie.disabled,(Le=it.createElement("input")).setAttribute("value",""),ht.input=""===Le.getAttribute("value"),Le.value="t",Le.setAttribute("type","radio"),ht.radioValue="t"===Le.value;var Me=/\r/g,Fe=/[\x20\t\r\n\f]+/g;ft.fn.extend({val:function(n){var i,t,r,e=this[0];return arguments.length?(r=ft.isFunction(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?n.call(this,t,ft(this).val()):n)?e="":"number"==typeof e?e+="":ft.isArray(e)&&(e=ft.map(e,function(t){return null==t?"":t+""})),(i=ft.valHooks[this.type]||ft.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,e,"value")!==undefined||(this.value=e))})):e?(i=ft.valHooks[e.type]||ft.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&(t=i.get(e,"value"))!==undefined?t:"string"==typeof(t=e.value)?t.replace(Me,""):null==t?"":t:void 0}}),ft.extend({valHooks:{option:{get:function(t){var e=ft.find.attr(t,"value");return null!=e?e:ft.trim(ft.text(t)).replace(Fe," ")}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||r<0,a=o?null:[],s=o?r+1:i.length,l=r<0?s:o?r:0;l<s;l++)if(((n=i[l]).selected||l===r)&&(ht.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ft.nodeName(n.parentNode,"optgroup"))){if(e=ft(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=ft.makeArray(e),a=r.length;a--;)if(i=r[a],-1<ft.inArray(ft.valHooks.option.get(i),o))try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),r}}}}),ft.each(["radio","checkbox"],function(){ft.valHooks[this]={set:function(t,e){if(ft.isArray(e))return t.checked=-1<ft.inArray(ft(t).val(),e)}},ht.checkOn||(ft.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Be,je,He=ft.expr.attrHandle,Ue=/^(?:checked|selected)$/i,qe=ht.getSetAttribute,We=ht.input;ft.fn.extend({attr:function(t,e){return qt(this,ft.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){ft.removeAttr(this,t)})}}),ft.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?ft.prop(t,e,n):(1===o&&ft.isXMLDoc(t)||(e=e.toLowerCase(),r=ft.attrHooks[e]||(ft.expr.match.bool.test(e)?je:Be)),n!==undefined?null===n?void ft.removeAttr(t,e):r&&"set"in r&&(i=r.set(t,n,e))!==undefined?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=ft.find.attr(t,e))?undefined:i)},attrHooks:{type:{set:function(t,e){if(!ht.radioValue&&"radio"===e&&ft.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(Lt);if(o&&1===t.nodeType)for(;n=o[r++];)i=ft.propFix[n]||n,ft.expr.match.bool.test(n)?We&&qe||!Ue.test(n)?t[i]=!1:t[ft.camelCase("default-"+n)]=t[i]=!1:ft.attr(t,n,""),t.removeAttribute(qe?n:i)}}),je={set:function(t,e,n){return!1===e?ft.removeAttr(t,n):We&&qe||!Ue.test(n)?t.setAttribute(!qe&&ft.propFix[n]||n,n):t[ft.camelCase("default-"+n)]=t[n]=!0,n}},ft.each(ft.expr.match.bool.source.match(/\w+/g),function(t,e){var o=He[e]||ft.find.attr;We&&qe||!Ue.test(e)?He[e]=function(t,e,n){var i,r;return n||(r=He[e],He[e]=i,i=null!=o(t,e,n)?e.toLowerCase():null,He[e]=r),i}:He[e]=function(t,e,n){if(!n)return t[ft.camelCase("default-"+e)]?e.toLowerCase():null}}),We&&qe||(ft.attrHooks.value={set:function(t,e,n){if(!ft.nodeName(t,"input"))return Be&&Be.set(t,e,n);t.defaultValue=e}}),qe||(Be={set:function(t,e,n){var i=t.getAttributeNode(n);if(i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n))return e}},He.id=He.name=He.coords=function(t,e,n){var i;if(!n)return(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},ft.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);if(n&&n.specified)return n.value},set:Be.set},ft.attrHooks.contenteditable={set:function(t,e,n){Be.set(t,""!==e&&e,n)}},ft.each(["width","height"],function(t,n){ft.attrHooks[n]={set:function(t,e){if(""===e)return t.setAttribute(n,"auto"),e}}})),ht.style||(ft.attrHooks.style={get:function(t){return t.style.cssText||undefined},set:function(t,e){return t.style.cssText=e+""}});var Ge=/^(?:input|select|textarea|button|object)$/i,ze=/^(?:a|area)$/i;ft.fn.extend({prop:function(t,e){return qt(this,ft.prop,t,e,1<arguments.length)},removeProp:function(e){return e=ft.propFix[e]||e,this.each(function(){try{this[e]=undefined,delete this[e]}catch(t){}})}}),ft.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ft.isXMLDoc(t)||(e=ft.propFix[e]||e,r=ft.propHooks[e]),n!==undefined?r&&"set"in r&&(i=r.set(t,n,e))!==undefined?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=ft.find.attr(t,"tabindex");return e?parseInt(e,10):Ge.test(t.nodeName)||ze.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ht.hrefNormalized||ft.each(["href","src"],function(t,e){ft.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ht.optSelected||(ft.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),ft.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ft.propFix[this.toLowerCase()]=this}),ht.enctype||(ft.propFix.enctype="encoding");var Ve=/[\t\r\n\f]/g;ft.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,l=0;if(ft.isFunction(e))return this.each(function(t){ft(this).addClass(e.call(this,t,G(this)))});if("string"==typeof e&&e)for(t=e.match(Lt)||[];n=this[l++];)if(r=G(n),i=1===n.nodeType&&(" "+r+" ").replace(Ve," ")){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=ft.trim(i))&&ft.attr(n,"class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,l=0;if(ft.isFunction(e))return this.each(function(t){ft(this).removeClass(e.call(this,t,G(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Lt)||[];n=this[l++];)if(r=G(n),i=1===n.nodeType&&(" "+r+" ").replace(Ve," ")){for(a=0;o=t[a++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");r!==(s=ft.trim(i))&&ft.attr(n,"class",s)}return this},toggleClass:function(r,e){var o=typeof r;return"boolean"==typeof e&&"string"===o?e?this.addClass(r):this.removeClass(r):ft.isFunction(r)?this.each(function(t){ft(this).toggleClass(r.call(this,t,G(this),e),e)}):this.each(function(){var t,e,n,i;if("string"===o)for(e=0,n=ft(this),i=r.match(Lt)||[];t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else r!==undefined&&"boolean"!==o||((t=G(this))&&ft._data(this,"__className__",t),ft.attr(this,"class",t||!1===r?"":ft._data(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+G(n)+" ").replace(Ve," ").indexOf(e))return!0;return!1}}),ft.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,n){ft.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),ft.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});var Ke=E.location,Xe=ft.now(),Ye=/\?/,$e=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ft.parseJSON=function(t){if(E.JSON&&E.JSON.parse)return E.JSON.parse(t+"");var r,o=null,e=ft.trim(t+"");return e&&!ft.trim(e.replace($e,function(t,e,n,i){return r&&e&&(o=0),0===o?t:(r=n||e,o+=!i-!n,"")}))?Function("return "+e)():ft.error("Invalid JSON: "+t)},ft.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{E.DOMParser?e=(new E.DOMParser).parseFromString(t,"text/xml"):((e=new E.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t))}catch(n){e=undefined}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||ft.error("Invalid XML: "+t),e};var Je=/#.*$/,Qe=/([?&])_=[^&]*/,Ze=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,tn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,en=/^(?:GET|HEAD)$/,nn=/^\/\//,rn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,on={},an={},sn="*/".concat("*"),ln=Ke.href,un=rn.exec(ln.toLowerCase())||[];ft.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ln,type:"GET",isLocal:tn.test(un[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":sn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ft.parseJSON,"text xml":ft.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?K(K(t,ft.ajaxSettings),e):K(ft.ajaxSettings,t)},ajaxPrefilter:z(on),ajaxTransport:z(an),ajax:function(t,e){function n(t,e,n,i){var r,o,a,s,l,u=e;2!==T&&(T=2,d&&E.clearTimeout(d),p=undefined,h=i||"",S.readyState=0<t?4:0,r=200<=t&&t<300||304===t,n&&(s=X(g,S,n)),s=Y(g,s,S,r),r?(g.ifModified&&((l=S.getResponseHeader("Last-Modified"))&&(ft.lastModified[c]=l),(l=S.getResponseHeader("etag"))&&(ft.etag[c]=l)),204===t||"HEAD"===g.type?u="nocontent":304===t?u="notmodified":(u=s.state,o=s.data,r=!(a=s.error))):(a=u,!t&&u||(u="error",t<0&&(t=0))),S.status=t,S.statusText=(e||u)+"",r?y.resolveWith(m,[o,u,S]):y.rejectWith(m,[S,u,a]),S.statusCode(w),w=undefined,f&&v.trigger(r?"ajaxSuccess":"ajaxError",[S,g,r?o:a]),b.fireWith(m,[S,u]),f&&(v.trigger("ajaxComplete",[S,g]),--ft.active||ft.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=undefined),e=e||{};var i,r,c,h,d,f,p,o,g=ft.ajaxSetup({},e),m=g.context||g,v=g.context&&(m.nodeType||m.jquery)?ft(m):ft.event,y=ft.Deferred(),b=ft.Callbacks("once memory"),w=g.statusCode||{},a={},s={},T=0,l="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(2===T){if(!o)for(o={};e=Ze.exec(h);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===T?h:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return T||(t=s[n]=s[n]||t,a[t]=e),this},overrideMimeType:function(t){return T||(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(T<2)for(e in t)w[e]=[w[e],t[e]];else S.always(t[S.status]);return this},abort:function(t){var e=t||l;return p&&p.abort(e),n(0,e),this}};if(y.promise(S).complete=b.add,S.success=S.done,S.error=S.fail,g.url=((t||g.url||ln)+"").replace(Je,"").replace(nn,un[1]+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=ft.trim(g.dataType||"*").toLowerCase().match(Lt)||[""],null==g.crossDomain&&(i=rn.exec(g.url.toLowerCase()),g.crossDomain=!(!i||i[1]===un[1]&&i[2]===un[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(un[3]||("http:"===un[1]?"80":"443")))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=ft.param(g.data,g.traditional)),V(on,g,e,S),2===T)return S;for(r in(f=ft.event&&g.global)&&0==ft.active++&&ft.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!en.test(g.type),c=g.url,g.hasContent||(g.data&&(c=g.url+=(Ye.test(c)?"&":"?")+g.data,delete g.data),!1===g.cache&&(g.url=Qe.test(c)?c.replace(Qe,"$1_="+Xe++):c+(Ye.test(c)?"&":"?")+"_="+Xe++)),g.ifModified&&(ft.lastModified[c]&&S.setRequestHeader("If-Modified-Since",ft.lastModified[c]),ft.etag[c]&&S.setRequestHeader("If-None-Match",ft.etag[c])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&S.setRequestHeader("Content-Type",g.contentType),S.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+sn+"; q=0.01":""):g.accepts["*"]),g.headers)S.setRequestHeader(r,g.headers[r]);if(g.beforeSend&&(!1===g.beforeSend.call(m,S,g)||2===T))return S.abort();for(r in l="abort",{success:1,error:1,complete:1})S[r](g[r]);if(p=V(an,g,e,S)){if(S.readyState=1,f&&v.trigger("ajaxSend",[S,g]),2===T)return S;g.async&&0<g.timeout&&(d=E.setTimeout(function(){S.abort("timeout")},g.timeout));try{T=1,p.send(a,n)}catch(u){if(!(T<2))throw u;n(-1,u)}}else n(-1,"No Transport");return S},getJSON:function(t,e,n){return ft.get(t,e,n,"json")},getScript:function(t,e){return ft.get(t,undefined,e,"script")}}),ft.each(["get","post"],function(t,r){ft[r]=function(t,e,n,i){return ft.isFunction(e)&&(i=i||n,n=e,e=undefined),ft.ajax(ft.extend({url:t,type:r,dataType:i,data:e,success:n},ft.isPlainObject(t)&&t))}}),ft._evalUrl=function(t){return ft.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},ft.fn.extend({wrapAll:function(e){if(ft.isFunction(e))return this.each(function(t){ft(this).wrapAll(e.call(this,t))});if(this[0]){var t=ft(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(n){return ft.isFunction(n)?this.each(function(t){ft(this).wrapInner(n.call(this,t))}):this.each(function(){var t=ft(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=ft.isFunction(e);return this.each(function(t){ft(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){ft.nodeName(this,"body")||ft(this).replaceWith(this.childNodes)}).end()}}),ft.expr.filters.hidden=function(t){return ht.reliableHiddenOffsets()?t.offsetWidth<=0&&t.offsetHeight<=0&&!t.getClientRects().length:J(t)},ft.expr.filters.visible=function(t){return!ft.expr.filters.hidden(t)};var cn=/%20/g,hn=/\[\]$/,dn=/\r?\n/g,fn=/^(?:submit|button|image|reset|file)$/i,pn=/^(?:input|select|textarea|keygen)/i;ft.param=function(t,e){var n,i=[],r=function(t,e){e=ft.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(e===undefined&&(e=ft.ajaxSettings&&ft.ajaxSettings.traditional),ft.isArray(t)||t.jquery&&!ft.isPlainObject(t))ft.each(t,function(){r(this.name,this.value)});else for(n in t)Q(n,t[n],e,r);return i.join("&").replace(cn,"+")},ft.fn.extend({serialize:function(){return ft.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ft.prop(this,"elements");return t?ft.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ft(this).is(":disabled")&&pn.test(this.nodeName)&&!fn.test(t)&&(this.checked||!Wt.test(t))}).map(function(t,e){var n=ft(this).val();return null==n?null:ft.isArray(n)?ft.map(n,function(t){return{name:e.name,value:t.replace(dn,"\r\n")}}):{name:e.name,value:n.replace(dn,"\r\n")}}).get()}}),ft.ajaxSettings.xhr=E.ActiveXObject!==undefined?function(){return this.isLocal?tt():8<it.documentMode?Z():/^(get|post|head|put|delete|options)$/i.test(this.type)&&Z()||tt()}:Z;var gn=0,mn={},vn=ft.ajaxSettings.xhr();E.attachEvent&&E.attachEvent("onunload",function(){for(var t in mn)mn[t](undefined,!0)}),ht.cors=!!vn&&"withCredentials"in vn,(vn=ht.ajax=!!vn)&&ft.ajaxTransport(function(u){var c;if(!u.crossDomain||ht.cors)return{send:function(t,a){var e,s=u.xhr(),l=++gn;if(s.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(e in u.xhrFields)s[e]=u.xhrFields[e];for(e in u.mimeType&&s.overrideMimeType&&s.overrideMimeType(u.mimeType),u.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)t[e]!==undefined&&s.setRequestHeader(e,t[e]+"");s.send(u.hasContent&&u.data||null),c=function(t,e){var n,i,r;if(c&&(e||4===s.readyState))if(delete mn[l],c=undefined,s.onreadystatechange=ft.noop,e)4!==s.readyState&&s.abort();else{r={},n=s.status,"string"==typeof s.responseText&&(r.text=s.responseText);try{i=s.statusText}catch(o){i=""}n||!u.isLocal||u.crossDomain?1223===n&&(n=204):n=r.text?200:404}r&&a(n,i,r,s.getAllResponseHeaders())},u.async?4===s.readyState?E.setTimeout(c):s.onreadystatechange=mn[l]=c:c()},abort:function(){c&&c(undefined,!0)}}}),ft.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return ft.globalEval(t),t}}}),ft.ajaxPrefilter("script",function(t){t.cache===undefined&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ft.ajaxTransport("script",function(e){if(e.crossDomain){var i,r=it.head||ft("head")[0]||it.documentElement;return{send:function(t,n){(i=it.createElement("script")).async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(t,e){(e||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,e||n(200,"success"))},r.insertBefore(i,r.firstChild)},abort:function(){i&&i.onload(undefined,!0)}}}});var yn=[],bn=/(=)\?(?=&|$)|\?\?/;ft.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=yn.pop()||ft.expando+"_"+Xe++;return this[t]=!0,t}}),ft.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,o,a=!1!==t.jsonp&&(bn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&bn.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=ft.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(bn,"$1"+i):!1!==t.jsonp&&(t.url+=(Ye.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||ft.error(i+" was not called"),o[0]},t.dataTypes[0]="json",r=E[i],E[i]=function(){o=arguments},n.always(function(){r===undefined?ft(E).removeProp(i):E[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,yn.push(i)),o&&ft.isFunction(r)&&r(o[0]),o=r=undefined}),"script"}),ft.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||it;var i=St.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=g([t],e,r),r&&r.length&&ft(r).remove(),ft.merge([],i.childNodes))};var wn=ft.fn.load;ft.fn.load=function(t,e,n){if("string"!=typeof t&&wn)return wn.apply(this,arguments);var i,r,o,a=this,s=t.indexOf(" ");return-1<s&&(i=ft.trim(t.slice(s,t.length)),t=t.slice(0,s)),ft.isFunction(e)?(n=e,e=undefined):e&&"object"==typeof e&&(r="POST"),0<a.length&&ft.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?ft("<div>").append(ft.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},ft.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ft.fn[e]=function(t){return this.on(e,t)}}),ft.expr.filters.animated=function(e){return ft.grep(ft.timers,function(t){return e===t.elem}).length},ft.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,u=ft.css(t,"position"),c=ft(t),h={};"static"===u&&(t.style.position="relative"),s=c.offset(),o=ft.css(t,"top"),l=ft.css(t,"left"),("absolute"===u||"fixed"===u)&&-1<ft.inArray("auto",[o,l])?(a=(i=c.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),ft.isFunction(e)&&(e=e.call(t,n,ft.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+r),"using"in e?e.using.call(t,h):c.css(h)}},ft.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){ft.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;return o?(t=o.documentElement,ft.contains(t,r)?("undefined"!=typeof r.getBoundingClientRect&&(i=r.getBoundingClientRect()),n=et(o),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===ft.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ft.nodeName(t[0],"html")||(n=t.offset()),n.top+=ft.css(t[0],"borderTopWidth",!0),n.left+=ft.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-ft.css(i,"marginTop",!0),left:e.left-n.left-ft.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&!ft.nodeName(t,"html")&&"static"===ft.css(t,"position");)t=t.offsetParent;return t||ge})}}),ft.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var o=/Y/.test(r);ft.fn[e]=function(t){return qt(this,function(t,e,n){var i=et(t);if(n===undefined)return i?r in i?i[r]:i.document.documentElement[e]:t[e];i?i.scrollTo(o?ft(i).scrollLeft():n,o?n:ft(i).scrollTop()):t[e]=n},e,t,arguments.length,null)}}),ft.each(["top","left"],function(t,n){ft.cssHooks[n]=D(ht.pixelPosition,function(t,e){if(e)return e=ve(t,n),fe.test(e)?ft(t).position()[n]+"px":e})}),ft.each({Height:"height",Width:"width"},function(o,a){ft.each({padding:"inner"+o,content:a,"":"outer"+o},function(i,t){ft.fn[t]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),r=i||(!0===t||!0===e?"margin":"border");return qt(this,function(t,e,n){var i;return ft.isWindow(t)?t.document.documentElement["client"+o]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+o],i["scroll"+o],t.body["offset"+o],i["offset"+o],i["client"+o])):n===undefined?ft.css(t,e,r):ft.style(t,e,n,r)},a,n?t:undefined,n,null)}})}),ft.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),ft.fn.size=function(){return this.length},ft.fn.andSelf=ft.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ft});var Tn=E.jQuery,Sn=E.$;return ft.noConflict=function(t){return E.$===ft&&(E.$=Sn),t&&E.jQuery===ft&&(E.jQuery=Tn),ft},t||(E.jQuery=E.$=ft),ft}),function(c,l){"use strict";var u;c.rails!==l&&c.error("jquery-ujs has already been loaded!");var t=c(document);c.rails=u={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",
inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return c("meta[name=csrf-token]").attr("content")},csrfParam:function(){return c("meta[name=csrf-param]").attr("content")},CSRFProtection:function(t){var e=u.csrfToken();e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){c('form input[name="'+u.csrfParam()+'"]').val(u.csrfToken())},fire:function(t,e,n){var i=c.Event(e);return t.trigger(i,n),!1!==i.result},confirm:function(t){return confirm(t)},ajax:function(t){return c.ajax(t)},href:function(t){return t[0].href},isRemote:function(t){return t.data("remote")!==l&&!1!==t.data("remote")},handleRemote:function(i){var t,e,n,r,o,a;if(u.fire(i,"ajax:before")){if(r=i.data("with-credentials")||null,o=i.data("type")||c.ajaxSettings&&c.ajaxSettings.dataType,i.is("form")){t=i.data("ujs:submit-button-formmethod")||i.attr("method"),e=i.data("ujs:submit-button-formaction")||i.attr("action"),n=c(i[0]).serializeArray();var s=i.data("ujs:submit-button");s&&(n.push(s),i.data("ujs:submit-button",null)),i.data("ujs:submit-button-formmethod",null),i.data("ujs:submit-button-formaction",null)}else i.is(u.inputChangeSelector)?(t=i.data("method"),e=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):i.is(u.buttonClickSelector)?(t=i.data("method")||"get",e=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):(t=i.data("method"),e=u.href(i),n=i.data("params")||null);return a={type:t||"GET",data:n,dataType:o,beforeSend:function(t,e){if(e.dataType===l&&t.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),!u.fire(i,"ajax:beforeSend",[t,e]))return!1;i.trigger("ajax:send",t)},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:u.isCrossDomain(e)},r&&(a.xhrFields={withCredentials:r}),e&&(a.url=e),u.ajax(a)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(t){var e=u.href(t),n=t.data("method"),i=t.attr("target"),r=u.csrfToken(),o=u.csrfParam(),a=c('<form method="post" action="'+e+'"></form>'),s='<input name="_method" value="'+n+'" type="hidden" />';o===l||r===l||u.isCrossDomain(e)||(s+='<input name="'+o+'" value="'+r+'" type="hidden" />'),i&&a.attr("target",i),a.hide().append(s).appendTo("body"),a.submit()},formElements:function(t,e){return t.is("form")?c(t[0].elements).filter(e):t.find(e)},disableFormElements:function(t){u.formElements(t,u.disableSelector).each(function(){u.disableFormElement(c(this))})},disableFormElement:function(t){var e,n;e=t.is("button")?"html":"val",(n=t.data("disable-with"))!==l&&(t.data("ujs:enable-with",t[e]()),t[e](n)),t.prop("disabled",!0),t.data("ujs:disabled",!0)},enableFormElements:function(t){u.formElements(t,u.enableSelector).each(function(){u.enableFormElement(c(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")!==l&&(t[e](t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.prop("disabled",!1),t.removeData("ujs:disabled")},allowAction:function(t){var e,n=t.data("confirm"),i=!1;if(!n)return!0;if(u.fire(t,"confirm")){try{i=u.confirm(n)}catch(r){(console.error||console.log).call(console,r.stack||r)}e=u.fire(t,"confirm:complete",[i])}return i&&e},blankInputs:function(t,e,n){var i,r,o,a=c(),s=e||"input,textarea",l=t.find(s),u={};return l.each(function(){(i=c(this)).is("input[type=radio]")?(o=i.attr("name"),u[o]||(0===t.find('input[type=radio]:checked[name="'+o+'"]').length&&(r=t.find('input[type=radio][name="'+o+'"]'),a=a.add(r)),u[o]=o)):(i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):!!i.val())===n&&(a=a.add(i))}),!!a.length&&a},nonBlankInputs:function(t,e){return u.blankInputs(t,e,!0)},stopEverything:function(t){return c(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(t){var e=t.data("disable-with");e!==l&&(t.data("ujs:enable-with",t.html()),t.html(e)),t.bind("click.railsDisable",function(t){return u.stopEverything(t)}),t.data("ujs:disabled",!0)},enableElement:function(t){t.data("ujs:enable-with")!==l&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable"),t.removeData("ujs:disabled")}},u.fire(t,"rails:attachBindings")&&(c.ajaxPrefilter(function(t,e,n){t.crossDomain||u.CSRFProtection(n)}),c(window).on("pageshow.rails",function(){c(c.rails.enableSelector).each(function(){var t=c(this);t.data("ujs:disabled")&&c.rails.enableFormElement(t)}),c(c.rails.linkDisableSelector).each(function(){var t=c(this);t.data("ujs:disabled")&&c.rails.enableElement(t)})}),t.on("ajax:complete",u.linkDisableSelector,function(){u.enableElement(c(this))}),t.on("ajax:complete",u.buttonDisableSelector,function(){u.enableFormElement(c(this))}),t.on("click.rails",u.linkClickSelector,function(t){var e=c(this),n=e.data("method"),i=e.data("params"),r=t.metaKey||t.ctrlKey;if(!u.allowAction(e))return u.stopEverything(t);if(!r&&e.is(u.linkDisableSelector)&&u.disableElement(e),u.isRemote(e)){if(r&&(!n||"GET"===n)&&!i)return!0;var o=u.handleRemote(e);return!1===o?u.enableElement(e):o.fail(function(){u.enableElement(e)}),!1}return n?(u.handleMethod(e),!1):void 0}),t.on("click.rails",u.buttonClickSelector,function(t){var e=c(this);if(!u.allowAction(e)||!u.isRemote(e))return u.stopEverything(t);e.is(u.buttonDisableSelector)&&u.disableFormElement(e);var n=u.handleRemote(e);return!1===n?u.enableFormElement(e):n.fail(function(){u.enableFormElement(e)}),!1}),t.on("change.rails",u.inputChangeSelector,function(t){var e=c(this);return u.allowAction(e)&&u.isRemote(e)?(u.handleRemote(e),!1):u.stopEverything(t)}),t.on("submit.rails",u.formSubmitSelector,function(t){var e,n,i=c(this),r=u.isRemote(i);if(!u.allowAction(i))return u.stopEverything(t);if(i.attr("novalidate")===l)if(i.data("ujs:formnovalidate-button")===l){if((e=u.blankInputs(i,u.requiredInputSelector,!1))&&u.fire(i,"ajax:aborted:required",[e]))return u.stopEverything(t)}else i.data("ujs:formnovalidate-button",l);if(r){if(n=u.nonBlankInputs(i,u.fileInputSelector)){setTimeout(function(){u.disableFormElements(i)},13);var o=u.fire(i,"ajax:aborted:file",[n]);return o||setTimeout(function(){u.enableFormElements(i)},13),o}return u.handleRemote(i),!1}setTimeout(function(){u.disableFormElements(i)},13)}),t.on("click.rails",u.formInputClickSelector,function(t){var e=c(this);if(!u.allowAction(e))return u.stopEverything(t);var n=e.attr("name"),i=n?{name:n,value:e.val()}:null,r=e.closest("form");0===r.length&&(r=c("#"+e.attr("form"))),r.data("ujs:submit-button",i),r.data("ujs:formnovalidate-button",e.attr("formnovalidate")),r.data("ujs:submit-button-formaction",e.attr("formaction")),r.data("ujs:submit-button-formmethod",e.attr("formmethod"))}),t.on("ajax:send.rails",u.formSubmitSelector,function(t){this===t.target&&u.disableFormElements(c(this))}),t.on("ajax:complete.rails",u.formSubmitSelector,function(t){this===t.target&&u.enableFormElements(c(this))}),c(function(){u.refreshCSRFTokens()}))}(jQuery),function(){this.Turbolinks={supported:null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener,visit:function(t,e){return Turbolinks.controller.visit(t,e)},clearCache:function(){return Turbolinks.controller.clearCache()},setProgressBarDelay:function(t){return Turbolinks.controller.setProgressBarDelay(t)}}}.call(this),function(){var n,i,l,t,e,r,o,a,s,u=[].slice;Turbolinks.copyObject=function(t){var e,n,i;for(e in n={},t)i=t[e],n[e]=i;return n},Turbolinks.closest=function(t,e){return n.call(t,e)},n=null!=(s=document.documentElement.closest)?s:function(t){var e;for(e=this;e;){if(e.nodeType===Node.ELEMENT_NODE&&i.call(e,t))return e;e=e.parentNode}},Turbolinks.defer=function(t){return setTimeout(t,1)},Turbolinks.throttle=function(n){var i;return i=null,function(){var t,e;return t=1<=arguments.length?u.call(arguments,0):[],null!=i?i:i=requestAnimationFrame((e=this,function(){return i=null,n.apply(e,t)}))}},Turbolinks.dispatch=function(t,e){var n,i,r,o,a,s;return s=(a=null!=e?e:{}).target,n=a.cancelable,i=a.data,(r=document.createEvent("Events")).initEvent(t,!0,!0===n),r.data=null!=i?i:{},r.cancelable&&!l&&(o=r.preventDefault,r.preventDefault=function(){return this.defaultPrevented||Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),o.call(this)}),(null!=s?s:document).dispatchEvent(r),r},(a=document.createEvent("Events")).initEvent("test",!0,!0),a.preventDefault(),l=a.defaultPrevented,Turbolinks.match=function(t,e){return i.call(t,e)},i=null!=(e=null!=(r=null!=(o=(t=document.documentElement).matchesSelector)?o:t.webkitMatchesSelector)?r:t.msMatchesSelector)?e:t.mozMatchesSelector,Turbolinks.uuid=function(){var t,e,n;for(n="",t=e=1;e<=36;t=++e)n+=9===t||14===t||19===t||24===t?"-":15===t?"4":20===t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return n}}.call(this),function(){Turbolinks.Location=function(){function t(t){var e,n;null==t&&(t=""),(n=document.createElement("a")).href=t.toString(),this.absoluteURL=n.href,(e=n.hash.length)<2?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-e),this.anchor=n.hash.slice(1))}var e,n,i,r;return t.wrap=function(t){return t instanceof this?t:new this(t)},t.prototype.getOrigin=function(){return this.absoluteURL.split("/",3).join("/")},t.prototype.getPath=function(){var t,e;return null!=(t=null!=(e=this.requestURL.match(/\/\/[^\/]*(\/[^?;]*)/))?e[1]:void 0)?t:"/"},t.prototype.getPathComponents=function(){return this.getPath().split("/").slice(1)},t.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},t.prototype.getExtension=function(){var t,e;return null!=(t=null!=(e=this.getLastPathComponent().match(/\.[^.]*$/))?e[0]:void 0)?t:""},t.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)},t.prototype.isPrefixedBy=function(t){var e;return e=n(t),this.isEqualTo(t)||r(this.absoluteURL,e)},t.prototype.isEqualTo=function(t){return this.absoluteURL===(null!=t?t.absoluteURL:void 0)},t.prototype.toCacheKey=function(){return this.requestURL},t.prototype.toJSON=function(){return this.absoluteURL},t.prototype.toString=function(){return this.absoluteURL},t.prototype.valueOf=function(){return this.absoluteURL},n=function(t){return e(t.getOrigin()+t.getPath())},e=function(t){return i(t,"/")?t:t+"/"},r=function(t,e){return t.slice(0,e.length)===e},i=function(t,e){return t.slice(-e.length)===e},t}()}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.HttpRequest=function(){function t(t,e,n){this.delegate=t,this.requestCanceled=i(this.requestCanceled,this),this.requestTimedOut=i(this.requestTimedOut,this),this.requestFailed=i(this.requestFailed,this),this.requestLoaded=i(this.requestLoaded,this),this.requestProgressed=i(this.requestProgressed,this),this.url=Turbolinks.Location.wrap(e).requestURL,this.referrer=Turbolinks.Location.wrap(n).absoluteURL,this.createXHR()}return t.NETWORK_FAILURE=0,t.TIMEOUT_FAILURE=-1,t.timeout=60,t.prototype.send=function(){var t;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,"function"==typeof(t=this.delegate).requestStarted?t.requestStarted():void 0):void 0},t.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},t.prototype.requestProgressed=function(t){return t.lengthComputable?this.setProgress(t.loaded/t.total):void 0},t.prototype.requestLoaded=function(){return this.endRequest((e=this,function(){var t;return 200<=(t=e.xhr.status)&&t<300?e.delegate.requestCompletedWithResponse(e.xhr.responseText,e.xhr.getResponseHeader("Turbolinks-Location")):(e.failed=!0,e.delegate.requestFailedWithStatusCode(e.xhr.status,e.xhr.responseText))}));var e},t.prototype.requestFailed=function(){return this.endRequest((t=this,function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.NETWORK_FAILURE)}));var t},t.prototype.requestTimedOut=function(){return this.endRequest((t=this,function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.TIMEOUT_FAILURE)}));var t},t.prototype.requestCanceled=function(){return this.endRequest()},t.prototype.notifyApplicationBeforeRequestStart=function(){return Turbolinks.dispatch("turbolinks:request-start",{data:{url:this.url,xhr:this.xhr}})},t.prototype.notifyApplicationAfterRequestEnd=function(){return Turbolinks.dispatch("turbolinks:request-end",{data:{url:this.url,xhr:this.xhr}})},t.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open("GET",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader("Accept","text/html, application/xhtml+xml"),this.xhr.setRequestHeader("Turbolinks-Referrer",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},t.prototype.endRequest=function(t){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=t&&t.call(this),this.destroy()):void 0},t.prototype.setProgress=function(t){var e;return this.progress=t,"function"==typeof(e=this.delegate).requestProgressed?e.requestProgressed(this.progress):void 0},t.prototype.destroy=function(){var t;return this.setProgress(1),"function"==typeof(t=this.delegate).requestFinished&&t.requestFinished(),this.delegate=null,this.xhr=null},t}()}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.ProgressBar=function(){function t(){this.trickle=n(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var e;return e=300,t.defaultCSS=".turbolinks-progress-bar {\n  position: fixed;\n  display: block;\n  top: 0;\n  left: 0;\n  height: 3px;\n  background: #0076ff;\n  z-index: 9999;\n  transition: width "+e+"ms ease-out, opacity "+e/2+"ms "+e/2+"ms ease-in;\n  transform: translate3d(0, 0, 0);\n}",t.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},t.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement((t=this,function(){return t.uninstallProgressElement(),t.stopTrickling(),t.visible=!1,t.hiding=!1}))):void 0;var t},t.prototype.setValue=function(t){return this.value=t,this.refresh()},t.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},t.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},t.prototype.fadeProgressElement=function(t){return this.progressElement.style.opacity=0,setTimeout(t,1.5*e)},t.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},t.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,e)},t.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},t.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},t.prototype.refresh=function(){return requestAnimationFrame((t=this,function(){return t.progressElement.style.width=10+90*t.value+"%"}));var t},t.prototype.createStylesheetElement=function(){var t;return(t=document.createElement("style")).type="text/css",t.textContent=this.constructor.defaultCSS,t},t.prototype.createProgressElement=function(){var t;return(t=document.createElement("div")).className="turbolinks-progress-bar",t},t}()}.call(this),function(){var r=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.BrowserAdapter=function(){function t(t){this.controller=t,this.showProgressBar=r(this.showProgressBar,this),this.progressBar=new Turbolinks.ProgressBar}var n,i,e;return e=Turbolinks.HttpRequest,n=e.NETWORK_FAILURE,i=e.TIMEOUT_FAILURE,t.prototype.visitProposedToLocationWithAction=function(t,e){return this.controller.startVisitToLocationWithAction(t,e)},t.prototype.visitStarted=function(t){return t.issueRequest(),t.changeHistory(),t.loadCachedSnapshot()},t.prototype.visitRequestStarted=function(t){return this.progressBar.setValue(0),t.hasCachedSnapshot()||"restore"!==t.action?this.showProgressBarAfterDelay():this.showProgressBar()},t.prototype.visitRequestProgressed=function(t){return this.progressBar.setValue(t.progress)},t.prototype.visitRequestCompleted=function(t){return t.loadResponse()},t.prototype.visitRequestFailedWithStatusCode=function(t,e){switch(e){case n:case i:return this.reload();default:return t.loadResponse()}},t.prototype.visitRequestFinished=function(){return this.hideProgressBar()},t.prototype.visitCompleted=function(t){return t.followRedirect()},t.prototype.pageInvalidated=function(){return this.reload()},t.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,this.controller.progressBarDelay)},t.prototype.showProgressBar=function(){return this.progressBar.show()},t.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},t.prototype.reload=function(){return window.location.reload()},t}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.History=function(){function t(t){this.delegate=t,this.onPageLoad=e(this.onPageLoad,this),this.onPopState=e(this.onPopState,this)}return t.prototype.start=function(){return this.started?void 0:(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0)},t.prototype.stop=function(){return this.started?(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1):void 0},t.prototype.push=function(t,e){return t=Turbolinks.Location.wrap(t),this.update("push",t,e)},t.prototype.replace=function(t,e){return t=Turbolinks.Location.wrap(t),this.update("replace",t,e)},t.prototype.onPopState=function(t){var e,n,i,r;return this.shouldHandlePopState()&&(r=null!=(n=t.state)?n.turbolinks:void 0)?(e=Turbolinks.Location.wrap(window.location),i=r.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(e,i)):void 0},t.prototype.onPageLoad=function(){return Turbolinks.defer((t=this,function(){return t.pageLoaded=!0}));var t},t.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},t.prototype.pageIsLoaded=function(){return this.pageLoaded||"complete"===document.readyState},t.prototype.update=function(t,e,n){var i;return i={turbolinks:{restorationIdentifier:n}},history[t+"State"](i,null,e)},t}()}.call(this),function(){Turbolinks.Snapshot=function(){function t(t){var e,n;n=t.head,e=t.body,this.head=null!=n?n:document.createElement("head"),this.body=null!=e?e:document.createElement("body")}return t.wrap=function(t){return t instanceof this?t:this.fromHTML(t)},t.fromHTML=function(t){var e;return(e=document.createElement("html")).innerHTML=t,this.fromElement(e)},t.fromElement=function(t){return new this({head:t.querySelector("head"),body:t.querySelector("body")})},t.prototype.clone=function(){return new t({head:this.head.cloneNode(!0),body:this.body.cloneNode(!0)})},t.prototype.getRootLocation=function(){var t,e;return e=null!=(t=this.getSetting("root"))?t:"/",new Turbolinks.Location(e)},t.prototype.getCacheControlValue=function(){return this.getSetting("cache-control")},t.prototype.getElementForAnchor=function(t){try{return this.body.querySelector("[id='"+t+"'], a[name='"+t+"']")}catch(e){}},t.prototype.hasAnchor=function(t){return null!=this.getElementForAnchor(t)},t.prototype.isPreviewable=function(){return"no-preview"!==this.getCacheControlValue()},t.prototype.isCacheable=function(){return"no-cache"!==this.getCacheControlValue()},t.prototype.isVisitable=function(){return"reload"!==this.getSetting("visit-control")},t.prototype.getSetting=function(t){var e,n;return null!=(e=(n=this.head.querySelectorAll("meta[name='turbolinks-"+t+"']"))[n.length-1])?e.getAttribute("content"):void 0},t}()}.call(this),function(){var o=[].slice;Turbolinks.Renderer=function(){function t(){}var n;return t.render=function(t,e){var n,i,r;return i=t,n=e,(r=function(t,e,n){n.prototype=t.prototype;var i=new n,r=t.apply(i,e);return Object(r)===r?r:i}(this,3<=arguments.length?o.call(arguments,2):[],function(){})).delegate=i,r.render(n),r},t.prototype.renderView=function(t){return this.delegate.viewWillRender(this.newBody),t(),this.delegate.viewRendered(this.newBody)},t.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},t.prototype.createScriptElement=function(t){var e;return"false"===t.getAttribute("data-turbolinks-eval")?t:((e=document.createElement("script")).textContent=t.textContent,e.async=!1,n(e,t),e)},n=function(t,e){var n,i,r,o,a,s,l;for(s=[],n=0,i=(o=e.attributes).length;n<i;n++)r=(a=o[n]).name,l=a.value,s.push(t.setAttribute(r,l));return s},t}()}.call(this),function(){Turbolinks.HeadDetails=function(){function t(t){var e,n,i,r,o,a;for(this.element=t,this.elements={},i=0,o=(a=this.element.childNodes).length;i<o;i++)(n=a[i]).nodeType===Node.ELEMENT_NODE&&(r=n.outerHTML,(null!=(e=this.elements)[r]?e[r]:e[r]={type:l(n),tracked:s(n),elements:[]}).elements.push(n))}var e,n,s,l;return t.prototype.hasElementWithKey=function(t){return t in this.elements},t.prototype.getTrackedElementSignature=function(){var n;return function(){var t,e;for(n in e=[],t=this.elements)t[n].tracked&&e.push(n);return e}.call(this).join("")},t.prototype.getScriptElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails("script",t)},t.prototype.getStylesheetElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails("stylesheet",t)},t.prototype.getElementsMatchingTypeNotInDetails=function(t,e){var n,i,r,o,a,s;for(i in a=[],r=this.elements)s=(o=r[i]).type,n=o.elements,s!==t||e.hasElementWithKey(i)||a.push(n[0]);return a},t.prototype.getProvisionalElements=function(){var t,e,n,i,r,o,a;for(e in n=[],i=this.elements)a=(r=i[e]).type,o=r.tracked,t=r.elements,null!=a||o?1<t.length&&n.push.apply(n,t.slice(1)):n.push.apply(n,t);return n},l=function(t){return e(t)?"script":n(t)?"stylesheet":void 0},s=function(t){return"reload"===t.getAttribute("data-turbolinks-track")},e=function(t){return"script"===t.tagName.toLowerCase()},n=function(t){var e;return"style"===(e=t.tagName.toLowerCase())||"link"===e&&"stylesheet"===t.getAttribute("rel")},t}()}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;Turbolinks.SnapshotRenderer=function(t){function e(t,e,n){this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=n,this.currentHeadDetails=new Turbolinks.HeadDetails(this.currentSnapshot.head),this.newHeadDetails=new Turbolinks.HeadDetails(this.newSnapshot.head),this.newBody=this.newSnapshot.body}return n(e,t),e.prototype.render=function(t){return this.shouldRender()?(this.mergeHead(),this.renderView((e=this,function(){return e.replaceBody(),e.isPreview||e.focusFirstAutofocusableElement(),t()}))):this.invalidateView();var e},e.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},e.prototype.replaceBody=function(){return this.activateBodyScriptElements(),this.importBodyPermanentElements(),this.assignNewBody()},e.prototype.shouldRender=function(){return this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()},e.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},e.prototype.copyNewHeadStylesheetElements=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getNewHeadStylesheetElements()).length;e<n;e++)t=i[e],r.push(document.head.appendChild(t));return r},e.prototype.copyNewHeadScriptElements=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getNewHeadScriptElements()).length;e<n;e++)t=i[e],r.push(document.head.appendChild(this.createScriptElement(t)));return r},e.prototype.removeCurrentHeadProvisionalElements=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getCurrentHeadProvisionalElements()).length;e<n;e++)t=i[e],r.push(document.head.removeChild(t));return r},e.prototype.copyNewHeadProvisionalElements=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getNewHeadProvisionalElements()).length;e<n;e++)t=i[e],r.push(document.head.appendChild(t));return r},e.prototype.importBodyPermanentElements=function(){var t,e,n,i,r,o;for(o=[],e=0,n=(i=this.getNewBodyPermanentElements()).length;e<n;e++)r=i[e],(t=this.findCurrentBodyPermanentElement(r))?o.push(r.parentNode.replaceChild(t,r)):o.push(void 0);return o},e.prototype.activateBodyScriptElements=function(){var t,e,n,i,r,o;for(o=[],e=0,n=(i=this.getNewBodyScriptElements()).length;e<n;e++)r=i[e],t=this.createScriptElement(r),o.push(r.parentNode.replaceChild(t,r));return o},e.prototype.assignNewBody=function(){return document.body=this.newBody},e.prototype.focusFirstAutofocusableElement=function(){var t;return null!=(t=this.findFirstAutofocusableElement())?t.focus():void 0},e.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},e.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},e.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},e.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},e.prototype.getNewBodyPermanentElements=function(){return this.newBody.querySelectorAll("[id][data-turbolinks-permanent]")},e.prototype.findCurrentBodyPermanentElement=function(t){return document.body.querySelector("#"+t.id+"[data-turbolinks-permanent]")},e.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll("script")},e.prototype.findFirstAutofocusableElement=function(){return document.body.querySelector("[autofocus]")},e}(Turbolinks.Renderer)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;Turbolinks.ErrorRenderer=function(t){function e(t){this.html=t}return n(e,t),e.prototype.render=function(t){return this.renderView((e=this,function(){return e.replaceDocumentHTML(),e.activateBodyScriptElements(),t()}));var e},e.prototype.replaceDocumentHTML=function(){return document.documentElement.innerHTML=this.html},e.prototype.activateBodyScriptElements=function(){var t,e,n,i,r,o;for(o=[],e=0,n=(i=this.getScriptElements()).length;e<n;e++)r=i[e],t=this.createScriptElement(r),o.push(r.parentNode.replaceChild(t,r));return o},e.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll("script")},e}(Turbolinks.Renderer)}.call(this),function(){Turbolinks.View=function(){function t(t){this.delegate=t,this.element=document.documentElement}return t.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},t.prototype.getElementForAnchor=function(t){return this.getSnapshot().getElementForAnchor(t)},t.prototype.getSnapshot=function(){return Turbolinks.Snapshot.fromElement(this.element)},t.prototype.render=function(t,e){var n,i,r;return r=t.snapshot,n=t.error,i=t.isPreview,this.markAsPreview(i),null!=r?this.renderSnapshot(r,i,e):this.renderError(n,e)},t.prototype.markAsPreview=function(t){return t?this.element.setAttribute("data-turbolinks-preview",""):this.element.removeAttribute("data-turbolinks-preview")},t.prototype.renderSnapshot=function(t,e,n){return Turbolinks.SnapshotRenderer.render(this.delegate,n,this.getSnapshot(),Turbolinks.Snapshot.wrap(t),e)},t.prototype.renderError=function(t,e){return Turbolinks.ErrorRenderer.render(this.delegate,e,t)},t}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.ScrollManager=function(){function t(t){this.delegate=t,this.onScroll=e(this.onScroll,this),this.onScroll=Turbolinks.throttle(this.onScroll)}return t.prototype.start=function(){return this.started?void 0:(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)},t.prototype.stop=function(){return this.started?(removeEventListener("scroll",this.onScroll,!1),this.started=!1):void 0},t.prototype.scrollToElement=function(t){return t.scrollIntoView()},t.prototype.scrollToPosition=function(t){var e,n;return e=t.x,n=t.y,window.scrollTo(e,n)},t.prototype.onScroll=function(){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},t.prototype.updatePosition=function(t){var e;return this.position=t,null!=(e=this.delegate)?e.scrollPositionChanged(this.position):void 0},t}()}.call(this),function(){Turbolinks.SnapshotCache=function(){function t(t){this.size=t,this.keys=[],this.snapshots={}}var i;return t.prototype.has=function(t){return i(t)in this.snapshots},t.prototype.get=function(t){var e;if(this.has(t))return e=this.read(t),this.touch(t),e},t.prototype.put=function(t,e){return this.write(t,e),this.touch(t),e},t.prototype.read=function(t){var e;return e=i(t),this.snapshots[e]},t.prototype.write=function(t,e){var n;return n=i(t),this.snapshots[n]=e},t.prototype.touch=function(t){var e,n;return n=i(t),-1<(e=this.keys.indexOf(n))&&this.keys.splice(e,1),this.keys.unshift(n),this.trim()},t.prototype.trim=function(){var t,e,n,i,r;for(r=[],t=0,n=(i=this.keys.splice(this.size)).length;t<n;t++)e=i[t],r.push(delete this.snapshots[e]);return r},i=function(t){return Turbolinks.Location.wrap(t).toCacheKey()},t}()}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.Visit=function(){function t(t,e,n){this.controller=t,this.action=n,this.performScroll=i(this.performScroll,this),this.identifier=Turbolinks.uuid(),this.location=Turbolinks.Location.wrap(e),this.adapter=this.controller.adapter,this.state="initialized",this.timingMetrics={}}var n;return t.prototype.start=function(){return"initialized"===this.state?(this.recordTimingMetric("visitStart"),this.state="started",this.adapter.visitStarted(this)):void 0},t.prototype.cancel=function(){var t;return"started"===this.state?(null!=(t=this.request)&&t.cancel(),this.cancelRender(),this.state="canceled"):void 0},t.prototype.complete=function(){var t;return"started"===this.state?(this.recordTimingMetric("visitEnd"),this.state="completed","function"==typeof(t=this.adapter).visitCompleted&&t.visitCompleted(this),this.controller.visitCompleted(this)):void 0},t.prototype.fail=function(){var t;return"started"===this.state?(this.state="failed","function"==typeof(t=this.adapter).visitFailed?t.visitFailed(this):void 0):void 0},t.prototype.changeHistory=function(){var t,e;return this.historyChanged?void 0:(t=this.location.isEqualTo(this.referrer)?"replace":this.action,e=n(t),this.controller[e](
this.location,this.restorationIdentifier),this.historyChanged=!0)},t.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new Turbolinks.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},t.prototype.getCachedSnapshot=function(){var t;return!(t=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!t.hasAnchor(this.location.anchor)||"restore"!==this.action&&!t.isPreviewable()?void 0:t},t.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},t.prototype.loadCachedSnapshot=function(){var e,n;return(n=this.getCachedSnapshot())?(e=this.shouldIssueRequest(),this.render(function(){var t;return this.cacheSnapshot(),this.controller.render({snapshot:n,isPreview:e},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),e?void 0:this.complete()})):void 0},t.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var t,e;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),"function"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.complete())}):void 0},t.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},t.prototype.requestStarted=function(){var t;return this.recordTimingMetric("requestStart"),"function"==typeof(t=this.adapter).visitRequestStarted?t.visitRequestStarted(this):void 0},t.prototype.requestProgressed=function(t){var e;return this.progress=t,"function"==typeof(e=this.adapter).visitRequestProgressed?e.visitRequestProgressed(this):void 0},t.prototype.requestCompletedWithResponse=function(t,e){return this.response=t,null!=e&&(this.redirectedToLocation=Turbolinks.Location.wrap(e)),this.adapter.visitRequestCompleted(this)},t.prototype.requestFailedWithStatusCode=function(t,e){return this.response=e,this.adapter.visitRequestFailedWithStatusCode(this,t)},t.prototype.requestFinished=function(){var t;return this.recordTimingMetric("requestEnd"),"function"==typeof(t=this.adapter).visitRequestFinished?t.visitRequestFinished(this):void 0},t.prototype.performScroll=function(){return this.scrolled?void 0:("restore"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},t.prototype.scrollToRestoredPosition=function(){var t,e;return null!=(t=null!=(e=this.restorationData)?e.scrollPosition:void 0)?(this.controller.scrollToPosition(t),!0):void 0},t.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},t.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},t.prototype.recordTimingMetric=function(t){var e;return null!=(e=this.timingMetrics)[t]?e[t]:e[t]=(new Date).getTime()},t.prototype.getTimingMetrics=function(){return Turbolinks.copyObject(this.timingMetrics)},n=function(t){switch(t){case"replace":return"replaceHistoryWithLocationAndRestorationIdentifier";case"advance":case"restore":return"pushHistoryWithLocationAndRestorationIdentifier"}},t.prototype.shouldIssueRequest=function(){return"restore"!==this.action||!this.hasCachedSnapshot()},t.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},t.prototype.render=function(t){return this.cancelRender(),this.frame=requestAnimationFrame((e=this,function(){return e.frame=null,t.call(e)}));var e},t.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},t}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.Controller=function(){function t(){this.clickBubbled=e(this.clickBubbled,this),this.clickCaptured=e(this.clickCaptured,this),this.pageLoaded=e(this.pageLoaded,this),this.history=new Turbolinks.History(this),this.view=new Turbolinks.View(this),this.scrollManager=new Turbolinks.ScrollManager(this),this.restorationData={},this.clearCache(),this.setProgressBarDelay(500)}return t.prototype.start=function(){return Turbolinks.supported&&!this.started?(addEventListener("click",this.clickCaptured,!0),addEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.stop=function(){return this.started?(removeEventListener("click",this.clickCaptured,!0),removeEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},t.prototype.clearCache=function(){return this.cache=new Turbolinks.SnapshotCache(10)},t.prototype.visit=function(t,e){var n,i;return null==e&&(e={}),t=Turbolinks.Location.wrap(t),this.applicationAllowsVisitingLocation(t)?this.locationIsVisitable(t)?(n=null!=(i=e.action)?i:"advance",this.adapter.visitProposedToLocationWithAction(t,n)):window.location=t:void 0},t.prototype.startVisitToLocationWithAction=function(t,e,n){var i;return Turbolinks.supported?(i=this.getRestorationDataForIdentifier(n),this.startVisit(t,e,{restorationData:i})):window.location=t},t.prototype.setProgressBarDelay=function(t){return this.progressBarDelay=t},t.prototype.startHistory=function(){return this.location=Turbolinks.Location.wrap(window.location),this.restorationIdentifier=Turbolinks.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},t.prototype.stopHistory=function(){return this.history.stop()},t.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(t,e){return this.restorationIdentifier=e,this.location=Turbolinks.Location.wrap(t),this.history.push(this.location,this.restorationIdentifier)},t.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(t,e){return this.restorationIdentifier=e,this.location=Turbolinks.Location.wrap(t),this.history.replace(this.location,this.restorationIdentifier)},t.prototype.historyPoppedToLocationWithRestorationIdentifier=function(t,e){var n;return this.restorationIdentifier=e,this.enabled?(n=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(t,"restore",{restorationIdentifier:this.restorationIdentifier,restorationData:n,historyChanged:!0}),this.location=Turbolinks.Location.wrap(t)):this.adapter.pageInvalidated()},t.prototype.getCachedSnapshotForLocation=function(t){var e;return(e=this.cache.get(t))?e.clone():void 0},t.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable()},t.prototype.cacheSnapshot=function(){var t;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),t=this.view.getSnapshot(),this.cache.put(this.lastRenderedLocation,t.clone())):void 0},t.prototype.scrollToAnchor=function(t){var e;return(e=this.view.getElementForAnchor(t))?this.scrollToElement(e):this.scrollToPosition({x:0,y:0})},t.prototype.scrollToElement=function(t){return this.scrollManager.scrollToElement(t)},t.prototype.scrollToPosition=function(t){return this.scrollManager.scrollToPosition(t)},t.prototype.scrollPositionChanged=function(t){return this.getCurrentRestorationData().scrollPosition=t},t.prototype.render=function(t,e){return this.view.render(t,e)},t.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},t.prototype.viewWillRender=function(t){return this.notifyApplicationBeforeRender(t)},t.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},t.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},t.prototype.clickCaptured=function(){return removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},t.prototype.clickBubbled=function(t){var e,n,i;return this.enabled&&this.clickEventIsSignificant(t)&&(n=this.getVisitableLinkForNode(t.target))&&(i=this.getVisitableLocationForLink(n))&&this.applicationAllowsFollowingLinkToLocation(n,i)?(t.preventDefault(),e=this.getActionForLink(n),this.visit(i,{action:e})):void 0},t.prototype.applicationAllowsFollowingLinkToLocation=function(t,e){return!this.notifyApplicationAfterClickingLinkToLocation(t,e).defaultPrevented},t.prototype.applicationAllowsVisitingLocation=function(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented},t.prototype.notifyApplicationAfterClickingLinkToLocation=function(t,e){return Turbolinks.dispatch("turbolinks:click",{target:t,data:{url:e.absoluteURL},cancelable:!0})},t.prototype.notifyApplicationBeforeVisitingLocation=function(t){return Turbolinks.dispatch("turbolinks:before-visit",{data:{url:t.absoluteURL},cancelable:!0})},t.prototype.notifyApplicationAfterVisitingLocation=function(t){return Turbolinks.dispatch("turbolinks:visit",{data:{url:t.absoluteURL}})},t.prototype.notifyApplicationBeforeCachingSnapshot=function(){return Turbolinks.dispatch("turbolinks:before-cache")},t.prototype.notifyApplicationBeforeRender=function(t){return Turbolinks.dispatch("turbolinks:before-render",{data:{newBody:t}})},t.prototype.notifyApplicationAfterRender=function(){return Turbolinks.dispatch("turbolinks:render")},t.prototype.notifyApplicationAfterPageLoad=function(t){return null==t&&(t={}),Turbolinks.dispatch("turbolinks:load",{data:{url:this.location.absoluteURL,timing:t}})},t.prototype.startVisit=function(t,e,n){var i;return null!=(i=this.currentVisit)&&i.cancel(),this.currentVisit=this.createVisit(t,e,n),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(t)},t.prototype.createVisit=function(t,e,n){var i,r,o,a,s;return a=(r=null!=n?n:{}).restorationIdentifier,o=r.restorationData,i=r.historyChanged,(s=new Turbolinks.Visit(this,t,e)).restorationIdentifier=null!=a?a:Turbolinks.uuid(),s.restorationData=Turbolinks.copyObject(o),s.historyChanged=i,s.referrer=this.location,s},t.prototype.visitCompleted=function(t){return this.notifyApplicationAfterPageLoad(t.getTimingMetrics())},t.prototype.clickEventIsSignificant=function(t){return!(t.defaultPrevented||t.target.isContentEditable||1<t.which||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)},t.prototype.getVisitableLinkForNode=function(t){return this.nodeIsVisitable(t)?Turbolinks.closest(t,"a[href]:not([target]):not([download])"):void 0},t.prototype.getVisitableLocationForLink=function(t){var e;return e=new Turbolinks.Location(t.getAttribute("href")),this.locationIsVisitable(e)?e:void 0},t.prototype.getActionForLink=function(t){var e;return null!=(e=t.getAttribute("data-turbolinks-action"))?e:"advance"},t.prototype.nodeIsVisitable=function(t){var e;return!(e=Turbolinks.closest(t,"[data-turbolinks]"))||"false"!==e.getAttribute("data-turbolinks")},t.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&t.isHTML()},t.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},t.prototype.getRestorationDataForIdentifier=function(t){var e;return null!=(e=this.restorationData)[t]?e[t]:e[t]={}},t}()}.call(this),function(){!function(){var t,e;if((t=e=document.currentScript)&&!e.hasAttribute("data-turbolinks-suppress-warning"))for(;t=t.parentNode;)if(t===document.body)return console.warn("You are loading Turbolinks from a <script> element inside the <body> element. This is probably not what you meant to do!\n\nLoad your application\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\nFor more information, see: https://github.com/turbolinks/turbolinks#working-with-script-elements\n\n\u2014\u2014\nSuppress this warning by adding a `data-turbolinks-suppress-warning` attribute to: %s",e.outerHTML)}()}.call(this),function(){var t,e,n;Turbolinks.start=function(){return e()?(null==Turbolinks.controller&&(Turbolinks.controller=t()),Turbolinks.controller.start()):void 0},e=function(){return null==window.Turbolinks&&(window.Turbolinks=Turbolinks),n()},t=function(){var t;return(t=new Turbolinks.Controller).adapter=new Turbolinks.BrowserAdapter(t),t},(n=function(){return window.Turbolinks===Turbolinks})()&&Turbolinks.start()}.call(this),function(){(function(){(function(){var e=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},createConsumer:function(t){var e;return null==t&&(t=null!=(e=this.getConfig("url"))?e:this.INTERNAL.default_mount_path),new l.Consumer(this.createWebSocketURL(t))},getConfig:function(t){var e;return null!=(e=document.head.querySelector("meta[name='action-cable-"+t+"']"))?e.getAttribute("content"):void 0},createWebSocketURL:function(t){var e;return t&&!/^wss?:/i.test(t)?((e=document.createElement("a")).href=t,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href):t},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var t;if(t=1<=arguments.length?e.call(arguments,0):[],this.debugging)return t.push(Date.now()),console.log.apply(console,["[ActionCable]"].concat(e.call(t)))}}}).call(this)}).call(this);var l=this.ActionCable;(function(){(function(){var i=function(t,e){return function(){return t.apply(e,arguments)}};l.ConnectionMonitor=function(){function t(t){this.connection=t,this.visibilityDidChange=i(this.visibilityDidChange,this),this.reconnectAttempts=0}var r,e,n;return t.pollInterval={min:3,max:30},t.staleThreshold=6,t.prototype.start=function(){if(!this.isRunning())return this.startedAt=e(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),l.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},t.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=e(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),l.log("ConnectionMonitor stopped")},t.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},t.prototype.recordPing=function(){return this.pingedAt=e()},t.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,l.log("ConnectionMonitor recorded connect")},t.prototype.recordDisconnect=function(){return this.disconnectedAt=e(),l.log("ConnectionMonitor recorded disconnect")},t.prototype.startPolling=function(){return this.stopPolling(),this.poll()},t.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},t.prototype.poll=function(){return this.pollTimeout=setTimeout((t=this,function(){return t.reconnectIfStale(),t.poll()}),this.getPollInterval());var t},t.prototype.getPollInterval=function(){var t,e,n,i;return n=(i=this.constructor.pollInterval).min,e=i.max,t=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*r(t,n,e))},t.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return l.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+n(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?l.log("ConnectionMonitor skipping reopening recent disconnect"):(l.log("ConnectionMonitor reopening"),this.connection.reopen())},t.prototype.connectionIsStale=function(){var t;return n(null!=(t=this.pingedAt)?t:this.startedAt)>this.constructor.staleThreshold},t.prototype.disconnectedRecently=function(){return this.disconnectedAt&&n(this.disconnectedAt)<this.constructor.staleThreshold},t.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout((t=this,function(){if(t.connectionIsStale()||!t.connection.isOpen())return l.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),t.connection.reopen()}),200);var t},e=function(){return(new Date).getTime()},n=function(t){return(e()-t)/1e3},r=function(t,e,n){return Math.max(e,Math.min(n,t))},t}()}).call(this),function(){var t,r,e,n,i,o=[].slice,a=function(t,e){return function(){return t.apply(e,arguments)}},s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};n=l.INTERNAL,r=n.message_types,e=n.protocols,i=2<=e.length?o.call(e,0,t=e.length-1):(t=0,[]),e[t++],l.Connection=function(){function t(t){this.consumer=t,this.open=a(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new l.ConnectionMonitor(this),this.disconnected=!0}return t.reopenDelay=500,t.prototype.send=function(t){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(t)),!0)},t.prototype.open=function(){if(this.isActive())throw l.log("Attempted to open WebSocket, but existing socket is "+this.getState()),new Error("Existing connection must be closed before opening");return l.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+e),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0},t.prototype.close=function(t){var e;if((null!=t?t:{allowReconnect:!0}).allowReconnect||this.monitor.stop(),this.isActive())return null!=(e=this.webSocket)?e.close():void 0},t.prototype.reopen=function(){var t;if(l.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(e){return t=e,l.log("Failed to reopen WebSocket",t)}finally{l.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},t.prototype.getProtocol=function(){var t;return null!=(t=this.webSocket)?t.protocol:void 0},t.prototype.isOpen=function(){return this.isState("open")},t.prototype.isActive=function(){return this.isState("open","connecting")},t.prototype.isProtocolSupported=function(){var t;return t=this.getProtocol(),0<=s.call(i,t)},t.prototype.isState=function(){var t,e;return e=1<=arguments.length?o.call(arguments,0):[],t=this.getState(),0<=s.call(e,t)},t.prototype.getState=function(){var t,e;for(e in WebSocket)if(WebSocket[e]===(null!=(t=this.webSocket)?t.readyState:void 0))return e.toLowerCase();return null},t.prototype.installEventHandlers=function(){var t,e;for(t in this.events)e=this.events[t].bind(this),this.webSocket["on"+t]=e},t.prototype.uninstallEventHandlers=function(){var t;for(t in this.events)this.webSocket["on"+t]=function(){}},t.prototype.events={message:function(t){var e,n,i;if(this.isProtocolSupported())switch(e=(i=JSON.parse(t.data)).identifier,n=i.message,i.type){case r.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case r.ping:return this.monitor.recordPing();case r.confirmation:return this.subscriptions.notify(e,"connected");case r.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",n)}},open:function(){if(l.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return l.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(){if(l.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return l.log("WebSocket onerror event")}},t}()}.call(this),function(){var u=[].slice;l.Subscriptions=function(){function t(t){this.consumer=t,this.subscriptions=[]}return t.prototype.create=function(t,e){var n,i,r;return i="object"==typeof(n=t)?n:{channel:n},r=new l.Subscription(this.consumer,i,e),this.add(r)},t.prototype.add=function(t){return this.subscriptions.push(t),this.consumer.ensureActiveConnection(),this.notify(t,"initialized"),this.sendCommand(t,"subscribe"),t},t.prototype.remove=function(t){return this.forget(t),this.findAll(t.identifier).length||this.sendCommand(t,"unsubscribe"),t},t.prototype.reject=function(t){var e,n,i,r,o;for(r=[],e=0,n=(i=this.findAll(t)).length;e<n;e++)o=i[e],this.forget(o),this.notify(o,"rejected"),r.push(o);return r},t.prototype.forget=function(r){var o;return this.subscriptions=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.subscriptions).length;t<e;t++)(o=n[t])!==r&&i.push(o);return i}.call(this),r},t.prototype.findAll=function(t){var e,n,i,r,o;for(r=[],e=0,n=(i=this.subscriptions).length;e<n;e++)(o=i[e]).identifier===t&&r.push(o);return r},t.prototype.reload=function(){var t,e,n,i,r;for(i=[],t=0,e=(n=this.subscriptions).length;t<e;t++)r=n[t],i.push(this.sendCommand(r,"subscribe"));return i},t.prototype.notifyAll=function(t){var e,n,i,r,o,a,s;for(n=t,e=2<=arguments.length?u.call(arguments,1):[],a=[],i=0,r=(o=this.subscriptions).length;i<r;i++)s=o[i],a.push(this.notify.apply(this,[s,n].concat(u.call(e))));return a},t.prototype.notify=function(t,e){var n,i,r,o,a,s,l;for(s=t,i=e,n=3<=arguments.length?u.call(arguments,2):[],a=[],r=0,o=(l="string"==typeof s?this.findAll(s):[s]).length;r<o;r++)s=l[r],a.push("function"==typeof s[i]?s[i].apply(s,n):void 0);return a},t.prototype.sendCommand=function(t,e){var n;return n=t.identifier,this.consumer.send({command:e,identifier:n})},t}()}.call(this),function(){l.Subscription=function(){function t(t,e,n){this.consumer=t,null==e&&(e={}),this.identifier=JSON.stringify(e),i(this,n)}var i;return t.prototype.perform=function(t,e){return null==e&&(e={}),e.action=t,this.send(e)},t.prototype.send=function(t){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(t)})},t.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},i=function(t,e){var n,i;if(null!=e)for(n in e)i=e[n],t[n]=i;return t},t}()}.call(this),function(){l.Consumer=function(){function t(t){this.url=t,this.subscriptions=new l.Subscriptions(this),this.connection=new l.Connection(this)}return t.prototype.send=function(t){return this.connection.send(t)},t.prototype.connect=function(){return this.connection.open()},t.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},t.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},t}()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=l:"function"==typeof define&&define.amd&&define(l)}.call(this),function(){this.App||(this.App={}),App.cable=ActionCable.createConsumer()}.call(this),function(s){"use strict";var l={init:function(t){return this.each(function(){this.self=s(this),l.destroy.call(this.self),this.opt=s.extend(!0,{},s.fn.raty.defaults,t,this.self.data()),l._adjustCallback.call(this),l._adjustNumber.call(this),l._adjustHints.call(this),this.opt.score=l._adjustedScore.call(this,this.opt.score),"img"!==this.opt.starType&&l._adjustStarType.call(this),l._adjustPath.call(this),l._createStars.call(this),this.opt.cancel&&l._createCancel.call(this),this.opt.precision&&l._adjustPrecision.call(this),l._createScore.call(this),l._apply.call(this,this.opt.score),l._setTitle.call(this,this.opt.score),l._target.call(this,this.opt.score),this.opt.readOnly?l._lock.call(this):(this.style.cursor="pointer",l._binds.call(this))})},_adjustCallback:function(){for(var t=["number","readOnly","score","scoreName","target","path"],e=0;e<t.length;e++)"function"==typeof this.opt[t[e]]&&(this.opt[t[e]]=this.opt[t[e]].call(this))},_adjustedScore:function(t){return t?l._between(t,0,this.opt.number):t},_adjustHints:function(){if(this.opt.hints||(this.opt.hints=[]),this.opt.halfShow||this.opt.half)for(var t=this.opt.precision?10:2,e=0;e<this.opt.number;e++){var n=this.opt.hints[e];"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),this.opt.hints[e]=[];for(var i=0;i<t;i++){var r=n[i],o=n[n.length-1];o===undefined&&(o=null),this.opt.hints[e][i]=r===undefined?o:r}}},_adjustNumber:function(){this.opt.number=l._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-1)&&(this.opt.path+="/")},_adjustPrecision:function(){this.opt.half=!0},_adjustStarType:function(){var t=["cancelOff","cancelOn","starHalf","starOff","starOn"];this.opt.path="";for(var e=0;e<t.length;e++)this.opt[t[e]]=this.opt[t[e]].replace(".","-")},_apply:function(t){l._fill.call(this,t),t&&(0<t&&this.score.val(t),l._roundStars.call(this,t))},_between:function(t,e,n){return Math.min(Math.max(parseFloat(t),e),n)},_binds:function(){this.cancel&&(l._bindOverCancel.call(this),l._bindClickCancel.call(this),l._bindOutCancel.call(this)),l._bindOver.call(this),l._bindClick.call(this),l._bindOut.call(this)},_bindClick:function(){var i=this;i.stars.on("click.raty",function(t){var e=!0,n=i.opt.half||i.opt.precision?i.self.data("score"):this.alt||s(this).data("alt");i.opt.click&&(e=i.opt.click.call(i,+n,t)),(e||e===undefined)&&(i.opt.half&&!i.opt.precision&&(n=l._roundHalfScore.call(i,n)),l._apply.call(i,n))})},_bindClickCancel:function(){var e=this;e.cancel.on("click.raty",function(t){e.score.removeAttr("value"),e.opt.click&&e.opt.click.call(e,null,t)})},_bindOut:function(){var n=this;n.self.on("mouseleave.raty",function(t){var e=+n.score.val()||undefined;l._apply.call(n,e),l._target.call(n,e,t),l._resetTitle.call(n),n.opt.mouseout&&n.opt.mouseout.call(n,e,t)})},_bindOutCancel:function(){var i=this;i.cancel.on("mouseleave.raty",function(t){var e=i.opt.cancelOff;if("img"!==i.opt.starType&&(e=i.opt.cancelClass+" "+e),l._setIcon.call(i,this,e),i.opt.mouseout){var n=+i.score.val()||undefined;i.opt.mouseout.call(i,n,t)}})},_bindOver:function(){var n=this,t=n.opt.half?"mousemove.raty":"mouseover.raty";n.stars.on(t,function(t){var e=l._getScoreByPosition.call(n,t,this);l._fill.call(n,e),n.opt.half&&(l._roundStars.call(n,e,t),l._setTitle.call(n,e,t),n.self.data("score",e)),l._target.call(n,e,t),n.opt.mouseover&&n.opt.mouseover.call(n,e,t)})},_bindOverCancel:function(){var i=this;i.cancel.on("mouseover.raty",function(t){var e=i.opt.path+i.opt.starOff,n=i.opt.cancelOn;"img"===i.opt.starType?i.stars.attr("src",e):(n=i.opt.cancelClass+" "+n,i.stars.attr("class",e)),l._setIcon.call(i,this,n),l._target.call(i,null,t),i.opt.mouseover&&i.opt.mouseover.call(i,null)})},_buildScoreField:function(){return s("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var t=this.opt.path+this.opt.cancelOff,e=s("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});"img"===this.opt.starType?e.attr({src:t,alt:"x"}):e.attr("data-alt","x").addClass(t),"left"===this.opt.cancelPlace?this.self.prepend("&#160;").prepend(e):this.self.append("&#160;").append(e),this.cancel=e},_createScore:function(){var t=s(this.opt.targetScore);this.score=t.length?t:l._buildScoreField.call(this)},_createStars:function(){for(var t=1;t<=this.opt.number;t++){var e=l._nameForIndex.call(this,t),n={alt:t,src:this.opt.path+this.opt[e]};"img"!==this.opt.starType&&(n={"data-alt":t,"class":n.src}),n.title=l._getHint.call(this,t),s("<"+this.opt.starType+" />",n).appendTo(this),this.opt.space&&this.self.append(t<this.opt.number?"&#160;":"")}this.stars=this.self.children(this.opt.starType)},_error:function(t){s(this).text(t),s.error(t)},_fill:function(t){for(var e=0,n=1;n<=this.stars.length;n++){var i,r=this.stars[n-1],o=l._turnOn.call(this,n,t);if(this.opt.iconRange&&this.opt.iconRange.length>e){var a=this.opt.iconRange[e];i=l._getRangeIcon.call(this,a,o),n<=a.range&&l._setIcon.call(this,r,i),n===a.range&&e++}else i=this.opt[o?"starOn":"starOff"],l._setIcon.call(this,r,i)}},_getFirstDecimal:function(t){var e=t.toString().split(".")[1],n=0;return e&&(n=parseInt(e.charAt(0),10),"9999"===e.slice(1,5)&&n++),n},_getRangeIcon:function(t,e){return e?t.on||this.opt.starOn:t.off||this.opt.starOff},_getScoreByPosition:function(t,e){var n=parseInt(e.alt||e.getAttribute("data-alt"),10);if(this.opt.half){var i=l._getWidth.call(this);n=n-1+parseFloat((t.pageX-s(e).offset().left)/i)}return n},_getHint:function(t,e){if(0!==t&&!t)return this.opt.noRatedMsg;var n=l._getFirstDecimal.call(this,t),i=Math.ceil(t),r=this.opt.hints[(i||1)-1],o=r,a=!e||this.move;return this.opt.precision?(a&&(n=0===n?9:n-1),o=r[n]):(this.opt.halfShow||this.opt.half)&&(o=r[n=a&&0===n?1:5<n?1:0]),""===o?"":o||t},_getWidth:function(){var t=this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"));return t||l._error.call(this,"Could not get the icon width!"),t},_lock:function(){var t=l._getHint.call(this,this.score.val());this.style.cursor="",this.title=t,this.score.prop("readonly",!0),this.stars.prop("title",t),this.cancel&&this.cancel.hide(),this.self.data("readonly",!0)},_nameForIndex:function(t){return this.opt.score&&this.opt.score>=t?"starOn":"starOff"},_resetTitle:function(){for(var t=0;t<this.opt.number;t++)this.stars[t].title=l._getHint.call(this,t+1)},_roundHalfScore:function(t){var e=parseInt(t,10),n=l._getFirstDecimal.call(this,t);return 0!==n&&(n=5<n?1:.5),e+n},_roundStars:function(t,e){var n,i=(t%1).toFixed(2);if(e||this.move?n=.5<i?"starOn":"starHalf":i>this.opt.round.down&&(n="starOn",this.opt.halfShow&&i<this.opt.round.up?n="starHalf":i<this.opt.round.full&&(n="starOff")),n){var r=this.opt[n],o=this.stars[Math.ceil(t)-1];l._setIcon.call(this,o,r)}},_setIcon:function(t,e){t["img"===this.opt.starType?"src":"className"]=this.opt.path+e},_setTarget:function(t,e){e&&(e=this.opt.targetFormat.toString().replace("{score}",e)),t.is(":input")?t.val(e):t.html(e)},_setTitle:function(t,e){if(t){var n=parseInt(Math.ceil(t),10);this.stars[n-1].title=l._getHint.call(this,t,e)}},_target:function(t,e){if(this.opt.target){var n=s(this.opt.target);n.length||l._error.call(this,"Target selector invalid or missing!");var i=e&&"mouseover"===e.type;if(t===undefined)t=this.opt.targetText;else if(null===t)t=i?this.opt.cancelHint:this.opt.targetText;else{"hint"===this.opt.targetType?t=l._getHint.call(this,t,e):this.opt.precision&&(t=parseFloat(t).toFixed(1));var r=e&&"mousemove"===e.type;i||r||this.opt.targetKeep||(t=this.opt.targetText)}l._setTarget.call(this,n,t)}},_turnOn:function(t,e){return this.opt.single?t===e:t<=e},_unlock:function(){this.style.cursor="pointer",this.removeAttribute("title"),this.score.removeAttr("readonly"),this.self.data("readonly",!1);for(var t=0;t<this.opt.number;t++)this.stars[t].title=l._getHint.call(this,t+1);this.cancel&&this.cancel.css("display","")},cancel:function(e){return this.each(function(){var t=s(this);!0!==t.data("readonly")&&(l[e?"click":"score"].call(t,null),this.score.removeAttr("value"))})},click:function(t){return this.each(function(){!0!==s(this).data("readonly")&&(t=l._adjustedScore.call(this,t),l._apply.call(this,t),this.opt.click&&this.opt.click.call(this,t,s.Event("click")),l._target.call(this,t))})},destroy:function(){return this.each(function(){var t=s(this),e=t.data("raw");e?t.off(".raty").empty().css({cursor:e.style.cursor}).removeData("readonly"):t.data("raw",t.clone()[0])})},getScore:function(){var t,e=[];return this.each(function(){t=this.score.val(),e.push(t?+t:undefined)}),1<e.length?e:e[0]},move:function(a){return this.each(function(){var t=parseInt(a,10),e=l._getFirstDecimal.call(this,a);t>=this.opt.number&&(t=this.opt.number-1,e=10);var n=l._getWidth.call(this)/10,i=s(this.stars[t]),r=i.offset().left+n*e,o=s.Event("mousemove",{pageX:r});this.move=!0,i.trigger(o),this.move=!1})},readOnly:function(e){return this.each(function(){var t=s(this);t.data("readonly")!==e&&(e?(t.off(".raty").children(this.opt.starType).off(".raty"),l._lock.call(this)):(l._binds.call(this),l._unlock.call(this)),t.data("readonly",e))})},reload:function(){return l.set.call(this,{})},score:function(){var t=s(this);return arguments.length?l.setScore.apply(t,arguments):l.getScore.call(t)},set:function(t){return this.each(function(){s(this).raty(s.extend({},this.opt,t))})},setScore:function(t){return this.each(function(){!0!==s(this).data("readonly")&&(t=l._adjustedScore.call(this,t),l._apply.call(this,t),l._target.call(this,t))})}};s.fn.raty=function(t){return l[t]?l[t].apply(this,Array.prototype.slice.call(arguments,1)
):"object"!=typeof t&&t?void s.error("Method "+t+" does not exist!"):l.init.apply(this,arguments)},s.fn.raty.defaults={cancel:!1,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:undefined,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:undefined,mouseout:undefined,mouseover:undefined,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:undefined,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:undefined,scoreName:"score",single:!1,space:!0,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",starType:"img",target:undefined,targetFormat:"{score}",targetKeep:!1,targetScore:undefined,targetText:"",targetType:"hint"}}(jQuery),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e()}(this,function(){return function(n){function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var r={};return i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=27)}([function(t,e,n){"use strict";function o(){}function a(t,e){return"["+t+"] > "+e}function r(i){var r=self.console[i];return r?function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0]&&(e[0]=a(i,e[0])),r.apply(self.console,e)}:o}function i(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach(function(t){u[t]=e[t]?e[t].bind(e):r(t)})}n.d(e,"a",function(){return c}),n.d(e,"b",function(){return h});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l={trace:o,debug:o,log:o,warn:o,info:o,error:o},u=l,c=function(t){if(!0===t||"object"===(void 0===t?"undefined":s(t))){i(t,"debug","log","info","warn","error");try{u.log()}catch(t){u=l}}else u=l},h=l},function(t,e){"use strict";var n={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"};e.a=n},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});var i={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),a=n(2),s=n(1),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]),r=function(){function r(t){o(this,r),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return r.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},r.prototype.onHandlerDestroying=function(){},r.prototype.onHandlerDestroyed=function(){},r.prototype.isEventHandler=function(){return"object"===l(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},r.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(u.has(t))throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},r.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},r.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},r.prototype.onEventGeneric=function(t,e){var n=function(t,e){var n="on"+t.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,e)};try{n.call(this,t,e).call()}catch(e){i.b.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(s.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},r}();e.a=r},function(t){var n,c,e,i,h;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,c=/^([^\/;?#]*)(.*)$/,e=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,h={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var i=this.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");return i.path=h.normalizePath(i.path),h.buildURLFromParts(i)}var r=this.parseURL(e);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=h.normalizePath(r.path),h.buildURLFromParts(r)):e;var o=this.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var a=c.exec(o.path);o.netLoc=a[1],o.path=a[2]}o.netLoc&&!o.path&&(o.path="/");var s={scheme:o.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(s.netLoc=o.netLoc,"/"!==r.path[0]))if(r.path){var l=o.path,u=l.substring(0,l.lastIndexOf("/")+1)+r.path;s.path=h.normalizePath(u)}else s.path=o.path,r.params||(s.params=o.params,r.query||(s.query=o.query));return null===s.path&&(s.path=n.alwaysNormalize?h.normalizePath(r.path):r.path),h.buildURLFromParts(s)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(e,"");t.length!==(t=t.replace(i,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=h},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"b",function(){return o});var r=function(){function s(){i(this,s)}return s.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},s.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},s.getID3Data=function(t,e){for(var n=e,i=0;s.isHeader(t,e);)i+=10,i+=s._readSize(t,e+6),s.isFooter(t,e+10)&&(i+=10),e+=i;if(0<i)return t.subarray(n,n+i)},s._readSize=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,(n|=(127&t[e+2])<<7)|127&t[e+3]},s.getTimeStamp=function(t){for(var e=s.getID3Frames(t),n=0;n<e.length;n++){var i=e[n];if(s.isTimeStampFrame(i))return s._readTimeStamp(i)}},s.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},s._getFrameData=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=s._readSize(t,4);return{type:e,size:n,data:t.subarray(10,10+n)}},s.getID3Frames=function(t){for(var e=0,n=[];s.isHeader(t,e);){for(var i=s._readSize(t,e+6),r=(e+=10)+i;e+8<r;){var o=s._getFrameData(t.subarray(e)),a=s._decodeFrame(o);a&&n.push(a),e+=o.size+10}s.isFooter(t,e)&&(e+=10)}return n},s._decodeFrame=function(t){return"PRIV"===t.type?s._decodePrivFrame(t):"T"===t.type[0]?s._decodeTextFrame(t):"W"===t.type[0]?s._decodeURLFrame(t):void 0},s._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=1&e[3],i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},s._decodePrivFrame=function(t){if(!(t.size<2)){var e=s._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}}},s._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,n=s._utf8ArrayToStr(t.data.subarray(e));e+=n.length+1;var i=s._utf8ArrayToStr(t.data.subarray(e));return{key:t.type,info:n,data:i}}var r=s._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:r}}},s._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,n=s._utf8ArrayToStr(t.data.subarray(e));e+=n.length+1;var i=s._utf8ArrayToStr(t.data.subarray(e));return{key:t.type,info:n,data:i}}var r=s._utf8ArrayToStr(t.data);return{key:t.type,data:r}},s._utf8ArrayToStr=function(t,e){for(var n=1<arguments.length&&void 0!==e&&e,i=t.length,r=void 0,o=void 0,a=void 0,s="",l=0;l<i;){if(0===(r=t[l++])&&n)return s;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(r);break;case 12:case 13:o=t[l++],s+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=t[l++],a=t[l++],s+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&a)<<0)}}return s},s}(),o=r._utf8ArrayToStr;e.a=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(4),o=n.n(r),a=n(16),s=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),l=function(){function e(){var t;i(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this._elementaryStreams=((t={})[e.ElementaryStreamTypes.AUDIO]=!1,t[e.ElementaryStreamTypes.VIDEO]=!1,t)}return e.prototype.addElementaryStream=function(t){this._elementaryStreams[t]=!0},e.prototype.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},e.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},e.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var n=t;return t&&t.method&&t.uri&&!t.iv&&((n=new a.a).method=t.method,n.baseuri=t.baseuri,n.reluri=t.reluri,n.iv=this.createInitializationVector(e)),n},s(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=o.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var t=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var n=this.lastByteRangeEndOffset;t[0]=n||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0],this._byteRange=t}return t}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),e}();e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return u}),n.d(e,"b",function(){return i});var s=n(3),l=n(1),u={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},i=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,l.a.BUFFER_APPENDED,l.a.FRAG_BUFFERED,l.a.FRAG_LOADED));return e.bufferPadding=.2,e.fragments=Object.create(null),e.timeRanges=Object.create(null),e.config=t.config,e}return a(i,n),i.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,s.a.prototype.destroy.call(this),n.prototype.destroy.call(this)},i.prototype.getBufferedFrag=function(i,r){var o=this.fragments,t=Object.keys(o).filter(function(t){var e=o[t];if(e.body.type!==r)return!1;if(!e.buffered)return!1;var n=e.body;return n.startPTS<=i&&i<=n.endPTS});if(0===t.length)return null;var e=t.pop();return o[e].body},i.prototype.detectEvictedFragments=function(r,o){var a=this,s=void 0,l=void 0;Object.keys(this.fragments).forEach(function(t){var e=a.fragments[t];if(!0===e.buffered){var n=e.range[r];if(n){s=n.time;for(var i=0;i<s.length;i++)if(l=s[i],!1===a.isTimeBuffered(l.startPTS,l.endPTS,o)){a.removeFragment(e.body);break}}}})},i.prototype.detectPartialFragments=function(n){var i=this,t=this.getFragmentKey(n),r=this.fragments[t];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach(function(t){if(!0===n.hasElementaryStream(t)){var e=i.timeRanges[t];r.range[t]=i.getBufferedTimes(n.startPTS,n.endPTS,e)}}))},i.prototype.getBufferedTimes=function(t,e,n){for(var i=[],r=void 0,o=void 0,a=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,o=n.end(s)+this.bufferPadding,r<=t&&e<=o){i.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))});break}if(t<o&&r<e)i.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))}),a=!0;else if(e<=r)break}return{time:i,partial:a}},i.prototype.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.sn},i.prototype.getPartialFragment=function(n){var i=this,r=void 0,o=void 0,a=void 0,s=null,l=0;return Object.keys(this.fragments).forEach(function(t){var e=i.fragments[t];i.isPartial(e)&&(o=e.body.startPTS-i.bufferPadding,a=e.body.endPTS+i.bufferPadding,o<=n&&n<=a&&(r=Math.min(n-o,a-n),l<=r&&(s=e.body,l=r)))}),s},i.prototype.getState=function(t){var e=this.getFragmentKey(t),n=this.fragments[e],i=u.NOT_LOADED;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?u.PARTIAL:u.OK:u.APPENDING),i},i.prototype.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},i.prototype.isTimeBuffered=function(t,e,n){for(var i=void 0,r=void 0,o=0;o<n.length;o++){if(i=n.start(o)-this.bufferPadding,r=n.end(o)+this.bufferPadding,i<=t&&e<=r)return!0;if(e<=i)return!1}return!1},i.prototype.onFragLoaded=function(t){var e=t.frag;if(!isNaN(e.sn)){var n=this.getFragmentKey(e),i={body:e,range:Object.create(null),buffered:!1};this.fragments[n]=i}},i.prototype.onBufferAppended=function(t){var n=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var e=n.timeRanges[t];n.detectEvictedFragments(t,e)})},i.prototype.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},i.prototype.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},i.prototype.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},i.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},i}(s.a)},function(t,e){"use strict";var n={search:function(t,e){for(var n=0,i=t.length-1,r=null,o=null;n<=i;){var a=e(o=t[r=(n+i)/2|0]);if(0<a)n=r+1;else{if(!(a<0))return o;i=r-1}}return null}};e.a=n},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r});var r=function(){function t(){i(this,t)}return t.isBuffered=function(t,e){try{if(t)for(var n=t.buffered,i=0;i<n.length;i++)if(e>=n.start(i)&&e<=n.end(i))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,n){try{if(t){var i=t.buffered,r=[],o=void 0;for(o=0;o<i.length;o++)r.push({start:i.start(o),end:i.end(o)});return this.bufferedInfo(r,e,n)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,n){var i=[],r=void 0,o=void 0,a=void 0,s=void 0,l=void 0;for(t.sort(function(t,e){return t.start-e.start||e.end-t.end}),l=0;l<t.length;l++){var u=i.length;if(u){var c=i[u-1].end;t[l].start-c<n?t[l].end>c&&(i[u-1].end=t[l].end):i.push(t[l])}else i.push(t[l])}for(r=l=0,o=a=e;l<i.length;l++){var h=i[l].start,d=i[l].end;if(h<=e+n&&e<d)o=h,r=(a=d)-e;else if(e+n<h){s=h;break}}return{len:r,start:o,end:a,nextStart:s}},t}()},function(t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function c(t){return"function"==typeof t}function e(t){return"number"==typeof t}function h(t){return"object"==typeof t&&null!==t}function d(t){return void 0===t}((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!e(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t,e,n){var i,r,o,a,s,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||h(this._events.error)&&!this._events.error.length)){if((i=e)instanceof Error)throw i;var u=new Error('Uncaught, unspecified "error" event. ('+i+")");throw u.context=i,u}if(d(r=this._events[t]))return!1;if(c(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,e);break;case 3:r.call(this,e,n);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(h(r))for(a=Array.prototype.slice.call(arguments,1),o=(l=r.slice()).length,s=0;s<o;s++)l[s].apply(this,a);return!0},i.prototype.addListener=function(t,e){var n;if(!c(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,c(e.listener)?e.listener:e),this._events[t]?h(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,h(this._events[t])&&!this._events[t].warned&&(n=d(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!c(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},i.prototype.removeListener=function(t,e){var n,i,r,o;if(!c(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=(n=this._events[t]).length,i=-1,n===e||c(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(h(n)){for(o=r;0<o--;)if(n[o]===e||n[o].listener&&n[o].listener===e){i=o;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(c(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?c(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(c(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=n(34),u=n(35),c=n(36),o=n(2),h=n(0),i=function(){function a(t,e,n){var i=(2<arguments.length&&void 0!==n?n:{}).removePKCS7Padding,r=void 0===i||i;if(s(this,a),this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=r)try{var o=crypto||self.crypto;this.subtle=o.subtle||o.webkitSubtle}catch(a){}this.disableWebCrypto=!this.subtle}return a.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},a.prototype.decrypt=function(e,n,i,r){var o=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(h.b.log("JS AES decrypt"),this.logEnabled=!1);var t=this.decryptor;t||(this.decryptor=t=new c.a),t.expandKey(n),r(t.decrypt(e,0,i,this.removePKCS7Padding))}else{this.logEnabled&&(h.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var a=this.subtle;this.key!==n&&(this.key=n,this.fastAesKey=new u.a(a,n)),this.fastAesKey.expandKey().then(function(t){new l.a(a,i).decrypt(e,t)["catch"](function(t){o.onWebCryptoError(t,e,n,i,r)}).then(function(t){r(t)})})["catch"](function(t){o.onWebCryptoError(t,e,n,i,r)})}},a.prototype.onWebCryptoError=function(t,e,n,i,r){this.config.enableSoftwareAES?(h.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,n,i,r)):(h.b.error("decrypting error : "+t.message),this.observer.trigger(Event.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},a.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},a}();e.a=i},function(t,e){"use strict";function n(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}e.a=n},function(t,e,n){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(o){function a(t){s(this,a);for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=l(this,o.call.apply(o,[this,t].concat(n)));return r._tickInterval=null,r._tickTimer=null,r._tickCallCount=0,r._boundTick=r.tick.bind(r),r}return i(a,o),a.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},a.prototype.hasInterval=function(){return!!this._tickInterval},a.prototype.hasNextTick=function(){return!!this._tickTimer},a.prototype.setInterval=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,t),!0)}),a.prototype.clearInterval=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),!(this._tickInterval=null))}),a.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),!(this._tickTimer=null))},a.prototype.tick=function(){1==++this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},a.prototype.doTick=function(){},a}(n(3).a);e.a=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var g=n(1),a=n(3),s=n(2),d=n(0),l=n(15),m=n(28),u=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),v={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},c={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},h=function(n){function p(t){i(this,p);var e=r(this,n.call(this,t,g.a.MANIFEST_LOADING,g.a.LEVEL_LOADING,g.a.AUDIO_TRACK_LOADING,g.a.SUBTITLE_TRACK_LOADING));return e.loaders={},e}return o(p,n),p.canHaveQualityLevels=function(t){return t!==v.AUDIO_TRACK&&t!==v.SUBTITLE_TRACK},p.mapContextToLevelType=function(t){switch(t.type){case v.AUDIO_TRACK:return c.AUDIO;case v.SUBTITLE_TRACK:return c.SUBTITLE;default:return c.MAIN}},p.getResponseUrl=function(t,e){var n=t.url;return void 0!==n&&0!==n.indexOf("data:")||(n=e.url),n},p.prototype.createInternalLoader=function(t){var e=this.hls.config,n=e.pLoader,i=e.loader,r=new(n||i)(e);return t.loader=r,this.loaders[t.type]=r},p.prototype.getInternalLoader=function(t){return this.loaders[t.type]},p.prototype.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},p.prototype.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},p.prototype.destroy=function(){this.destroyInternalLoaders(),n.prototype.destroy.call(this)},p.prototype.onManifestLoading=function(t){this.load(t.url,{type:v.MANIFEST})},p.prototype.onLevelLoading=function(t){this.load(t.url,{type:v.LEVEL,level:t.level,id:t.id})},p.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:v.AUDIO_TRACK,id:t.id})},p.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:v.SUBTITLE_TRACK,id:t.id})},p.prototype.load=function(t,e){var n=this.hls.config,i=this.getInternalLoader(e);if(i){var r=i.context;if(r&&r.url===t)return d.b.trace("playlist request ongoing"),!1;d.b.warn("aborting previous loader for type: "+e.type),i.abort()}var o=void 0,a=void 0,s=void 0,l=void 0;switch(e.type){case v.MANIFEST:o=n.manifestLoadingMaxRetry,a=n.manifestLoadingTimeOut,s=n.manifestLoadingRetryDelay,l=n.manifestLoadingMaxRetryTimeout;break;case v.LEVEL:o=0,a=n.levelLoadingTimeOut;break;default:o=n.levelLoadingMaxRetry,a=n.levelLoadingTimeOut,s=n.levelLoadingRetryDelay,l=n.levelLoadingMaxRetryTimeout,d.b.log("Playlist loader for "+e.type+" "+(e.level||e.id))}i=this.createInternalLoader(e),e.url=t,e.responseType=e.responseType||"";var u=void 0,c=void 0;return u={timeout:a,maxRetry:o,retryDelay:s,maxRetryDelay:l},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.load(e,u,c),!0},p.prototype.loadsuccess=function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:null;if(n.isSidxRequest)return this._handleSidxRequest(t,n),void this._handlePlaylistLoaded(t,e,n,r);this.resetInternalLoader(n.type);var o=t.data;e.tload=performance.now(),0===o.indexOf("#EXTM3U")?0<o.indexOf("#EXTINF:")||0<o.indexOf("#EXT-X-TARGETDURATION:")?this._handleTrackOrLevelPlaylist(t,e,n,r):this._handleMasterPlaylist(t,e,n,r):this._handleManifestParsingError(t,n,"no EXTM3U delimiter",r)},p.prototype.loaderror=function(t,e,n){var i=2<arguments.length&&void 0!==n?n:null;this._handleNetworkError(e,i)},p.prototype.loadtimeout=function(t,e,n){var i=2<arguments.length&&void 0!==n?n:null;this._handleNetworkError(e,i,!0)},p.prototype._handleMasterPlaylist=function(t,e,n,i){var r=this.hls,o=t.data,a=p.getResponseUrl(t,n),s=m.a.parseMasterPlaylist(o,a);if(s.length){var l=s.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),u=m.a.parseMasterPlaylistMedia(o,a,"AUDIO",l),c=m.a.parseMasterPlaylistMedia(o,a,"SUBTITLES");if(u.length){var h=!1;u.forEach(function(t){t.url||(h=!0)}),!1===h&&s[0].audioCodec&&!s[0].attrs.AUDIO&&(d.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),u.unshift({type:"main",name:"main"}))}r.trigger(g.a.MANIFEST_LOADED,{levels:s,audioTracks:u,subtitles:c,url:a,stats:e,networkDetails:i})}else this._handleManifestParsingError(t,n,"no level found in manifest",i)},p.prototype._handleTrackOrLevelPlaylist=function(t,e,n,i){var r=this.hls,o=n.id,a=n.level,s=n.type,l=p.getResponseUrl(t,n),u=isNaN(a)?isNaN(o)?0:o:a,c=p.mapContextToLevelType(n),h=m.a.parseLevelPlaylist(t.data,l,u,c);if(h.tload=e.tload,s===v.MANIFEST){var d={url:l,details:h};r.trigger(g.a.MANIFEST_LOADED,{levels:[d],audioTracks:[],url:l,stats:e,networkDetails:i})}if(e.tparsed=performance.now(),h.needSidxRanges){var f=h.initSegment.url;this.load(f,{isSidxRequest:!0,type:s,level:a,levelDetails:h,id:o,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=h,this._handlePlaylistLoaded(t,e,n,i)},p.prototype._handleSidxRequest=function(t,r){var e=l.a.parseSegmentIndex(new Uint8Array(t.data));e.references.forEach(function(t,e){var n=t.info,i=r.levelDetails.fragments[e];0===i.byteRange.length&&(i.rawByteRange=String(1+n.end-n.start)+"@"+String(n.start))}),r.levelDetails.initSegment.rawByteRange=String(e.moovEndOffset)+"@0"},p.prototype._handleManifestParsingError=function(t,e,n,i){this.hls.trigger(
g.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:n,networkDetails:i})},p.prototype._handleNetworkError=function(t,e,n){var i=2<arguments.length&&void 0!==n&&n,r=void 0,o=void 0,a=this.getInternalLoader(t);switch(t.type){case v.MANIFEST:r=i?s.a.MANIFEST_LOAD_TIMEOUT:s.a.MANIFEST_LOAD_ERROR,o=!0;break;case v.LEVEL:r=i?s.a.LEVEL_LOAD_TIMEOUT:s.a.LEVEL_LOAD_ERROR,o=!1;break;case v.AUDIO_TRACK:r=i?s.a.AUDIO_TRACK_LOAD_TIMEOUT:s.a.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}a&&(a.abort(),this.resetInternalLoader(t.type)),this.hls.trigger(g.a.ERROR,{type:s.b.NETWORK_ERROR,details:r,fatal:o,url:a.url,loader:a,context:t,networkDetails:e})},p.prototype._handlePlaylistLoaded=function(t,e,n,i){var r=n.type,o=n.level,a=n.id,s=n.levelDetails;if(s.targetduration)if(p.canHaveQualityLevels(n.type))this.hls.trigger(g.a.LEVEL_LOADED,{details:s,level:o||0,id:a||0,stats:e,networkDetails:i});else switch(r){case v.AUDIO_TRACK:this.hls.trigger(g.a.AUDIO_TRACK_LOADED,{details:s,id:a,stats:e,networkDetails:i});break;case v.SUBTITLE_TRACK:this.hls.trigger(g.a.SUBTITLE_TRACK_LOADED,{details:s,id:a,stats:e,networkDetails:i})}else this._handleManifestParsingError(t,n,"invalid target duration",i)},u(p,null,[{key:"ContextType",get:function(){return v}},{key:"LevelType",get:function(){return c}}]),p}(a.a);e.a=h},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=n(0),l=n(1),s=Math.pow(2,32)-1,r=function(){function g(t,e){i(this,g),this.observer=t,this.remuxer=e}return g.prototype.resetTimeStamp=function(t){this.initPTS=t},g.prototype.resetInitSegment=function(t,e,n,i){if(t&&t.byteLength){var r=this.initData=g.parseInitSegment(t);null==e&&(e="mp4a.40.5"),null==n&&(n="avc1.42e01e");var o={};r.audio&&r.video?o.audiovideo={container:"video/mp4",codec:e+","+n,initSegment:i?t:null}:(r.audio&&(o.audio={container:"audio/mp4",codec:e,initSegment:i?t:null}),r.video&&(o.video={container:"video/mp4",codec:n,initSegment:i?t:null})),this.observer.trigger(l.a.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else e&&(this.audioCodec=e),n&&(this.videoCodec=n)},g.probe=function(t){return 0<g.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length},g.bin2str=function(t){return String.fromCharCode.apply(null,t)},g.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<8|t[e+1];return n<0?65536+n:n},g.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n},g.writeUint32=function(t,e,n){t.data&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},g.findBox=function(t,e){var n=[],i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0;if(t.data?(s=t.start,o=t.end,t=t.data):(s=0,o=t.byteLength),!e.length)return null;for(i=s;i<o;)l=1<(r=g.readUint32(t,i))?i+r:o,g.bin2str(t.subarray(i+4,i+8))===e[0]&&(1===e.length?n.push({data:t,start:i+8,end:l}):(a=g.findBox({data:t,start:i+8,end:l},e.slice(1))).length&&(n=n.concat(a))),i=l;return n},g.parseSegmentIndex=function(t){var e=g.findBox(t,["moov"])[0],n=e?e.end:null,i=0,r=g.findBox(t,["sidx"]),o=void 0;if(!r||!r[0])return null;o=[];var a=(r=r[0]).data[0];i=0===a?8:16;var s=g.readUint32(r,i);i+=4,i+=0===a?8:16,i+=2;var l=r.end+0,u=g.readUint16(r,i);i+=2;for(var c=0;c<u;c++){var h=i,d=g.readUint32(r,h);h+=4;var f=2147483647&d;if(1==(2147483648&d)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var p=g.readUint32(r,h);h+=4,o.push({referenceSize:f,subsegmentDuration:p,info:{duration:p/s,start:l,end:l+f-1}}),l+=f,i=h+=4}return{earliestPresentationTime:0,timescale:s,version:a,referencesCount:u,references:o,moovEndOffset:n}},g.parseInitSegment=function(t){var h=[];return g.findBox(t,["moov","trak"]).forEach(function(t){var e=g.findBox(t,["tkhd"])[0];if(e){var n=e.data[e.start],i=0===n?12:20,r=g.readUint32(e,i),o=g.findBox(t,["mdia","mdhd"])[0];if(o){i=0===(n=o.data[o.start])?12:20;var a=g.readUint32(o,i),s=g.findBox(t,["mdia","hdlr"])[0];if(s){var l={soun:"audio",vide:"video"}[g.bin2str(s.data.subarray(s.start+8,s.start+12))];if(l){var u=g.findBox(t,["mdia","minf","stbl","stsd"]);if(u.length){u=u[0];var c=g.bin2str(u.data.subarray(u.start+12,u.start+16));d.b.log("MP4Demuxer:"+l+":"+c+" found")}h[r]={timescale:a,type:l},h[l]={timescale:a,id:r}}}}}}),h},g.getStartDTS=function(r,t){var e=void 0,n=void 0,i=void 0;return e=g.findBox(t,["moof","traf"]),n=[].concat.apply([],e.map(function(i){return g.findBox(i,["tfhd"]).map(function(t){var e=void 0,n=void 0;return e=g.readUint32(t,4),n=r[e].timescale||9e4,g.findBox(i,["tfdt"]).map(function(t){var e=void 0,n=void 0;return e=t.data[t.start],n=g.readUint32(t,4),1===e&&(n*=Math.pow(2,32),n+=g.readUint32(t,8)),n})[0]/n})})),i=Math.min.apply(null,n),isFinite(i)?i:0},g.offsetStartDTS=function(i,t,a){g.findBox(t,["moof","traf"]).map(function(n){return g.findBox(n,["tfhd"]).map(function(t){var e=g.readUint32(t,4),o=i[e].timescale||9e4;g.findBox(n,["tfdt"]).map(function(t){var e=t.data[t.start],n=g.readUint32(t,4);if(0===e)g.writeUint32(t,4,n-a*o);else{n*=Math.pow(2,32),n+=g.readUint32(t,8),n-=a*o,n=Math.max(n,0);var i=Math.floor(n/(s+1)),r=Math.floor(n%(s+1));g.writeUint32(t,4,i),g.writeUint32(t,8,r)}})})})},g.prototype.append=function(t,e,n,i){var r=this.initData;r||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),r=this.initData);var o=void 0,a=this.initPTS;if(void 0===a){var s=g.getStartDTS(r,t);this.initPTS=a=s-e,this.observer.trigger(l.a.INIT_PTS_FOUND,{initPTS:a})}g.offsetStartDTS(r,t,a),o=g.getStartDTS(r,t),this.remuxer.remux(r.audio,r.video,null,null,o,n,i,t)},g.prototype.destroy=function(){},g}();e.a=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(4),o=n.n(r),a=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),s=function(){function t(){i(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return a(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=o.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}();e.a=s},function(t,e,n){"use strict";function i(t,e){var n=o[e];return!!n&&!0===n[t.slice(0,4)]}function r(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});var o={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}}},function(t,e,n){"use strict";function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(10),c=n.n(i),r=n(33),h=n.n(r),d=n(1),f=n(19),v=n(0),p=n(2),o=n(12),g=Object(o.a)(),a=function(){function l(n,t){u(this,l),this.hls=n,this.id=t;var r=this.observer=new c.a,e=n.config;r.trigger=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];r.emit.apply(r,[t,t].concat(n))},r.off=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];r.removeListener.apply(r,[t].concat(n))};var i=function(t,e){(e=e||{}).frag=this.frag,e.id=this.id,n.trigger(t,e)}.bind(this);r.on(d.a.FRAG_DECRYPTED,i),r.on(d.a.FRAG_PARSING_INIT_SEGMENT,i),r.on(d.a.FRAG_PARSING_DATA,i),r.on(d.a.FRAG_PARSED,i),r.on(d.a.ERROR,i),r.on(d.a.FRAG_PARSING_METADATA,i),r.on(d.a.FRAG_PARSING_USERDATA,i),r.on(d.a.INIT_PTS_FOUND,i);var o={mp4:g.isTypeSupported("video/mp4"),mpeg:g.isTypeSupported("audio/mpeg"),mp3:g.isTypeSupported('audio/mp4; codecs="mp3"')},a=navigator.vendor;if(e.enableWorker&&"undefined"!=typeof Worker){v.b.log("demuxing in webworker");var s=void 0;try{s=this.w=h()(46),this.onwmsg=this.onWorkerMessage.bind(this),s.addEventListener("message",this.onwmsg),s.onerror=function(t){n.trigger(d.a.ERROR,{type:p.b.OTHER_ERROR,details:p.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},s.postMessage({cmd:"init",typeSupported:o,vendor:a,id:t,config:JSON.stringify(e)})}catch(l){v.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),s&&URL.revokeObjectURL(s.objectURL),this.demuxer=new f.a(r,o,e,a),this.w=void 0}}else this.demuxer=new f.a(r,o,e,a)}return l.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},l.prototype.push=function(t,e,n,i,r,o,a,s){var l=this.w,u=isNaN(r.startDTS)?r.start:r.startDTS,c=r.decryptdata,h=this.frag,d=!(h&&r.cc===h.cc),f=!(h&&r.level===h.level),p=h&&r.sn===h.sn+1,g=!f&&p;if(d&&v.b.log(this.id+":discontinuity detected"),f&&v.b.log(this.id+":switch detected"),this.frag=r,l)l.postMessage({cmd:"demux",data:t,decryptdata:c,initSegment:e,audioCodec:n,videoCodec:i,timeOffset:u,discontinuity:d,trackSwitch:f,contiguous:g,duration:o,accurateTimeOffset:a,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var m=this.demuxer;m&&m.push(t,c,e,n,i,u,d,f,g,o,a,s)}},l.prototype.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case d.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},l}();e.a=a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=n(1),A=n(2),g=n(11),x=n(37),C=n(15),_=n(38),k=n(41),R=n(42),L=n(45),i=function(){function r(t,e,n,i){o(this,r),this.observer=t,this.typeSupported=e,this.config=n,this.vendor=i}return r.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},r.prototype.push=function(t,n,i,r,o,a,s,l,u,c,h,d){if(0<t.byteLength&&null!=n&&null!=n.key&&"AES-128"===n.method){var e=this.decrypter;null==e&&(e=this.decrypter=new g.a(this.observer,this.config));var f=this,p=void 0;try{p=performance.now()}catch(t){p=Date.now()}e.decrypt(t,n.key.buffer,n.iv.buffer,function(t){var e=void 0;try{e=performance.now()}catch(t){e=Date.now()}f.observer.trigger(E.a.FRAG_DECRYPTED,{stats:{tstart:p,tdecrypt:e}}),f.pushDecrypted(new Uint8Array(t),n,new Uint8Array(i),r,o,a,s,l,u,c,h,d)})}else this.pushDecrypted(new Uint8Array(t),n,new Uint8Array(i),r,o,a,s,l,u,c,h,d)},r.prototype.pushDecrypted=function(t,e,n,i,r,o,a,s,l,u,c,h){var d=this.demuxer;if(!d||(a||s)&&!this.probe(t)){for(var f=this.observer,p=this.typeSupported,g=this.config,m=[{demux:_.a,remux:R.a},{demux:C.a,remux:L.a},{demux:x.a,remux:R.a},{demux:k.a,remux:R.a}],v=0,y=m.length;v<y;v++){var b=m[v],w=b.demux.probe;if(w(t)){var T=this.remuxer=new b.remux(f,g,p,this.vendor);d=new b.demux(f,T,g,p),this.probe=w;break}}if(!d)return void f.trigger(E.a.ERROR,{type:A.b.MEDIA_ERROR,details:A.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=d}var S=this.remuxer;(a||s)&&(d.resetInitSegment(n,i,r,u),S.resetInitSegment()),a&&(d.resetTimeStamp(h),S.resetTimeStamp(h)),"function"==typeof d.setDecryptData&&d.setDecryptData(e),d.append(t,o,l,c)},r}();e.a=i},function(t,e,n){"use strict";function a(t,e,n,i){var r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=navigator.userAgent.toLowerCase(),c=i,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return r=1+((192&e[n+2])>>>6),(o=(60&e[n+2])>>>2)>h.length-1?void t.trigger(Event.ERROR,{type:p.b.MEDIA_ERROR,details:p.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o}):(s=(1&e[n+2])<<2,s|=(192&e[n+3])>>>6,f.b.log("manifest codec:"+i+",ADTS data:type:"+r+",sampleingIndex:"+o+"["+h[o]+"Hz],channelConfig:"+s),/firefox/i.test(u)?6<=o?(r=5,l=new Array(4),a=o-3):(r=2,l=new Array(2),a=o):-1!==u.indexOf("android")?(r=2,l=new Array(2),a=o):(r=5,l=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&6<=o?a=o-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(6<=o&&1===s||/vivaldi/i.test(u))||!i&&1===s)&&(r=2,l=new Array(2)),a=o)),l[0]=r<<3,l[0]|=(14&o)>>1,l[1]|=(1&o)<<7,l[1]|=s<<3,5===r&&(l[1]|=(14&a)>>1,l[2]=(1&a)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:h[o],channelCount:s,codec:"mp4a.40."+r,manifestCodec:c})}function r(t,e){return 255===t[e]&&240==(246&t[e+1])}function l(t,e){return 1&t[e+1]?7:9}function u(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function i(t,e){return!!(e+1<t.length&&r(t,e))}function o(t,e){if(e+1<t.length&&r(t,e)){var n=l(t,e);e+5<t.length&&(n=u(t,e));var i=e+n;if(i===t.length||i+1<t.length&&r(t,i))return!0}return!1}function s(t,e,n,i,r){if(!t.samplerate){var o=a(e,n,i,r);t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,f.b.log("parsed codec:"+t.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}}function c(t){return 9216e4/t}function h(t,e,n,i,r){var o=void 0,a=void 0,s=t.length;if(o=l(t,e),a=u(t,e),0<(a-=o)&&e+o+a<=s)return{headerLength:o,frameLength:a,stamp:n+i*r}}function d(t,e,n,i,r){var o=h(e,n,i,r,c(t.samplerate));if(o){var a=o.stamp,s=o.headerLength,l=o.frameLength,u={unit:e.subarray(n+s,n+s+l),pts:a,dts:a};return t.samples.push(u),t.len+=l,{sample:u,length:l+s}}}e.d=i,e.e=o,e.c=s,e.b=c,e.a=d;var f=n(0),p=n(2)},function(t,e){"use strict";var g={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,n,i,r){if(!(n+24>e.length)){var o=this.parseHeader(e,n);if(o&&n+o.frameLength<=e.length){var a=i+r*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:e.subarray(n,n+o.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=o.channelCount,t.samplerate=o.sampleRate,t.samples.push(s),t.len+=o.frameLength,{sample:s,length:o.frameLength}}}},parseHeader:function(t,e){var n=t[e+1]>>3&3,i=t[e+1]>>1&3,r=t[e+2]>>4&15,o=t[e+2]>>2&3,a=t[e+2]>>1&1;if(1!==n&&0!==r&&15!==r&&3!==o){var s=3===n?3-i:3===i?3:4,l=1e3*g.BitratesMap[14*s+r-1],u=3===n?0:2===n?1:2,c=g.SamplingRateMap[3*u+o],h=t[e+3]>>6==3?1:2,d=g.SamplesCoefficients[n][i],f=g.BytesInSlot[i],p=8*d*f;return{sampleRate:c,channelCount:h,frameLength:parseInt(d*l/c+a,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var n=this.parseHeader(t,e),i=4;n&&n.frameLength&&(i=n.frameLength);var r=e+i;if(r===t.length||r+1<t.length&&this.isHeaderPattern(t,r))return!0}return!1}};e.a=g},function(t,e,n){"use strict";function f(t,e,n){var i=t[e],r=t[n],o=r.startPTS;isNaN(o)?r.start=e<n?i.start+i.duration:Math.max(i.start-r.duration,0):e<n?(i.duration=o-i.start,i.duration<0&&g.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(r.duration=i.start-o,r.duration<0&&g.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"))}function p(t,e,n,i,r,o){var a=n;if(!isNaN(e.startPTS)){var s=Math.abs(e.startPTS-n);isNaN(e.deltaPTS)?e.deltaPTS=s:e.deltaPTS=Math.max(s,e.deltaPTS),a=Math.max(n,e.startPTS),n=Math.min(n,e.startPTS),i=Math.max(i,e.endPTS),r=Math.min(r,e.startDTS),o=Math.max(o,e.endDTS)}var l=n-e.start;e.start=e.startPTS=n,e.maxStartPTS=a,e.endPTS=i,e.startDTS=r,e.endDTS=o,e.duration=i-n;var u=e.sn;if(!t||u<t.startSN||u>t.endSN)return 0;var c=void 0,h=void 0,d=void 0;for(c=u-t.startSN,(h=t.fragments)[c]=e,d=c;0<d;d--)f(h,d,d-1);for(d=c;d<h.length-1;d++)f(h,d,d+1);return t.PTSKnown=!0,l}function i(t,e){var n=Math.max(t.startSN,e.startSN)-e.startSN,i=Math.min(t.endSN,e.endSN)-e.startSN,r=e.startSN-t.startSN,o=t.fragments,a=e.fragments,s=0,l=void 0;if(e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment),i<n)e.PTSKnown=!1;else{for(var u=n;u<=i;u++){var c=o[r+u],h=a[u];h&&c&&(s=c.cc-h.cc,isNaN(c.startPTS)||(h.start=h.startPTS=c.startPTS,h.endPTS=c.endPTS,h.duration=c.duration,h.backtracked=c.backtracked,h.dropped=c.dropped,l=h))}if(s)for(g.b.log("discontinuity sliding from playlist, take drift into account"),u=0;u<a.length;u++)a[u].cc+=s;if(l)p(e,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS);else if(0<=r&&r<o.length){var d=o[r].start;for(u=0;u<a.length;u++)a[u].start+=d}e.PTSKnown=t.PTSKnown}}e.b=p,e.a=i;var g=n(0)},function(t,e){"use strict";var n={toString:function(t){for(var e="",n=t.length,i=0;i<n;i++)e+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return e}};e.a=n},function(t,e,n){"use strict";function o(t,e){for(var n=null,i=0;i<t.length;i+=1){var r=t[i];if(r&&r.cc===e){n=r;break}}return n}function i(t,e){return u.a.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}function a(t,e,n){var i=!1;return e&&e.details&&n&&(n.endCC>n.startCC||t&&t.cc<n.startCC)&&(i=!0),i}function s(t,e){var n=t.fragments,i=e.fragments;if(i.length&&n.length){var r=o(n,i[0].cc);return!r||r&&!r.startPTS?void c.b.log("No frag in previous level to align on"):r}c.b.log("No fragments to align")}function l(n,t){t.fragments.forEach(function(t){if(t){var e=t.start+n;t.start=t.startPTS=e,t.endPTS=e+t.duration}}),t.PTSKnown=!0}function r(t,e,n){if(a(t,e,n)){var i=s(e.details,n);i&&(c.b.log("Adjusting PTS using last level due to CC increase within current level"),l(i.start,n))}if(!1===n.PTSKnown&&e&&e.details&&e.details.fragments&&e.details.fragments.length){var r=e.details.programDateTime,o=(n.programDateTime-r)/1e3+e.details.fragments[0].start;isNaN(o)||(c.b.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),l(o,n))}}e.b=i,e.a=r;var u=n(8),c=n(0)},function(t,e){"use strict";function n(t,e){var n=null;try{n=new window.Event("addtrack")}catch(t){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function i(t){if(t&&t.cues)for(;0<t.cues.length;)t.removeCue(t.cues[0])}e.b=n,e.a=i},function(t,e,n){"use strict";function i(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new r,this.regionList=[]}function o(t){function e(t,e,n,i){return 3600*(0|t)+60*(0|e)+(0|n)+(0|i)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function s(){this.values=Object.create(null)}function l(t,e,n,i){var r=i?t.split(i):[t];for(var o in r)if("string"==typeof r[o]){var a=r[o].split(n);if(2===a.length)e(a[0],a[1])}}function u(e,t,a){function n(){var t=o(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(){e=e.replace(/^\s+/,"")}var r=e;if(i(),t.startTime=n(),i(),"-->"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);e=e.substr(3),i(),t.endTime=n(),i(),function(t,e){var o=new s;l(t,function(t,e){switch(t){case"region":for(var n=a.length-1;0<=n;n--)if(a[n].id===e){o.set(t,a[n].region);break}break;case"vertical":o.alt(t,e,["rl","lr"]);break;case"line":var i=e.split(","),r=i[0];o.integer(t,r),o.percent(t,r)&&o.set("snapToLines",!1),o.alt(t,r,["auto"]),2===i.length&&o.alt("lineAlign",i[1],["start",f,"end"]);break;case"position":i=e.split(","),o.percent(t,i[0]),2===i.length&&o.alt("positionAlign",i[1],["start",f,"end","line-left","line-right","auto"]);break;case"size":o.percent(t,e);break;case"align":o.alt(t,e,["start",f,"end","left","right"])}},/:/,/\s/),e.region=o.get("region",null),e.vertical=o.get("vertical","");var n=o.get("line","auto");"auto"===n&&-1===d.line&&(n=-1),e.line=n,e.lineAlign=o.get("lineAlign","start"),e.snapToLines=o.get("snapToLines",!0),e.size=o.get("size",100),e.align=o.get("align",f);var i=o.get("position","auto");"auto"===i&&50===d.position&&(i="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=i}(e,t)}function c(t){return t.replace(/<br(?: \/)?>/gi,"\n")}n.d(e,"b",function(){return c});var h=n(61),r=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};s.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var i=0;i<n.length;++i)if(e===n[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(e=parseFloat(e))&&e<=100)&&(this.set(t,e),!0)}};var d=new h.a(0,0,0),f="middle"===d.align?"middle":"center";i.prototype={parse:function(t){function e(){var t=i.buffer,e=0;for(t=c(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),n}var i=this;t&&(i.buffer+=i.decoder.decode(t,{stream:!0}));try{var n=void 0;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var r=(n=e()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var o=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(o?o=!1:n=e(),i.state){case"HEADER":/:/.test(n)?l(n,function(t,e){switch(t){case"Region":console.log("parse region",e)}},/:/):n||(i.state="ID");continue;case"NOTE":n||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){i.state="NOTE";break}if(!n)continue;if(i.cue=new h.a(0,0,""),i.state="CUE",-1===n.indexOf("-->")){i.cue.id=n;continue}case"CUE":try{u(n,i.cue,i.regionList)}catch(t){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var a=-1!==n.indexOf("-->");if(!n||a&&(o=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=n;continue;case"BADCUE":n||(i.state="ID");continue}}}catch(t){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}},e.a=i},function(t,e,n){"use strict";function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=n.n(i),o=n(2),A=n(14),x=n(30),C=n(31),_=n(7),k=n(32),R=n(47),L=n(48),a=n(49),D=n(0),s=n(50),l=n(1),u=n(10),P=n.n(u),c=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();n(70);var h=function(){function S(t){var e=this,n=0<arguments.length&&void 0!==t?t:{};E(this,S);var i=S.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in i)r in n||(n[r]=i[r]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(D.a)(n.debug),this.config=n,this._autoLevelCapping=-1;var o=this.observer=new P.a;o.trigger=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.emit.apply(o,[t,t].concat(n))},o.off=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.removeListener.apply(o,[t].concat(n))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var a=this.abrController=new n.abrController(this),s=new n.bufferController(this),l=new n.capLevelController(this),u=new n.fpsController(this),c=new A.a(this),h=new x.a(this),d=new C.a(this),f=new L.a(this),p=this.levelController=new R.a(this),g=new _.b(this),m=[p,this.streamController=new k.a(this,g)],v=n.audioStreamController;v&&m.push(new v(this,g)),this.networkControllers=m;var y=[c,h,d,a,s,l,u,f,g];if(v=n.audioTrackController){var b=new v(this);this.audioTrackController=b,y.push(b)}if(v=n.subtitleTrackController){var w=new v(this);this.subtitleTrackController=w,y.push(w)}if(v=n.emeController){var T=new v(this);this.emeController=T,y.push(T)}[n.subtitleStreamController,n.timelineController].forEach(function(t){t&&y.push(new t(e))}),this.coreComponents=y}return S.isSupported=function(){return Object(a.a)()},c(S,null,[{key:"version",get:function(){return"0.9.1"}},{key:"Events",get:function(){return l.a}},{key:"ErrorTypes",get:function(){return o.b}},{key:"ErrorDetails",get:function(){return o.a}},{key:"DefaultConfig",get:function(){return S.defaultConfig?S.defaultConfig:s.a},set:function(t){S.defaultConfig=t}}]),S.prototype.destroy=function(){D.b.log("destroy"),this.trigger(l.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},S.prototype.attachMedia=function(t){D.b.log("attachMedia"),this.media=t,this.trigger(l.a.MEDIA_ATTACHING,{media:t})},S.prototype.detachMedia=function(){D.b.log("detachMedia"),this.trigger(l.a.MEDIA_DETACHING),this.media=null},S.prototype.loadSource=function(t){t=r.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),D.b.log("loadSource:"+t),this.url=t,this.trigger(l.a.MANIFEST_LOADING,{url:t})},S.prototype.startLoad=function(t){var e=0<arguments.length&&void 0!==t?t:-1;D.b.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},S.prototype.stopLoad=function(){D.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},S.prototype.swapAudioCodec=function(){D.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},S.prototype.recoverMediaError=function(){D.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},c(S,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){D.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){D.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){D.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){D.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){D.b.log("set startLevel:"+t);var e=this;-1!==t&&(t=Math.max(t,e.minAutoLevel)),e.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){D.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this,e=t.levels,n=t.config.minAutoBitrate,i=e?e.length:0,r=0;r<i;r++)if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>n)return r;return 0}},{key:"maxAutoLevel",get:function(){var t=this,e=t.levels,n=t.autoLevelCapping;return-1===n&&e&&e.length?e.length-1:n}},{key:"nextAutoLevel",get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){var e=this;e.abrController.nextAutoLevel=Math.max(e.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),S}();e["default"]=h},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(4),o=n.n(r),_=n(6),k=n(16),R=n(29),L=n(0),s=n(17),l=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,d=/#EXT-X-MEDIA:(.*)/g,D=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),P=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,a=function(){function h(){i(this,h)}return h.findGroup=function(t,e){if(!t)return null;for(var n=null,i=0;i<t.length;i++){var r=t[i];r.id===e&&(n=r)}return n},h.convertAVC1ToAVCOTI=function(t){var e=void 0,n=t.split(".");return 2<n.length?(e=n.shift()+".",e+=parseInt(n.shift()).toString(16),e+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):e=t,e},h.resolve=function(t,e){return o.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},h.parseMasterPlaylist=function(t,e){var n=[],i=void 0;for(l.lastIndex=0;null!=(i=l.exec(t));){var r={},o=r.attrs=new R.a(i[1]);r.url=h.resolve(i[2],e);var a=o.decimalResolution("RESOLUTION");a&&(r.width=a.width,r.height=a.height),r.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),r.name=o.NAME,function(i,r){["video","audio"].forEach(function(e){var n=i.filter(function(t){return Object(s.b)(t,e)});if(n.length){var t=n.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});r[e+"Codec"]=0<t.length?t[0]:n[0],i=i.filter(function(t){return-1===n.indexOf(t)})}}),r.unknownCodecs=i}([].concat((o.CODECS||"").split(/[ ,]+/)),r),r.videoCodec&&-1!==r.videoCodec.indexOf("avc1")&&(r.videoCodec=h.convertAVC1ToAVCOTI(r.videoCodec)),n.push(r)}return n},h.parseMasterPlaylistMedia=function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:[],o=void 0,a=[],s=0;for(d.lastIndex=0;null!==(o=d.exec(t));){var l={},u=new R.a(o[1]);if(u.TYPE===n){if(l.groupId=u["GROUP-ID"],l.name=u.NAME,l.type=n,l["default"]="YES"===u.DEFAULT,l.autoselect="YES"===u.AUTOSELECT,l.forced="YES"===u.FORCED,u.URI&&(l.url=h.resolve(u.URI,e)),l.lang=u.LANGUAGE,l.name||(l.name=l.lang),r.length){var c=h.findGroup(r,l.groupId);l.audioCodec=c?c.codec:r[0].codec}l.id=s++,a.push(l)}}return a},h.parseLevelPlaylist=function(t,e,n,i){var r=0,o=0,a={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},
s=new k.a,l=0,u=null,c=new _.a,h=void 0,d=void 0;for(D.lastIndex=0;null!==(h=D.exec(t));){var f=h[1];if(f){c.duration=parseFloat(f);var p=(" "+h[2]).slice(1);c.title=p||null,c.tagList.push(p?["INF",f,p]:["INF",f])}else if(h[3]){if(!isNaN(c.duration)){var g=r++;c.type=i,c.start=o,c.levelkey=s,c.sn=g,c.level=n,c.cc=l,c.baseurl=e,c.relurl=(" "+h[3]).slice(1),a.programDateTime&&(u?c.rawProgramDateTime?c.pdt=Date.parse(c.rawProgramDateTime):c.pdt=u.pdt+1e3*u.duration:c.pdt=Date.parse(a.programDateTime),c.endPdt=c.pdt+1e3*c.duration),a.fragments.push(c),o+=(u=c).duration,c=new _.a}}else if(h[4]){if(c.rawByteRange=(" "+h[4]).slice(1),u){var m=u.byteRangeEndOffset;m&&(c.lastByteRangeEndOffset=m)}}else if(h[5])c.rawProgramDateTime=(" "+h[5]).slice(1),c.tagList.push(["PROGRAM-DATE-TIME",c.rawProgramDateTime]),void 0===a.programDateTime&&(a.programDateTime=new Date(new Date(Date.parse(h[5]))-1e3*o));else{for(h=h[0].match(P),d=1;d<h.length&&void 0===h[d];d++);var v=(" "+h[d+1]).slice(1),y=(" "+h[d+2]).slice(1);switch(h[d]){case"#":c.tagList.push(y?[v,y]:[v]);break;case"PLAYLIST-TYPE":a.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":r=a.startSN=parseInt(v);break;case"TARGETDURATION":a.targetduration=parseFloat(v);break;case"VERSION":a.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"DIS":l++,c.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":l=parseInt(v);break;case"KEY":var b=v,w=new R.a(b),T=w.enumeratedString("METHOD"),S=w.URI,E=w.hexadecimalInteger("IV");T&&(s=new k.a,S&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(T)&&(s.method=T,s.baseuri=e,s.reluri=S,s.key=null,s.iv=E));break;case"START":var A=v,x=new R.a(A).decimalFloatingPoint("TIME-OFFSET");isNaN(x)||(a.startTimeOffset=x);break;case"MAP":var C=new R.a(v);c.relurl=C.URI,c.rawByteRange=C.BYTERANGE,c.baseurl=e,c.level=n,c.type=i,c.sn="initSegment",a.initSegment=c,c=new _.a;break;default:L.b.warn("line parsed but not handled: "+h)}}}return(c=u)&&!c.relurl&&(a.fragments.pop(),o-=c.duration),a.totalduration=o,a.averagetargetduration=o/a.fragments.length,a.endSN=r-1,a.startCC=a.fragments[0]?a.fragments[0].cc:0,a.endCC=l,!a.initSegment&&a.fragments.length&&a.fragments.every(function(t){return t.relurl.endsWith(".mp4")})&&(L.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(c=new _.a).relurl=a.fragments[0].relurl,c.baseurl=e,c.level=n,c.type=i,c.sn="initSegment",a.initSegment=c,a.needSidxRanges=!0),a},h}();e.a=a},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,n=function(){function n(t){for(var e in i(this,n),"string"==typeof t&&(t=n.parseAttrList(t)),t)t.hasOwnProperty(e)&&(this[e]=t[e])}return n.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},n.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)n[i]=parseInt(e.slice(2*i,2*i+2),16);return n}return null},n.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},n.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},n.prototype.enumeratedString=function(t){return this[t]},n.prototype.decimalResolution=function(t){var e=r.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},n.parseAttrList=function(t){var e=void 0,n={};for(o.lastIndex=0;null!==(e=o.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[e[1]]=i}return n},n}();e.a=n},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),i=n(3),l=n(2),f=n(0),u=function(i){function n(t){r(this,n);var e=o(this,i.call(this,t,s.a.FRAG_LOADING));return e.loaders={},e}return a(n,i),n.prototype.destroy=function(){var t=this.loaders;for(var e in t){var n=t[e];n&&n.destroy()}this.loaders={},i.prototype.destroy.call(this)},n.prototype.onFragLoading=function(t){var e=t.frag,n=e.type,i=this.loaders,r=this.hls.config,o=r.fLoader,a=r.loader;e.loaded=0;var s=i[n];s&&(f.b.warn("abort previous fragment loader for type: "+n),s.abort()),s=i[n]=e.loader=r.fLoader?new o(r):new a(r);var l=void 0,u=void 0,c=void 0;l={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var h=e.byteRangeStartOffset,d=e.byteRangeEndOffset;isNaN(h)||isNaN(d)||(l.rangeStart=h,l.rangeEnd=d),u={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},s.load(l,u,c)},n.prototype.loadsuccess=function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:null,o=t.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(s.a.FRAG_LOADED,{payload:o,frag:a,stats:e,networkDetails:r})},n.prototype.loaderror=function(t,e,n){var i=2<arguments.length&&void 0!==n?n:null,r=e.loader;r&&r.abort(),this.loaders[e.type]=void 0,this.hls.trigger(s.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:i})},n.prototype.loadtimeout=function(t,e,n){var i=2<arguments.length&&void 0!==n?n:null,r=e.loader;r&&r.abort(),this.loaders[e.type]=void 0,this.hls.trigger(s.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:i})},n.prototype.loadprogress=function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:null,o=e.frag;o.loaded=t.loaded,this.hls.trigger(s.a.FRAG_LOAD_PROGRESS,{frag:o,stats:t,networkDetails:r})},n}(i.a);e.a=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=n(1),s=n(3),l=n(2),h=n(0),i=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,c.a.KEY_LOADING));return e.loaders={},e.decryptkey=null,e.decrypturl=null,e}return a(i,n),i.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},s.a.prototype.destroy.call(this)},i.prototype.onKeyLoading=function(t){var e=t.frag,n=e.type,i=this.loaders[n],r=e.decryptdata,o=r.uri;if(o!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;i&&(h.b.warn("abort previous key loader for type:"+n),i.abort()),e.loader=this.loaders[n]=new a.loader(a),this.decrypturl=o,this.decryptkey=null;var s=void 0,l=void 0,u=void 0;s={url:o,frag:e,responseType:"arraybuffer"},l={timeout:a.fragLoadingTimeOut,maxRetry:a.fragLoadingMaxRetry,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(s,l,u)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(c.a.KEY_LOADED,{frag:e}))},i.prototype.loadsuccess=function(t,e,n){var i=n.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(c.a.KEY_LOADED,{frag:i})},i.prototype.loaderror=function(t,e){var n=e.frag,i=n.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(c.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},i.prototype.loadtimeout=function(t,e){var n=e.frag,i=n.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(c.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},i}(s.a);e.a=i},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=n(8),f=n(9),g=n(18),m=n(1),l=n(7),u=n(6),c=n(14),h=n(22),d=n(23),v=n(2),y=n(0),b=n(24),i=n(13),w=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),T={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},r=function(i){function r(t,e){o(this,r);var n=a(this,i.call(this,t,m.a.MEDIA_ATTACHED,m.a.MEDIA_DETACHING,m.a.MANIFEST_LOADING,m.a.MANIFEST_PARSED,m.a.LEVEL_LOADED,m.a.KEY_LOADED,m.a.FRAG_LOADED,m.a.FRAG_LOAD_EMERGENCY_ABORTED,m.a.FRAG_PARSING_INIT_SEGMENT,m.a.FRAG_PARSING_DATA,m.a.FRAG_PARSED,m.a.ERROR,m.a.AUDIO_TRACK_SWITCHING,m.a.AUDIO_TRACK_SWITCHED,m.a.BUFFER_CREATED,m.a.BUFFER_APPENDED,m.a.BUFFER_FLUSHED));return n.fragmentTracker=e,n.config=t.config,n.audioCodecSwap=!1,n._state=T.STOPPED,n.stallReported=!1,n}return s(r,i),r.prototype.onHandlerDestroying=function(){this.stopLoad()},r.prototype.onHandlerDestroyed=function(){this.state=T.STOPPED,this.fragmentTracker=null},r.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}0<e&&-1===t&&(y.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=T.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=T.STOPPED},r.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=T.STOPPED,this.forceStartLoad=!1},r.prototype.doTick=function(){switch(this.state){case T.BUFFER_FLUSHING:this.fragLoadError=0;break;case T.IDLE:this._doTickIdle();break;case T.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=T.IDLE);break;case T.FRAG_LOADING_WAITING_RETRY:var e=performance.now(),n=this.retryDate;(!n||n<=e||this.media&&this.media.seeking)&&(y.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=T.IDLE);break;case T.ERROR:case T.STOPPED:case T.FRAG_LOADING:case T.PARSING:case T.PARSED:case T.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},r.prototype._doTickIdle=function(){var t=this.hls,e=t.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&e.startFragPrefetch)){var i=void 0;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=t.nextLoadLevel,o=this.levels[r];if(o){var a=o.bitrate,s=void 0;s=a?Math.max(8*e.maxBufferSize/a,e.maxBufferLength):e.maxBufferLength,s=Math.min(s,e.maxMaxBufferLength);var l=f.a.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,e.maxBufferHole),u=l.len;if(!(s<=u)){y.b.trace("buffer length of "+u.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=r;var c=o.details;if(void 0===c||!0===c.live&&this.levelLastLoaded!==r)return void(this.state=T.WAITING_LEVEL);var h=this.fragPrevious;if(!c.live&&h&&!h.backtracked&&h.sn===c.endSN&&!l.nextStart&&Math.min(n.duration,h.start+h.duration)-Math.max(l.end,h.start)<=Math.max(.2,h.duration)){var d={};return this.altAudio&&(d.type="video"),this.hls.trigger(m.a.BUFFER_EOS,d),void(this.state=T.ENDED)}this._fetchPayloadOrEos(i,l,c)}}}},r.prototype._fetchPayloadOrEos=function(t,e,n){var i=this.fragPrevious,r=this.level,o=n.fragments,a=o.length;if(0!==a){var s=o[0].start,l=o[a-1].start+o[a-1].duration,u=e.end,c=void 0;if(n.initSegment&&!n.initSegment.data)c=n.initSegment;else if(n.live){var h=this.config.initialLiveManifestSize;if(a<h)return void y.b.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+h);if(null===(c=this._ensureFragmentAtLivePoint(n,u,s,l,i,o,a)))return}else u<s&&(c=o[0]);c||(c=this._findFragment(s,i,a,o,u,l,n)),c&&this._loadFragmentOrKey(c,r,n,t,u)}},r.prototype._ensureFragmentAtLivePoint=function(t,e,n,i,r,o,a){var s=this.hls.config,l=this.media,u=void 0,c=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(n-s.maxFragLookUpTolerance,i-c)){var h=this.liveSyncPosition=this.computeLivePosition(n,t);y.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),e=h,l&&l.readyState&&l.duration>h&&(l.currentTime=h),this.nextLoadPosition=h}if(t.PTSKnown&&i<e&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(r)if(t.programDateTime)u=this._findFragmentByPDT(o,r.endPdt+1);else{var d=r.sn+1;if(d>=t.startSN&&d<=t.endSN){var f=o[d-t.startSN];r.cc===f.cc&&(u=f,y.b.log("live playlist, switching playlist, load frag with next SN: "+u.sn))}u||(u=p.a.search(o,function(t){return r.cc-t.cc}))&&y.b.log("live playlist, switching playlist, load frag with same CC: "+u.sn)}u||(u=o[Math.min(a-1,Math.round(a/2))],y.b.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u},r.prototype._findFragmentByPDT=function(t,e){if(!t||void 0===e)return null;if(e<t[0].pdt)return null;if(e>=t[t.length-1].endPdt)return null;for(var n=0;n<t.length;++n){var i=t[n];if(e<i.endPdt)return i}return null},r.prototype._findFragmentBySN=function(t,e,n,i){var r=void 0,o=this.hls.config.maxFragLookUpTolerance,a=t?e[t.sn-e[0].sn+1]:void 0,s=function(t){var e=Math.min(o,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-e<=n?1:t.start-e>n&&t.start?-1:0};return n<i&&(i-o<n&&(o=0),r=a&&!s(a)?a:p.a.search(e,s)),r},r.prototype._findFragment=function(t,e,n,i,r,o,a){var s=this.hls.config,l=void 0,u=void 0;if(u=r<o?a.programDateTime?this._findFragmentByPDT(i,1e3*r+(a.programDateTime?Date.parse(a.programDateTime):0)-1e3*t):this._findFragmentBySN(e,i,r,o):i[n-1]){var c=(l=u).sn-a.startSN,h=e&&l.level===e.level,d=i[c-1],f=i[c+1];if(e&&l.sn===e.sn)if(h&&!l.backtracked)if(l.sn<a.endSN){var p=e.deltaPTS;p&&p>s.maxBufferHole&&e.dropped&&c?(l=d,y.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(l=f,y.b.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(f&&f.backtracked?(y.b.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+f.sn),l=f):(y.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,d?(l=d).backtracked=!0:c&&(l=null)))}return l},r.prototype._loadFragmentOrKey=function(t,e,n,i,r){if(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key)y.b.log("Loading key for "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e),this.state=T.KEY_LOADING,this.hls.trigger(m.a.KEY_LOADING,{frag:t});else{y.b.log("Loading "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e+", currentTime:"+i.toFixed(3)+",bufferEnd:"+r.toFixed(3));var o=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,isNaN(t.sn)||t.bitrateTest||(this.nextLoadPosition=t.start+t.duration),t.backtracked||o===l.a.NOT_LOADED?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(m.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new g.a(this.hls,"main")),this.state=T.FRAG_LOADING):o===l.a.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)}},r.prototype.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,c.a.LevelType.MAIN)},r.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},r.prototype._checkFragmentChanged=function(){var t=void 0,e=void 0,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((e=n.currentTime)>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),f.a.isBuffered(n,e)?t=this.getBufferedFrag(e):f.a.isBuffered(n,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var i=t;if(i!==this.fragPlaying){this.hls.trigger(m.a.FRAG_CHANGED,{frag:i});var r=i.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(m.a.LEVEL_SWITCHED,{level:r}),this.fragPlaying=i}}},r.prototype.immediateLevelSwitch=function(){if(y.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},r.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,f.a.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},r.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e=void 0,n=void 0,i=void 0;if((n=this.getBufferedFrag(t.currentTime))&&1<n.startPTS&&this.flushMainBuffer(0,n.startPTS-1),t.paused)e=0;else{var r=this.hls.nextLoadLevel,o=this.levels[r],a=this.fragLastKbps;e=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if((i=this.getBufferedFrag(t.currentTime+e))&&(i=this.followingBufferedFrag(i))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},r.prototype.flushMainBuffer=function(t,e){this.state=T.BUFFER_FLUSHING;var n={startOffset:t,endOffset:e};this.altAudio&&(n.type="video"),this.hls.trigger(m.a.BUFFER_FLUSHING,n)},r.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)},r.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(y.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,n=this.config;isNaN(e)||y.b.log("media seeking to "+e.toFixed(3));var i=this.mediaBuffer?this.mediaBuffer:t,r=f.a.bufferInfo(i,e,this.config.maxBufferHole);if(this.state===T.FRAG_LOADING){var o=this.fragCurrent;if(0===r.len&&o){var a=n.maxFragLookUpTolerance,s=o.start-a,l=o.start+o.duration+a;e<s||l<e?(o.loader&&(y.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=T.IDLE):y.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===T.ENDED&&(0===r.len&&(this.fragPrevious=0),this.state=T.IDLE);t&&(this.lastCurrentTime=e),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},r.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;isNaN(e)||y.b.log("media seeked to "+e.toFixed(3)),this.tick()},r.prototype.onMediaEnded=function(){y.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},r.prototype.onManifestLoading=function(){y.b.log("trigger BUFFER_RESET"),this.hls.trigger(m.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.prototype.onManifestParsed=function(t){var e=!1,n=!1,i=void 0;t.levels.forEach(function(t){(i=t.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(e=!0),-1!==i.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=e&&n,this.audioCodecSwitch&&y.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},r.prototype.onLevelLoaded=function(t){var e=t.details,n=t.level,i=this.levels[this.levelLastLoaded],r=this.levels[n],o=e.totalduration,a=0;if(y.b.log("level "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+o),e.live){var s=r.details;s&&0<e.fragments.length?(h.a(s,e),a=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,s),e.PTSKnown&&!isNaN(a)?y.b.log("live playlist sliding:"+a.toFixed(3)):(y.b.log("live playlist - outdated PTS, unknown sliding"),Object(b.a)(this.fragPrevious,i,e))):(y.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,Object(b.a)(this.fragPrevious,i,e))}else e.PTSKnown=!1;if(r.details=e,this.levelLastLoaded=n,this.hls.trigger(m.a.LEVEL_UPDATED,{details:e,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=e.startTimeOffset;isNaN(l)?e.live?(this.startPosition=this.computeLivePosition(a,e),y.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(l<0&&(y.b.log("negative start time offset "+l+", count from end of last fragment"),l=a+o+l),y.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===T.WAITING_LEVEL&&(this.state=T.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===T.KEY_LOADING&&(this.state=T.IDLE,this.tick())},r.prototype.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===T.FRAG_LOADING&&e&&"main"===n.type&&n.level===e.level&&n.sn===e.sn){var i=t.stats,r=this.levels[e.level],o=r.details;if(y.b.log("Loaded  "+e.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+e.level),this.bitrateTest=!1,this.stats=i,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state=T.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(m.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=T.IDLE,i.tparsed=i.tbuffered=performance.now(),o.initSegment.data=t.payload,this.hls.trigger(m.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.tick();else{this.state=T.PARSING;var a=o.totalduration,s=e.level,l=e.sn,u=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(y.b.log("swapping playlist audio codec"),void 0===u&&(u=this.lastAudioCodec),u&&(u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,y.b.log("Parsing "+l+" of ["+o.startSN+" ,"+o.endSN+"],level "+s+", cc "+e.cc);var c=this.demuxer;c||(c=this.demuxer=new g.a(this.hls,"main"));var h=this.media,d=!(h&&h.seeking)&&(o.PTSKnown||!o.live),f=o.initSegment?o.initSegment.data:[];c.push(t.payload,f,u,r.videoCodec,e,a,d,void 0)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===T.PARSING){var i=t.tracks,r=void 0,o=void 0;if(i.audio&&this.altAudio&&delete i.audio,o=i.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(y.b.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==o.container&&(a="mp4a.40.2",y.b.log("Android: force audio codec to "+a)),o.levelCodec=a,o.id=t.id}for(r in(o=i.video)&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=t.id),this.hls.trigger(m.a.BUFFER_CODECS,i),i){o=i[r],y.b.log("main track:"+r+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var l=o.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(m.a.BUFFER_APPENDING,{type:r,data:l,parent:"main",content:"initSegment"}))}this.tick()}},r.prototype.onFragParsingData=function(e){var n=this,t=this.fragCurrent,i=e.frag;if(t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&("audio"!==e.type||!this.altAudio)&&this.state===T.PARSING){var r=this.levels[this.level],o=t;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+t.duration,e.endDTS=e.startDTS+t.duration),!0===e.hasAudio&&o.addElementaryStream(u.a.ElementaryStreamTypes.AUDIO),!0===e.hasVideo&&o.addElementaryStream(u.a.ElementaryStreamTypes.VIDEO),y.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(o.dropped=e.dropped,o.dropped)if(o.backtracked)y.b.warn("Already backtracked on this fragment, appending with the gap");else{var a=r.details;if(!a||o.sn!==a.startSN)return y.b.warn("missing video frame(s), backtracking fragment"),this.fragmentTracker.removeFragment(o),o.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=T.IDLE,this.fragPrevious=o,void this.tick();y.b.warn("missing video frame(s) on first frag, appending with gap")}else o.backtracked=!1;var s=h.b(r.details,o,e.startPTS,e.endPTS,e.startDTS,e.endDTS),l=this.hls;l.trigger(m.a.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(t){t&&t.length&&n.state===T.PARSING&&(n.appended=!0,n.pendingBuffering=!0,l.trigger(m.a.BUFFER_APPENDING,{type:e.type,data:t,parent:"main",content:"data"}))}),this.tick()}},r.prototype.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===T.PARSING&&(this.stats.tparsed=performance.now(),this.state=T.PARSED,this._checkAppendedParsed())},r.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,n=t.id;if(!e){if(this.mediaBuffer!==this.media){y.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(y.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=T.IDLE}var r=this.hls;r.trigger(m.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),r.trigger(m.a.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},r.prototype.onAudioTrackSwitched=function(t){var e=t.id,n=!!this.hls.audioTracks[e].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(y.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},r.prototype.onBufferCreated=function(t){var e=t.tracks,n=void 0,i=void 0,r=!1;for(var o in e){var a=e[o];"main"===a.id?(n=a,"video"===(i=o)&&(this.videoBuffer=e[o].buffer)):r=!0}r&&n?(y.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},r.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==T.PARSING&&e!==T.PARSED||(this.pendingBuffering=0<t.pending,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==T.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;y.b.log("main buffered : "+d.a.toString(e.buffered)),this.fragPrevious=t;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(m.a.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=T.IDLE}this.tick()}},r.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var n=!!this.media&&f.a.isBuffered(this.media,this.media.currentTime)&&f.a.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:case v.a.KEY_LOAD_ERROR:case v.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);y.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=T.FRAG_LOADING_WAITING_RETRY}else y.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=T.ERROR;break;case v.a.LEVEL_LOAD_ERROR:case v.a.LEVEL_LOAD_TIMEOUT:this.state!==T.ERROR&&(t.fatal?(this.state=T.ERROR,y.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==T.WAITING_LEVEL||(this.state=T.IDLE));break;case v.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==T.PARSING&&this.state!==T.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=T.IDLE):(y.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},r.prototype._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,y.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},r.prototype._checkBuffer=function(){var t=this.config,e=this.media;if(e&&0!==e.readyState){var n=e.currentTime,i=(this.mediaBuffer?this.mediaBuffer:e).buffered;if(!this.loadedmetadata&&i.length)this.loadedmetadata=!0,this._seekToStartPos();else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var r=!(e.paused&&1<e.readyState||e.ended||0===e.buffered.length),o=performance.now();if(n!==this.lastCurrentTime)this.stallReported&&(y.b.warn("playback not stuck anymore @"+n+", after "+Math.round(o-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0;else if(r){if(!this.stalled)return void(this.stalled=o);var a=f.a.bufferInfo(e,n,t.maxBufferHole),s=o-this.stalled;this._tryFixBufferStall(a,s)}}}},r.prototype.onFragLoadEmergencyAborted=function(){this.state=T.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(u.a.ElementaryStreamTypes.VIDEO,t.buffered),this.state=T.IDLE,this.fragPrevious=null},r.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.prototype.computeLivePosition=function(t,e){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-n)},r.prototype._tryFixBufferStall=function(t,e){var n=this.config,i=this.media.currentTime;this._reportStall(t.len);var r=this.fragmentTracker.getPartialFragment(i);r&&this._trySkipBufferHole(r),.5<t.len&&e>1e3*n.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},r.prototype._reportStall=function(t){var e=this.hls,n=this.media;this.stallReported||(
this.stallReported=!0,y.b.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),e.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},r.prototype._trySkipBufferHole=function(t){for(var e=this.hls,n=this.media,i=n.currentTime,r=0,o=0;o<n.buffered.length;o++){var a=n.buffered.start(o);if(r<=i&&i<a)return n.currentTime=Math.max(a,n.currentTime+.1),y.b.warn("skipping hole, adjusting currentTime from "+i+" to "+n.currentTime),this.stalled=null,void e.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+n.currentTime,frag:t});r=n.buffered.end(o)}},r.prototype._tryNudgeBuffer=function(){var t=this.config,e=this.hls,n=this.media,i=n.currentTime,r=(this.nudgeRetry||0)+1;if((this.nudgeRetry=r)<t.nudgeMaxRetry){var o=i+r*t.nudgeOffset;y.b.log("adjust currentTime from "+i+" to "+o),n.currentTime=o,e.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else y.b.error("still stuck in high buffer @"+i+" after "+t.nudgeMaxRetry+", raise fatal error"),e.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!0})},r.prototype._seekToStartPos=function(){var t=this.media,e=t.currentTime,n=t.seeking?e:this.startPosition;e!==n&&(y.b.log("target start position not buffered, seek to buffered.start(0) "+n+" from current time "+e+" "),t.currentTime=n)},w(r,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,y.b.log("main stream:"+e+"->"+t),this.hls.trigger(m.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),r}(i.a);e.a=r},function(t,e,u){function l(n){function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var r={};i.m=n,i.c=r,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var t=i(i.s=ENTRY_MODULE);return t["default"]||t}function c(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function d(t,e,n){var i={};i[n]=[];var r=e.toString(),o=r.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return i;for(var a,s=o[1],l=new RegExp("(\\\\n|\\W)"+c(s)+g,"g");a=l.exec(r);)"dll-reference"!==a[3]&&i[n].push(a[3]);for(l=new RegExp("\\("+c(s)+'\\("(dll-reference\\s('+p+'))"\\)\\)'+g,"g");a=l.exec(r);)t[a[2]]||(i[n].push(a[1]),t[a[2]]=u(a[1]).m),i[a[2]]=i[a[2]]||[],i[a[2]].push(a[4]);return i}function f(n){return Object.keys(n).reduce(function(t,e){return t||0<n[e].length},!1)}function h(t,e){for(var n={main:[e]},i={main:[]},r={main:{}};f(n);)for(var o=Object.keys(n),a=0;a<o.length;a++){var s=o[a],l=n[s].pop();if(r[s]=r[s]||{},!r[s][l]&&t[s][l]){r[s][l]=!0,i[s]=i[s]||[],i[s].push(l);for(var u=d(t,t[s][l],s),c=Object.keys(u),h=0;h<c.length;h++)n[c[h]]=n[c[h]]||[],n[c[h]]=n[c[h]].concat(u[c[h]])}}return i}var p="[\\.|\\-|\\+|\\w|/|@]+",g="\\((/\\*.*?\\*/)?s?.*?("+p+").*?\\)";t.exports=function(t,e){e=e||{};var n={main:u.m},i=e.all?{main:Object.keys(n)}:h(n,t),r="";Object.keys(i).filter(function(t){return"main"!==t}).forEach(function(e){for(var t=0;i[e][t];)t++;i[e].push(t),n[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",r=r+"var "+e+" = ("+l.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map(function(t){return JSON.stringify(t)+": "+n[e][t].toString()}).join(",")+"});\n"}),r=r+"("+l.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i.main.map(function(t){return JSON.stringify(t)+": "+n.main[t].toString()}).join(",")+"})(self);";var o=new window.Blob([r],{type:"text/javascript"});if(e.bare)return o;var a=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(o),s=new window.Worker(a);return s.objectURL=a,s}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(t,e){i(this,n),this.subtle=t,this.aesIV=e}return n.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},n}();e.a=n},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(t,e){i(this,n),this.subtle=t,this.key=e}return n.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},n}();e.a=n},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t){var e=t.byteLength,n=e&&new DataView(t).getUint8(e-1);return n?t.slice(0,e-n):t}var i=function(){function t(){n(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),i=0;i<4;i++)n[i]=e.getUint32(4*i);return n},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,i=n[0],r=n[1],o=n[2],a=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],h=s[3],d=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)d[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99;var v=d[e[t[f]=m]=f],y=d[v],b=d[y],w=257*d[m]^16843008*m;i[f]=w<<24|w>>>8,r[f]=w<<16|w>>>16,o[f]=w<<8|w>>>24,a[f]=w,w=16843009*b^65537*y^257*v^16843008*f,l[m]=w<<24|w>>>8,u[m]=w<<16|w>>>16,c[m]=w<<8|w>>>24,h[m]=w,f?(f=v^d[d[d[b^v]]],p^=d[d[p]]):f=p=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,i=0;i<e.length&&n;)n=e[i]===this.key[i],i++;if(!n){this.key=e;var r=this.keySize=e.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var o=this.ksRows=4*(r+6+1),a=void 0,s=void 0,l=this.keySchedule=new Uint32Array(o),u=this.invKeySchedule=new Uint32Array(o),c=this.sBox,h=this.rcon,d=this.invSubMix,f=d[0],p=d[1],g=d[2],m=d[3],v=void 0,y=void 0;for(a=0;a<o;a++)a<r?v=l[a]=e[a]:(y=v,a%r==0?(y=c[(y=y<<8|y>>>24)>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=h[a/r|0]<<24):6<r&&a%r==4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),l[a]=v=(l[a-r]^y)>>>0);for(s=0;s<o;s++)a=o-s,y=3&s?l[a]:l[a-4],u[s]=s<4||a<=4?y:f[c[y>>>24]]^p[c[y>>>16&255]]^g[c[y>>>8&255]]^m[c[255&y]],u[s]=u[s]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,n,i){for(var r=this.keySize+6,o=this.invKeySchedule,a=this.invSBox,s=this.invSubMix,l=s[0],u=s[1],c=s[2],h=s[3],d=this.uint8ArrayToUint32Array_(n),f=d[0],p=d[1],g=d[2],m=d[3],v=new Int32Array(t),y=new Int32Array(v.length),b=void 0,w=void 0,T=void 0,S=void 0,E=void 0,A=void 0,x=void 0,C=void 0,_=void 0,k=void 0,R=void 0,L=void 0,D=void 0,P=void 0,I=this.networkToHostOrderSwap;e<v.length;){for(_=I(v[e]),k=I(v[e+1]),R=I(v[e+2]),L=I(v[e+3]),E=_^o[0],A=L^o[1],x=R^o[2],C=k^o[3],D=4,P=1;P<r;P++)b=l[E>>>24]^u[A>>16&255]^c[x>>8&255]^h[255&C]^o[D],w=l[A>>>24]^u[x>>16&255]^c[C>>8&255]^h[255&E]^o[D+1],T=l[x>>>24]^u[C>>16&255]^c[E>>8&255]^h[255&A]^o[D+2],S=l[C>>>24]^u[E>>16&255]^c[A>>8&255]^h[255&x]^o[D+3],E=b,A=w,x=T,C=S,D+=4;b=a[E>>>24]<<24^a[A>>16&255]<<16^a[x>>8&255]<<8^a[255&C]^o[D],w=a[A>>>24]<<24^a[x>>16&255]<<16^a[C>>8&255]<<8^a[255&E]^o[D+1],T=a[x>>>24]<<24^a[C>>16&255]<<16^a[E>>8&255]<<8^a[255&A]^o[D+2],S=a[C>>>24]<<24^a[E>>16&255]<<16^a[A>>8&255]<<8^a[255&x]^o[D+3],D+=3,y[e]=I(b^f),y[e+1]=I(S^p),y[e+2]=I(T^g),y[e+3]=I(w^m),f=_,p=k,g=R,m=L,e+=4}return i?O(y.buffer):y.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}();e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=n(20),g=n(0),m=n(5),i=function(){function i(t,e,n){r(this,i),this.observer=t,this.config=n,this.remuxer=e}return i.prototype.resetInitSegment=function(t,e,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},i.prototype.resetTimeStamp=function(){},i.probe=function(t){if(!t)return!1;for(var e=(m.a.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(p.e(t,e))return g.b.log("ADTS sync word found !"),!0;return!1},i.prototype.append=function(t,e,n,i){for(var r=this._audioTrack,o=m.a.getID3Data(t,0)||[],a=m.a.getTimeStamp(o),s=a?90*a:9e4*e,l=0,u=s,c=t.length,h=o.length,d=[{pts:u,dts:u,data:o}];h<c-1;)if(p.d(t,h)&&h+5<c){p.c(r,this.observer,t,h,r.manifestCodec);var f=p.a(r,t,h,s,l);if(!f){g.b.log("Unable to parse AAC frame");break}h+=f.length,u=f.sample.pts,l++}else m.a.isHeader(t,h)?(o=m.a.getID3Data(t,h),d.push({pts:u,dts:u,data:o}),h+=o.length):h++;this.remuxer.remux(r,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},e,n,i)},i.prototype.destroy=function(){},i}();e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var m=n(20),s=n(21),P=n(1),A=n(39),i=n(40),I=n(0),O=n(2),o={video:0,audio:1,id3:2,text:3},a=function(){function D(t,e,n,i){r(this,D),this.observer=t,this.config=n,this.typeSupported=i,this.remuxer=e,this.sampleAes=null}return D.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new i.a(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},D.probe=function(t){var e=D._syncOffset(t);return!(e<0||(e&&I.b.warn("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),0))},D._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),n=0;n<e;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},D.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:o[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},D.prototype.resetInitSegment=function(t,e,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=D.createTrack("video",i),this._audioTrack=D.createTrack("audio",i),this._id3Track=D.createTrack("id3",i),this._txtTrack=D.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=n,this._duration=i},D.prototype.resetTimeStamp=function(){},D.prototype.append=function(t,e,n,i){var r=void 0,o=t.length,a=void 0,s=void 0,l=void 0,u=void 0,c=!1;this.contiguous=n;var h=this.pmtParsed,d=this._avcTrack,f=this._audioTrack,p=this._id3Track,g=d.pid,m=f.pid,v=p.pid,y=this._pmtId,b=d.pesData,w=f.pesData,T=p.pesData,S=this._parsePAT,E=this._parsePMT,A=this._parsePES,x=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),_=this._parseMPEGPES.bind(this),k=this._parseID3PES.bind(this),R=D._syncOffset(t);for(o-=(o+R)%188,r=R;r<o;r+=188)if(71===t[r]){if(a=!!(64&t[r+1]),s=((31&t[r+1])<<8)+t[r+2],1<(48&t[r+3])>>4){if((l=r+5+t[r+4])===r+188)continue}else l=r+4;switch(s){case g:a&&(b&&(u=A(b))&&void 0!==u.pts&&x(u,!1),b={data:[],size:0}),b&&(b.data.push(t.subarray(l,r+188)),b.size+=r+188-l);break;case m:a&&(w&&(u=A(w))&&void 0!==u.pts&&(f.isAAC?C(u):_(u)),w={data:[],size:0}),w&&(w.data.push(t.subarray(l,r+188)),w.size+=r+188-l);break;case v:a&&(T&&(u=A(T))&&void 0!==u.pts&&k(u),T={data:[],size:0}),T&&(T.data.push(t.subarray(l,r+188)),T.size+=r+188-l);break;case 0:a&&(l+=t[l]+1),y=this._pmtId=S(t,l);break;case y:a&&(l+=t[l]+1);var L=E(t,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(g=L.avc)&&(d.pid=g),0<(m=L.audio)&&(f.pid=m,f.isAAC=L.isAAC),0<(v=L.id3)&&(p.pid=v),c&&!h&&(I.b.log("reparse from beginning"),c=!1,r=R-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(P.a.ERROR,{type:O.b.MEDIA_ERROR,details:O.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});b&&(u=A(b))&&void 0!==u.pts?(x(u,!0),d.pesData=null):d.pesData=b,w&&(u=A(w))&&void 0!==u.pts?(f.isAAC?C(u):_(u),f.pesData=null):(w&&w.size&&I.b.log("last AAC PES packet truncated,might overlap between fragments"),f.pesData=w),T&&(u=A(T))&&void 0!==u.pts?(k(u),p.pesData=null):p.pesData=T,null==this.sampleAes?this.remuxer.remux(f,d,p,this._txtTrack,e,n,i):this.decryptAndRemux(f,d,p,this._txtTrack,e,n,i)},D.prototype.decryptAndRemux=function(t,e,n,i,r,o,a){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,n,i,r,o,a)})}else this.decryptAndRemuxAvc(t,e,n,i,r,o,a)},D.prototype.decryptAndRemuxAvc=function(t,e,n,i,r,o,a){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,n,i,r,o,a)})}else this.remuxer.remux(t,e,n,i,r,o,a)},D.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},D.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},D.prototype._parsePMT=function(t,e,n,i){var r=void 0,o=void 0,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<r;){switch(o=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!i){I.b.log("unkown stream type:"+t[e]);break}case 15:-1===a.audio&&(a.audio=o);break;case 21:-1===a.id3&&(a.id3=o);break;case 219:if(!i){I.b.log("unkown stream type:"+t[e]);break}case 27:-1===a.avc&&(a.avc=o);break;case 3:case 4:n?-1===a.audio&&(a.audio=o,a.isAAC=!1):I.b.log("MPEG audio found, not supported in this browser for now");break;case 36:I.b.warn("HEVC stream type found, not supported for now");break;default:I.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return a},D.prototype._parsePES=function(t){var e=0,n=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=t.data;if(!t||0===t.size)return null;for(;c[0].length<19&&1<c.length;){var h=new Uint8Array(c[0].length+c[1].length);h.set(c[0]),h.set(c[1],c[0].length),c[0]=h,c.splice(1,1)}if(1===((n=c[0])[0]<<16)+(n[1]<<8)+n[2]){if((r=(n[4]<<8)+n[5])&&r>t.size-6)return null;192&(i=n[7])&&(4294967295<(s=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2)&&(s-=8589934592),64&i?(4294967295<(l=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2)&&(l-=8589934592),54e5<s-l&&(I.b.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),u=(o=n[8])+9,t.size-=u,a=new Uint8Array(t.size);for(var d=0,f=c.length;d<f;d++){var p=(n=c[d]).byteLength;if(u){if(p<u){u-=p;continue}n=n.subarray(u),p-=u,u=0}a.set(n,e),e+=p}return r&&(r-=o+3),{data:a,pts:s,dts:l,len:r}}return null},D.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var n=e.samples,i=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(i||this.contiguous)?(t.id=i,n.push(t)):e.dropped++}t.debug.length&&I.b.log(t.pts+"/"+t.dts+":"+t.debug)},D.prototype._parseAVCPES=function(p,t){var g=this,m=this._avcTrack,e=this._parseAVCNALu(p.data),v=void 0,y=this.avcSample,b=void 0,w=!1,T=void 0,S=this.pushAccesUnit.bind(this),E=function(t,e,n,i){return{key:t,pts:e,dts:n,units:[],debug:i}};p.data=null,y&&e.length&&!m.audFound&&(S(y,m),y=this.avcSample=E(!1,p.pts,p.dts,"")),e.forEach(function(t){switch(t.type){case 1:b=!0,y||(y=g.avcSample=E(!0,p.pts,p.dts,"")),y.frame=!0;var e=t.data;if(w&&4<e.length){var n=new A.a(e).readSliceType();2!==n&&4!==n&&7!==n&&9!==n||(y.key=!0)}break;case 5:b=!0,y||(y=g.avcSample=E(!0,p.pts,p.dts,"")),y.key=!0,y.frame=!0;break;case 6:b=!0,(v=new A.a(g.discardEPB(t.data))).readUByte();for(var i=0,r=0,o=!1,a=0;!o&&1<v.bytesAvailable;){for(i=0;i+=a=v.readUByte(),255===a;);for(r=0;r+=a=v.readUByte(),255===a;);if(4===i&&0!==v.bytesAvailable){if(o=!0,181===v.readUByte()&&49===v.readUShort()&&1195456820===v.readUInt()&&3===v.readUByte()){var s=v.readUByte(),l=31&s,u=[s,v.readUByte()];for(T=0;T<l;T++)u.push(v.readUByte()),u.push(v.readUByte()),u.push(v.readUByte());g._insertSampleInOrder(g._txtTrack.samples,{type:3,pts:p.pts,bytes:u})}}else if(r<v.bytesAvailable)for(T=0;T<r;T++)v.readUByte()}break;case 7:if(w=b=!0,!m.sps){var c=(v=new A.a(t.data)).readSPS();m.width=c.width,m.height=c.height,m.pixelRatio=c.pixelRatio,m.sps=[t.data],m.duration=g._duration;var h=t.data.subarray(1,4),d="avc1.";for(T=0;T<3;T++){var f=h[T].toString(16);f.length<2&&(f="0"+f),d+=f}m.codec=d}break;case 8:b=!0,m.pps||(m.pps=[t.data]);break;case 9:b=!1,m.audFound=!0,y&&S(y,m),y=g.avcSample=E(!1,p.pts,p.dts,"");break;case 12:b=!1;break;default:b=!1,y&&(y.debug+="unknown NAL "+t.type+" ")}y&&b&&y.units.push(t)}),t&&y&&(S(y,m),this.avcSample=null)},D.prototype._insertSampleInOrder=function(t,e){var n=t.length;if(0<n){if(e.pts>=t[n-1].pts)t.push(e);else for(var i=n-1;0<=i;i--)if(e.pts<t[i].pts){t.splice(i,0,e);break}}else t.push(e)},D.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var n=this._avcTrack.samples;t=n[n.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},D.prototype._parseAVCNALu=function(t){var e=0,n=t.byteLength,i=void 0,r=void 0,o=this._avcTrack,a=o.naluState||0,s=a,l=[],u=void 0,c=-1,h=void 0;for(-1===a&&(h=31&t[c=0],a=0,e=1);e<n;)if(i=t[e++],a)if(1!==a)if(i)if(1===i){if(0<=c)u={data:t.subarray(c,e-a-1),type:h},l.push(u);else{var d=this._getLastNalUnit();if(d&&(s&&e<=4-s&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-s)),0<(r=e-a-1))){var f=new Uint8Array(d.data.byteLength+r);f.set(d.data,0),f.set(t.subarray(0,r),d.data.byteLength),d.data=f}}e<n?(h=31&t[c=e],a=0):a=-1}else a=0;else a=3;else a=i?0:2;else a=i?0:1;if(0<=c&&0<=a&&(u={data:t.subarray(c,n),type:h,state:a},l.push(u)),0===l.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+t.byteLength);g.set(p.data,0),g.set(t,p.data.byteLength),p.data=g}}return o.naluState=a,l},D.prototype.discardEPB=function(t){for(var e=t.byteLength,n=[],i=1,r=void 0,o=void 0;i<e-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return t;r=e-n.length,o=new Uint8Array(r);var a=0;for(i=0;i<r;a++,i++)a===n[0]&&(a++,n.shift()),o[i]=t[a];return o},D.prototype._parseAACPES=function(t){var e=this._audioTrack,n=t.data,i=t.pts,r=this.aacOverFlow,o=this.aacLastPTS,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0;if(r){var h=new Uint8Array(r.byteLength+n.byteLength);h.set(r,0),h.set(n,r.byteLength),n=h}for(l=0,c=n.length;l<c-1&&!m.d(n,l);l++);if(l){var d=void 0,f=void 0;if(l<c-1?(d="AAC PES did not start with ADTS header,offset:"+l,f=!1):(d="no ADTS header found in AAC PES",f=!0),I.b.warn("parsing error:"+d),this.observer.trigger(P.a.ERROR,{type:O.b.MEDIA_ERROR,details:O.a.FRAG_PARSING_ERROR,fatal:f,reason:d}),f)return}if(m.c(e,this.observer,n,l,this.audioCodec),s=0,a=m.b(e.samplerate),r&&o){var p=o+a;1<Math.abs(p-i)&&(I.b.log("AAC: align PTS for overlapping frames by "+Math.round((p-i)/90)),i=p)}for(;l<c;)if(m.d(n,l)&&l+5<c){var g=m.a(e,n,l,i,s);if(!g)break;l+=g.length,u=g.sample.pts,s++}else l++;r=l<c?n.subarray(l,c):null,this.aacOverFlow=r,this.aacLastPTS=u},D.prototype._parseMPEGPES=function(t){for(var e=t.data,n=e.length,i=0,r=0,o=t.pts;r<n;)if(s.a.isHeader(e,r)){var a=s.a.appendFrame(this._audioTrack,e,r,o,i);if(!a)break;r+=a.length,i++}else r++},D.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},D}();e.a=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(0),o=function(){function e(t){i(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,i=new Uint8Array(4),r=Math.min(4,e);if(0===r)throw new Error("no bytes available");i.set(t.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},e.prototype.skipBits=function(t){var e=void 0;this.bitsAvailable>t||(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord()),this.word<<=t,this.bitsAvailable-=t},e.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return 32<t&&r.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,0<this.bitsAvailable?this.word<<=e:0<this.bytesAvailable&&this.loadWord(),0<(e=t-e)&&this.bitsAvailable?n<<e|this.readBits(e):n},e.prototype.skipLZ=function(){var t=void 0;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(t){var e=8,n=8,i=void 0;for(i=0;i<t;i++)0!==n&&(n=(e+this.readEG()+256)%256),e=0===n?e:n},e.prototype.readSPS=function(){var t=0,e=0,n=0,i=0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,h=this.readUByte.bind(this),d=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(h(),r=h(),d(5),g(3),h(),v(),100===r||110===r||122===r||244===r||44===r||83===r||86===r||118===r||128===r){var b=f();if(3===b&&g(1),v(),v(),g(1),p())for(u=3!==b?8:12,c=0;c<u;c++)p()&&y(c<6?16:64)}v();var w=f();if(0===w)f();else if(1===w)for(g(1),m(),m(),o=f(),c=0;c<o;c++)m();v(),g(1),a=f(),s=f(),0===(l=d(1))&&g(1),g(1),p()&&(t=f(),e=f(),n=f(),i=f());var T=[1,1];if(p()&&p())switch(h()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[h()<<8|h(),h()<<8|h()]}return{width:Math.ceil(16*(a+1)-2*t-2*e),height:(2-l)*(s+1)*16-(l?2:4)*(n+i),pixelRatio:T}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();e.a=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=n(11),i=function(){function r(t,e,n,i){o(this,r),this.decryptdata=n,this.discardEPB=i,this.decrypter=new a.a(t,e,{removePKCS7Padding:!1})}return r.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},r.prototype.decryptAacSample=function(e,n,i,r){var o=e[n].unit,t=o.subarray(16,o.length-o.length%16),a=t.buffer.slice(t.byteOffset,t.byteOffset+t.length),s=this;this.decryptBuffer(a,function(t){t=new Uint8Array(t),o.set(t,16),r||s.decryptAacSamples(e,n+1,i)})},r.prototype.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,i),!i)return}}},r.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),i=0,r=32;r<=t.length-16;r+=160,i+=16)n.set(t.subarray(r,r+16),i);return n},r.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var n=0,i=32;i<=t.length-16;i+=160,n+=16)t.set(e.subarray(n,n+16),i);return t},r.prototype.decryptAvcSample=function(e,n,i,r,o,a){var s=this.discardEPB(o.data),t=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(t.buffer,function(t){o.data=l.getAvcDecryptedUnit(s,t),a||l.decryptAvcSamples(e,n,i+1,r)})},r.prototype.decryptAvcSamples=function(t,e,n,i){for(;;e++,n=0){if(e>=t.length)return void i();for(var r=t[e].units;!(n>=r.length);n++){var o=r[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,i,o,a),!a)return}}}},r}();e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=n(5),o=n(0),g=n(21),i=function(){function i(t,e,n){r(this,i),this.observer=t,this.config=n,this.remuxer=e}return i.prototype.resetInitSegment=function(t,e,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},i.prototype.resetTimeStamp=function(){},i.probe=function(t){var e=void 0,n=void 0,i=p.a.getID3Data(t,0);if(i&&void 0!==p.a.getTimeStamp(i))for(e=i.length,n=Math.min(t.length-1,e+100);e<n;e++)if(g.a.probe(t,e))return o.b.log("MPEG Audio sync word found !"),!0;return!1},i.prototype.append=function(t,e,n,i){for(var r=p.a.getID3Data(t,0),o=p.a.getTimeStamp(r),a=o?90*o:9e4*e,s=r.length,l=t.length,u=0,c=0,h=this._audioTrack,d=[{pts:a,dts:a,data:r}];s<l;)if(g.a.isHeader(t,s)){var f=g.a.appendFrame(h,t,s,a,u);if(!f)break;s+=f.length,c=f.sample.pts,u++}else p.a.isHeader(t,s)?(r=p.a.getID3Data(t,s),d.push({pts:c,dts:c,data:r}),s+=r.length):s++;this.remuxer.remux(h,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},e,n,i)},i.prototype.destroy=function(){},i}();e.a=i},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var z=n(43),Z=n(44),tt=n(1),et=n(2),nt=n(0),i=function(){function o(t,e,n,i){a(this,o),this.observer=t,this.config=e,this.typeSupported=n;var r=navigator.userAgent;this.isSafari=i&&-1<i.indexOf("Apple")&&r&&!r.match("CriOS"),this.ISGenerated=!1}return o.prototype.destroy=function(){},o.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},o.prototype.resetInitSegment=function(){this.ISGenerated=!1},o.prototype.remux=function(t,e,n,i,r,o,a){if(this.ISGenerated||this.generateIS(t,e,r),this.ISGenerated){var s=t.samples.length,l=e.samples.length,u=r,c=r;if(s&&l){var h=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale;u+=Math.max(0,h),c+=Math.max(0,-h)}if(s){t.timescale||(nt.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,r));var d=this.remuxAudio(t,u,o,a);if(l){var f=void 0;d&&(f=d.endPTS-d.startPTS),e.timescale||(nt.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,r)),this.remuxVideo(e,c,o,f,a)}}else if(l){var p=this.remuxVideo(e,c,o,0,a);p&&t.codec&&this.remuxEmptyAudio(t,u,o,p)}}n.samples.length&&this.remuxID3(n,r),i.samples.length&&this.remuxText(i,r),this.observer.trigger(tt.a.FRAG_PARSED)},o.prototype.generateIS=function(t,e,n){var i=this.observer,r=t.samples,o=e.samples,a=this.typeSupported,s="audio/mp4",l={},u={tracks:l},c=void 0===this._initPTS,h=void 0,d=void 0;if(c&&(h=d=1/0),t.config&&r.length&&(t.timescale=t.samplerate,nt.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(a.mpeg?(s="audio/mpeg",t.codec=""):a.mp3&&(t.codec="mp3")),l.audio={container:s,codec:t.codec,initSegment:!t.isAAC&&a.mpeg?new Uint8Array:Z.a.initSegment([t]),metadata:{channelCount:t.channelCount}},c&&(h=d=r[0].pts-t.inputTimeScale*n)),e.sps&&e.pps&&o.length){var f=e.inputTimeScale;e.timescale=f,l.video={container:"video/mp4",codec:e.codec,initSegment:Z.a.initSegment([e]),metadata:{width:e.width,height:e.height}},c&&(h=Math.min(h,o[0].pts-f*n),d=Math.min(d,o[0].dts-f*n),this.observer.trigger(tt.a.INIT_PTS_FOUND,{initPTS:h}))}Object.keys(l).length?(i.trigger(tt.a.FRAG_PARSING_INIT_SEGMENT,u),this.ISGenerated=!0,c&&(this._initPTS=h,this._initDTS=d)):i.trigger(tt.a.ERROR,{type:et.b.MEDIA_ERROR,details:et.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},o.prototype.remuxVideo=function(t,e,n,i,r){var o=8,a=t.timescale,s=void 0,l=void 0,u=void 0,c=void 0,h=void 0,d=void 0,f=void 0,p=t.samples,g=[],m=p.length,v=this._PTSNormalize,y=this._initDTS,b=this.nextAvcDts,w=this.isSafari;if(0!==m){w&&(n|=p.length&&b&&(r&&Math.abs(e-b/a)<.1||Math.abs(p[0].pts-b-y)<a/5)),n||(b=e*a),p.forEach(function(t){t.pts=v(t.pts-y,b),t.dts=v(t.dts-y,b)}),p.sort(function(t,e){var n=t.dts-e.dts,i=t.pts-e.pts;return n||i||t.id-e.id});var T=p.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(T<0){nt.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var S=0;S<p.length;S++)p[S].dts+=T}var E=p[0];h=Math.max(E.dts,0),c=Math.max(E.pts,0);var A=Math.round((h-b)/90);n&&A&&(1<A?nt.b.log("AVC:"+A+" ms hole between fragments detected,filling it"):A<-1&&nt.b.log("AVC:"+-A+" ms overlapping between fragments detected"),h=b,p[0].dts=h,c=Math.max(c-A,b),p[0].pts=c,nt.b.log("Video/PTS/DTS adjusted: "+Math.round(c/90)+"/"+Math.round(h/90)+",delta:"+A+" ms")),E=p[p.length-1],f=Math.max(E.dts,0),d=Math.max(E.pts,0,f),w&&(s=Math.round((f-h)/(p.length-1)));for(var x=0,C=0,_=0;_<m;_++){for(var k=p[_],R=k.units,L=R.length,D=0,P=0;P<L;P++)D+=R[P].data.length;C+=D,x+=L,k.length=D,k.dts=w?h+_*s:Math.max(k.dts,h),k.pts=Math.max(k.pts,k.dts)}var I=C+4*x+8;try{l=new Uint8Array(I)}catch(t){return void this.observer.trigger(tt.a.ERROR,{type:et.b.MUX_ERROR,details:et.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:I,reason:"fail allocating video mdat "+I})}var O=new DataView(l.buffer);O.setUint32(0,I),l.set(Z.a.types.mdat,4);for(var N=0;N<m;N++){for(var M=p[N],F=M.units,B=0,j=void 0,H=0,U=F.length;H<U;H++){var q=F[H],W=q.data,G=q.data.byteLength;O.setUint32(o,G),o+=4,l.set(W,o),o+=G,B+=4+G}if(w)j=Math.max(0,s*Math.round((M.pts-M.dts)/s));else{if(N<m-1)s=p[N+1].dts-M.dts;else{var z=this.config,V=M.dts-p[0<N?N-1:N].dts;if(z.stretchShortVideoTrack){var K=z.maxBufferHole,X=Math.floor(K*a),Y=(i?c+i*a:this.nextAudioPts)-M.pts;X<Y?((s=Y-V)<0&&(s=V),nt.b.log("It is approximately "+Y/90+" ms to the next segment; using duration "+s/90+" ms for the last video frame.")):s=V}else s=V}j=Math.round(M.pts-M.dts)}g.push({size:B,duration:s,cts:j,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:M.key?2:1,isNonSync:M.key?0:1}})}this.nextAvcDts=f+s;var $=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,g.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var J=g[0].flags;J.dependsOn=2,J.isNonSync=0}t.samples=g,u=Z.a.moof(t.sequenceNumber++,h,t),t.samples=[];var Q={data1:u,data2:l,startPTS:c/a,endPTS:(d+s)/a,startDTS:h/a,endDTS:this.nextAvcDts/a,type:"video",hasAudio:!1,hasVideo:!0,nb:g.length,dropped:$};return this.observer.trigger(tt.a.FRAG_PARSING_DATA,Q),Q}},o.prototype.remuxAudio=function(t,e,n,i){var r=t.inputTimeScale,o=t.timescale,a=r/o,s=(t.isAAC?1024:1152)*a,l=this._PTSNormalize,u=this._initDTS,c=!t.isAAC&&this.typeSupported.mpeg,h=void 0,d=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=t.samples,b=[],w=this.nextAudioPts;if(n|=y.length&&w&&(i&&Math.abs(e-w/r)<.1||Math.abs(y[0].pts-w-u)<20*s),y.forEach(function(t){t.pts=t.dts=l(t.pts-u,e*r)}),0!==(y=y.filter(function(t){return 0<=t.pts})).length){if(n||(w=i?e*r:y[0].pts),t.isAAC)for(var T=this.config.maxAudioFramesDrift,S=0,E=w;S<y.length;){var A,x=y[S];A=x.pts-E;var C=Math.abs(1e3*A/r);if(A<=-T*s)nt.b.warn("Dropping 1 audio frame @ "+(E/r).toFixed(3)+"s due to "+Math.round(C)+" ms overlap."),y.splice(S,1),t.len-=x.unit.length;else if(T*s<=A&&C<1e4&&E){var _=Math.round(A/s);nt.b.warn("Injecting "+_+" audio frame @ "+(E/r).toFixed(3)+"s due to "+Math.round(1e3*A/r)+" ms gap.");for(var k=0;k<_;k++){var R=Math.max(E,0);(f=z.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(nt.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),f=x.unit.subarray()),y.splice(S,0,{unit:f,pts:R,dts:R}),
t.len+=f.length,E+=s,S++}x.pts=x.dts=E,E+=s,S++}else Math.abs(A),x.pts=x.dts=E,E+=s,S++}for(var L=0,D=y.length;L<D;L++){var P=y[L],I=P.unit,O=P.pts;if(void 0!==v)d.duration=Math.round((O-v)/a);else{var N=Math.round(1e3*(O-w)/r),M=0;if(n&&t.isAAC&&N){if(0<N&&N<1e4)M=Math.round((O-w)/s),nt.b.log(N+" ms hole between AAC samples detected,filling it"),0<M&&((f=z.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(f=I.subarray()),t.len+=M*f.length);else if(N<-12){nt.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(w/r).toFixed(3)+"s/"+(O/r).toFixed(3)+"s/"+-N+"ms"),t.len-=I.byteLength;continue}O=w}if(m=O,!(0<t.len))return;var F=c?t.len:t.len+8;h=c?0:8;try{p=new Uint8Array(F)}catch(t){return void this.observer.trigger(tt.a.ERROR,{type:et.b.MUX_ERROR,details:et.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating audio mdat "+F})}c||(new DataView(p.buffer).setUint32(0,F),p.set(Z.a.types.mdat,4));for(var B=0;B<M;B++)(f=z.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(nt.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),f=I.subarray()),p.set(f,h),h+=f.byteLength,d={size:f.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},b.push(d)}p.set(I,h);var j=I.byteLength;h+=j,d={size:j,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},b.push(d),v=O}var H=0,U=b.length;if(2<=U&&(H=b[U-2].duration,d.duration=H),U){this.nextAudioPts=w=v+a*H,t.len=0,t.samples=b,g=c?new Uint8Array:Z.a.moof(t.sequenceNumber++,m/a,t),t.samples=[];var q=m/r,W=w/r,G={data1:g,data2:p,startPTS:q,endPTS:W,startDTS:q,endDTS:W,type:"audio",hasAudio:!0,hasVideo:!1,nb:U};return this.observer.trigger(tt.a.FRAG_PARSING_DATA,G),G}return null}},o.prototype.remuxEmptyAudio=function(t,e,n,i){var r=t.inputTimeScale,o=r/(t.samplerate?t.samplerate:r),a=this.nextAudioPts,s=(void 0!==a?a:i.startDTS*r)+this._initDTS,l=i.endDTS*r+this._initDTS,u=1024*o,c=Math.ceil((l-s)/u),h=z.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(nt.b.warn("remux empty Audio"),h){for(var d=[],f=0;f<c;f++){var p=s+f*u;d.push({unit:h,pts:p,dts:p}),t.len+=h.length}t.samples=d,this.remuxAudio(t,e,n)}else nt.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},o.prototype.remuxID3=function(t,e){var n=t.samples.length,i=void 0,r=t.inputTimeScale,o=this._initPTS,a=this._initDTS;if(n){for(var s=0;s<n;s++)(i=t.samples[s]).pts=(i.pts-o)/r,i.dts=(i.dts-a)/r;this.observer.trigger(tt.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},o.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var n=t.samples.length,i=void 0,r=t.inputTimeScale,o=this._initPTS;if(n){for(var a=0;a<n;a++)(i=t.samples[a]).pts=(i.pts-o)/r;this.observer.trigger(tt.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},o.prototype._PTSNormalize=function(t,e){var n=void 0;if(void 0===e)return t;for(n=e<t?-8589934592:8589934592;4294967296<Math.abs(t-e);)t+=n;return t},o}();e.a=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(){n(this,t)}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}();e.a=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=Math.pow(2,32)-1,i=function(){function d(){n(this,d)}return d.init=function(){d.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t=void 0;for(t in d.types)d.types.hasOwnProperty(t)&&(d.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);d.HDLR_TYPES={video:e,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);d.STTS=d.STSC=d.STCO=r,d.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),d.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),d.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),d.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);d.FTYP=d.box(d.types.ftyp,o,s,o,a),d.DINF=d.box(d.types.dinf,d.box(d.types.dref,i))},d.box=function(t){for(var e=Array.prototype.slice.call(arguments,1),n=8,i=e.length,r=i,o=void 0;i--;)n+=e[i].byteLength;for((o=new Uint8Array(n))[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=255&n,o.set(t,4),i=0,n=8;i<r;i++)o.set(e[i],n),n+=e[i].byteLength;return o},d.hdlr=function(t){return d.box(d.types.hdlr,d.HDLR_TYPES[t])},d.mdat=function(t){return d.box(d.types.mdat,t)},d.mdhd=function(t,e){e*=t;var n=Math.floor(e/(s+1)),i=Math.floor(e%(s+1));return d.box(d.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},d.mdia=function(t){return d.box(d.types.mdia,d.mdhd(t.timescale,t.duration),d.hdlr(t.type),d.minf(t))},d.mfhd=function(t){return d.box(d.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},d.minf=function(t){return"audio"===t.type?d.box(d.types.minf,d.box(d.types.smhd,d.SMHD),d.DINF,d.stbl(t)):d.box(d.types.minf,d.box(d.types.vmhd,d.VMHD),d.DINF,d.stbl(t))},d.moof=function(t,e,n){return d.box(d.types.moof,d.mfhd(t),d.traf(n,e))},d.moov=function(t){for(var e=t.length,n=[];e--;)n[e]=d.trak(t[e]);return d.box.apply(null,[d.types.moov,d.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(d.mvex(t)))},d.mvex=function(t){for(var e=t.length,n=[];e--;)n[e]=d.trex(t[e]);return d.box.apply(null,[d.types.mvex].concat(n))},d.mvhd=function(t,e){e*=t;var n=Math.floor(e/(s+1)),i=Math.floor(e%(s+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return d.box(d.types.mvhd,r)},d.sdtp=function(t){var e=t.samples||[],n=new Uint8Array(4+e.length),i=void 0,r=void 0;for(r=0;r<e.length;r++)i=e[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return d.box(d.types.sdtp,n)},d.stbl=function(t){return d.box(d.types.stbl,d.stsd(t),d.box(d.types.stts,d.STTS),d.box(d.types.stsc,d.STSC),d.box(d.types.stsz,d.STSZ),d.box(d.types.stco,d.STCO))},d.avc1=function(t){var e=[],n=[],i=void 0,r=void 0,o=void 0;for(i=0;i<t.sps.length;i++)o=(r=t.sps[i]).byteLength,e.push(o>>>8&255),e.push(255&o),e=e.concat(Array.prototype.slice.call(r));for(i=0;i<t.pps.length;i++)o=(r=t.pps[i]).byteLength,n.push(o>>>8&255),n.push(255&o),n=n.concat(Array.prototype.slice.call(r));var a=d.box(d.types.avcC,new Uint8Array([1,e[3],e[4],e[5],255,224|t.sps.length].concat(e).concat([t.pps.length]).concat(n))),s=t.width,l=t.height,u=t.pixelRatio[0],c=t.pixelRatio[1];return d.box(d.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,d.box(d.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),d.box(d.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},d.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},d.mp4a=function(t){var e=t.samplerate;return d.box(d.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]),d.box(d.types.esds,d.esds(t)))},d.mp3=function(t){var e=t.samplerate;return d.box(d.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]))},d.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?d.box(d.types.stsd,d.STSD,d.mp4a(t)):d.box(d.types.stsd,d.STSD,d.mp3(t)):d.box(d.types.stsd,d.STSD,d.avc1(t))},d.tkhd=function(t){var e=t.id,n=t.duration*t.timescale,i=t.width,r=t.height,o=Math.floor(n/(s+1)),a=Math.floor(n%(s+1));return d.box(d.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,r>>8&255,255&r,0,0]))},d.traf=function(t,e){var n=d.sdtp(t),i=t.id,r=Math.floor(e/(s+1)),o=Math.floor(e%(s+1));return d.box(d.types.traf,d.box(d.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),d.box(d.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,o>>24,o>>16&255,o>>8&255,255&o])),d.trun(t,n.length+16+20+8+16+8+8),n)},d.trak=function(t){return t.duration=t.duration||4294967295,d.box(d.types.trak,d.tkhd(t),d.mdia(t))},d.trex=function(t){var e=t.id;return d.box(d.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},d.trun=function(t,e){var n=t.samples||[],i=n.length,r=12+16*i,o=new Uint8Array(r),a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,h=void 0;for(e+=8+r,o.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,e>>>24&255,e>>>16&255,e>>>8&255,255&e],0),a=0;a<i;a++)l=(s=n[a]).duration,u=s.size,c=s.flags,h=s.cts,o.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,u>>>24&255,u>>>16&255,u>>>8&255,255&u,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*a);return d.box(d.types.trun,o)},d.initSegment=function(t){d.types||d.init();var e=d.moov(t),n=void 0;return(n=new Uint8Array(d.FTYP.byteLength+e.byteLength)).set(d.FTYP),n.set(e,d.FTYP.byteLength),n},d}();e.a=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=n(1),r=function(){function e(t){i(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(t,e,n,i,r,o,a,s){var l=this.observer,u="";t&&(u+="audio"),e&&(u+="video"),l.trigger(c.a.FRAG_PARSING_DATA,{data1:s,startPTS:r,startDTS:r,type:u,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),l.trigger(c.a.FRAG_PARSED)},e}();e.a=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(19),s=n(1),l=n(0),i=n(10),u=n.n(i),r=function(r){var o=new u.a;o.trigger=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.emit.apply(o,[t,t].concat(n))},o.off=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.removeListener.apply(o,[t].concat(n))};var i=function(t,e){r.postMessage({event:t,data:e})};r.addEventListener("message",function(t){var e=t.data;switch(e.cmd){case"init":var n=JSON.parse(e.config);r.demuxer=new a.a(o,e.typeSupported,n,e.vendor);try{Object(l.a)(!0===n.debug)}catch(r){console.warn("demuxerWorker: unable to enable logs")}i("init",null);break;case"demux":r.demuxer.push(e.data,e.decryptdata,e.initSegment,e.audioCodec,e.videoCodec,e.timeOffset,e.discontinuity,e.trackSwitch,e.contiguous,e.duration,e.accurateTimeOffset,e.defaultInitPTS)}}),o.on(s.a.FRAG_DECRYPTED,i),o.on(s.a.FRAG_PARSING_INIT_SEGMENT,i),o.on(s.a.FRAG_PARSED,i),o.on(s.a.ERROR,i),o.on(s.a.FRAG_PARSING_METADATA,i),o.on(s.a.FRAG_PARSING_USERDATA,i),o.on(s.a.INIT_PTS_FOUND,i),o.on(s.a.FRAG_PARSING_DATA,function(t,e){var n=[],i={event:t,data:e};e.data1&&(i.data1=e.data1.buffer,n.push(e.data1.buffer),delete e.data1),e.data2&&(i.data2=e.data2.buffer,n.push(e.data2.buffer),delete e.data2),r.postMessage(i,n)})};e["default"]=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=n(1),i=n(3),h=n(0),d=n(2),f=n(17),s=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),l=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,c.a.MANIFEST_LOADED,c.a.LEVEL_LOADED,c.a.FRAG_LOADED,c.a.ERROR));return e.canload=!1,e.currentLevelIndex=null,e.manualLevelIndex=-1,e.timer=null,e}return a(i,n),i.prototype.onHandlerDestroying=function(){this.cleanTimer(),this.manualLevelIndex=-1},i.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},i.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},i.prototype.stopLoad=function(){this.canload=!1},i.prototype.onManifestLoaded=function(t){var e=[],n=void 0,i={},r=null,o=!1,a=!1,s=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),l=[];if(t.levels.forEach(function(t){t.loadError=0,t.fragmentError=!1,o=o||!!t.videoCodec,a=a||!!t.audioCodec||!(!t.attrs||!t.attrs.AUDIO),!0===s&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),void 0===(r=i[t.bitrate])?(t.url=[t.url],t.urlId=0,i[t.bitrate]=t,e.push(t)):r.url.push(t.url)}),!0===o&&!0===a&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||Object(f.a)(e))&&(!n||Object(f.a)(n))}),t.audioTracks&&(l=t.audioTracks.filter(function(t){return!t.audioCodec||Object(f.a)(t.audioCodec,"audio")})),0<e.length){n=e[0].bitrate,e.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=e;for(var u=0;u<e.length;u++)if(e[u].bitrate===n){this._firstLevel=u,h.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+n);break}this.hls.trigger(c.a.MANIFEST_PARSED,{levels:e,audioTracks:l,firstLevel:this._firstLevel,stats:t.stats,audio:a,video:o,altAudio:0<l.length&&o})}else this.hls.trigger(c.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},i.prototype.setLevelInternal=function(t){var e=this._levels,n=this.hls;if(0<=t&&t<e.length){if(this.cleanTimer(),this.currentLevelIndex!==t){h.b.log("switching to level "+t);var i=e[this.currentLevelIndex=t];i.level=t,n.trigger(c.a.LEVEL_SWITCHING,i)}var r=e[t],o=r.details;if(!o||!0===o.live){var a=r.urlId;n.trigger(c.a.LEVEL_LOADING,{url:r.url[a],level:t,id:a})}}else n.trigger(c.a.ERROR,{type:d.b.OTHER_ERROR,details:d.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},i.prototype.onError=function(t){if(!0!==t.fatal){var e=!1,n=!1,i=void 0;switch(t.details){case d.a.FRAG_LOAD_ERROR:case d.a.FRAG_LOAD_TIMEOUT:case d.a.KEY_LOAD_ERROR:case d.a.KEY_LOAD_TIMEOUT:i=t.frag.level,n=!0;break;case d.a.LEVEL_LOAD_ERROR:case d.a.LEVEL_LOAD_TIMEOUT:i=t.context.level,e=!0;break;case d.a.REMUX_ALLOC_ERROR:i=t.level,e=!0}void 0!==i&&this.recoverLevel(t,i,e,n)}else t.type===d.b.NETWORK_ERROR&&this.cleanTimer()},i.prototype.recoverLevel=function(t,e,n,i){var r=this,o=this.hls.config,a=t.details,s=this._levels[e],l=void 0,u=void 0,c=void 0;if(s.loadError++,s.fragmentError=i,!0===n){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return h.b.error("level controller, cannot recover from "+a+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(t.fatal=!0);u=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return r.loadLevel()},u),t.levelRetry=!0,this.levelRetryCount++,h.b.warn("level controller, "+a+", retry in "+u+" ms, current retry count is "+this.levelRetryCount)}!0!==n&&!0!==i||(1<(l=s.url.length)&&s.loadError<l?(h.b.warn("level controller, "+a+" for level "+e+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%l,s.details=void 0):-1===this.manualLevelIndex?(c=0===e?this._levels.length-1:e-1,h.b.warn("level controller, "+a+": switch to "+c),this.hls.nextAutoLevel=this.currentLevelIndex=c):!0===i&&(h.b.warn("level controller, "+a+": reload a fragment"),this.currentLevelIndex=null))},i.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var n=this._levels[e.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},i.prototype.onLevelLoaded=function(t){var e=this,n=t.level;if(n===this.currentLevelIndex){var i=this._levels[n];!1===i.fragmentError&&(i.loadError=0,this.levelRetryCount=0);var r=t.details;if(r.live){var o=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),a=o,s=i.details;s&&r.endSN===s.endSN&&(a/=2,h.b.log("same live playlist, reload twice faster")),a-=performance.now()-t.stats.trequest,a=Math.max(o/2,Math.round(a)),h.b.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},a)}else this.cleanTimer()}},i.prototype.loadLevel=function(){var t=void 0,e=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(t=this._levels[this.currentLevelIndex])&&0<t.url.length&&(e=t.urlId,this.hls.trigger(c.a.LEVEL_LOADING,{url:t.url[e],level:this.currentLevelIndex,id:e}))},s(i,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),i}(i.a);e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),l=n(3),h=n(5),u=n(25),i=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.FRAG_PARSING_METADATA));return e.id3Track=void 0,e.media=void 0,e}return a(i,n),i.prototype.destroy=function(){l.a.prototype.destroy.call(this)},i.prototype.onMediaAttached=function(t){this.media=t.media,this.media},i.prototype.onMediaDetaching=function(){Object(u.a)(this.id3Track),this.id3Track=void 0,this.media=void 0},i.prototype.getID3Track=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("metadata"===n.kind&&"id3"===n.label)return Object(u.b)(n,this.media),n}return this.media.addTextTrack("metadata","id3")},i.prototype.onFragParsingMetadata=function(t){var e=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var o=h.a.getID3Frames(n[r].data);if(o){var a=n[r].pts,s=r<n.length-1?n[r+1].pts:e.endPTS;a===s&&(s+=1e-4);for(var l=0;l<o.length;l++){var u=o[l];if(!h.a.isTimeStampFrame(u)){var c=new i(a,s,"");c.value=u,this.id3Track.addCue(c)}}}}},i}(l.a);e.a=i},function(t,e,n){"use strict";function i(){var t=Object(r.a)(),e=window.SourceBuffer||window.WebKitSourceBuffer,n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!n&&!!i}e.a=i;var r=n(12)},function(t,e,n){"use strict";n.d(e,"a",function(){return m});var i=n(51),r=n(54),o=n(55),a=n(56),s=n(57),l=n(58),u=n(59),c=n(60),h=n(62),d=n(66),f=n(67),p=n(68),g=n(69),m={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.a,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:i.a,bufferController:r.a,capLevelController:o.a,fpsController:a.a,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:g.a};m.subtitleStreamController=f.a,m.subtitleTrackController=d.a,m.timelineController=h.a,m.cueHandler=c,m.enableCEA708Captions=!0,m.enableWebVTT=!0,m.captionsTextTrack1Label="English",m.captionsTextTrack1LanguageCode="en",m.captionsTextTrack2Label="Spanish",m.captionsTextTrack2LanguageCode="es",m.audioStreamController=u.a,m.audioTrackController=l.a,m.emeController=p.a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var b=n(1),s=n(3),w=n(9),l=n(2),T=n(0),u=n(52),c=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),i=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,b.a.FRAG_LOADING,b.a.FRAG_LOADED,b.a.FRAG_BUFFERED,b.a.ERROR));return e.lastLoadedFragLevel=0,e._nextAutoLevel=-1,e.hls=t,e.timer=null,e._bwEstimator=null,e.onCheck=e._abandonRulesCheck.bind(e),e}return a(i,n),i.prototype.destroy=function(){this.clearTimer(),s.a.prototype.destroy.call(this)},i.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,i=t.frag.level,r=n.levels[i].details.live,o=n.config,a=void 0,s=void 0;r?(a=o.abrEwmaFastLive,s=o.abrEwmaSlowLive):(a=o.abrEwmaFastVoD,s=o.abrEwmaSlowVoD),this._bwEstimator=new u.a(n,s,a,o.abrEwmaDefaultEstimate)}this.fragCurrent=e}},i.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,n=this.fragCurrent,i=n.loader,r=t.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return T.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var o=i.stats;if(e&&o&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&n.autoLevel&&n.level){var a=performance.now()-o.trequest,s=Math.abs(e.playbackRate);if(a>500*n.duration/s){var l=t.levels,u=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/a),c=l[n.level],h=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,d=o.total?o.total:Math.max(o.loaded,Math.round(n.duration*h/8)),f=e.currentTime,p=(d-o.loaded)/u,g=(w.a.bufferInfo(e,f,t.config.maxBufferHole).end-f)/s;if(g<2*n.duration/s&&g<p){var m=void 0,v=void 0;for(v=n.level-1;r<v;v--){var y=l[v].realBitrate?Math.max(l[v].realBitrate,l[v].bitrate):l[v].bitrate;if((m=n.duration*y/(6.4*u))<g)break}m<p&&(T.b.warn("loading too slow, abort fragment loading and switch to level "+v+":fragLoadedDelay["+v+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+m.toFixed(1)+"<"+p.toFixed(1)+":"+g.toFixed(1)),t.nextLoadLevel=v,this._bwEstimator.sample(a,o.loaded),i.abort(),this.clearTimer(),t.trigger(b.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:o}))}}}},i.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&!isNaN(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[e.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,r=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r)}if(t.frag.bitrateTest){var o=t.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(t)}}},i.prototype.onFragBuffered=function(t){var e=t.stats,n=t.frag;if(!(!0===e.aborted||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&e.tload!==e.tbuffered)){var i=e.tparsed-e.trequest;T.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(i,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},i.prototype.onError=function(t){switch(t.details){case l.a.FRAG_LOAD_ERROR:case l.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},i.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},i.prototype._findBestLevel=function(t,e,n,i,r,o,a,s,l){for(var u=r;i<=u;u--){var c=l[u].details,h=c?c.totalduration/c.fragments.length:e,d=!!c&&c.live,f=void 0;f=u<=t?a*n:s*n;var p=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,g=p*h/f;if(T.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(f)+"/"+p+"/"+h+"/"+o+"/"+g),p<f&&(!g||d&&!this.bitrateTestDelay||g<o))return u}return-1},c(i,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var n=this._nextABRAutoLevel;return-1!==t&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,n=t.levels,i=t.config,r=t.minAutoLevel,o=t.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=o?o.currentTime:0,u=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(w.a.bufferInfo(o,l,i.maxBufferHole).end-l)/u,d=this._findBestLevel(a,s,c,r,e,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(0<=d)return d;T.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var f=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,p=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(0===h){var m=this.bitrateTestDelay;m&&(f=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-m,T.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),p=g=1)}return d=this._findBestLevel(a,s,c,r,e,h+f,p,g,n),Math.max(d,0)}}]),i}(s.a);e.a=i},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=n(53),i=function(){function r(t,e,n,i){o(this,r),this.hls=t,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new a.a(e),this.fast_=new a.a(n)}return r.prototype.sample=function(t,e){var n=8e3*e/(t=Math.max(t,this.minDelayMs_)),i=t/1e3;this.fast_.sample(i,n),this.slow_.sample(i,n)},r.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},r.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},r.prototype.destroy=function(){},r}();e.a=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t){n(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},e}();e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=n(1),s=n(3),h=n(0),u=n(2),i=n(12),c=Object(i.a)(),d=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,l.a.MEDIA_ATTACHING,l.a.MEDIA_DETACHING,l.a.MANIFEST_PARSED,l.a.BUFFER_RESET,l.a.BUFFER_APPENDING,l.a.BUFFER_CODECS,l.a.BUFFER_EOS,l.a.BUFFER_FLUSHING,l.a.LEVEL_PTS_UPDATED,l.a.LEVEL_UPDATED));return e._msDuration=null,e._levelDuration=null,e._live=null,e._objectUrl=null,e.onsbue=e.onSBUpdateEnd.bind(e),e.onsbe=e.onSBUpdateError.bind(e),
e.pendingTracks={},e.tracks={},e}return a(i,n),i.prototype.destroy=function(){s.a.prototype.destroy.call(this)},i.prototype.onLevelPtsUpdated=function(t){var e=t.type,n=this.tracks.audio;if("audio"===e&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio;if(.1<Math.abs(i.timestampOffset-t.start)){var r=i.updating;try{i.abort()}catch(t){r=!0,h.b.warn("can not abort audio buffer: "+t)}r?this.audioTimestampOffset=t.start:(h.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+t.start),i.timestampOffset=t.start)}}},i.prototype.onManifestParsed=function(t){var e=t.audio,n=t.video||t.levels.length&&t.altAudio,i=0;t.altAudio&&(e||n)&&(i=(e?1:0)+(n?1:0),h.b.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i},i.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var n=this.mediaSource=new c;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(n),this._objectUrl=e.src}},i.prototype.onMediaDetaching=function(){h.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){h.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):h.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l.a.MEDIA_DETACHED)},i.prototype.onMediaSourceOpen=function(){h.b.log("media source opened"),this.hls.trigger(l.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},i.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},i.prototype.onMediaSourceClose=function(){h.b.log("media source closed")},i.prototype.onMediaSourceEnded=function(){h.b.log("media source ended")},i.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;h.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var n=this.parent,e=this.segments.reduce(function(t,e){return e.parent===n?t+1:t},0),i={},r=this.sourceBuffer;for(var o in r)i[o]=r[o].buffered;this.hls.trigger(l.a.BUFFER_APPENDED,{parent:n,pending:e,timeRanges:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},i.prototype.onSBUpdateError=function(t){h.b.error("sourceBuffer error:",t),this.hls.trigger(l.a.ERROR,{type:u.b.MEDIA_ERROR,details:u.a.BUFFER_APPENDING_ERROR,fatal:!1})},i.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var n=t[e];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},i.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}},i.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;for(var i in t)if(!e[i]){var r=t[i],o=r.levelCodec||r.codec,a=r.container+";codecs="+o;h.b.log("creating sourceBuffer("+a+")");try{var s=e[i]=n.addSourceBuffer(a);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[i]={codec:o,container:r.container},r.buffer=s}catch(t){h.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(l.a.ERROR,{type:u.b.MEDIA_ERROR,details:u.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:a})}}this.hls.trigger(l.a.BUFFER_CREATED,{tracks:t})},i.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},i.prototype.onBufferAppendFail=function(t){h.b.error("sourceBuffer error:",t.event),this.hls.trigger(l.a.ERROR,{type:u.b.MEDIA_ERROR,details:u.a.BUFFER_APPENDING_ERROR,fatal:!1})},i.prototype.onBufferEos=function(t){var e=this.sourceBuffer,n=t.type;for(var i in e)n&&i!==n||e[i].ended||(e[i].ended=!0,h.b.log(i+" sourceBuffer now EOS"));this.checkEos()},i.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var n in t){var i=t[n];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}h.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){h.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},i.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},i.prototype.onLevelUpdated=function(t){var e=t.details;0<e.fragments.length&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._live=e.live,this.updateMediaElementDuration())},i.prototype.updateMediaElementDuration=function(){var t=this.hls.config,e=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(h.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(h.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},i.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,n=this.sourceBuffer;try{for(var i in n)e+=n[i].buffered.length}catch(t){h.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(l.a.BUFFER_FLUSHED)}},i.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,n=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void h.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var i=n.shift();try{var r=e[i.type];r?r.updating?n.unshift(i):(r.ended=!1,this.parent=i.parent,r.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){h.b.error("error while trying to append buffer:"+e.message),n.unshift(i);var o={type:u.b.MEDIA_ERROR,parent:i.parent};22!==e.code?(this.appendError?this.appendError++:this.appendError=1,o.details=u.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry?(h.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],o.fatal=!0):o.fatal=!1):(this.segments=[],o.details=u.a.BUFFER_FULL_ERROR,o.fatal=!1),t.trigger(l.a.ERROR,o)}}}},i.prototype.flushBuffer=function(t,e,n){var i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=this.sourceBuffer;if(Object.keys(u).length){if(h.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var c in u)if(!n||c===n){if((i=u[c]).ended=!1,i.updating)return h.b.warn("cannot flush, sb updating in progress"),!1;try{for(r=0;r<i.buffered.length;r++)if(o=i.buffered.start(r),a=i.buffered.end(r),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(s=t,l=e):(s=Math.max(o,t),l=Math.min(a,e)),.5<Math.min(l,a)-s)return this.flushBufferCounter++,h.b.log("flush "+c+" ["+s+","+l+"], of ["+o+","+a+"], pos:"+this.media.currentTime),i.remove(s,l),!1}catch(t){h.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else h.b.warn("abort flushing too many retries");h.b.log("buffer flushed")}return!0},i}(s.a);e.a=d},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),r=n(3),l=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),u=function(e){function r(t){return i(this,r),o(this,e.call(this,t,s.a.FPS_DROP_LEVEL_CAPPING,s.a.MEDIA_ATTACHING,s.a.MANIFEST_PARSED))}return a(r,e),r.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},r.prototype.onFpsDropLevelCapping=function(t){r.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},r.prototype.onMediaAttaching=function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null},r.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],e.config.capLevelToPlayerSize&&(t.video||t.levels.length&&t.altAudio)&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,e.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},r.prototype.getMaxLevel=function(n){var i=this;if(!this.levels)return-1;var t=this.levels.filter(function(t,e){return r.isLevelAllowed(e,i.restrictedLevels)&&e<=n});return r.getMaxLevelByMediaSize(t,this.mediaWidth,this.mediaHeight)},r.isLevelAllowed=function(t,e){return-1===(1<arguments.length&&void 0!==e?e:[]).indexOf(t)},r.getMaxLevelByMediaSize=function(t,e,n){if(!t||t&&!t.length)return-1;for(var i=t.length-1,r=0;r<t.length;r+=1){var o=t[r];if((o.width>=e||o.height>=n)&&(a=o,!(s=t[r+1])||a.width!==s.width||a.height!==s.height)){i=r;break}}var a,s;return i},l(r,[{key:"mediaWidth",get:function(){var t=void 0,e=this.media;return e&&(t=e.width||e.clientWidth||e.offsetWidth,t*=r.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,e=this.media;return e&&(t=e.height||e.clientHeight||e.offsetHeight,t*=r.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),r}(r.a);e.a=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=n(1),a=n(3),h=n(0),s=function(e){function n(t){return i(this,n),r(this,e.call(this,t,c.a.MEDIA_ATTACHING))}return o(n,e),n.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.prototype.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},n.prototype.checkFPS=function(t,e,n){var i=performance.now();if(e){if(this.lastTime){var r=i-this.lastTime,o=n-this.lastDroppedFrames,a=e-this.lastDecodedFrames,s=1e3*o/r,l=this.hls;if(l.trigger(c.a.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:n}),0<s&&o>l.config.fpsDroppedMonitoringThreshold*a){var u=l.currentLevel;h.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),0<u&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(c.a.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,l.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},n.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},n}(a.a);e.a=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=n(0),r=function(){function e(t){i(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var t=void 0,e=this.context;t=this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(t,e.url)}catch(n){t.open("GET",e.url,!0),i(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(n){return void this.callbacks.onError({code:t.status,text:n.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},e.prototype.readystatechange=function(t){var e=t.currentTarget,n=e.readyState,i=this.stats,r=this.context,o=this.config;if(!i.aborted&&2<=n)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===n){var a=e.status;if(200<=a&&a<300){i.tload=Math.max(i.tfirst,performance.now());var s=void 0,l=void 0;"arraybuffer"===r.responseType?l=(s=e.response).byteLength:l=(s=e.responseText).length,i.loaded=i.total=l;var u={url:e.responseURL,data:s};this.callbacks.onSuccess(u,i,r,e)}else i.retry>=o.maxRetry||400<=a&&a<499?(c.b.error(a+" while loading "+r.url),this.callbacks.onError({code:a,text:e.statusText},r,e)):(c.b.warn(a+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},e.prototype.loadtimeout=function(){c.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(t){var e=t.currentTarget,n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,e)},e}();e.a=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),l=n(3),u=n(0),c=n(2),h=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),i=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,s.a.MANIFEST_LOADING,s.a.MANIFEST_PARSED,s.a.AUDIO_TRACK_LOADED,s.a.ERROR));return e.ticks=0,e.ontick=e.tick.bind(e),e}return a(i,n),i.prototype.destroy=function(){this.cleanTimer(),l.a.prototype.destroy.call(this)},i.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},i.prototype.tick=function(){1==++this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},i.prototype.doTick=function(){this.updateTrack(this.trackId)},i.prototype.onError=function(t){t.fatal&&t.type===c.b.NETWORK_ERROR&&this.cleanTimer()},i.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},i.prototype.onManifestParsed=function(t){var e=this,n=t.audioTracks||[],i=!1;this.tracks=n,this.hls.trigger(s.a.AUDIO_TRACKS_UPDATED,{audioTracks:n});var r=0;n.forEach(function(t){if(t["default"]&&!i)return e.audioTrack=r,void(i=!0);r++}),!1===i&&n.length&&(u.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},i.prototype.onAudioTrackLoaded=function(t){t.id<this.tracks.length&&(u.b.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*t.details.targetduration)),!t.details.live&&this.timer&&this.cleanTimer())},i.prototype.setAudioTrackInternal=function(t){if(0<=t&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,u.b.log("switching to audioTrack "+t);var e=this.tracks[t],n=this.hls,i=e.type,r=e.url,o={id:t,type:i,url:r};n.trigger(s.a.AUDIO_TRACK_SWITCHING,o);var a=e.details;!r||void 0!==a&&!0!==a.live||(u.b.log("(re)loading playlist for audioTrack "+t),n.trigger(s.a.AUDIO_TRACK_LOADING,{url:r,id:t}))}},i.prototype.updateTrack=function(t){if(0<=t&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,u.b.log("updating audioTrack "+t);var e=this.tracks[t],n=e.url,i=e.details;!n||void 0!==i&&!0!==i.live||(u.b.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(s.a.AUDIO_TRACK_LOADING,{url:n,id:t}))}},h(i,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.trackId===t&&void 0!==this.tracks[t].details||this.setAudioTrackInternal(t)}}]),i}(l.a);e.a=i},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var I=n(8),O=n(9),f=n(18),N=n(1),d=n(22),l=n(23),p=n(2),M=n(0),F=n(24),i=n(13),B=n(7),g=n(6),u=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),j={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},r=function(i){function r(t,e){o(this,r);var n=a(this,i.call(this,t,N.a.MEDIA_ATTACHED,N.a.MEDIA_DETACHING,N.a.AUDIO_TRACKS_UPDATED,N.a.AUDIO_TRACK_SWITCHING,N.a.AUDIO_TRACK_LOADED,N.a.KEY_LOADED,N.a.FRAG_LOADED,N.a.FRAG_PARSING_INIT_SEGMENT,N.a.FRAG_PARSING_DATA,N.a.FRAG_PARSED,N.a.ERROR,N.a.BUFFER_RESET,N.a.BUFFER_CREATED,N.a.BUFFER_APPENDED,N.a.BUFFER_FLUSHED,N.a.INIT_PTS_FOUND));return n.fragmentTracker=e,n.config=t.config,n.audioCodecSwap=!1,n._state=j.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return s(r,i),r.prototype.onHandlerDestroying=function(){this.stopLoad()},r.prototype.onHandlerDestroyed=function(){this.state=j.STOPPED,this.fragmentTracker=null},r.prototype.onInitPtsFound=function(t){var e=t.id,n=t.frag.cc,i=t.initPTS;"main"===e&&(this.initPTS[n]=i,this.videoTrackCC=n,M.b.log("InitPTS for cc: "+n+" found from video track: "+i),this.state===j.WAITING_INIT_PTS&&this.tick())},r.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),(this.fragLoadError=0)<e&&-1===t?(M.b.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=j.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=j.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=j.STOPPED},r.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=j.STOPPED},r.prototype.doTick=function(){var t=void 0,e=void 0,n=void 0,i=this.hls,r=i.config;switch(this.state){case j.ERROR:case j.PAUSED:case j.BUFFER_FLUSHING:break;case j.STARTING:this.state=j.WAITING_TRACK,this.loadedmetadata=!1;break;case j.IDLE:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var a=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,l=O.a.bufferInfo(a,t,r.maxBufferHole),u=O.a.bufferInfo(s,t,r.maxBufferHole),c=l.len,h=l.end,d=this.fragPrevious,f=Math.min(r.maxBufferLength,r.maxMaxBufferLength),p=Math.max(f,u.len),g=this.audioSwitch,m=this.trackId;if((c<p||g)&&m<o.length){if(void 0===(n=o[m].details)){this.state=j.WAITING_TRACK;break}if(!g&&!n.live&&d&&d.sn===n.endSN&&!l.nextStart&&(!this.media.seeking||this.media.duration-h<d.duration/2)){this.hls.trigger(N.a.BUFFER_EOS,{type:"audio"}),this.state=j.ENDED;break}var v=n.fragments,y=v.length,b=v[0].start,w=v[y-1].start+v[y-1].duration,T=void 0;if(g)if(n.live&&!n.PTSKnown)M.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),h=0;else if(h=t,n.PTSKnown&&t<b){if(!(l.end>b||l.nextStart))return;M.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=b+.05}if(n.initSegment&&!n.initSegment.data)T=n.initSegment;else if(h<=b){if(T=v[0],null!==this.videoTrackCC&&T.cc!==this.videoTrackCC&&(T=Object(F.b)(v,this.videoTrackCC)),n.live&&T.loadIdx&&T.loadIdx===this.fragLoadIdx){var S=l.nextStart?l.nextStart:b;return M.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),void(this.media.currentTime=S+.05)}}else{var E=void 0,A=r.maxFragLookUpTolerance,x=d?v[d.sn-v[0].sn+1]:void 0,C=function(t){var e=Math.min(A,t.duration);return t.start+t.duration-e<=h?1:t.start-e>h&&t.start?-1:0};h<w?(w-A<h&&(A=0),E=x&&!C(x)?x:I.a.search(v,C)):E=v[y-1],E&&(b=(T=E).start,d&&T.level===d.level&&T.sn===d.sn&&(T.sn<n.endSN?(T=v[T.sn+1-n.startSN],M.b.log("SN just loaded, load next one: "+T.sn)):T=null))}T&&(T.decryptdata&&null!=T.decryptdata.uri&&null==T.decryptdata.key?(M.b.log("Loading key for "+T.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+m),this.state=j.KEY_LOADING,i.trigger(N.a.KEY_LOADING,{frag:T})):(M.b.log("Loading "+T.sn+", cc: "+T.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+m+", currentTime:"+t+",bufferEnd:"+h.toFixed(3)),(g||this.fragmentTracker.getState(T)===B.a.NOT_LOADED)&&(this.fragCurrent=T,this.startFragRequested=!0,isNaN(T.sn)||(this.nextLoadPosition=T.start+T.duration),i.trigger(N.a.FRAG_LOADING,{frag:T}),this.state=j.FRAG_LOADING)))}break;case j.WAITING_TRACK:(e=this.tracks[this.trackId])&&e.details&&(this.state=j.IDLE);break;case j.FRAG_LOADING_WAITING_RETRY:var _=performance.now(),k=this.retryDate,R=(a=this.media)&&a.seeking;(!k||k<=_||R)&&(M.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=j.IDLE);break;case j.WAITING_INIT_PTS:var L=this.videoTrackCC;if(void 0===this.initPTS[L])break;var D=this.waitingFragment;if(D){var P=D.frag.cc;L!==P?(e=this.tracks[this.trackId]).details&&e.details.live&&(M.b.warn("Waiting fragment CC ("+P+") does not match video track CC ("+L+")"),this.waitingFragment=null,this.state=j.IDLE):(this.state=j.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=j.IDLE;break;case j.STOPPED:case j.FRAG_LOADING:case j.PARSING:case j.PARSED:case j.ENDED:}},r.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},r.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(M.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeking=function(){this.state===j.ENDED&&(this.state=j.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),this.tick()},r.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.prototype.onAudioTracksUpdated=function(t){M.b.log("audio tracks updated"),this.tracks=t.audioTracks},r.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=j.PAUSED,this.waitingFragment=null,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=j.IDLE),this.tick()},r.prototype.onAudioTrackLoaded=function(t){var e=t.details,n=t.id,i=this.tracks[n],r=e.totalduration,o=0;if(M.b.log("track "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+r),e.live){var a=i.details;a&&0<e.fragments.length?(d.a(a,e),o=e.fragments[0].start,e.PTSKnown?M.b.log("live audio playlist sliding:"+o.toFixed(3)):M.b.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,M.b.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(i.details=e,!this.startFragRequested){if(-1===this.startPosition){var s=e.startTimeOffset;isNaN(s)?this.startPosition=0:(M.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===j.WAITING_TRACK&&(this.state=j.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===j.KEY_LOADING&&(this.state=j.IDLE,this.tick())},r.prototype.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===j.FRAG_LOADING&&e&&"audio"===n.type&&n.level===e.level&&n.sn===e.sn){var i=this.tracks[this.trackId],r=i.details,o=r.totalduration,a=e.level,s=e.sn,l=e.cc,u=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",c=this.stats=t.stats;if("initSegment"===s)this.state=j.IDLE,c.tparsed=c.tbuffered=performance.now(),r.initSegment.data=t.payload,this.hls.trigger(N.a.FRAG_BUFFERED,{stats:c,frag:e,id:"audio"}),this.tick();else{this.state=j.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new f.a(this.hls,"audio"));var h=this.initPTS[l],d=r.initSegment?r.initSegment.data:[];r.initSegment||void 0!==h?(this.pendingBuffering=!0,M.b.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+a),this.demuxer.push(t.payload,d,u,null,e,o,!1,h)):(M.b.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+a),this.waitingFragment=t,this.state=j.WAITING_INIT_PTS)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===j.PARSING){var i=t.tracks,r=void 0;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=t.id,this.hls.trigger(N.a.BUFFER_CODECS,i),M.b.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var o=r.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(N.a.BUFFER_APPENDING,a))}this.tick()}}},r.prototype.onFragParsingData=function(e){var n=this,t=this.fragCurrent,i=e.frag;if(t&&"audio"===e.id&&"audio"===e.type&&i.sn===t.sn&&i.level===t.level&&this.state===j.PARSING){var r=this.trackId,o=this.tracks[r],a=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+t.duration,e.endDTS=e.startDTS+t.duration),t.addElementaryStream(g.a.ElementaryStreamTypes.AUDIO),M.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),d.b(o.details,t,e.startPTS,e.endPTS);var s=this.audioSwitch,l=this.media,u=!1;if(s&&l)if(l.readyState){var c=l.currentTime;M.b.log("switching audio track : currentTime:"+c),c>=e.startPTS&&(M.b.log("switching audio track : flushing all audio"),this.state=j.BUFFER_FLUSHING,a.trigger(N.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,this.audioSwitch=!1,a.trigger(N.a.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,a.trigger(N.a.AUDIO_TRACK_SWITCHED,{id:r});var h=this.pendingData;if(!h)return console.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void a.trigger(N.a.ERROR,{type:p.b.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&h.push({type:e.type,data:t,parent:"audio",content:"data"})}),!u&&h.length&&(h.forEach(function(t){n.state===j.PARSING&&(n.pendingBuffering=!0,n.hls.trigger(N.a.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},r.prototype.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===j.PARSING&&(this.stats.tparsed=performance.now(),this.state=j.PARSED,this._checkAppendedParsed())},r.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},r.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==j.PARSING&&e!==j.PARSED||(this.pendingBuffering=0<t.pending,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(
this.state!==j.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,n=this.hls;if(t){this.fragPrevious=t,e.tbuffered=performance.now(),n.trigger(N.a.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;M.b.log("audio buffered : "+l.a.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(N.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=j.IDLE}this.tick()}},r.prototype.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case p.a.FRAG_LOAD_ERROR:case p.a.FRAG_LOAD_TIMEOUT:if(!t.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n;var r=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);M.b.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state=j.FRAG_LOADING_WAITING_RETRY}else M.b.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=j.ERROR}break;case p.a.AUDIO_TRACK_LOAD_ERROR:case p.a.AUDIO_TRACK_LOAD_TIMEOUT:case p.a.KEY_LOAD_ERROR:case p.a.KEY_LOAD_TIMEOUT:this.state!==j.ERROR&&(this.state=t.fatal?j.ERROR:j.IDLE,M.b.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."));break;case p.a.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===j.PARSING||this.state===j.PARSED)){var o=this.mediaBuffer,a=this.media.currentTime;if(o&&O.a.isBuffered(o,a)&&O.a.isBuffered(o,a+.5)){var s=this.config;s.maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,M.b.warn("audio:reduce max buffer length to "+s.maxMaxBufferLength+"s")),this.state=j.IDLE}else M.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=j.BUFFER_FLUSHING,this.hls.trigger(N.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},r.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(M.b.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(N.a.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=j.PARSED):(this.state=j.IDLE,this.fragPrevious=null,this.tick())},u(r,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,M.b.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),r}(i.a);e.a=r},function(t,e,n){"use strict";function i(t,e,n,i){for(var r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=window.VTTCue||window.TextTrackCue,c=0;c<i.rows.length;c++)if(a=!0,s=0,l="",!(r=i.rows[c]).isEmpty()){for(var h=0;h<r.chars.length;h++)r.chars[h].uchar.match(/\s/)&&a?s++:(l+=r.chars[h].uchar,a=!1);(r.cueStartTime=e)===n&&(n+=1e-4),o=new u(e,n,Object(d.b)(l.trim())),16<=s?s--:s++,navigator.userAgent.match(/Firefox\//)?o.line=c+1:o.line=7<c?c-2:c+1,o.align="left",o.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.newCue=i;var d=n(26)},function(t,e){"use strict";e.a=function(){function w(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}function T(t){return"string"==typeof t&&!!n[t.toLowerCase()]&&t.toLowerCase()}function S(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(t,e,n){var i=this,r=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),o={};r?i=document.createElement("custom"):o.enumerable=!0,i.hasBeenReset=!1;var a="",s=!1,l=t,u=e,c=n,h=null,d="",f=!0,p="auto",g="start",m=50,v="middle",y=50,b="middle";if(Object.defineProperty(i,"id",S({},o,{get:function(){return a},set:function(t){a=""+t}})),Object.defineProperty(i,"pauseOnExit",S({},o,{get:function(){return s},set:function(t){s=!!t}})),Object.defineProperty(i,"startTime",S({},o,{get:function(){return l},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");l=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",S({},o,{get:function(){return u},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");u=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",S({},o,{get:function(){return c},set:function(t){c=""+t,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",S({},o,{get:function(){return h},set:function(t){h=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",S({},o,{get:function(){return d},set:function(t){var e=w(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",S({},o,{get:function(){return f},set:function(t){f=!!t,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",S({},o,{get:function(){return p},set:function(t){if("number"!=typeof t&&t!==E)throw new SyntaxError("An invalid number or illegal string was specified.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",S({},o,{get:function(){return g},set:function(t){var e=T(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",S({},o,{get:function(){return m},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",S({},o,{get:function(){return v},set:function(t){var e=T(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",S({},o,{get:function(){return y},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",S({},o,{get:function(){return b},set:function(t){var e=T(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),i.displayState=void 0,r)return i}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var E="auto",e={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};return t.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},t}()},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function u(t,e,n,i){return Math.min(e,i)-Math.max(t,n)}var c=n(1),h=n(3),d=n(63),f=n(64),p=n(65),g=n(0),m=n(25),r=function(r){function o(t){a(this,o);var e=s(this,r.call(this,t,c.a.MEDIA_ATTACHING,c.a.MEDIA_DETACHING,c.a.FRAG_PARSING_USERDATA,c.a.FRAG_DECRYPTED,c.a.MANIFEST_LOADING,c.a.MANIFEST_LOADED,c.a.FRAG_LOADED,c.a.LEVEL_SWITCHING,c.a.INIT_PTS_FOUND));if(e.hls=t,e.config=t.config,e.enabled=!0,e.Cues=t.config.cueHandler,e.textTracks=[],e.tracks=[],e.unparsedVttFrags=[],e.initPTS=void 0,e.cueRanges=[],e.captionsTracks={},e.captionsProperties={textTrack1:{label:e.config.captionsTextTrack1Label,languageCode:e.config.captionsTextTrack1LanguageCode},textTrack2:{label:e.config.captionsTextTrack2Label,languageCode:e.config.captionsTextTrack2LanguageCode}},e.config.enableCEA708Captions){var n=new f.a(e,"textTrack1"),i=new f.a(e,"textTrack2");e.cea608Parser=new d.a(0,n,i)}return e}return i(o,r),o.prototype.addCues=function(t,e,n,i){for(var r=this.cueRanges,o=!1,a=r.length;a--;){var s=r[a],l=u(s[0],s[1],e,n);if(0<=l&&(s[0]=Math.min(s[0],e),s[1]=Math.max(s[1],n),o=!0,.5<l/(n-e)))return}o||r.push([e,n]),this.Cues.newCue(this.captionsTracks[t],e,n,i)},o.prototype.onInitPtsFound=function(t){var e=this;void 0===this.initPTS&&(this.initPTS=t.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(t){e.onFragLoaded(t)}),this.unparsedVttFrags=[])},o.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var i=e.textTracks[n];if(i[t])return i}return null},o.prototype.createCaptionsTrack=function(t){var e=this.captionsProperties[t],n=e.label,i=e.languageCode,r=this.captionsTracks;if(!r[t]){var o=this.getExistingTrack(t);if(o)r[t]=o,Object(m.a)(r[t]),Object(m.b)(r[t],this.media);else{var a=this.createTextTrack("captions",n,i);a&&(a[t]=!0,r[t]=a)}}},o.prototype.createTextTrack=function(t,e,n){var i=this.media;if(i)return i.addTextTrack(t,e,n)},o.prototype.destroy=function(){h.a.prototype.destroy.call(this)},o.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},o.prototype.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){Object(m.a)(e[t]),delete e[t]})},o.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},o.prototype._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)Object(m.a)(e[n])}},o.prototype.onManifestLoaded=function(t){var r=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var o=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,e){var n=void 0;if(e<o.length){var i=o[e];l(i,t)&&(n=i)}n||(n=r.createTextTrack("subtitles",t.name,t.lang)),t["default"]?n.mode=r.hls.subtitleDisplay?"showing":"hidden":n.mode="disabled",r.textTracks.push(n)})}},o.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},o.prototype.onFragLoaded=function(t){var e=t.frag,n=t.payload;if("main"===e.type){var i=e.sn;if(i!==this.lastSn+1){var r=this.cea608Parser;r&&r.reset()}this.lastSn=i}else if("subtitle"===e.type)if(n.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);var o=e.decryptdata;null!=o&&null!=o.key&&"AES-128"===o.method||this._parseVTTs(e,n)}else this.hls.trigger(c.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},o.prototype._parseVTTs=function(e,t){var n=this.vttCCs;n[e.cc]||(n[e.cc]={start:e.start,prevCC:this.prevCC,"new":!0},this.prevCC=e.cc);var i=this.textTracks,r=this.hls;p.a.parse(t,this.initPTS,n,e.cc,function(t){var n=i[e.trackId];"disabled"!==n.mode?(t.forEach(function(t){if(!n.cues.getCueById(t.id))try{n.addCue(t)}catch(i){var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,n.addCue(e)}}),r.trigger(c.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):r.trigger(c.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},function(t){g.b.log("Failed to parse VTT cue: "+t),r.trigger(c.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},o.prototype.onFragDecrypted=function(t){var e=t.payload,n=t.frag;if("subtitle"===n.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);this._parseVTTs(n,e)}},o.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var n=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,n)}},o.prototype.extractCea608Data=function(t){for(var e=31&t[0],n=2,i=void 0,r=void 0,o=void 0,a=[],s=0;s<e;s++)i=t[n++],r=127&t[n++],o=127&t[n++],0===r&&0===o||0!=(4&i)&&0===(3&i)&&(a.push(r),a.push(o));return a},o}(h.a);e.a=r},function(t,e){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},l=function(t){var e=t;return n.hasOwnProperty(t)&&(e=n[t]),String.fromCharCode(e)},h=15,r=100,o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},a={17:2,18:4,21:6,22:8,23:10,19:13,20:15},u={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},d=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var n=this.verboseFilter[t];this.verboseLevel>=n&&console.log(this.time+" ["+t+"] "+e)}},p=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},g=function(){function o(t,e,n,i,r){s(this,o),this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}return o.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},o.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var i=e[n];t.hasOwnProperty(i)&&(this[i]=t[i])}},o.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},o.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},o.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},o.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},o}(),i=function(){function a(t,e,n,i,r,o){s(this,a),this.uchar=t||" ",this.penState=new g(e,n,i,r,o)}return a.prototype.reset=function(){this.uchar=" ",this.penState.reset()},a.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},a.prototype.setPenState=function(t){this.penState.copy(t)},a.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},a.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},a.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},a}(),m=function(){function e(){s(this,e),this.chars=[];for(var t=0;t<r;t++)this.chars.push(new i);this.pos=0,this.currPenState=new g}return e.prototype.equals=function(t){for(var e=!0,n=0;n<r;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},e.prototype.copy=function(t){for(var e=0;e<r;e++)this.chars[e].copy(t.chars[e])},e.prototype.isEmpty=function(){for(var t=!0,e=0;e<r;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>r&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=r)},e.prototype.moveCursor=function(t){var e=this.pos+t;if(1<t)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(t){144<=t&&this.backSpace();var e=l(t);this.pos>=r?f.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(t){var e=void 0;for(e=t;e<r;e++)this.chars[e].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var t=[],e=!0,n=0;n<r;n++){var i=this.chars[n].uchar;" "!==i&&(e=!1),t.push(i)}return e?"":t.join("")},e.prototype.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},e}(),v=function(){function e(){s(this,e),this.rows=[];for(var t=0;t<h;t++)this.rows.push(new m);this.currRow=h-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var t=0;t<h;t++)this.rows[t].clear();this.currRow=h-1},e.prototype.equals=function(t){for(var e=!0,n=0;n<h;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},e.prototype.copy=function(t){for(var e=0;e<h;e++)this.rows[e].copy(t.rows[e])},e.prototype.isEmpty=function(){for(var t=!0,e=0;e<h;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.prototype.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.prototype.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.prototype.setCursor=function(t){f.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.prototype.setPAC=function(t){f.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<h;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var o=r.rows[i].cueStartTime;if(o&&o<f.time)for(var a=0;a<this.nrRollUpRows;a++)this.rows[e-this.nrRollUpRows+a+1].copy(r.rows[i+a])}}this.currRow=e;var s=this.rows[this.currRow];if(null!==t.indent){var l=t.indent,u=Math.max(l-1,0);s.setCursor(t.indent),t.color=s.chars[u].penState.foreground}var c={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(t){f.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){f.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),f.log("INFO","Rolling up")}else f.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],n="",i=-1,r=0;r<h;r++){var o=this.rows[r].getTextString();o&&(i=r+1,t?e.push("Row "+i+": '"+o+"'"):e.push(o.trim()))}return 0<e.length&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},e.prototype.getTextAndFormat=function(){return this.rows},e}(),y=function(){function n(t,e){s(this,n),this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new v,this.nonDisplayedMemory=new v,this.lastOutputScreen=new v,this.currRollUpRow=this.displayedMemory.rows[h-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return n.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[h-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},n.prototype.getHandler=function(){return this.outputFilter},n.prototype.setHandler=function(t){this.outputFilter=t},n.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},n.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},n.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,f.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},n.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},n.prototype.ccRCL=function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},n.prototype.ccBS=function(){f.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},n.prototype.ccAOF=function(){},n.prototype.ccAON=function(){},n.prototype.ccDER=function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},n.prototype.ccRU=function(t){f.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},n.prototype.ccFON=function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},n.prototype.ccRDC=function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},n.prototype.ccTR=function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")},n.prototype.ccRTD=function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")},n.prototype.ccEDM=function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},n.prototype.ccCR=function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},n.prototype.ccENM=function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},n.prototype.ccEOC=function(){if(f.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},n.prototype.ccTO=function(t){f.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},n.prototype.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=46<=t,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=i[n]}f.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},n.prototype.outputDataUpdate=function(t){var e=0<arguments.length&&void 0!==t&&t,n=f.time;null!==n&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:n):this.cueStartTime=n,this.lastOutputScreen.copy(this.displayedMemory))},n.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},n}(),b=function(){function i(t,e,n){s(this,i),this.field=t||1,this.outputs=[e,n],this.channels=[new y(1,e),new y(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}}return i.prototype.getHandler=function(t){return this.channels[t].getHandler()},i.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},i.prototype.addData=function(t,e){var n=void 0,i=void 0,r=void 0,o=!1;this.lastTime=t,f.setTime(t);for(var a=0;a<e.length;a+=2)if(i=127&e[a],r=127&e[a+1],0!==i||0!==r){if(f.log("DATA","["+p([e[a],e[a+1]])+"] -> ("+p([i,r])+")"),(n=this.parseCmd(i,r))||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(o=this.parseChars(i,r)))if(this.currChNr&&0<=this.currChNr){this.channels[this.currChNr-1].insertChars(o)}else f.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters["char"]+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+p([i,r])+" orig: "+p([e[a],e[a+1]])))}else this.dataCounters.padding+=2},i.prototype.parseCmd=function(t,e){var n=null;if(!((20===t||28===t)&&32<=e&&e<=47)&&!((23===t||31===t)&&33<=e&&e<=35))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+p([t,e])+") is dropped"),!0;n=20===t||23===t?1:2;var i=this.channels[n-1];return 20===t||28===t?32===e?i.ccRCL():33===e?i.ccBS():34===e?i.ccAOF():35===e?i.ccAON():36===e?i.ccDER():37===e?i.ccRU(2):38===e?i.ccRU(3):39===e?i.ccRU(4):40===e?i.ccFON():41===e?i.ccRDC():42===e?i.ccTR():43===e?i.ccRTD():44===e?i.ccEDM():45===e?i.ccCR():46===e?i.ccENM():47===e&&i.ccEOC():i.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},i.prototype.parseMidrow=function(t,e){var n=null;return(17===t||25===t)&&32<=e&&e<=47&&((n=17===t?1:2)!==this.currChNr?(f.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(e),f.log("DEBUG","MIDROW ("+p([t,e])+")"),!0))},i.prototype.parsePAC=function(t,e){var n=null,i=null;if(!((17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127)&&!((16===t||24===t)&&64<=e&&e<=95))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,!(this.lastCmdB=null);n=t<=23?1:2,i=64<=e&&e<=95?1===n?o[t]:u[t]:1===n?a[t]:c[t];var r=this.interpretPAC(i,e);return this.channels[n-1].setPAC(r),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},i.prototype.interpretPAC=function(t,e){var n=e,i={color:null,italics:!1,indent:null,underline:!1,row:t};return n=95<e?e-96:e-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},i.prototype.parseChars=function(t,e){var n=null,i=null,r=null;if(25<=t?(n=2,r=t-8):(n=1,r=t),17<=r&&r<=19){var o=e;o=17===r?e+80:18===r?e+112:e+144,f.log("INFO","Special char '"+l(o)+"' in channel "+n),i=[o]}else 32<=t&&t<=127&&(i=0===e?[t]:[t,e]);if(i){var a=p(i);f.log("DEBUG","Char codes =  "+a.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},i.prototype.parseBackgroundAttributes=function(t,e){var n=void 0,i=void 0,r=void 0;return!(!((16===t||24===t)&&32<=e&&e<=47)&&!((23===t||31===t)&&45<=e&&e<=47)||(n={},16===t||24===t?(i=Math.floor((e-32)/2),n.background=d[i],e%2==1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0)),r=t<24?1:2,this.channels[r-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null))},i.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},i.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},i}();e.a=b},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(t,e){i(this,n),this.timelineController=t,this.trackName=e,this.startTime=null,this.endTime=null,this.screen=null}return n.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},n.prototype.newCue=function(t,e,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},n}();e.a=n},function(t,e,n){"use strict";var m=n(26),v=n(5),y=function(t,e,n){return t.substr(n||0,e.length)===e},b=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),r=9<t.length?parseInt(t.substr(0,t.indexOf(":"))):0;return isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)?-1:(e+=1e3*n,e+=6e4*i,e+=36e5*r)},w=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()},T=function(t,e,n){var i=t[e],r=t[i.prevCC];if(!r||!r["new"]&&i["new"])return t.ccOffset=t.presentationOffset=i.start,void(i["new"]=!1);for(;r&&r["new"];)t.ccOffset+=i.start-r.start,i["new"]=!1,r=t[(i=r).prevCC];t.presentationOffset=n},i={parse:function(t,e,i,r,n,o){var a=/\r\n|\n\r|\n|\r/g,s=Object(v.b)(new Uint8Array(t)).trim().replace(a,"\n").split("\n"),l="00:00.000",u=0,c=0,h=0,d=[],f=void 0,p=!0,g=new m.a;g.oncue=function(t){var e=i[r],n=i.ccOffset;e&&e["new"]&&(void 0!==c?n=i.ccOffset=e.start:T(i,r,h)),h&&(n=h+i.ccOffset-i.presentationOffset),t.startTime+=n-c,t.endTime+=n-c,t.id=w(t.startTime.toString())+w(t.endTime.toString())+w(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),0<t.endTime&&d.push(t)},g.onparsingerror=function(t){f=t},g.onflush=function(){f&&o?o(f):n(d)},s.forEach(function(t){if(p){if(y(t,"X-TIMESTAMP-MAP=")){p=!1,t.substr(16).split(",").forEach(function(t){y(t,"LOCAL:")?l=t.substr(6):y(t,"MPEGTS:")&&(u=parseInt(t.substr(7)))});try{u-=e=e<0?e+8589934592:e,c=b(l)/1e3,h=u/9e4,-1===c&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){f=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(p=!1)}g.parse(t+"\n")}),g.flush()}};e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){for(var e=[],n=0;n<t.length;n++)"subtitles"===t[n].kind&&e.push(t[n]);return e}var l=n(1),u=n(3),c=n(0),h=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),i=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,l.a.MEDIA_ATTACHED,l.a.MEDIA_DETACHING,l.a.MANIFEST_LOADING,l.a.MANIFEST_LOADED,l.a.SUBTITLE_TRACK_LOADED));return e.tracks=[],e.trackId=-1,e.media=void 0,e.subtitleDisplay=!1,e}return a(i,n),i.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=s(this.media.textTracks),n=0;n<e.length;n++)if("hidden"===e[n].mode)t=n;else if("showing"===e[n].mode){t=n;break}this.subtitleTrack=t}},i.prototype.destroy=function(){u.a.prototype.destroy.call(this)},i.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},i.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},i.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},i.prototype.onManifestLoaded=function(t){var e=this,n=t.subtitles||[];this.tracks=n,this.trackId=-1,this.hls.trigger(l.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(t){t["default"]&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},i.prototype.onTick=function(){var t=this.trackId,e=this.tracks[t];if(e){var n=e.details;void 0!==n&&!0!==n.live||(c.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(l.a.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))}},i.prototype.onSubtitleTrackLoaded=function(t){var e=this;t.id<this.tracks.length&&(c.b.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){e.onTick()},1e3*t.details.targetduration,this)),
!t.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},i.prototype.setSubtitleTrackInternal=function(t){if(!(t<-1||t>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var e=s(this.media.textTracks);if(-1!==this.trackId&&(e[this.trackId].mode="disabled"),this.trackId=t,c.b.log("switching to subtitle track "+t),this.hls.trigger(l.a.SUBTITLE_TRACK_SWITCH,{id:t}),-1!==t){var n=this.tracks[t];t<e.length&&(e[t].mode=this.subtitleDisplay?"showing":"hidden");var i=n.details;void 0!==i&&!0!==i.live||(c.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(l.a.SUBTITLE_TRACK_LOADING,{url:n.url,id:t}))}}},h(i,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&this.setSubtitleTrackInternal(t)}}]),i}(u.a);e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(1),c=n(0),s=n(11),i=n(13),h={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},l=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,u.a.MEDIA_ATTACHED,u.a.ERROR,u.a.KEY_LOADED,u.a.FRAG_LOADED,u.a.SUBTITLE_TRACKS_UPDATED,u.a.SUBTITLE_TRACK_SWITCH,u.a.SUBTITLE_TRACK_LOADED,u.a.SUBTITLE_FRAG_PROCESSED));return e.config=t.config,e.vttFragSNsProcessed={},e.vttFragQueues=void 0,e.currentlyProcessing=null,e.state=h.STOPPED,e.currentTrackId=-1,e.decrypter=new s.a(t.observer,t.config),e}return a(i,n),i.prototype.onHandlerDestroyed=function(){this.state=h.STOPPED},i.prototype.clearVttFragQueues=function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})},i.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&-1<this.currentTrackId&&this.vttFragQueues[this.currentTrackId].length){var t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=t,this.hls.trigger(u.a.FRAG_LOADING,{frag:t}),this.state=h.FRAG_LOADING}},i.prototype.onSubtitleFragProcessed=function(t){t.success&&this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn),this.currentlyProcessing=null,this.state=h.IDLE,this.nextFrag()},i.prototype.onMediaAttached=function(){this.state=h.IDLE},i.prototype.onError=function(t){var e=t.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},i.prototype.doTick=function(){var e=this;switch(this.state){case h.IDLE:var t,n=this.tracks,i=this.currentTrackId,r=this.vttFragSNsProcessed[i],o=this.vttFragQueues[i],a=this.currentlyProcessing?this.currentlyProcessing.sn:-1,s=function(t){return-1<r.indexOf(t.sn)},l=function(e){return o.some(function(t){return t.sn===e.sn})};if(!n)break;if(i<n.length&&(t=n[i].details),void 0===t)break;t.fragments.forEach(function(t){s(t)||t.sn===a||l(t)||(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key?(c.b.log("Loading key for "+t.sn),e.state=h.KEY_LOADING,e.hls.trigger(u.a.KEY_LOADING,{frag:t})):(t.trackId=i,o.push(t),e.nextFrag()))})}},i.prototype.onSubtitleTracksUpdated=function(t){var e=this;c.b.log("subtitle tracks updated"),this.tracks=t.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(t){e.vttFragSNsProcessed[t.id]=[]})},i.prototype.onSubtitleTrackSwitch=function(t){this.currentTrackId=t.id,-1!==this.currentTrackId&&void 0!==this.tracks[this.currentTrackId].details&&this.tick()},i.prototype.onSubtitleTrackLoaded=function(){this.tick()},i.prototype.onKeyLoaded=function(){this.state===h.KEY_LOADING&&(this.state=h.IDLE,this.tick())},i.prototype.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag.decryptdata,i=t.frag,r=this.hls;if(this.state===h.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&0<t.payload.byteLength&&null!=n&&null!=n.key&&"AES-128"===n.method){var o=void 0;try{o=performance.now()}catch(t){o=Date.now()}this.decrypter.decrypt(t.payload,n.key.buffer,n.iv.buffer,function(t){var e=void 0;try{e=performance.now()}catch(t){e=Date.now()}r.trigger(u.a.FRAG_DECRYPTED,{frag:i,payload:t,stats:{tstart:o,tdecrypt:e}})})}},i}(i.a);e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=n(3),s=n(1),l=n(2),u=n(0),c=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),h={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready"},d=function(t,e){var n={videoCapabilities:[]};return e.forEach(function(t){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"'})}),[n]},f=function(t,e,n){switch(t){case h.WIDEVINE:return d(0,n);default:throw Error("Unknown key-system: "+t)}},p=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,s.a.MEDIA_ATTACHED,s.a.MANIFEST_PARSED));return e._widevineLicenseUrl=t.config.widevineLicenseUrl,e._licenseXhrSetup=t.config.licenseXhrSetup,e._emeEnabled=t.config.emeEnabled,e._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,e._mediaKeysList=[],e._media=null,e._hasSetMediaKeys=!1,e._isMediaEncrypted=!1,e._requestLicenseFailureCount=0,e}return a(i,n),i.prototype.getLicenseServerUrl=function(t){var e=void 0;switch(t){case h.WIDEVINE:e=this._widevineLicenseUrl;break;default:e=null}return e||(u.b.error('No license server URL configured for key-system "'+t+'"'),this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),e},i.prototype._attemptKeySystemAccess=function(e,t,n){var i=this,r=f(e,0,n);r?(u.b.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,r).then(function(t){i._onMediaKeySystemAccessObtained(e,t)})["catch"](function(t){u.b.error('Failed to obtain key-system "'+e+'" access:',t)})):u.b.warn("Can not create config for key-system (maybe because platform is not supported):",e)},i.prototype._onMediaKeySystemAccessObtained=function(e,t){var n=this;u.b.log('Access for key-system "'+e+'" obtained');var i={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(i),t.createMediaKeys().then(function(t){i.mediaKeys=t,u.b.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated()})["catch"](function(t){u.b.error("Failed to create media-keys:",t)})},i.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},i.prototype._onNewMediaKeySession=function(e){var n=this;u.b.log("New key-system session "+e.sessionId),e.addEventListener("message",function(t){n._onKeySessionMessage(e,t.message)},!1)},i.prototype._onKeySessionMessage=function(e,t){u.b.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){u.b.log("Received license data, updating key-session"),e.update(t)})},i.prototype._onMediaEncrypted=function(t,e){u.b.log('Media is encrypted using "'+t+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=t,this._mediaEncryptionInitData=e,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},i.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return u.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_KEYS,fatal:!0});u.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},i.prototype._generateRequestWithPreferredKeySession=function(){var e=this,t=this._mediaKeysList[0];if(!t)return u.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(t.mediaKeysSessionInitialized)u.b.warn("Key-Session already initialized but requested again");else{var n=t.mediaKeysSession;n||(u.b.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_SESSION,fatal:!0}));var i=this._mediaEncryptionInitDataType,r=this._mediaEncryptionInitData;u.b.log('Generating key-session request for "'+i+'" init data type'),t.mediaKeysSessionInitialized=!0,n.generateRequest(i,r).then(function(){u.b.debug("Key-session generation succeeded")})["catch"](function(t){u.b.error("Error generating key-session request:",t),e.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},i.prototype._createLicenseXhr=function(t,e,n){var i=new XMLHttpRequest,r=this._licenseXhrSetup;try{if(r)try{r(i,t)}catch(e){i.open("POST",t,!0),r(i,t)}i.readyState||i.open("POST",t,!0)}catch(t){return u.b.error("Error setting up key-system license XHR",t),void this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,t,e,n),i},i.prototype._onLicenseRequestReadyStageChange=function(t,e,n,i){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,u.b.log("License request succeeded"),i(t.response);else{if(u.b.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),++this._requestLicenseFailureCount<=3){var r=3-this._requestLicenseFailureCount+1;return u.b.warn("Retrying license request, "+r+" attempts left"),void this._requestLicense(n,i)}this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},i.prototype._generateLicenseRequestChallenge=function(t,e){var n=void 0;return t.mediaKeySystemDomain===h.PLAYREADY?u.b.error("PlayReady is not supported (yet)"):t.mediaKeySystemDomain===h.WIDEVINE?n=e:u.b.error("Unsupported key-system:",t.mediaKeySystemDomain),n},i.prototype._requestLicense=function(t,e){u.b.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return u.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});var i=this.getLicenseServerUrl(n.mediaKeySystemDomain),r=this._createLicenseXhr(i,t,e);u.b.log("Sending license request to URL: "+i),r.send(this._generateLicenseRequestChallenge(n,t))},i.prototype.onMediaAttached=function(t){var e=this;if(this._emeEnabled){var n=t.media;(this._media=n).addEventListener("encrypted",function(t){e._onMediaEncrypted(t.initDataType,t.initData)})}},i.prototype.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map(function(t){return t.audioCodec}),n=t.levels.map(function(t){return t.videoCodec});this._attemptKeySystemAccess(h.WIDEVINE,e,n)}},c(i,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),i}(i.a);e.a=p},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null},function(){String.prototype.endsWith||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(t){}return n}(),u={}.toString,e=function(t,e){if(null==this)throw TypeError();var n=String(this);if(t&&"[object RegExp]"==u.call(t))throw TypeError();var i=n.length,r=String(t),o=r.length,a=i;if(1<arguments.length){void 0!==e&&(a=e?Number(e):0)!=a&&(a=0)}var s=Math.min(Math.max(a,0),i)-o;if(s<0)return!1;for(var l=-1;++l<o;)if(n.charCodeAt(s+l)!=r.charCodeAt(l))return!1;return!0};t?t(String.prototype,"endsWith",{value:e,configurable:!0,writable:!0}):String.prototype.endsWith=e}()}])["default"]}),function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(E,t){"use strict";function g(t,e){var n=(e=e||et).createElement("script");n.text=t,e.head.appendChild(n).parentNode.removeChild(n)}function s(t){var e=!!t&&"length"in t&&t.length,n=pt.type(t);return"function"!==n&&!pt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}function u(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function e(t,n,i){return pt.isFunction(n)?pt.grep(t,function(t,e){return!!n.call(t,e,t)!==i}):n.nodeType?pt.grep(t,function(t){return t===n!==i}):"string"!=typeof n?pt.grep(t,function(t){return-1<at.call(n,t)!==i}):At.test(n)?pt.filter(n,t,i):(n=pt.filter(n,t),pt.grep(t,function(t){return-1<at.call(n,t)!==i&&1===t.nodeType}))}function n(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t){var n={};return pt.each(t.match(Lt)||[],function(t,e){n[e]=!0}),n}function h(t){return t}function d(t){throw t}function l(t,e,n,i){var r;try{t&&pt.isFunction(r=t.promise)?r.call(t).done(e).fail(n):t&&pt.isFunction(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}function i(){et.removeEventListener("DOMContentLoaded",i),E.removeEventListener("load",i),pt.ready()}function r(){this.expando=pt.expando+r.uid++}function o(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Ft.test(t)?JSON.parse(t):t)}function f(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Bt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=o(n)}catch(nt){}Mt.set(t,e,n)}else n=void 0;return n}function xt(t,e,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return pt.css(t,e,"")},l=s(),u=n&&n[3]||(pt.cssNumber[e]?"":"px"),c=(pt.cssNumber[e]||"px"!==u&&+l)&&Ht.exec(pt.css(t,e));if(c&&c[3]!==u)for(u=u||c[3],n=n||[],c=+l||1;c/=o=o||".5",pt.style(t,e,c+u),o!==(o=s()/l)&&1!==o&&--a;);return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}function p(t){var e,n=t.ownerDocument,i=t.nodeName,r=Gt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=pt.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),Gt[i]=r)}function v(t,e){for(var n,i,r=[],o=0,a=t.length;o<a;o++)(i=t[o]).style&&(n=i.style.display,e?("none"===n&&(r[o]=Nt.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&qt(i)&&(r[o]=p(i))):"none"!==n&&(r[o]="none",Nt.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}function m(t,e){var n;return n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&u(t,e)?pt.merge([t],n):n}function y(t,e){for(var n=0,i=t.length;n<i;n++)Nt.set(t[n],"globalEval",!e||Nt.get(e[n],"globalEval"))}function b(t,e,n,i,r){for(var o,a,s,l,u,c,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((o=t[f])||0===o)if("object"===pt.type(o))pt.merge(d,o.nodeType?[o]:o);else if(Jt.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=(Vt.exec(o)||["",""])[1].toLowerCase(),l=Xt[s]||Xt._default,a.innerHTML=l[1]+pt.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;pt.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(i&&-1<pt.inArray(o,i))r&&r.push(o);else if(u=pt.contains(o.ownerDocument,o),a=m(h.appendChild(o),"script"),u&&y(a),n)for(c=0;o=a[c++];)Kt.test(o.type||"")&&n.push(o);return h}function a(){return!0}function w(){return!1}function T(){try{return et.activeElement}catch(E){}}function S(t,e,n,i,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=void 0),e)S(t,s,n,i,e[s],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=w;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return pt().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=pt.guid++)),t.each(function(){pt.event.add(this,e,r,i,n)})}function A(t,e){return u(t,"table")&&u(11!==e.nodeType?e:e.firstChild,"tr")&&pt(">tbody",t)[0]||t}function x(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function C(t){var e=oe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function _(t,e){var n,i,r,o,a,s,l,u;if(1===e.nodeType){if(Nt.hasData(t)&&(o=Nt.access(t),a=Nt.set(e,o),u=o.events))for(r in delete a.handle,a.events={},u)for(n=0,i=u[r].length;n<i;n++)pt.event.add(e,r,u[r][n]);Mt.hasData(t)&&(s=Mt.access(t),l=pt.extend({},s),Mt.set(e,l))}}function k(t,e){var n=e.nodeName.toLowerCase();"input"===n&&zt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function R(n,i,r,o){i=rt.apply([],i);var t,e,a,s,l,u,c=0,h=n.length,d=h-1,f=i[0],p=pt.isFunction(f);if(p||1<h&&"string"==typeof f&&!dt.checkClone&&re.test(f))return n.each(function(t){var e=n.eq(t);p&&(i[0]=f.call(this,t,e.html())),R(e,i,r,o)});if(h&&(e=(t=b(i,n[0].ownerDocument,!1,n,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(s=(a=pt.map(m(t,"script"),x)).length;c<h;c++)l=t,c!==d&&(l=pt.clone(l,!0,!0),s&&pt.merge(a,m(l,"script"))),r.call(n[c],l,c);if(s)for(u=a[a.length-1].ownerDocument,pt.map(a,C),c=0;c<s;c++)l=a[c],Kt.test(l.type||"")&&!Nt.access(l,"globalEval")&&pt.contains(u,l)&&(l.src?pt._evalUrl&&pt._evalUrl(l.src):g(l.textContent.replace(ae,""),u))}return n}function L(t,e,n){for(var i,r=e?pt.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||pt.cleanData(m(i)),i.parentNode&&(n&&pt.contains(i.ownerDocument,i)&&y(m(i,"script")),i.parentNode.removeChild(i));return t}function D(t,e,n){var i,r,o,a,s=t.style;return(n=n||ue(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||pt.contains(t.ownerDocument,t)||(a=pt.style(t,e)),!dt.pixelMarginRight()&&le.test(a)&&se.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function P(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function I(t){if(t in ge)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=pe.length;n--;)if((t=pe[n]+e)in ge)return t}function O(t){var e=pt.cssProps[t];return e||(e=pt.cssProps[t]=I(t)||t),e}function N(t,e,n){var i=Ht.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function M(t,e,n,i,r){var o,a=0;for(o=n===(i?"border":"content")?4:"width"===e?1:0;o<4;o+=2)"margin"===n&&(a+=pt.css(t,n+Ut[o],!0,r)),i?("content"===n&&(a-=pt.css(t,"padding"+Ut[o],!0,r)),"margin"!==n&&(a-=pt.css(t,"border"+Ut[o]+"Width",!0,r))):(a+=pt.css(t,"padding"+Ut[o],!0,r),"padding"!==n&&(a+=pt.css(t,"border"+Ut[o]+"Width",!0,r)));return a}function F(t,e,n){var i,r=ue(t),o=D(t,e,r),a="border-box"===pt.css(t,"boxSizing",!1,r);return le.test(o)?o:(i=a&&(dt.boxSizingReliable()||o===t.style[e]),"auto"===o&&(o=t["offset"+e[0].toUpperCase()+e.slice(1)]),(o=parseFloat(o)||0)+M(t,e,n||(a?"border":"content"),i,r)+"px")}function B(t,e,n,i,r){return new B.prototype.init(t,e,n,i,r)}function j(){ve&&(!1===et.hidden&&E.requestAnimationFrame?E.requestAnimationFrame(j):E.setTimeout(j,pt.fx.interval),pt.fx.tick())}function H(){return E.setTimeout(function(){me=void 0}),me=pt.now()}function U(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=Ut[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function q(t,e,n){for(var i,r=(z.tweeners[e]||[]).concat(z.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function W(t,e,n){var i,r,o,a,s,l,u,c,h="width"in e||"height"in e,d=this,f={},p=t.style,g=t.nodeType&&qt(t),m=Nt.get(t,"fxshow");for(i in n.queue||(null==(a=pt._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,pt.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[i],we.test(r)){if(delete e[i],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}f[i]=m&&m[i]||pt.style(t,i)}if((l=!pt.isEmptyObject(e))||!pt.isEmptyObject(f))for(i in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=m&&m.display)&&(u=Nt.get(t,"display")),"none"===(c=pt.css(t,"display"))&&(u?c=u:(v([t],!0),u=t.style.display||u,c=pt.css(t,"display"),v([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===pt.css(t,"float")&&(l||(d.done(function(){p.display=u}),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(m?"hidden"in m&&(g=m.hidden):m=Nt.access(t,"fxshow",{display:u}),o&&(m.hidden=!g),g&&v([t],!0),d.done(function(){for(i in g||v([t]),Nt.remove(t,"fxshow"),f)pt.style(t,i,f[i])})),l=q(g?m[i]:0,i,d),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}function G(t,e){var n,i,r,o,a;for(n in t)if(r=e[i=pt.camelCase(n)],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(a=pt.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}function z(o,t,e){var n,a,i=0,r=z.prefilters.length,s=pt.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=me||H(),e=Math.max(0,u.startTime+u.duration-t),n=1-(e/u.duration||0),i=0,r=u.tweens.length;i<r;i++)u.tweens[i].run(n);return s.notifyWith(o,[u,n,e]),n<1&&r?e:(r||s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u]),!1)},u=s.promise({elem:o,props:pt.extend({},t),opts:pt.extend(!0,{specialEasing:{},easing:pt.easing._default},e),originalProperties:t,originalOptions:e,startTime:me||H(),duration:e.duration,tweens:[],createTween:function(t,e){var n=pt.Tween(o,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var e=0,n=t?u.tweens.length:0;if(a)return this;for(a=!0;e<n;e++)u.tweens[e].run(1);return t?(s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u,t])):s.rejectWith(o,[u,t]),this}}),c=u.props;for(G(c,u.opts.specialEasing);i<r;i++)if(n=z.prefilters[i].call(u,o,c,u.opts))return pt.isFunction(n.stop)&&(pt._queueHooks(u.elem,u.opts.queue).stop=pt.proxy(n.stop,n)),n;return pt.map(c,q,u),pt.isFunction(u.opts.start)&&u.opts.start.call(o,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),pt.fx.timer(pt.extend(l,{elem:o,anim:u,queue:u.opts.queue})),u}function V(t){return(t.match(Lt)||[]).join(" ")}function K(t){return t.getAttribute&&t.getAttribute("class")||""}function X(n,t,i,r){var e;if(Array.isArray(t))pt.each(t,function(t,e){i||De.test(n)?r(n,e):X(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,i,r)});else if(i||"object"!==pt.type(t))r(n,t);else for(e in t)X(n+"["+e+"]",t[e],i,r)}function Y(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,r=t.toLowerCase().match(Lt)||[];if(pt.isFunction(e))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function $(e,r,o,a){function s(t){var i;return l[t]=!0,pt.each(e[t]||[],function(t,e){var n=e(r,o,a);return"string"!=typeof n||u||l[n]?u?!(i=n):void 0:(r.dataTypes.unshift(n),s(n),!1)}),i}var l={},u=e===We;return s(r.dataTypes[0])||!l["*"]&&s("*")}function J(t,e){var n,i,r=pt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&pt.extend(!0,t,i),t}function Q(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}function Z(t,e,n,i){var r,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(r in u)if((s=r.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[r]:!0!==u[r]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(ut){return{state:"parsererror",error:a?ut:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}var tt=[],et=E.document,nt=Object.getPrototypeOf,it=tt.slice,rt=tt.concat,ot=tt.push,at=tt.indexOf,st={},lt=st.toString,ut=st.hasOwnProperty,ct=ut.toString,ht=ct.call(Object),dt={},ft="3.2.1",pt=function(t,e){return new pt.fn.init(t,e)},gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,mt=/^-ms-/,vt=/-([a-z])/g,yt=function(t,e){return e.toUpperCase()};pt.fn=pt.prototype={jquery:ft,constructor:pt,length:0,toArray:function(){return it.call(this)},get:function(t){return null==t?it.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=pt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return pt.each(this,t)},map:function(n){return this.pushStack(pt.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(it.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ot,sort:tt.sort,splice:tt.splice},pt.extend=pt.fn.extend=function(t){var e,n,i,r,o,a,s=t||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"==typeof s||pt.isFunction(s)||(s={}),l===u&&(s=this,l--);l<u;l++)if(null!=(e=arguments[l]))for(n in e)i=s[n],s!==(r=e[n])&&(c&&r&&(pt.isPlainObject(r)||(o=Array.isArray(r)))?(o?(o=!1,a=i&&Array.isArray(i)?i:[]):a=i&&pt.isPlainObject(i)?i:{},s[n]=pt.extend(c,a,r)):void 0!==r&&(s[n]=r));return s},pt.extend({expando:"jQuery"+(ft+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===pt.type(t)},isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=pt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==lt.call(t)||(e=nt(t))&&("function"!=typeof(n=ut.call(e,"constructor")&&e.constructor)||ct.call(n)!==ht))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?st[lt.call(t)]||"object":typeof t},globalEval:function(t){g(t)},camelCase:function(t){return t.replace(mt,"ms-").replace(vt,yt)},each:function(t,e){var n,i=0;if(s(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(gt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(s(Object(t))?pt.merge(n,"string"==typeof t?[t]:t):ot.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:at.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,a=!n;r<o;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,a=[];if(s(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&a.push(r);return rt.apply([],a)},guid:1,proxy:function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),pt.isFunction(t))return i=it.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(it.call(arguments)))}).guid=t.guid=t.guid||pt.guid++,r},now:Date.now,support:dt}),"function"==typeof Symbol&&(pt.fn[Symbol.iterator]=tt[Symbol.iterator]),pt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){st["[object "+e+"]"]=e.toLowerCase()});var bt=function(n){function w(t,e,n,i){var r,o,a,s,l,u,c,h=e&&e.ownerDocument,d=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return n;if(!i&&((e?e.ownerDocument||e:U)!==I&&P(e),e=e||I,N)){if(11!==d&&(l=vt.exec(t)))if(r=l[1]){if(9===d){if(!(a=e.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(h&&(a=h.getElementById(r))&&j(e,a)&&a.id===r)return n.push(a),n}else{if(l[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&S.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(r)),n}if(S.qsa&&!V[t+" "]&&(!M||!M.test(t))){if(1!==d)h=e,c=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(Tt,St):e.setAttribute("id",s=H),o=(u=C(t)).length;o--;)u[o]="#"+s+" "+p(u[o]);c=u.join(","),h=yt.test(t)&&f(e.parentNode)||e}if(c)try{return Q.apply(n,h.querySelectorAll(c)),n}catch(W){}finally{s===H&&e.removeAttribute("id")}}}return k(t.replace(st,"$1"),e,n,i)}function t(){function n(t,e){return i.push(t+" ")>E.cacheLength&&delete n[i.shift()],n[t+" "]=e}var i=[];return n}function l(t){return t[H]=!0,t}function r(t){var e=I.createElement("fieldset");try{return!!t(e)}catch(S){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function e(t,e){for(var n=t.split("|"),i=n.length;i--;)E.attrHandle[n[i]]=e}function u(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function i(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function o(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function a(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&At(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function s(a){return l(function(o){return o=+o,l(function(t,e){for(var n,i=a([],t.length,o),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}function f(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function c(){}function p(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function h(s,t,e){var l=t.dir,u=t.next,c=u||l,h=e&&"parentNode"===c,d=W++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||h)return s(t,e,n);return!1}:function(t,e,n){var i,r,o,a=[q,d];if(n){for(;t=t[l];)if((1===t.nodeType||h)&&s(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||h)if(r=(o=t[H]||(t[H]={}))[t.uniqueID]||(o[t.uniqueID]={}),u&&u===t.nodeName.toLowerCase())t=t[l]||t;else{if((i=r[c])&&i[0]===q&&i[1]===d)return a[2]=i[2];if((r[c]=a)[2]=s(t,e,n))return!0}return!1}}function d(r){return 1<r.length?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function y(t,e,n){for(var i=0,r=e.length;i<r;i++)w(t,e[i],n);return n}function T(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),u&&e.push(s)));return a}function b(f,p,g,m,v,t){return m&&!m[H]&&(m=b(m)),v&&!v[H]&&(v=b(v,t)),l(function(t,e,n,i){var r,o,a,s=[],l=[],u=e.length,c=t||y(p||"*",n.nodeType?[n]:n,[]),h=!f||!t&&p?c:T(c,s,f,n,i),d=g?v||(t?f:u||m)?[]:e:h;if(g&&g(h,d,n,i),m)for(r=T(d,l),m(r,[],n,i),o=r.length;o--;)(a=r[o])&&(d[l[o]]=!(h[l[o]]=a));if(t){if(v||f){if(v){for(r=[],o=d.length;o--;)(a=d[o])&&r.push(h[o]=a);v(null,d=[],r,i)}for(o=d.length;o--;)(a=d[o])&&-1<(r=v?tt(t,a):s[o])&&(t[r]=!(e[r]=a))}}else d=T(d===e?d.splice(u,d.length):d),v?v(null,e,d,i):Q.apply(e,d)})}
function g(t){for(var r,e,n,i=t.length,o=E.relative[t[0].type],a=o||E.relative[" "],s=o?1:0,l=h(function(t){return t===r},a,!0),u=h(function(t){return-1<tt(r,t)},a,!0),c=[function(t,e,n){var i=!o&&(n||e!==R)||((r=e).nodeType?l(t,e,n):u(t,e,n));return r=null,i}];s<i;s++)if(e=E.relative[t[s].type])c=[h(d(c),e)];else{if((e=E.filter[t[s].type].apply(null,t[s].matches))[H]){for(n=++s;n<i&&!E.relative[t[n].type];n++);return b(1<s&&d(c),1<s&&p(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),e,s<n&&g(t.slice(s,n)),n<i&&g(t=t.slice(n)),n<i&&p(t))}c.push(e)}return d(c)}function m(m,v){var y=0<v.length,b=0<m.length,t=function(t,e,n,i,r){var o,a,s,l=0,u="0",c=t&&[],h=[],d=R,f=t||b&&E.find.TAG("*",r),p=q+=null==d?1:Math.random()||.1,g=f.length;for(r&&(R=e===I||e||r);u!==g&&null!=(o=f[u]);u++){if(b&&o){for(a=0,e||o.ownerDocument===I||(P(o),n=!N);s=m[a++];)if(s(o,e||I,n)){i.push(o);break}r&&(q=p)}y&&((o=!s&&o)&&l--,t&&c.push(o))}if(l+=u,y&&u!==l){for(a=0;s=v[a++];)s(c,h,e,n);if(t){if(0<l)for(;u--;)c[u]||h[u]||(h[u]=$.call(i));h=T(h)}Q.apply(i,h),r&&!t&&0<h.length&&1<l+v.length&&w.uniqueSort(i)}return r&&(q=p,R=d),c};return y?l(t):t}var v,S,E,A,x,C,_,k,R,L,D,P,I,O,N,M,F,B,j,H="sizzle"+1*new Date,U=n.document,q=0,W=0,G=t(),z=t(),V=t(),K=function(t,e){return t===e&&(D=!0),0},X={}.hasOwnProperty,Y=[],$=Y.pop,J=Y.push,Q=Y.push,Z=Y.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",rt="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",ot=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ct=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(ot),dt=new RegExp("^"+it+"$"),ft={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Tt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,St=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},Et=function(){P()},At=h(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{Q.apply(Y=Z.call(U.childNodes),U.childNodes),Y[U.childNodes.length].nodeType}catch(xt){Q={apply:Y.length?function(t,e){J.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}for(v in S=w.support={},x=w.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=w.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:U;return i!==I&&9===i.nodeType&&i.documentElement&&(O=(I=i).documentElement,N=!x(I),U!==I&&(n=I.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Et,!1):n.attachEvent&&n.attachEvent("onunload",Et)),S.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),S.getElementsByTagName=r(function(t){return t.appendChild(I.createComment("")),!t.getElementsByTagName("*").length}),S.getElementsByClassName=mt.test(I.getElementsByClassName),S.getById=r(function(t){return O.appendChild(t).id=H,!I.getElementsByName||!I.getElementsByName(H).length}),S.getById?(E.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){return t.getAttribute("id")===e}},E.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&N){var n=e.getElementById(t);return n?[n]:[]}}):(E.filter.ID=function(t){var n=t.replace(bt,wt);return function(t){var e="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},E.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&N){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),E.find.TAG=S.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):S.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},E.find.CLASS=S.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&N)return e.getElementsByClassName(t)},F=[],M=[],(S.qsa=mt.test(I.querySelectorAll))&&(r(function(t){O.appendChild(t).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||M.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+H+"-]").length||M.push("~="),t.querySelectorAll(":checked").length||M.push(":checked"),t.querySelectorAll("a#"+H+"+*").length||M.push(".#.+[+~]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=I.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&M.push("name"+nt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&M.push(":enabled",":disabled"),O.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&M.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),M.push(",.*:")})),(S.matchesSelector=mt.test(B=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(t){S.disconnectedMatch=B.call(t,"*"),B.call(t,"[s!='']:x"),F.push("!=",ot)}),M=M.length&&new RegExp(M.join("|")),F=F.length&&new RegExp(F.join("|")),e=mt.test(O.compareDocumentPosition),j=e||mt.test(O.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},K=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!S.sortDetached&&e.compareDocumentPosition(t)===n?t===I||t.ownerDocument===U&&j(U,t)?-1:e===I||e.ownerDocument===U&&j(U,e)?1:L?tt(L,t)-tt(L,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t===I?-1:e===I?1:r?-1:o?1:L?tt(L,t)-tt(L,e):0;if(r===o)return u(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?u(a[i],s[i]):a[i]===U?-1:s[i]===U?1:0}),I},w.matches=function(t,e){return w(t,null,null,e)},w.matchesSelector=function(t,e){if((t.ownerDocument||t)!==I&&P(t),e=e.replace(ct,"='$1']"),S.matchesSelector&&N&&!V[e+" "]&&(!F||!F.test(e))&&(!M||!M.test(e)))try{var n=B.call(t,e);if(n||S.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(A){}return 0<w(e,I,null,[t]).length},w.contains=function(t,e){return(t.ownerDocument||t)!==I&&P(t),j(t,e)},w.attr=function(t,e){(t.ownerDocument||t)!==I&&P(t);var n=E.attrHandle[e.toLowerCase()],i=n&&X.call(E.attrHandle,e.toLowerCase())?n(t,e,!N):void 0;return void 0!==i?i:S.attributes||!N?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},w.escape=function(t){return(t+"").replace(Tt,St)},w.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},w.uniqueSort=function(t){var e,n=[],i=0,r=0;if(D=!S.detectDuplicates,L=!S.sortStable&&t.slice(0),t.sort(K),D){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return L=null,t},A=w.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=A(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=A(e);return n},(E=w.selectors={cacheLength:50,createPseudo:l,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||w.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&w.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ht.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=G[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&G(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(t){var e=w.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===r:"!="===i?e!==r:"^="===i?r&&0===e.indexOf(r):"*="===i?r&&-1<e.indexOf(r):"$="===i?r&&e.slice(-r.length)===r:"~="===i?-1<(" "+e.replace(at," ")+" ").indexOf(r):"|="===i&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,t,e,g,m){var v="nth"!==p.slice(0,3),y="last"!==p.slice(-4),b="of-type"===t;return 1===g&&0===m?function(t){return!!t.parentNode}:function(t,e,n){var i,r,o,a,s,l,u=v!==y?"nextSibling":"previousSibling",c=t.parentNode,h=b&&t.nodeName.toLowerCase(),d=!n&&!b,f=!1;if(c){if(v){for(;u;){for(a=t;a=a[u];)if(b?a.nodeName.toLowerCase()===h:1===a.nodeType)return!1;l=u="only"===p&&!l&&"nextSibling"}return!0}if(l=[y?c.firstChild:c.lastChild],y&&d){for(f=(s=(i=(r=(o=(a=c)[H]||(a[H]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===q&&i[1])&&i[2],a=s&&c.childNodes[s];a=++s&&a&&a[u]||(f=s=0)||l.pop();)if(1===a.nodeType&&++f&&a===t){r[p]=[q,s,f];break}}else if(d&&(f=s=(i=(r=(o=(a=t)[H]||(a[H]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===q&&i[1]),!1===f)for(;(a=++s&&a&&a[u]||(f=s=0)||l.pop())&&((b?a.nodeName.toLowerCase()!==h:1!==a.nodeType)||!++f||(d&&((r=(o=a[H]||(a[H]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]=[q,f]),a!==t)););return(f-=m)===g||f%g==0&&0<=f/g}}},PSEUDO:function(t,o){var e,a=E.pseudos[t]||E.setFilters[t.toLowerCase()]||w.error("unsupported pseudo: "+t);return a[H]?a(o):1<a.length?(e=[t,t,"",o],E.setFilters.hasOwnProperty(t.toLowerCase())?l(function(t,e){for(var n,i=a(t,o),r=i.length;r--;)t[n=tt(t,i[r])]=!(e[n]=i[r])}):function(t){return a(t,0,e)}):a}},pseudos:{not:l(function(t){var i=[],r=[],s=_(t.replace(st,"$1"));return s[H]?l(function(t,e,n,i){for(var r,o=s(t,null,i,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,e,n){return i[0]=t,s(i,null,n,r),i[0]=null,!r.pop()}}),has:l(function(e){return function(t){return 0<w(e,t).length}}),contains:l(function(e){return e=e.replace(bt,wt),function(t){return-1<(t.textContent||t.innerText||A(t)).indexOf(e)}}),lang:l(function(n){return dt.test(n||"")||w.error("unsupported lang: "+n),n=n.replace(bt,wt).toLowerCase(),function(t){var e;do{if(e=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===O},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!E.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:s(function(){return[0]}),last:s(function(t,e){return[e-1]}),eq:s(function(t,e,n){return[n<0?n+e:n]}),even:s(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:s(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:s(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:s(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=E.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[v]=i(v);for(v in{submit:!0,reset:!0})E.pseudos[v]=o(v);return c.prototype=E.filters=E.pseudos,E.setFilters=new c,C=w.tokenize=function(t,e){var n,i,r,o,a,s,l,u=z[t+" "];if(u)return e?0:u.slice(0);for(a=t,s=[],l=E.preFilter;a;){for(o in n&&!(i=lt.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(r=[])),n=!1,(i=ut.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(st," ")}),a=a.slice(n.length)),E.filter)!(i=ft[o].exec(a))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?w.error(t):z(t,s).slice(0)},_=w.compile=function(t,e){var n,i=[],r=[],o=V[t+" "];if(!o){for(e||(e=C(t)),n=e.length;n--;)(o=g(e[n]))[H]?i.push(o):r.push(o);(o=V(t,m(r,i))).selector=t}return o},k=w.select=function(t,e,n,i){var r,o,a,s,l,u="function"==typeof t&&t,c=!i&&C(t=u.selector||t);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===e.nodeType&&N&&E.relative[o[1].type]){if(!(e=(E.find.ID(a.matches[0].replace(bt,wt),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=ft.needsContext.test(t)?0:o.length;r--&&(a=o[r],!E.relative[s=a.type]);)if((l=E.find[s])&&(i=l(a.matches[0].replace(bt,wt),yt.test(o[0].type)&&f(e.parentNode)||e))){if(o.splice(r,1),!(t=i.length&&p(o)))return Q.apply(n,i),n;break}}return(u||_(t,c))(i,e,!N,n,!e||yt.test(t)&&f(e.parentNode)||e),n},S.sortStable=H.split("").sort(K).join("")===H,S.detectDuplicates=!!D,P(),S.sortDetached=r(function(t){return 1&t.compareDocumentPosition(I.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||e("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),S.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||e("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||e(et,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),w}(E);pt.find=bt,pt.expr=bt.selectors,pt.expr[":"]=pt.expr.pseudos,pt.uniqueSort=pt.unique=bt.uniqueSort,pt.text=bt.getText,pt.isXMLDoc=bt.isXML,pt.contains=bt.contains,pt.escapeSelector=bt.escape;var wt=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&pt(t).is(n))break;i.push(t)}return i},Tt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},St=pt.expr.match.needsContext,Et=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,At=/^.[^:#\[\.,]*$/;pt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?pt.find.matchesSelector(i,t)?[i]:[]:pt.find.matches(t,pt.grep(e,function(t){return 1===t.nodeType}))},pt.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(pt(t).filter(function(){for(e=0;e<i;e++)if(pt.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)pt.find(t,r[e],n);return 1<i?pt.uniqueSort(n):n},filter:function(t){return this.pushStack(e(this,t||[],!1))},not:function(t){return this.pushStack(e(this,t||[],!0))},is:function(t){return!!e(this,"string"==typeof t&&St.test(t)?pt(t):t||[],!1).length}});var Ct,_t=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(pt.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||Ct,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:_t.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof pt?e[0]:e,pt.merge(this,pt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:et,!0)),Et.test(i[1])&&pt.isPlainObject(e))for(i in e)pt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=et.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):pt.isFunction(t)?void 0!==n.ready?n.ready(t):t(pt):pt.makeArray(t,this)}).prototype=pt.fn,Ct=pt(et);var kt=/^(?:parents|prev(?:Until|All))/,Rt={children:!0,contents:!0,next:!0,prev:!0};pt.fn.extend({has:function(t){var e=pt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(pt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],a="string"!=typeof t&&pt(t);if(!St.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&pt.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?pt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?at.call(pt(t),this[0]):at.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(pt.uniqueSort(pt.merge(this.get(),pt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),pt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return wt(t,"parentNode")},parentsUntil:function(t,e,n){return wt(t,"parentNode",n)},next:function(t){return n(t,"nextSibling")},prev:function(t){return n(t,"previousSibling")},nextAll:function(t){return wt(t,"nextSibling")},prevAll:function(t){return wt(t,"previousSibling")},nextUntil:function(t,e,n){return wt(t,"nextSibling",n)},prevUntil:function(t,e,n){return wt(t,"previousSibling",n)},siblings:function(t){return Tt((t.parentNode||{}).firstChild,t)},children:function(t){return Tt(t.firstChild)},contents:function(t){return u(t,"iframe")?t.contentDocument:(u(t,"template")&&(t=t.content||t),pt.merge([],t.childNodes))}},function(i,r){pt.fn[i]=function(t,e){var n=pt.map(this,r,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=pt.filter(e,n)),1<this.length&&(Rt[i]||pt.uniqueSort(n),kt.test(i)&&n.reverse()),this.pushStack(n)}});var Lt=/[^\x20\t\r\n\f]+/g;pt.Callbacks=function(i){i="string"==typeof i?c(i):pt.extend({},i);var r,t,e,n,o=[],a=[],s=-1,l=function(){for(n=n||i.once,e=r=!0;a.length;s=-1)for(t=a.shift();++s<o.length;)!1===o[s].apply(t[0],t[1])&&i.stopOnFalse&&(s=o.length,t=!1);i.memory||(t=!1),r=!1,n&&(o=t?[]:"")},u={add:function(){return o&&(t&&!r&&(s=o.length-1,a.push(t)),function n(t){pt.each(t,function(t,e){pt.isFunction(e)?i.unique&&u.has(e)||o.push(e):e&&e.length&&"string"!==pt.type(e)&&n(e)})}(arguments),t&&!r&&l()),this},remove:function(){return pt.each(arguments,function(t,e){for(var n;-1<(n=pt.inArray(e,o,n));)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?-1<pt.inArray(t,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return n=a=[],o=t="",this},disabled:function(){return!o},lock:function(){return n=a=[],t||r||(o=t=""),this},locked:function(){return!!n},fireWith:function(t,e){return n||(e=[t,(e=e||[]).slice?e.slice():e],a.push(e),r||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!e}};return u},pt.extend({Deferred:function(t){var o=[["notify","progress",pt.Callbacks("memory"),pt.Callbacks("memory"),2],["resolve","done",pt.Callbacks("once memory"),pt.Callbacks("once memory"),0,"resolved"],["reject","fail",pt.Callbacks("once memory"),pt.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(t){return a.then(null,t)},pipe:function(){var r=arguments;return pt.Deferred(function(i){pt.each(o,function(t,e){var n=pt.isFunction(r[e[4]])&&r[e[4]];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&pt.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this,n?[t]:arguments)})}),r=null}).promise()},then:function(e,n,i){function l(r,o,a,s){return function(){var n=this,i=arguments,t=function(){var t,e;if(!(r<u)){if((t=a.apply(n,i))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,pt.isFunction(e)?s?e.call(t,l(u,o,h,s),l(u,o,d,s)):(u++,e.call(t,l(u,o,h,s),l(u,o,d,s),l(u,o,h,o.notifyWith))):(a!==h&&(n=void 0,i=[t]),(s||o.resolveWith)(n,i))}},e=s?t:function(){try{t()}catch(E){pt.Deferred.exceptionHook&&pt.Deferred.exceptionHook(E,e.stackTrace),u<=r+1&&(a!==d&&(n=void 0,i=[E]),o.rejectWith(n,i))}};r?e():(pt.Deferred.getStackHook&&(e.stackTrace=pt.Deferred.getStackHook()),E.setTimeout(e))}}var u=0;return pt.Deferred(function(t){o[0][3].add(l(0,t,pt.isFunction(i)?i:h,t.notifyWith)),o[1][3].add(l(0,t,pt.isFunction(e)?e:h)),o[2][3].add(l(0,t,pt.isFunction(n)?n:d))}).promise()},promise:function(t){return null!=t?pt.extend(t,a):a}},s={};return pt.each(o,function(t,e){var n=e[2],i=e[5];a[e[1]]=n.add,i&&n.add(function(){r=i},o[3-t][2].disable,o[0][2].lock),n.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=n.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){var n=arguments.length,e=n,i=Array(e),r=it.call(arguments),o=pt.Deferred(),a=function(e){return function(t){i[e]=this,r[e]=1<arguments.length?it.call(arguments):t,--n||o.resolveWith(i,r)}};if(n<=1&&(l(t,o.done(a(e)).resolve,o.reject,!n),"pending"===o.state()||pt.isFunction(r[e]&&r[e].then)))return o.then();for(;e--;)l(r[e],a(e),o.reject);return o.promise()}});var Dt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;pt.Deferred.exceptionHook=function(t,e){E.console&&E.console.warn&&t&&Dt.test(t.name)&&E.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},pt.readyException=function(t){E.setTimeout(function(){throw t})};var Pt=pt.Deferred();pt.fn.ready=function(t){return Pt.then(t)["catch"](function(t){pt.readyException(t)}),this},pt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--pt.readyWait:pt.isReady)||((pt.isReady=!0)!==t&&0<--pt.readyWait||Pt.resolveWith(et,[pt]))}}),pt.ready.then=Pt.then,"complete"===et.readyState||"loading"!==et.readyState&&!et.documentElement.doScroll?E.setTimeout(pt.ready):(et.addEventListener("DOMContentLoaded",i),E.addEventListener("load",i));var It=function(t,e,n,i,r,o,a){var s=0,l=t.length,u=null==n;if("object"===pt.type(n))for(s in r=!0,n)It(t,e,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,pt.isFunction(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(pt(t),n)})),e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:u?e.call(t):l?e(t[0],n):o},Ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};r.uid=1,r.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[pt.camelCase(e)]=n;else for(i in e)r[pt.camelCase(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][pt.camelCase(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){Array.isArray(e)?e=e.map(pt.camelCase):e=(e=pt.camelCase(e))in i?[e]:e.match(Lt)||[],n=e.length;for(;n--;)delete i[e[n]]}(void 0===e||pt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!pt.isEmptyObject(e)}};var Nt=new r,Mt=new r,Ft=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Bt=/[A-Z]/g;pt.extend({hasData:function(t){return Mt.hasData(t)||Nt.hasData(t)},data:function(t,e,n){return Mt.access(t,e,n)},removeData:function(t,e){Mt.remove(t,e)},_data:function(t,e,n){return Nt.access(t,e,n)},_removeData:function(t,e){Nt.remove(t,e)}}),pt.fn.extend({data:function(n,t){var e,i,r,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(r=Mt.get(o),1===o.nodeType&&!Nt.get(o,"hasDataAttrs"))){for(e=a.length;e--;)a[e]&&(0===(i=a[e].name).indexOf("data-")&&(i=pt.camelCase(i.slice(5)),f(o,i,r[i])));Nt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof n?this.each(function(){Mt.set(this,n)}):It(this,function(t){var e;if(o&&void 0===t){if(void 0!==(e=Mt.get(o,n)))return e;if(void 0!==(e=f(o,n)))return e}else this.each(function(){Mt.set(this,n,t)})},null,t,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){Mt.remove(this,t)})}}),pt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Nt.get(t,e),n&&(!i||Array.isArray(n)?i=Nt.access(t,e,pt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=pt.queue(t,e),i=n.length,r=n.shift(),o=pt._queueHooks(t,e),a=function(){pt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Nt.get(t,n)||Nt.access(t,n,{empty:pt.Callbacks("once memory").add(function(){Nt.remove(t,[e+"queue",n])})})}}),pt.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?pt.queue(this[0],e):void 0===n?this:this.each(function(){var t=pt.queue(this,e,n);pt._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&pt.dequeue(this,e)})},dequeue:function(t){return this.each(function(){pt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=pt.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=Nt.get(o[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var jt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ht=new RegExp("^(?:([+-])=|)("+jt+")([a-z%]*)$","i"),Ut=["Top","Right","Bottom","Left"],qt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&pt.contains(t.ownerDocument,t)&&"none"===pt.css(t,"display")},Wt=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=a[o];return r},Gt={};pt.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){qt(this)?pt(this).show():pt(this).hide()})}});var zt=/^(?:checkbox|radio)$/i,Vt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Kt=/^$|\/(?:java|ecma)script/i,Xt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xt.optgroup=Xt.option,Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td;var Yt,$t,Jt=/<|&#?\w+;/;Yt=et.createDocumentFragment().appendChild(et.createElement("div")),($t=et.createElement("input")).setAttribute("type","radio"),$t.setAttribute("checked","checked"),$t.setAttribute("name","t"),Yt.appendChild($t),dt.checkClone=Yt.cloneNode(!0).cloneNode(!0).lastChild.checked,Yt.innerHTML="<textarea>x</textarea>",dt.noCloneChecked=!!Yt.cloneNode(!0).lastChild.defaultValue;var Qt=et.documentElement,Zt=/^key/,te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ee=/^([^.]*)(?:\.(.+)|)/;pt.event={global:{},add:function(e,t,n,i,r){var o,a,s,l,u,c,h,d,f,p,g,m=Nt.get(e);if(m)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&pt.find.matchesSelector(Qt,r),n.guid||(n.guid=pt.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(t){return void 0!==pt&&pt.event.triggered!==t.type?pt.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(Lt)||[""]).length;u--;)f=g=(s=ee.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),f&&(h=pt.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=pt.event.special[f]||{},c=pt.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&pt.expr.match.needsContext.test(r),namespace:p.join(".")},o),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,p,a)||e.addEventListener&&e.addEventListener(f,a)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),pt.event.global[f]=!0)},remove:function(t,e,n,i,r){var o,a,s,l,u,c,h,d,f,p,g,m=Nt.hasData(t)&&Nt.get(t);if(m&&(l=m.events)){for(u=(e=(e||"").match(Lt)||[""]).length;u--;)if(f=g=(s=ee.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),f){for(h=pt.event.special[f]||{},d=l[f=(i?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!r&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));a&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,m.handle)||pt.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)pt.event.remove(t,f+e[u],n,i,!0);pt.isEmptyObject(l)&&Nt.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,a,s=pt.event.fix(t),l=new Array(arguments.length),u=(Nt.get(this,"events")||{})[s.type]||[],c=pt.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=pt.event.handlers.call(this,s,u),e=0;(r=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(i=((pt.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,i,r,o,a,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[r=(i=e[n]).selector+" "]&&(a[r]=i.needsContext?-1<pt(r,this).index(u):pt.find(r,this,null,[u]).length),a[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(e,t){Object.defineProperty(pt.Event.prototype,e,{enumerable:!0,configurable:!0,get:pt.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[pt.expando]?t:new pt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==T()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===T()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&u(this,"input"))return this.click(),!1},_default:function(t){return u(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},
pt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},pt.Event=function(t,e){return this instanceof pt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?a:w,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&pt.extend(this,e),this.timeStamp=t&&t.timeStamp||pt.now(),void(this[pt.expando]=!0)):new pt.Event(t,e)},pt.Event.prototype={constructor:pt.Event,isDefaultPrevented:w,isPropagationStopped:w,isImmediatePropagationStopped:w,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=a,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=a,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=a,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},pt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Zt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&te.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},pt.event.addProp),pt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){pt.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=this,i=t.relatedTarget,r=t.handleObj;return i&&(i===n||pt.contains(n,i))||(t.type=r.origType,e=r.handler.apply(this,arguments),t.type=o),e}}}),pt.fn.extend({on:function(t,e,n,i){return S(this,t,e,n,i)},one:function(t,e,n,i){return S(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,pt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=w),this.each(function(){pt.event.remove(this,t,n,e)})}});var ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ie=/<script|<style|<link/i,re=/checked\s*(?:[^=]|=\s*.checked.)/i,oe=/^true\/(.*)/,ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;pt.extend({htmlPrefilter:function(t){return t.replace(ne,"<$1></$2>")},clone:function(t,e,n){var i,r,o,a,s=t.cloneNode(!0),l=pt.contains(t.ownerDocument,t);if(!(dt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||pt.isXMLDoc(t)))for(a=m(s),i=0,r=(o=m(t)).length;i<r;i++)k(o[i],a[i]);if(e)if(n)for(o=o||m(t),a=a||m(s),i=0,r=o.length;i<r;i++)_(o[i],a[i]);else _(t,s);return 0<(a=m(s,"script")).length&&y(a,!l&&m(t,"script")),s},cleanData:function(t){for(var e,n,i,r=pt.event.special,o=0;void 0!==(n=t[o]);o++)if(Ot(n)){if(e=n[Nt.expando]){if(e.events)for(i in e.events)r[i]?pt.event.remove(n,i):pt.removeEvent(n,i,e.handle);n[Nt.expando]=void 0}n[Mt.expando]&&(n[Mt.expando]=void 0)}}}),pt.fn.extend({detach:function(t){return L(this,t,!0)},remove:function(t){return L(this,t)},text:function(t){return It(this,function(t){return void 0===t?pt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return R(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||A(this,t).appendChild(t)})},prepend:function(){return R(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=A(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return R(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return R(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(pt.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return pt.clone(this,t,e)})},html:function(t){return It(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ie.test(t)&&!Xt[(Vt.exec(t)||["",""])[1].toLowerCase()]){t=pt.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(pt.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(nt){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return R(this,arguments,function(t){var e=this.parentNode;pt.inArray(this,n)<0&&(pt.cleanData(m(this)),e&&e.replaceChild(t,this))},n)}}),pt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){pt.fn[t]=function(t){for(var e,n=[],i=pt(t),r=i.length-1,o=0;o<=r;o++)e=o===r?this:this.clone(!0),pt(i[o])[a](e),ot.apply(n,e.get());return this.pushStack(n)}});var se=/^margin/,le=new RegExp("^("+jt+")(?!px)[a-z%]+$","i"),ue=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=E),e.getComputedStyle(t)};!function(){function t(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Qt.appendChild(o);var t=E.getComputedStyle(a);e="1%"!==t.top,r="2px"===t.marginLeft,n="4px"===t.width,a.style.marginRight="50%",i="4px"===t.marginRight,Qt.removeChild(o),a=null}}var e,n,i,r,o=et.createElement("div"),a=et.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",dt.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),pt.extend(dt,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return t(),n},pixelMarginRight:function(){return t(),i},reliableMarginLeft:function(){return t(),r}}))}();var ce=/^(none|table(?!-c[ea]).+)/,he=/^--/,de={position:"absolute",visibility:"hidden",display:"block"},fe={letterSpacing:"0",fontWeight:"400"},pe=["Webkit","Moz","ms"],ge=et.createElement("div").style;pt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=D(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=pt.camelCase(e),l=he.test(e),u=t.style;return l||(e=O(s)),a=pt.cssHooks[e]||pt.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:u[e]:("string"===(o=typeof n)&&(r=Ht.exec(n))&&r[1]&&(n=xt(t,e,r),o="number"),void(null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(pt.cssNumber[s]?"":"px")),dt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l?u.setProperty(e,n):u[e]=n))))}},css:function(t,e,n,i){var r,o,a,s=pt.camelCase(e);return he.test(e)||(e=O(s)),(a=pt.cssHooks[e]||pt.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=D(t,e,i)),"normal"===r&&e in fe&&(r=fe[e]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),pt.each(["height","width"],function(t,a){pt.cssHooks[a]={get:function(t,e,n){if(e)return!ce.test(pt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?F(t,a,n):Wt(t,de,function(){return F(t,a,n)})},set:function(t,e,n){var i,r=n&&ue(t),o=n&&M(t,a,n,"border-box"===pt.css(t,"boxSizing",!1,r),r);return o&&(i=Ht.exec(e))&&"px"!==(i[3]||"px")&&(t.style[a]=e,e=pt.css(t,a)),N(t,e,o)}}}),pt.cssHooks.marginLeft=P(dt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(D(t,"marginLeft"))||t.getBoundingClientRect().left-Wt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),pt.each({margin:"",padding:"",border:"Width"},function(r,o){pt.cssHooks[r+o]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[r+Ut[e]+o]=i[e]||i[e-2]||i[0];return n}},se.test(r)||(pt.cssHooks[r+o].set=N)}),pt.fn.extend({css:function(t,e){return It(this,function(t,e,n){var i,r,o={},a=0;if(Array.isArray(e)){for(i=ue(t),r=e.length;a<r;a++)o[e[a]]=pt.css(t,e[a],!1,i);return o}return void 0!==n?pt.style(t,e,n):pt.css(t,e)},t,e,1<arguments.length)}}),(pt.Tween=B).prototype={constructor:B,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||pt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(pt.cssNumber[n]?"":"px")},cur:function(){var t=B.propHooks[this.prop];return t&&t.get?t.get(this):B.propHooks._default.get(this)},run:function(t){var e,n=B.propHooks[this.prop];return this.options.duration?this.pos=e=pt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=pt.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){pt.fx.step[t.prop]?pt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[pt.cssProps[t.prop]]&&!pt.cssHooks[t.prop]?t.elem[t.prop]=t.now:pt.style(t.elem,t.prop,t.now+t.unit)}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},pt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},pt.fx=B.prototype.init,pt.fx.step={};var me,ve,ye,be,we=/^(?:toggle|show|hide)$/,Te=/queueHooks$/;pt.Animation=pt.extend(z,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return xt(n.elem,t,Ht.exec(e),n),n}]},tweener:function(t,e){pt.isFunction(t)?(e=t,t=["*"]):t=t.match(Lt);for(var n,i=0,r=t.length;i<r;i++)n=t[i],z.tweeners[n]=z.tweeners[n]||[],z.tweeners[n].unshift(e)},prefilters:[W],prefilter:function(t,e){e?z.prefilters.unshift(t):z.prefilters.push(t)}}),pt.speed=function(t,e,n){var i=t&&"object"==typeof t?pt.extend({},t):{complete:n||!n&&e||pt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!pt.isFunction(e)&&e};return pt.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in pt.fx.speeds?i.duration=pt.fx.speeds[i.duration]:i.duration=pt.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){pt.isFunction(i.old)&&i.old.call(this),i.queue&&pt.dequeue(this,i.queue)},i},pt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(qt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var r=pt.isEmptyObject(e),o=pt.speed(t,n,i),a=function(){var t=z(this,pt.extend({},e),o);(r||Nt.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(r,t,o){var a=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof r&&(o=t,t=r,r=void 0),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",n=pt.timers,i=Nt.get(this);if(e)i[e]&&i[e].stop&&a(i[e]);else for(e in i)i[e]&&i[e].stop&&Te.test(e)&&a(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=r&&n[e].queue!==r||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||pt.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=Nt.get(this),n=e[a+"queue"],i=e[a+"queueHooks"],r=pt.timers,o=n?n.length:0;for(e.finish=!0,pt.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===a&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),pt.each(["toggle","show","hide"],function(t,i){var r=pt.fn[i];pt.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(U(i,!0),t,e,n)}}),pt.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){pt.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),pt.timers=[],pt.fx.tick=function(){var t,e=0,n=pt.timers;for(me=pt.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||pt.fx.stop(),me=void 0},pt.fx.timer=function(t){pt.timers.push(t),pt.fx.start()},pt.fx.interval=13,pt.fx.start=function(){ve||(ve=!0,j())},pt.fx.stop=function(){ve=null},pt.fx.speeds={slow:600,fast:200,_default:400},pt.fn.delay=function(i,t){return i=pt.fx&&pt.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=E.setTimeout(t,i);e.stop=function(){E.clearTimeout(n)}})},ye=et.createElement("input"),be=et.createElement("select").appendChild(et.createElement("option")),ye.type="checkbox",dt.checkOn=""!==ye.value,dt.optSelected=be.selected,(ye=et.createElement("input")).value="t",ye.type="radio",dt.radioValue="t"===ye.value;var Se,Ee=pt.expr.attrHandle;pt.fn.extend({attr:function(t,e){return It(this,pt.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){pt.removeAttr(this,t)})}}),pt.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?pt.prop(t,e,n):(1===o&&pt.isXMLDoc(t)||(r=pt.attrHooks[e.toLowerCase()]||(pt.expr.match.bool.test(e)?Se:void 0)),void 0!==n?null===n?void pt.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=pt.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!dt.radioValue&&"radio"===e&&u(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(Lt);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),Se={set:function(t,e,n){return!1===e?pt.removeAttr(t,n):t.setAttribute(n,n),n}},pt.each(pt.expr.match.bool.source.match(/\w+/g),function(t,e){var a=Ee[e]||pt.find.attr;Ee[e]=function(t,e,n){var i,r,o=e.toLowerCase();return n||(r=Ee[o],Ee[o]=i,i=null!=a(t,e,n)?o:null,Ee[o]=r),i}});var Ae=/^(?:input|select|textarea|button)$/i,xe=/^(?:a|area)$/i;pt.fn.extend({prop:function(t,e){return It(this,pt.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[pt.propFix[t]||t]})}}),pt.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&pt.isXMLDoc(t)||(e=pt.propFix[e]||e,r=pt.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=pt.find.attr(t,"tabindex");return e?parseInt(e,10):Ae.test(t.nodeName)||xe.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),dt.optSelected||(pt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),pt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pt.propFix[this.toLowerCase()]=this}),pt.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,l=0;if(pt.isFunction(e))return this.each(function(t){pt(this).addClass(e.call(this,t,K(this)))});if("string"==typeof e&&e)for(t=e.match(Lt)||[];n=this[l++];)if(r=K(n),i=1===n.nodeType&&" "+V(r)+" "){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=V(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,l=0;if(pt.isFunction(e))return this.each(function(t){pt(this).removeClass(e.call(this,t,K(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Lt)||[];n=this[l++];)if(r=K(n),i=1===n.nodeType&&" "+V(r)+" "){for(a=0;o=t[a++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");r!==(s=V(i))&&n.setAttribute("class",s)}return this},toggleClass:function(r,e){var o=typeof r;return"boolean"==typeof e&&"string"===o?e?this.addClass(r):this.removeClass(r):pt.isFunction(r)?this.each(function(t){pt(this).toggleClass(r.call(this,t,K(this),e),e)}):this.each(function(){var t,e,n,i;if("string"===o)for(e=0,n=pt(this),i=r.match(Lt)||[];t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==r&&"boolean"!==o||((t=K(this))&&Nt.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===r?"":Nt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+V(K(n))+" ").indexOf(e))return!0;return!1}});var Ce=/\r/g;pt.fn.extend({val:function(n){var i,t,r,e=this[0];return arguments.length?(r=pt.isFunction(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?n.call(this,t,pt(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=pt.map(e,function(t){return null==t?"":t+""})),(i=pt.valHooks[this.type]||pt.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):e?(i=pt.valHooks[e.type]||pt.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&void 0!==(t=i.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(Ce,""):null==t?"":t:void 0}}),pt.extend({valHooks:{option:{get:function(t){var e=pt.find.attr(t,"value");return null!=e?e:V(pt.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:r.length;for(i=o<0?l:a?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!u(n.parentNode,"optgroup"))){if(e=pt(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=pt.makeArray(e),a=r.length;a--;)((i=r[a]).selected=-1<pt.inArray(pt.valHooks.option.get(i),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),pt.each(["radio","checkbox"],function(){pt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<pt.inArray(pt(t).val(),e)}},dt.checkOn||(pt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var _e=/^(?:focusinfocus|focusoutblur)$/;pt.extend(pt.event,{trigger:function(t,e,n,i){var r,o,a,s,l,u,c,h=[n||et],d=ut.call(t,"type")?t.type:t,f=ut.call(t,"namespace")?t.namespace.split("."):[];if(o=a=n=n||et,3!==n.nodeType&&8!==n.nodeType&&!_e.test(d+pt.event.triggered)&&(-1<d.indexOf(".")&&(d=(f=d.split(".")).shift(),f.sort()),l=d.indexOf(":")<0&&"on"+d,(t=t[pt.expando]?t:new pt.Event(d,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:pt.makeArray(e,[t]),c=pt.event.special[d]||{},i||!c.trigger||!1!==c.trigger.apply(n,e))){if(!i&&!c.noBubble&&!pt.isWindow(n)){for(s=c.delegateType||d,_e.test(s+d)||(o=o.parentNode);o;o=o.parentNode)h.push(o),a=o;a===(n.ownerDocument||et)&&h.push(a.defaultView||a.parentWindow||E)}for(r=0;(o=h[r++])&&!t.isPropagationStopped();)t.type=1<r?s:c.bindType||d,(u=(Nt.get(o,"events")||{})[t.type]&&Nt.get(o,"handle"))&&u.apply(o,e),(u=l&&o[l])&&u.apply&&Ot(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(h.pop(),e)||!Ot(n)||l&&pt.isFunction(n[d])&&!pt.isWindow(n)&&((a=n[l])&&(n[l]=null),n[pt.event.triggered=d](),pt.event.triggered=void 0,a&&(n[l]=a)),t.result}},simulate:function(t,e,n){var i=pt.extend(new pt.Event,n,{type:t,isSimulated:!0});pt.event.trigger(i,null,e)}}),pt.fn.extend({trigger:function(t,e){return this.each(function(){pt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return pt.event.trigger(t,e,n,!0)}}),pt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){pt.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),pt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),dt.focusin="onfocusin"in E,dt.focusin||pt.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(t){pt.event.simulate(i,t.target,pt.event.fix(t))};pt.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=Nt.access(t,i);e||t.addEventListener(n,r,!0),Nt.access(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=Nt.access(t,i)-1;e?Nt.access(t,i,e):(t.removeEventListener(n,r,!0),Nt.remove(t,i))}}});var ke=E.location,Re=pt.now(),Le=/\?/;pt.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new E.DOMParser).parseFromString(t,"text/xml")}catch(et){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||pt.error("Invalid XML: "+t),e};var De=/\[\]$/,Pe=/\r?\n/g,Ie=/^(?:submit|button|image|reset|file)$/i,Oe=/^(?:input|select|textarea|keygen)/i;pt.param=function(t,e){var n,i=[],r=function(t,e){var n=pt.isFunction(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!pt.isPlainObject(t))pt.each(t,function(){r(this.name,this.value)});else for(n in t)X(n,t[n],e,r);return i.join("&")},pt.fn.extend({serialize:function(){return pt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=pt.prop(this,"elements");return t?pt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!pt(this).is(":disabled")&&Oe.test(this.nodeName)&&!Ie.test(t)&&(this.checked||!zt.test(t))}).map(function(t,e){var n=pt(this).val();return null==n?null:Array.isArray(n)?pt.map(n,function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}}):{name:e.name,value:n.replace(Pe,"\r\n")}}).get()}});var Ne=/%20/g,Me=/#.*$/,Fe=/([?&])_=[^&]*/,Be=/^(.*?):[ \t]*([^\r\n]*)$/gm,je=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,He=/^(?:GET|HEAD)$/,Ue=/^\/\//,qe={},We={},Ge="*/".concat("*"),ze=et.createElement("a");ze.href=ke.href,pt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ke.href,type:"GET",isLocal:je.test(ke.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ge,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":pt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?J(J(t,pt.ajaxSettings),e):J(pt.ajaxSettings,t)},ajaxPrefilter:Y(qe),ajaxTransport:Y(We),ajax:function(t,e){function n(t,e,n,i){var r,o,a,s,l,u=e;p||(p=!0,f&&E.clearTimeout(f),c=void 0,d=i||"",S.readyState=0<t?4:0,r=200<=t&&t<300||304===t,n&&(s=Q(m,S,n)),s=Z(m,s,S,r),r?(m.ifModified&&((l=S.getResponseHeader("Last-Modified"))&&(pt.lastModified[h]=l),(l=S.getResponseHeader("etag"))&&(pt.etag[h]=l)),204===t||"HEAD"===m.type?u="nocontent":304===t?u="notmodified":(u=s.state,o=s.data,r=!(a=s.error))):(a=u,!t&&u||(u="error",t<0&&(t=0))),S.status=t,S.statusText=(e||u)+"",r?b.resolveWith(v,[o,u,S]):b.rejectWith(v,[S,u,a]),S.statusCode(T),T=void 0,g&&y.trigger(r?"ajaxSuccess":"ajaxError",[S,m,r?o:a]),w.fireWith(v,[S,u]),g&&(y.trigger("ajaxComplete",[S,m]),--pt.active||pt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var c,h,d,i,f,r,p,g,o,a,m=pt.ajaxSetup({},e),v=m.context||m,y=m.context&&(v.nodeType||v.jquery)?pt(v):pt.event,b=pt.Deferred(),w=pt.Callbacks("once memory"),T=m.statusCode||{},s={},l={},u="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(p){if(!i)for(i={};e=Be.exec(d);)i[e[1].toLowerCase()]=e[2];e=i[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return p?d:null},setRequestHeader:function(t,e){return null==p&&(t=l[t.toLowerCase()]=l[t.toLowerCase()]||t,s[t]=e),this},overrideMimeType:function(t){return null==p&&(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(p)S.always(t[S.status]);else for(e in t)T[e]=[T[e],t[e]];return this},abort:function(t){var e=t||u;return c&&c.abort(e),n(0,e),this}};if(b.promise(S),m.url=((t||m.url||ke.href)+"").replace(Ue,ke.protocol+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(Lt)||[""],null==m.crossDomain){r=et.createElement("a");try{r.href=m.url,r.href=r.href,m.crossDomain=ze.protocol+"//"+ze.host!=r.protocol+"//"+r.host}catch(Tt){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=pt.param(m.data,m.traditional)),$(qe,m,e,S),p)return S;for(o in(g=pt.event&&m.global)&&0==pt.active++&&pt.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!He.test(m.type),h=m.url.replace(Me,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Ne,"+")):(a=m.url.slice(h.length),m.data&&(h+=(Le.test(h)?"&":"?")+m.data,delete m.data),!1===m.cache&&(h=h.replace(Fe,"$1"),a=(Le.test(h)?"&":"?")+"_="+Re+++a),m.url=h+a),m.ifModified&&(pt.lastModified[h]&&S.setRequestHeader("If-Modified-Since",pt.lastModified[h]),pt.etag[h]&&S.setRequestHeader("If-None-Match",pt.etag[h])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&S.setRequestHeader("Content-Type",m.contentType),S.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Ge+"; q=0.01":""):m.accepts["*"]),m.headers)S.setRequestHeader(o,m.headers[o]);if(m.beforeSend&&(!1===m.beforeSend.call(v,S,m)||p))return S.abort();if(u="abort",w.add(m.complete),S.done(m.success),S.fail(m.error),c=$(We,m,e,S)){if(S.readyState=1,g&&y.trigger("ajaxSend",[S,m]),p)return S;m.async&&0<m.timeout&&(f=E.setTimeout(function(){S.abort("timeout")},m.timeout));try{p=!1,c.send(s,n)}catch(Tt){if(p)throw Tt;n(-1,Tt)}}else n(-1,"No Transport");return S},getJSON:function(t,e,n){return pt.get(t,e,n,"json")},getScript:function(t,e){return pt.get(t,void 0,e,"script")}}),pt.each(["get","post"],function(t,r){pt[r]=function(t,e,n,i){return pt.isFunction(e)&&(i=i||n,n=e,e=void 0),pt.ajax(pt.extend({url:t,type:r,dataType:i,data:e,success:n},pt.isPlainObject(t)&&t))}}),pt._evalUrl=function(t){return pt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},pt.fn.extend({wrapAll:function(t){var e;return this[0]&&(pt.isFunction(t)&&(t=t.call(this[0])),e=pt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return pt.isFunction(n)?this.each(function(t){pt(this).wrapInner(n.call(this,t))}):this.each(function(){var t=pt(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=pt.isFunction(e);return this.each(function(t){pt(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){pt(this).replaceWith(this.childNodes)}),this}}),pt.expr.pseudos.hidden=function(t){return!pt.expr.pseudos.visible(t)},pt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},pt.ajaxSettings.xhr=function(){try{return new E.XMLHttpRequest}catch(t){}};var Ve={0:200,1223:204},Ke=pt.ajaxSettings.xhr();dt.cors=!!Ke&&"withCredentials"in Ke,dt.ajax=Ke=!!Ke,pt.ajaxTransport(function(r){var o,a;if(dt.cors||Ke&&!r.crossDomain)return{send:function(t,e){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)i.setRequestHeader(n,t[n]);o=function(t){return function(){o&&(o=a=i.onload=i.onerror=i.onabort=i.onreadystatechange=null,"abort"===t?i.abort():"error"===t?"number"!=typeof i.status?e(0,"error"):e(i.status,i.statusText):e(Ve[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=o(),a=i.onerror=o("error"),void 0!==i.onabort?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&E.setTimeout(function(){o&&a()})},o=o("abort");try{i.send(r.hasContent&&r.data||null)}catch(at){if(o)throw at}},abort:function(){o&&o()}}}),pt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),pt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return pt.globalEval(t),t}}}),pt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),pt.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(t,e){i=pt("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(t){i.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),et.head.appendChild(i[0])},abort:function(){r&&r()}}});var Xe,Ye=[],$e=/(=)\?(?=&|$)|\?\?/;pt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ye.pop()||pt.expando+"_"+Re++;return this[t]=!0,t}}),pt.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,o,a=!1!==t.jsonp&&($e.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&$e.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=pt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace($e,"$1"+i):!1!==t.jsonp&&(t.url+=(Le.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||pt.error(i+" was not called"),o[0]},t.dataTypes[0]="json",r=E[i],E[i]=function(){o=arguments},n.always(function(){void 0===r?pt(E).removeProp(i):E[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,Ye.push(i)),o&&pt.isFunction(r)&&r(o[0]),o=r=void 0}),"script"}),dt.createHTMLDocument=((Xe=et.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xe.childNodes.length),pt.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(dt.createHTMLDocument?((i=(e=et.implementation.createHTMLDocument("")).createElement("base")).href=et.location.href,e.head.appendChild(i)):e=et),o=!n&&[],(r=Et.exec(t))?[e.createElement(r[1])]:(r=b([t],e,o),o&&o.length&&pt(o).remove(),pt.merge([],r.childNodes)));var i,r,o},pt.fn.load=function(t,e,n){var i,r,o,a=this,s=t.indexOf(" ");return-1<s&&(i=V(t.slice(s)),t=t.slice(0,s)),pt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<a.length&&pt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?pt("<div>").append(pt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},pt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){pt.fn[e]=function(t){return this.on(e,t)}}),pt.expr.pseudos.animated=function(e){return pt.grep(pt.timers,function(t){return e===t.elem}).length},pt.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,u=pt.css(t,"position"),c=pt(t),h={};"static"===u&&(t.style.position="relative"),s=c.offset(),o=pt.css(t,"top"),l=pt.css(t,"left"),("absolute"===u||"fixed"===u)&&-1<(o+l).indexOf("auto")?(a=(i=c.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),pt.isFunction(e)&&(e=e.call(t,n,pt.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+r),"using"in e?e.using.call(t,h):c.css(h)}},pt.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){pt.offset.setOffset(this,e,t)});var t,n,i,r,o=this[0];return o?o.getClientRects().length?(i=o.getBoundingClientRect(),n=(t=o.ownerDocument).documentElement,r=t.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===pt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),u(t[0],"html")||(i=t.offset()),i={top:i.top+pt.css(t[0],"borderTopWidth",!0),left:i.left+pt.css(t[0],"borderLeftWidth",!0)}),{
top:e.top-i.top-pt.css(n,"marginTop",!0),left:e.left-i.left-pt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===pt.css(t,"position");)t=t.offsetParent;return t||Qt})}}),pt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var o="pageYOffset"===r;pt.fn[e]=function(t){return It(this,function(t,e,n){var i;return pt.isWindow(t)?i=t:9===t.nodeType&&(i=t.defaultView),void 0===n?i?i[r]:t[e]:void(i?i.scrollTo(o?i.pageXOffset:n,o?n:i.pageYOffset):t[e]=n)},e,t,arguments.length)}}),pt.each(["top","left"],function(t,n){pt.cssHooks[n]=P(dt.pixelPosition,function(t,e){if(e)return e=D(t,n),le.test(e)?pt(t).position()[n]+"px":e})}),pt.each({Height:"height",Width:"width"},function(a,s){pt.each({padding:"inner"+a,content:s,"":"outer"+a},function(i,o){pt.fn[o]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),r=i||(!0===t||!0===e?"margin":"border");return It(this,function(t,e,n){var i;return pt.isWindow(t)?0===o.indexOf("outer")?t["inner"+a]:t.document.documentElement["client"+a]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+a],i["scroll"+a],t.body["offset"+a],i["offset"+a],i["client"+a])):void 0===n?pt.css(t,e,r):pt.style(t,e,n,r)},s,n?t:void 0,n)}})}),pt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),pt.holdReady=function(t){t?pt.readyWait++:pt.ready(!0)},pt.isArray=Array.isArray,pt.parseJSON=JSON.parse,pt.nodeName=u,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pt});var Je=E.jQuery,Qe=E.$;return pt.noConflict=function(t){return E.$===pt&&(E.$=Qe),t&&E.jQuery===pt&&(E.jQuery=Je),pt},t||(E.jQuery=E.$=pt),pt}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(k){function i(t,e){var n,i,r,o=t.nodeName.toLowerCase();return"area"===o?(i=(n=t.parentNode).name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&(!!(r=k("img[usemap='#"+i+"']")[0])&&a(r))):(/^(input|select|textarea|button|object)$/.test(o)?!t.disabled:"a"===o&&t.href||e)&&a(t)}function a(t){return k.expr.filters.visible(t)&&!k(t).parents().addBack().filter(function(){return"hidden"===k.css(this,"visibility")}).length}var t,r,e,n;k.ui=k.ui||{},k.extend(k.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),k.fn.extend({scrollParent:function(t){var e=this.css("position"),n="absolute"===e,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=k(this);return(!n||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&r.length?r:k(this[0].ownerDocument||document)},uniqueId:(n=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&k(this).removeAttr("id")})}}),k.extend(k.expr[":"],{data:k.expr.createPseudo?k.expr.createPseudo(function(e){return function(t){return!!k.data(t,e)}}):function(t,e,n){return!!k.data(t,n[3])},focusable:function(t){return i(t,!isNaN(k.attr(t,"tabindex")))},tabbable:function(t){var e=k.attr(t,"tabindex"),n=isNaN(e);return(n||0<=e)&&i(t,!n)}}),k("<a>").outerWidth(1).jquery||k.each(["Width","Height"],function(t,n){function i(t,e,n,i){return k.each(r,function(){e-=parseFloat(k.css(t,"padding"+this))||0,n&&(e-=parseFloat(k.css(t,"border"+this+"Width"))||0),i&&(e-=parseFloat(k.css(t,"margin"+this))||0)}),e}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:k.fn.innerWidth,innerHeight:k.fn.innerHeight,outerWidth:k.fn.outerWidth,outerHeight:k.fn.outerHeight};k.fn["inner"+n]=function(t){return void 0===t?a["inner"+n].call(this):this.each(function(){k(this).css(o,i(this,t)+"px")})},k.fn["outer"+n]=function(t,e){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){k(this).css(o,i(this,t,!0,e)+"px")})}}),k.fn.addBack||(k.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),k("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(k.fn.removeData=(e=k.fn.removeData,function(t){return arguments.length?e.call(this,k.camelCase(t)):e.call(this)})),k.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),k.fn.extend({focus:(r=k.fn.focus,function(e,n){return"number"==typeof e?this.each(function(){var t=this;setTimeout(function(){k(t).focus(),n&&n.call(t)},e)}):r.apply(this,arguments)}),disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var e,n,i=k(this[0]);i.length&&i[0]!==document;){if(("absolute"===(e=i.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(i.css("zIndex"),10),!isNaN(n)&&0!==n))return n;i=i.parent()}return 0}}),k.ui.plugin={add:function(t,e,n){var i,r=k.ui[t].prototype;for(i in n)r.plugins[i]=r.plugins[i]||[],r.plugins[i].push([e,n[i]])},call:function(t,e,n,i){var r,o=t.plugins[e];if(o&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;o.length>r;r++)t.options[o[r][0]]&&o[r][1].apply(t.element,n)}};var o,s=0,l=Array.prototype.slice;k.cleanData=(o=k.cleanData,function(t){var e,n,i;for(i=0;null!=(n=t[i]);i++)try{(e=k._data(n,"events"))&&e.remove&&k(n).triggerHandler("remove")}catch(r){}o(t)}),k.widget=function(t,n,e){var i,r,o,a,s={},l=t.split(".")[0];return t=t.split(".")[1],i=l+"-"+t,e||(e=n,n=k.Widget),k.expr[":"][i.toLowerCase()]=function(t){return!!k.data(t,i)},k[l]=k[l]||{},r=k[l][t],o=k[l][t]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},k.extend(o,r,{version:e.version,_proto:k.extend({},e),_childConstructors:[]}),(a=new n).options=k.widget.extend({},a.options),k.each(e,function(e,i){return k.isFunction(i)?void(s[e]=(r=function(){return n.prototype[e].apply(this,arguments)},o=function(t){return n.prototype[e].apply(this,t)},function(){var t,e=this._super,n=this._superApply;return this._super=r,this._superApply=o,t=i.apply(this,arguments),this._super=e,this._superApply=n,t})):void(s[e]=i);var r,o}),o.prototype=k.widget.extend(a,{widgetEventPrefix:r&&a.widgetEventPrefix||t},s,{constructor:o,namespace:l,widgetName:t,widgetFullName:i}),r?(k.each(r._childConstructors,function(t,e){var n=e.prototype;k.widget(n.namespace+"."+n.widgetName,o,e._proto)}),delete r._childConstructors):n._childConstructors.push(o),k.widget.bridge(t,o),o},k.widget.extend=function(t){for(var e,n,i=l.call(arguments,1),r=0,o=i.length;r<o;r++)for(e in i[r])n=i[r][e],i[r].hasOwnProperty(e)&&void 0!==n&&(t[e]=k.isPlainObject(n)?k.isPlainObject(t[e])?k.widget.extend({},t[e],n):k.widget.extend({},n):n);return t},k.widget.bridge=function(o,e){var a=e.prototype.widgetFullName||o;k.fn[o]=function(n){var t="string"==typeof n,i=l.call(arguments,1),r=this;return t?this.each(function(){var t,e=k.data(this,a);return"instance"===n?(r=e,!1):e?k.isFunction(e[n])&&"_"!==n.charAt(0)?(t=e[n].apply(e,i))!==e&&void 0!==t?(r=t&&t.jquery?r.pushStack(t.get()):t,!1):void 0:k.error("no such method '"+n+"' for "+o+" widget instance"):k.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+n+"'")}):(i.length&&(n=k.widget.extend.apply(null,[n].concat(i))),this.each(function(){var t=k.data(this,a);t?(t.option(n||{}),t._init&&t._init()):k.data(this,a,new e(n,this))})),r}},k.Widget=function(){},k.Widget._childConstructors=[],k.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,e){e=k(e||this.defaultElement||this)[0],this.element=k(e),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=k(),this.hoverable=k(),this.focusable=k(),e!==this&&(k.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=k(e.style?e.ownerDocument:e.document||e),this.window=k(this.document[0].defaultView||this.document[0].parentWindow)),this.options=k.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:k.noop,_getCreateEventData:k.noop,_create:k.noop,_init:k.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(k.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:k.noop,widget:function(){return this.element},option:function(t,e){var n,i,r,o=t;if(0===arguments.length)return k.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(n=t.split(".")).shift(),n.length){for(i=o[t]=k.widget.extend({},this.options[t]),r=0;n.length-1>r;r++)i[n[r]]=i[n[r]]||{},i=i[n[r]];if(t=n.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(a,s,t){var l,u=this;"boolean"!=typeof a&&(t=s,s=a,a=!1),t?(s=l=k(s),this.bindings=this.bindings.add(s)):(t=s,s=this.element,l=this.widget()),k.each(t,function(t,e){function n(){return a||!0!==u.options.disabled&&!k(this).hasClass("ui-state-disabled")?("string"==typeof e?u[e]:e).apply(u,arguments):void 0}"string"!=typeof e&&(n.guid=e.guid=e.guid||n.guid||k.guid++);var i=t.match(/^([\w:-]*)\s*(.*)$/),r=i[1]+u.eventNamespace,o=i[2];o?l.delegate(o,r,n):s.bind(r,n)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e),this.bindings=k(this.bindings.not(t).get()),this.focusable=k(this.focusable.not(t).get()),this.hoverable=k(this.hoverable.not(t).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){k(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){k(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){k(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){k(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,e,n){var i,r,o=this.options[t];if(n=n||{},(e=k.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],r=e.originalEvent)for(i in r)i in e||(e[i]=r[i]);return this.element.trigger(e,n),!(k.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}},k.each({show:"fadeIn",hide:"fadeOut"},function(o,a){k.Widget.prototype["_"+o]=function(e,t,n){"string"==typeof t&&(t={effect:t});var i,r=t?!0===t||"number"==typeof t?a:t.effect||a:o;"number"==typeof(t=t||{})&&(t={duration:t}),i=!k.isEmptyObject(t),t.complete=n,t.delay&&e.delay(t.delay),i&&k.effects&&k.effects.effect[r]?e[o](t):r!==o&&e[r]?e[r](t.duration,t.easing,n):e.queue(function(t){k(this)[o](),n&&n.call(e[0]),t()})}}),k.widget;var u=!1;k(document).mouseup(function(){u=!1}),k.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){return!0===k.data(t.target,e.widgetName+".preventClickEvent")?(k.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,n=1===t.which,i=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&k(t.target).closest(this.options.cancel).length;return n&&!i&&this._mouseCapture(t)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?t.preventDefault():(!0===k.data(t.target,this.widgetName+".preventClickEvent")&&k.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),u=!0)),!0}},_mouseMove:function(t){if(this._mouseMoved){if(k.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&k.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),u=!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function S(t,e,n){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?n/100:1)]}function E(t,e){return parseInt(k.css(t,e),10)||0}function e(t){var e=t[0];return 9===e.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:k.isWindow(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}k.ui=k.ui||{};var r,A,x=Math.max,C=Math.abs,_=Math.round,i=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,n=k.fn.position;k.position={scrollbarWidth:function(){if(void 0!==r)return r;var t,e,n=k("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=n.children()[0];return k("body").append(n),t=i.offsetWidth,n.css("overflow","scroll"),t===(e=i.offsetWidth)&&(e=n[0].clientWidth),n.remove(),r=t-e},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?k.position.scrollbarWidth():0,height:i?k.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=k(t||window),n=k.isWindow(e[0]),i=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:n,isDocument:i,offset:e.offset()||{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:n||i?e.width():e.outerWidth(),height:n||i?e.height():e.outerHeight()}}},k.fn.position=function(h){if(!h||!h.of)return n.apply(this,arguments);h=k.extend({},h);var d,f,p,g,m,t,v=k(h.of),y=k.position.getWithinInfo(h.within),b=k.position.getScrollInfo(y),w=(h.collision||"flip").split(" "),T={};return t=e(v),v[0].preventDefault&&(h.at="left top"),f=t.width,p=t.height,g=t.offset,m=k.extend({},g),k.each(["my","at"],function(){var t,e,n=(h[this]||"").split(" ");1===n.length&&(n=i.test(n[0])?n.concat(["center"]):o.test(n[0])?["center"].concat(n):["center","center"]),n[0]=i.test(n[0])?n[0]:"center",n[1]=o.test(n[1])?n[1]:"center",t=a.exec(n[0]),e=a.exec(n[1]),T[this]=[t?t[0]:0,e?e[0]:0],h[this]=[s.exec(n[0])[0],s.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===h.at[0]?m.left+=f:"center"===h.at[0]&&(m.left+=f/2),"bottom"===h.at[1]?m.top+=p:"center"===h.at[1]&&(m.top+=p/2),d=S(T.at,f,p),m.left+=d[0],m.top+=d[1],this.each(function(){var n,t,a=k(this),s=a.outerWidth(),l=a.outerHeight(),e=E(this,"marginLeft"),i=E(this,"marginTop"),r=s+e+E(this,"marginRight")+b.width,o=l+i+E(this,"marginBottom")+b.height,u=k.extend({},m),c=S(T.my,a.outerWidth(),a.outerHeight());"right"===h.my[0]?u.left-=s:"center"===h.my[0]&&(u.left-=s/2),"bottom"===h.my[1]?u.top-=l:"center"===h.my[1]&&(u.top-=l/2),u.left+=c[0],u.top+=c[1],A||(u.left=_(u.left),u.top=_(u.top)),n={marginLeft:e,marginTop:i},k.each(["left","top"],function(t,e){k.ui.position[w[t]]&&k.ui.position[w[t]][e](u,{targetWidth:f,targetHeight:p,elemWidth:s,elemHeight:l,collisionPosition:n,collisionWidth:r,collisionHeight:o,offset:[d[0]+c[0],d[1]+c[1]],my:h.my,at:h.at,within:y,elem:a})}),h.using&&(t=function(t){var e=g.left-u.left,n=e+f-s,i=g.top-u.top,r=i+p-l,o={target:{element:v,left:g.left,top:g.top,width:f,height:p},element:{element:a,left:u.left,top:u.top,width:s,height:l},horizontal:n<0?"left":0<e?"right":"center",vertical:r<0?"top":0<i?"bottom":"middle"};f<s&&f>C(e+n)&&(o.horizontal="center"),p<l&&p>C(i+r)&&(o.vertical="middle"),o.important=x(C(e),C(n))>x(C(i),C(r))?"horizontal":"vertical",h.using.call(this,t,o)}),a.offset(k.extend(u,{using:t}))})},k.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,a=t.left-e.collisionPosition.marginLeft,s=r-a,l=a+e.collisionWidth-o-r;e.collisionWidth>o?0<s&&l<=0?(n=t.left+s+e.collisionWidth-o-r,t.left+=s-n):t.left=0<l&&s<=0?r:l<s?r+o-e.collisionWidth:r:0<s?t.left+=s:0<l?t.left-=l:t.left=x(t.left-a,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,s=r-a,l=a+e.collisionHeight-o-r;e.collisionHeight>o?0<s&&l<=0?(n=t.top+s+e.collisionHeight-o-r,t.top+=s-n):t.top=0<l&&s<=0?r:l<s?r+o-e.collisionHeight:r:0<s?t.top+=s:0<l?t.top-=l:t.top=x(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,o=r.offset.left+r.scrollLeft,a=r.width,s=r.isWindow?r.scrollLeft:r.offset.left,l=t.left-e.collisionPosition.marginLeft,u=l-s,c=l+e.collisionWidth-a-s,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?((n=t.left+h+d+f+e.collisionWidth-a-o)<0||C(u)>n)&&(t.left+=h+d+f):0<c&&((0<(i=t.left-e.collisionPosition.marginLeft+h+d+f-s)||c>C(i))&&(t.left+=h+d+f))},top:function(t,e){var n,i,r=e.within,o=r.offset.top+r.scrollTop,a=r.height,s=r.isWindow?r.scrollTop:r.offset.top,l=t.top-e.collisionPosition.marginTop,u=l-s,c=l+e.collisionHeight-a-s,h="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];u<0?((i=t.top+h+d+f+e.collisionHeight-a-o)<0||C(u)>i)&&(t.top+=h+d+f):0<c&&((0<(n=t.top-e.collisionPosition.marginTop+h+d+f-s)||c>C(n))&&(t.top+=h+d+f))}},flipfit:{left:function(){k.ui.position.flip.left.apply(this,arguments),k.ui.position.fit.left.apply(this,arguments)},top:function(){k.ui.position.flip.top.apply(this,arguments),k.ui.position.fit.top.apply(this,arguments)}}},function(){var t,e,n,i,r,o=document.getElementsByTagName("body")[0],a=document.createElement("div");for(r in t=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&k.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)t.style[r]=n[r];t.appendChild(a),(e=o||document.documentElement).insertBefore(t,e.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",i=k(a).offset().left,A=10<i&&i<11,t.innerHTML="",e.removeChild(t)}()}(),k.ui.position,k.widget("ui.draggable",k.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return this._blurActiveElement(t),!(this.helper||e.disabled||0<k(t.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blockFrames(!0===e.iframeFix?"iframe":e.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=k(this);return k("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=this.document[0];if(this.handleElement.is(t.target))try{e.activeElement&&"body"!==e.activeElement.nodeName.toLowerCase()&&k(e.activeElement).blur()}catch(s){}},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),k.ui.ddmanager&&(k.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===k(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),k.ui.ddmanager&&!e.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),k.ui.ddmanager&&k.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,e){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!e){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",k.ui.ddmanager&&k.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=this,n=!1;return k.ui.ddmanager&&!this.options.dropBehaviour&&(n=k.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||k.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?k(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),k.ui.ddmanager&&k.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),k.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!k(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var e=this.options,n=k.isFunction(e.helper),i=n?k(e.helper.apply(this.element[0],[t])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo),n&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),k.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&k.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options,r=this.document[0];return this.relativeContainer=null,i.containment?"window"===i.containment?void(this.containment=[k(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,k(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,k(window).scrollLeft()+k(window).width()-this.helperProportions.width-this.margins.left,k(window).scrollTop()+(k(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===i.containment?void(this.containment=[0,0,k(r).width()-this.helperProportions.width-this.margins.left,(k(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):i.containment.constructor===Array?void(this.containment=i.containment):("parent"===i.containment&&(i.containment=this.helper[0].parentNode),void((n=(e=k(i.containment))[0])&&(t=/(scroll|auto)/.test(e.css("overflow")),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=e))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=t.pageX,u=t.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,e,n){return n=n||this._uiHash(),k.ui.plugin.call(this,t,[e,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),k.Widget.prototype._trigger.call(this,t,e,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),
k.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,n){var i=k.extend({},t,{item:n.element});n.sortables=[],k(n.options.connectToSortable).each(function(){var t=k(this).sortable("instance");t&&!t.options.disabled&&(n.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,i))})},stop:function(e,t,n){var i=k.extend({},t,{item:n.element});n.cancelHelperRemoval=!1,k.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,i))})},drag:function(n,i,r){k.each(r.sortables,function(){var t=!1,e=this;e.positionAbs=r.positionAbs,e.helperProportions=r.helperProportions,e.offset.click=r.offset.click,e._intersectsWith(e.containerCache)&&(t=!0,k.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==e&&this._intersectsWith(this.containerCache)&&k.contains(e.element[0],this.element[0])&&(t=!1),t})),t?(e.isOver||(e.isOver=1,r._parent=i.helper.parent(),e.currentItem=i.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return i.helper[0]},n.target=e.currentItem[0],e._mouseCapture(n,!0),e._mouseStart(n,!0,!0),e.offset.click.top=r.offset.click.top,e.offset.click.left=r.offset.click.left,e.offset.parent.left-=r.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=r.offset.parent.top-e.offset.parent.top,r._trigger("toSortable",n),r.dropped=e.element,k.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,e.fromOutside=r),e.currentItem&&(e._mouseDrag(n),i.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,e.options.revert=!1,e._trigger("out",n,e._uiHash(e)),e._mouseStop(n,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),i.helper.appendTo(r._parent),r._refreshOffsets(n),i.position=r._generatePosition(n,!0),r._trigger("fromSortable",n),r.dropped=!1,k.each(r.sortables,function(){this.refreshPositions()}))})}}),k.ui.plugin.add("draggable","cursor",{start:function(t,e,n){var i=k("body"),r=n.options;i.css("cursor")&&(r._cursor=i.css("cursor")),i.css("cursor",r.cursor)},stop:function(t,e,n){var i=n.options;i._cursor&&k("body").css("cursor",i._cursor)}}),k.ui.plugin.add("draggable","opacity",{start:function(t,e,n){var i=k(e.helper),r=n.options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(t,e,n){var i=n.options;i._opacity&&k(e.helper).css("opacity",i._opacity)}}),k.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,e,n){var i=n.options,r=!1,o=n.scrollParentNotHidden[0],a=n.document[0];o!==a&&"HTML"!==o.tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=r=o.scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=r=o.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=r=o.scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=r=o.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-k(a).scrollTop()<i.scrollSensitivity?r=k(a).scrollTop(k(a).scrollTop()-i.scrollSpeed):k(window).height()-(t.pageY-k(a).scrollTop())<i.scrollSensitivity&&(r=k(a).scrollTop(k(a).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-k(a).scrollLeft()<i.scrollSensitivity?r=k(a).scrollLeft(k(a).scrollLeft()-i.scrollSpeed):k(window).width()-(t.pageX-k(a).scrollLeft())<i.scrollSensitivity&&(r=k(a).scrollLeft(k(a).scrollLeft()+i.scrollSpeed)))),!1!==r&&k.ui.ddmanager&&!i.dropBehaviour&&k.ui.ddmanager.prepareOffsets(n,t)}}),k.ui.plugin.add("draggable","snap",{start:function(t,e,n){var i=n.options;n.snapElements=[],k(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=k(this),e=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e,n){var i,r,o,a,s,l,u,c,h,d,f=n.options,p=f.snapTolerance,g=e.offset.left,m=g+n.helperProportions.width,v=e.offset.top,y=v+n.helperProportions.height;for(h=n.snapElements.length-1;0<=h;h--)l=(s=n.snapElements[h].left-n.margins.left)+n.snapElements[h].width,c=(u=n.snapElements[h].top-n.margins.top)+n.snapElements[h].height,m<s-p||l+p<g||y<u-p||c+p<v||!k.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,k.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(i=p>=Math.abs(u-y),r=p>=Math.abs(c-v),o=p>=Math.abs(s-m),a=p>=Math.abs(l-g),i&&(e.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),r&&(e.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),o&&(e.position.left=n._convertPositionTo("relative",{top:0,left:s-n.helperProportions.width}).left),a&&(e.position.left=n._convertPositionTo("relative",{top:0,left:l}).left)),d=i||r||o||a,"outer"!==f.snapMode&&(i=p>=Math.abs(u-v),r=p>=Math.abs(c-y),o=p>=Math.abs(s-g),a=p>=Math.abs(l-m),i&&(e.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),r&&(e.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),o&&(e.position.left=n._convertPositionTo("relative",{top:0,left:s}).left),a&&(e.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(i||r||o||a||d)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,k.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=i||r||o||a||d)}}),k.ui.plugin.add("draggable","stack",{start:function(t,e,n){var i,r=n.options,o=k.makeArray(k(r.stack)).sort(function(t,e){return(parseInt(k(t).css("zIndex"),10)||0)-(parseInt(k(e).css("zIndex"),10)||0)});o.length&&(i=parseInt(k(o[0]).css("zIndex"),10)||0,k(o).each(function(t){k(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length))}}),k.ui.plugin.add("draggable","zIndex",{start:function(t,e,n){var i=k(e.helper),r=n.options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,e,n){var i=n.options;i._zIndex&&k(e.helper).css("zIndex",i._zIndex)}}),k.ui.draggable,k.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=k.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(t){return arguments.length?void(e=t):e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(t.scope),t.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){k.ui.ddmanager.droppables[t]=k.ui.ddmanager.droppables[t]||[],k.ui.ddmanager.droppables[t].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=k.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,e){if("accept"===t)this.accept=k.isFunction(e)?e:function(t){return t.is(e)};else if("scope"===t){var n=k.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(e)}this._super(t,e)},_activate:function(t){var e=k.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=k.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=k.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=k.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(e)))},_drop:function(e,t){var n=t||k.ui.ddmanager.current,i=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=k(this).droppable("instance");return t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&k.ui.intersect(n,k.extend(t,{offset:t.element.offset()}),t.options.tolerance,e)?!(i=!0):void 0}),!i&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),k.ui.intersect=function(){function d(t,e,n){return e<=t&&t<e+n}return function(t,e,n,i){if(!e.offset)return!1;var r=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,a=r+t.helperProportions.width,s=o+t.helperProportions.height,l=e.offset.left,u=e.offset.top,c=l+e.proportions().width,h=u+e.proportions().height;switch(n){case"fit":return l<=r&&a<=c&&u<=o&&s<=h;case"intersect":return r+t.helperProportions.width/2>l&&c>a-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&h>s-t.helperProportions.height/2;case"pointer":return d(i.pageY,u,e.proportions().height)&&d(i.pageX,l,e.proportions().width);case"touch":return(u<=o&&o<=h||u<=s&&s<=h||o<u&&h<s)&&(l<=r&&r<=c||l<=a&&a<=c||r<l&&c<a);default:return!1}}}(),k.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,e){var n,i,r=k.ui.ddmanager.droppables[t.options.scope]||[],o=e?e.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(n=0;r.length>n;n++)if(!(r[n].options.disabled||t&&!r[n].accept.call(r[n].element[0],t.currentItem||t.element))){for(i=0;a.length>i;i++)if(a[i]===r[n].element[0]){r[n].proportions().height=0;continue t}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===o&&r[n]._activate.call(r[n],e),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(t,e){var n=!1;return k.each((k.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&k.ui.intersect(t,this,this.options.tolerance,e)&&(n=this._drop.call(this,e)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))}),n},dragStart:function(t,e){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||k.ui.ddmanager.prepareOffsets(t,e)})},drag:function(o,a){o.options.refreshPositions&&k.ui.ddmanager.prepareOffsets(o,a),k.each(k.ui.ddmanager.droppables[o.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var t,e,n,i=k.ui.intersect(o,this,this.options.tolerance,a),r=!i&&this.isover?"isout":i&&!this.isover?"isover":null;r&&(this.options.greedy&&(e=this.options.scope,(n=this.element.parents(":data(ui-droppable)").filter(function(){return k(this).droppable("instance").options.scope===e})).length&&((t=k(n[0]).droppable("instance")).greedyChild="isover"===r)),t&&"isover"===r&&(t.isover=!1,t.isout=!0,t._out.call(t,a)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,a),t&&"isout"===r&&(t.isout=!1,t.isover=!0,t._over.call(t,a)))}})},dragStop:function(t,e){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||k.ui.ddmanager.prepareOffsets(t,e)}},k.ui.droppable,k.widget("ui.selectable",k.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,e=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=k(e.options.filter,e.element[0])).addClass("ui-selectee"),t.each(function(){var t=k(this),e=t.offset();k.data(this,"selectable-item",{element:this,$element:t,left:e.left,top:e.top,right:e.left+t.outerWidth(),bottom:e.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=k("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(n){var i=this,t=this.options;this.opos=[n.pageX,n.pageY],this.options.disabled||(this.selectees=k(t.filter,this.element[0]),this._trigger("start",n),k(t.appendTo).append(this.helper),this.helper.css({left:n.pageX,top:n.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=k.data(this,"selectable-item");t.startselected=!0,n.metaKey||n.ctrlKey||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element}))}),k(n.target).parents().addBack().each(function(){var t,e=k.data(this,"selectable-item");return e?(t=!n.metaKey&&!n.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(t?"ui-unselecting":"ui-selected").addClass(t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?i._trigger("selecting",n,{selecting:e.element}):i._trigger("unselecting",n,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(n){if(this.dragged=!0,!this.options.disabled){var t,i=this,r=this.options,o=this.opos[0],a=this.opos[1],s=n.pageX,l=n.pageY;return s<o&&(t=s,s=o,o=t),l<a&&(t=l,l=a,a=t),this.helper.css({left:o,top:a,width:s-o,height:l-a}),this.selectees.each(function(){var t=k.data(this,"selectable-item"),e=!1;t&&t.element!==i.element[0]&&("touch"===r.tolerance?e=!(t.left>s||o>t.right||t.top>l||a>t.bottom):"fit"===r.tolerance&&(e=t.left>o&&s>t.right&&t.top>a&&l>t.bottom),e?(t.selected&&(t.$element.removeClass("ui-selected"),t.selected=!1),t.unselecting&&(t.$element.removeClass("ui-unselecting"),t.unselecting=!1),t.selecting||(t.$element.addClass("ui-selecting"),t.selecting=!0,i._trigger("selecting",n,{selecting:t.element}))):(t.selecting&&((n.metaKey||n.ctrlKey)&&t.startselected?(t.$element.removeClass("ui-selecting"),t.selecting=!1,t.$element.addClass("ui-selected"),t.selected=!0):(t.$element.removeClass("ui-selecting"),t.selecting=!1,t.startselected&&(t.$element.addClass("ui-unselecting"),t.unselecting=!0),i._trigger("unselecting",n,{unselecting:t.element}))),t.selected&&(n.metaKey||n.ctrlKey||t.startselected||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element})))))}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,k(".ui-unselecting",this.element[0]).each(function(){var t=k.data(this,"selectable-item");t.$element.removeClass("ui-unselecting"),t.unselecting=!1,t.startselected=!1,n._trigger("unselected",e,{unselected:t.element})}),k(".ui-selecting",this.element[0]).each(function(){var t=k.data(this,"selectable-item");t.$element.removeClass("ui-selecting").addClass("ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,n._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),k.widget("ui.sortable",k.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return e<=t&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),k.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var n=null,i=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),k(t.target).parents().each(function(){return k.data(this,r.widgetName+"-item")===r?(n=k(this),!1):void 0}),k.data(t.target,r.widgetName+"-item")===r&&(n=k(t.target)),!!n&&(!(this.options.handle&&!e&&(k(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,n){var i,r,o=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},k.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",o.cursor),this.storedStylesheet=k("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(i=this.containers.length-1;0<=i;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return k.ui.ddmanager&&(k.ui.ddmanager.current=this),k.ui.ddmanager&&!o.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,n,i,r,o=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==a&&k.ui.ddmanager&&!o.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(i=(n=this.items[e]).item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==i&&!k.contains(this.placeholder[0],i)&&("semi-dynamic"!==this.options.type||!k.contains(this.element[0],i))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),k.ui.ddmanager&&k.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(k.ui.ddmanager&&!this.options.dropBehaviour&&k.ui.ddmanager.drop(this,t),this.options.revert){var n=this,i=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,k(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),k.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?k(this.domPosition.prev).after(this.currentItem):k(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},k(t).each(function(){var t=(k(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&n.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e.each(function(){n.push(k(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=t.left,a=o+t.width,s=t.top,l=s+t.height,u=this.offset.click.top,c=this.offset.click.left,h="x"===this.options.axis||s<i+u&&i+u<l,d="y"===this.options.axis||o<e+c&&e+c<a,f=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:e+this.helperProportions.width/2>o&&a>n-this.helperProportions.width/2&&i+this.helperProportions.height/2>s&&l>r-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=e&&n,r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!i&&(this.floating?o&&"right"===o||"down"===r?2:1:r&&("down"===r?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){function e(){a.push(this)}var n,i,r,o,a=[],s=[],l=this._connectWith();if(l&&t)for(n=l.length-1;0<=n;n--)for(i=(r=k(l[n],this.document[0])).length-1;0<=i;i--)(o=k.data(r[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&s.push([k.isFunction(o.options.items)?o.options.items.call(o.element):k(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(s.push([k.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):k(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;0<=n;n--)s[n][0].each(e);return k(a)},_removeCurrentsFromItems:function(){var n=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=k.grep(this.items,function(t){for(var e=0;n.length>e;e++)if(n[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,n,i,r,o,a,s,l,u=this.items,c=[[k.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):k(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(e=h.length-1;0<=e;e--)for(n=(i=k(h[e],this.document[0])).length-1;0<=n;n--)(r=k.data(i[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(c.push([k.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):k(r.options.items,r.element),r]),this.containers.push(r));for(e=c.length-1;0<=e;e--)for(o=c[e][1],n=0,l=(a=c[e][0]).length;n<l;n++)(s=k(a[n])).data(this.widgetName+"-item",o),u.push({item:s,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,n,i,r;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(n=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?k(this.options.toleranceElement,n.item):n.item,t||(n.width=i.outerWidth(),n.height=i.outerHeight()),r=i.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)r=this.containers[e].element.offset(),this.containers[e].containerCache.left=r.left,this.containers[e].containerCache.top=r.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(n){var i,r=(n=n||this).options;r.placeholder&&r.placeholder.constructor!==String||(i=r.placeholder,r.placeholder={element:function(){var t=n.currentItem[0].nodeName.toLowerCase(),e=k("<"+t+">",n.document[0]).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===t?n._createTrPlaceholder(n.currentItem.find("tr").eq(0),k("<tr>",n.document[0]).appendTo(e)):"tr"===t?n._createTrPlaceholder(n.currentItem,e):"img"===t&&e.attr("src",n.currentItem.attr("src")),i||e.css("visibility","hidden"),e},update:function(t,e){(!i||r.forcePlaceholderSize)&&(e.height()||e.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}),n.placeholder=k(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_createTrPlaceholder:function(t,e){var n=this;t.children().each(function(){k("<td>&#160;</td>",n.document[0]).attr("colspan",k(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,n,i,r,o,a,s,l,u,c,h=null,d=null;for(e=this.containers.length-1;0<=e;e--)if(!k.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(h&&k.contains(this.containers[e].element[0],h.element[0]))continue;h=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(i=1e4,r=null,o=(u=h.floating||this._isFloating(this.currentItem))?"left":"top",a=u?"width":"height",c=u?"clientX":"clientY",n=this.items.length-1;0<=n;n--)k.contains(this.containers[d].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(s=this.items[n].item.offset()[o],l=!1,t[c]-s>this.items[n][a]/2&&(l=!0),i>Math.abs(t[c]-s)&&(i=Math.abs(t[c]-s),r=this.items[n],this.direction=l?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return void(this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[d].element,!0),this._trigger("change",t,this._uiHash()),this.containers[d]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(t){var e=this.options,n=k.isFunction(e.helper)?k(e.helper.apply(this.element[0],[t,this.currentItem])
):"clone"===e.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||k("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||e.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||e.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),k.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&k.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&k.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=k(i.containment)[0],e=k(i.containment).offset(),n="hidden"!==k(t).css("overflow"),this.containment=[e.left+(parseInt(k(t).css("borderLeftWidth"),10)||0)+(parseInt(k(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(k(t).css("borderTopWidth"),10)||0)+(parseInt(k(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(k(t).css("borderLeftWidth"),10)||0)-(parseInt(k(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(k(t).css("borderTopWidth"),10)||0)-(parseInt(k(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&k.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop())*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())*n}},_generatePosition:function(t){var e,n,i=this.options,r=t.pageX,o=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&k.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(e=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-i.grid[1]:e+i.grid[1]:e,n=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-i.grid[0]:n+i.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:a.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){function n(e,n,i){return function(t){i._trigger(e,t,n._uiHash(n))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;0<=i;i--)e||r.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;r.length>i;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===k.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||k([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}})}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,n,i,r){return jQuery.easing[jQuery.easing.def](t,e,n,i,r)},easeInQuad:function(t,e,n,i,r){return i*(e/=r)*e+n},easeOutQuad:function(t,e,n,i,r){return-i*(e/=r)*(e-2)+n},easeInOutQuad:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,i,r){return i*(e/=r)*e*e+n},easeOutCubic:function(t,e,n,i,r){return i*((e=e/r-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e+n:i/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,i,r){return i*(e/=r)*e*e*e+n},easeOutQuart:function(t,e,n,i,r){return-i*((e=e/r-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e*e+n:-i/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,i,r){return i*(e/=r)*e*e*e*e+n},easeOutQuint:function(t,e,n,i,r){return i*((e=e/r-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e*e*e+n:i/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,i,r){return-i*Math.cos(e/r*(Math.PI/2))+i+n},easeOutSine:function(t,e,n,i,r){return i*Math.sin(e/r*(Math.PI/2))+n},easeInOutSine:function(t,e,n,i,r){return-i/2*(Math.cos(Math.PI*e/r)-1)+n},easeInExpo:function(t,e,n,i,r){return 0==e?n:i*Math.pow(2,10*(e/r-1))+n},easeOutExpo:function(t,e,n,i,r){return e==r?n+i:i*(1-Math.pow(2,-10*e/r))+n},easeInOutExpo:function(t,e,n,i,r){return 0==e?n:e==r?n+i:(e/=r/2)<1?i/2*Math.pow(2,10*(e-1))+n:i/2*(2-Math.pow(2,-10*--e))+n},easeInCirc:function(t,e,n,i,r){return-i*(Math.sqrt(1-(e/=r)*e)-1)+n},easeOutCirc:function(t,e,n,i,r){return i*Math.sqrt(1-(e=e/r-1)*e)+n},easeInOutCirc:function(t,e,n,i,r){return(e/=r/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+n:i/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,i,r){var o=1.70158,a=0,s=i;if(0==e)return n;if(1==(e/=r))return n+i;if(a||(a=.3*r),s<Math.abs(i)){s=i;o=a/4}else o=a/(2*Math.PI)*Math.asin(i/s);return-s*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/a)+n},easeOutElastic:function(t,e,n,i,r){var o=1.70158,a=0,s=i;if(0==e)return n;if(1==(e/=r))return n+i;if(a||(a=.3*r),s<Math.abs(i)){s=i;o=a/4}else o=a/(2*Math.PI)*Math.asin(i/s);return s*Math.pow(2,-10*e)*Math.sin((e*r-o)*(2*Math.PI)/a)+i+n},easeInOutElastic:function(t,e,n,i,r){var o=1.70158,a=0,s=i;if(0==e)return n;if(2==(e/=r/2))return n+i;if(a||(a=r*(.3*1.5)),s<Math.abs(i)){s=i;o=a/4}else o=a/(2*Math.PI)*Math.asin(i/s);return e<1?s*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/a)*-.5+n:s*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/a)*.5+i+n},easeInBack:function(t,e,n,i,r,o){return o==undefined&&(o=1.70158),i*(e/=r)*e*((o+1)*e-o)+n},easeOutBack:function(t,e,n,i,r,o){return o==undefined&&(o=1.70158),i*((e=e/r-1)*e*((o+1)*e+o)+1)+n},easeInOutBack:function(t,e,n,i,r,o){return o==undefined&&(o=1.70158),(e/=r/2)<1?i/2*(e*e*((1+(o*=1.525))*e-o))+n:i/2*((e-=2)*e*((1+(o*=1.525))*e+o)+2)+n},easeInBounce:function(t,e,n,i,r){return i-jQuery.easing.easeOutBounce(t,r-e,0,i,r)+n},easeOutBounce:function(t,e,n,i,r){return(e/=r)<1/2.75?i*(7.5625*e*e)+n:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+n:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+n:i*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(t,e,n,i,r){return e<r/2?.5*jQuery.easing.easeInBounce(t,2*e,0,i,r)+n:.5*jQuery.easing.easeOutBounce(t,2*e-r,0,i,r)+.5*i+n}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(d){function e(t){var e=t||window.event,n=v.call(arguments,1),i=0,r=0,o=0,a=0,s=0,l=0;if((t=d.event.fix(e)).type="mousewheel","detail"in e&&(o=-1*e.detail),"wheelDelta"in e&&(o=e.wheelDelta),"wheelDeltaY"in e&&(o=e.wheelDeltaY),"wheelDeltaX"in e&&(r=-1*e.wheelDeltaX),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(r=-1*o,o=0),i=0===o?r:o,"deltaY"in e&&(i=o=-1*e.deltaY),"deltaX"in e&&(r=e.deltaX,0===o&&(i=-1*r)),0!==o||0!==r){if(1===e.deltaMode){var u=d.data(this,"mousewheel-line-height");i*=u,o*=u,r*=u}else if(2===e.deltaMode){var c=d.data(this,"mousewheel-page-height");i*=c,o*=c,r*=c}if(a=Math.max(Math.abs(o),Math.abs(r)),(!m||a<m)&&(p(e,m=a)&&(m/=40)),p(e,a)&&(i/=40,r/=40,o/=40),i=Math[1<=i?"floor":"ceil"](i/m),r=Math[1<=r?"floor":"ceil"](r/m),o=Math[1<=o?"floor":"ceil"](o/m),y.settings.normalizeOffset&&this.getBoundingClientRect){var h=this.getBoundingClientRect();s=t.clientX-h.left,l=t.clientY-h.top}return t.deltaX=r,t.deltaY=o,t.deltaFactor=m,t.offsetX=s,t.offsetY=l,t.deltaMode=0,n.unshift(t,i,r,o),g&&clearTimeout(g),g=setTimeout(f,200),(d.event.dispatch||d.event.handle).apply(this,n)}}function f(){m=null}function p(t,e){return y.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var g,m,t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],v=Array.prototype.slice;if(d.event.fixHooks)for(var i=t.length;i;)d.event.fixHooks[t[--i]]=d.event.mouseHooks;var y=d.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],e,!1);else this.onmousewheel=e;d.data(this,"mousewheel-line-height",y.getLineHeight(this)),d.data(this,"mousewheel-page-height",y.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=n.length;t;)this.removeEventListener(n[--t],e,!1);else this.onmousewheel=null;d.removeData(this,"mousewheel-line-height"),d.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var e=d(t),n=e["offsetParent"in d.fn?"offsetParent":"parent"]();return n.length||(n=d("body")),parseInt(n.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(t){return d(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};d.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(d){function e(t){var e=t||window.event,n=v.call(arguments,1),i=0,r=0,o=0,a=0,s=0,l=0;if((t=d.event.fix(e)).type="mousewheel","detail"in e&&(o=-1*e.detail),"wheelDelta"in e&&(o=e.wheelDelta),"wheelDeltaY"in e&&(o=e.wheelDeltaY),"wheelDeltaX"in e&&(r=-1*e.wheelDeltaX),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(r=-1*o,o=0),i=0===o?r:o,"deltaY"in e&&(i=o=-1*e.deltaY),"deltaX"in e&&(r=e.deltaX,0===o&&(i=-1*r)),0!==o||0!==r){if(1===e.deltaMode){var u=d.data(this,"mousewheel-line-height");i*=u,o*=u,r*=u}else if(2===e.deltaMode){var c=d.data(this,"mousewheel-page-height");i*=c,o*=c,r*=c}if(a=Math.max(Math.abs(o),Math.abs(r)),(!m||a<m)&&(p(e,m=a)&&(m/=40)),p(e,a)&&(i/=40,r/=40,o/=40),i=Math[1<=i?"floor":"ceil"](i/m),r=Math[1<=r?"floor":"ceil"](r/m),o=Math[1<=o?"floor":"ceil"](o/m),y.settings.normalizeOffset&&this.getBoundingClientRect){var h=this.getBoundingClientRect();s=t.clientX-h.left,l=t.clientY-h.top}return t.deltaX=r,t.deltaY=o,t.deltaFactor=m,t.offsetX=s,t.offsetY=l,t.deltaMode=0,n.unshift(t,i,r,o),g&&clearTimeout(g),g=setTimeout(f,200),(d.event.dispatch||d.event.handle).apply(this,n)}}function f(){m=null}function p(t,e){return y.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var g,m,t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],v=Array.prototype.slice;if(d.event.fixHooks)for(var i=t.length;i;)d.event.fixHooks[t[--i]]=d.event.mouseHooks;var y=d.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],e,!1);else this.onmousewheel=e;d.data(this,"mousewheel-line-height",y.getLineHeight(this)),d.data(this,"mousewheel-page-height",y.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=n.length;t;)this.removeEventListener(n[--t],e,!1);else this.onmousewheel=null;d.removeData(this,"mousewheel-line-height"),d.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var e=d(t),n=e["offsetParent"in d.fn?"offsetParent":"parent"]();return n.length||(n=d("body")),parseInt(n.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(t){return d(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};d.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t:t(jQuery,window,document)}(function(at){var t,e,n,i,r;t=function(){var F,f="mCustomScrollbar",B="mCS",i=".mCustomScrollbar",r={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},s=0,o={},m=window.attachEvent&&!window.addEventListener?1:0,j=!1,T=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],p={init:function(a){a=at.extend(!0,{},r,a);var t=u.call(this);if(a.live){var e=a.liveSelector||this.selector||i,n=at(e);if("off"===a.live)return void c(e);o[e]=setTimeout(function(){n.mCustomScrollbar(a),"once"===a.live&&n.length&&c(e)},500)}else c(e);return a.setWidth=a.set_width?a.set_width:a.setWidth,a.setHeight=a.set_height?a.set_height:a.setHeight,a.axis=a.horizontalScroll?"x":h(a.axis),a.scrollInertia=0<a.scrollInertia&&a.scrollInertia<17?17:a.scrollInertia,"object"!=typeof a.mouseWheel&&1==a.mouseWheel&&(a.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),a.mouseWheel.scrollAmount=a.mouseWheelPixels?a.mouseWheelPixels:a.mouseWheel.scrollAmount,a.mouseWheel.normalizeDelta=a.advanced.normalizeMouseWheelDelta?a.advanced.normalizeMouseWheelDelta:a.mouseWheel.normalizeDelta,a.scrollButtons.scrollType=d(a.scrollButtons.scrollType),l(a),at(t).each(function(){var t=at(this);if(!t.data(B)){t.data(B,{idx:++s,opt:a,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:t.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var e=t.data(B),n=e.opt,i=t.data("mcs-axis"),r=t.data("mcs-scrollbar-position"),o=t.data("mcs-theme");i&&(n.axis=i),r&&(n.scrollbarPosition=r),o&&(n.theme=o,l(n)),g.call(this),e&&n.callbacks.onCreate&&"function"==typeof n.callbacks.onCreate&&n.callbacks.onCreate.call(this),at("#mCSB_"+e.idx+"_container img:not(."+T[2]+")").addClass(T[2]),p.update.call(null,t)}})},update:function(t,s){var e=t||u.call(this);return at(e).each(function(){var t=at(this);if(t.data(B)){var e=t.data(B),n=e.opt,i=at("#mCSB_"+e.idx+"_container"),r=at("#mCSB_"+e.idx),o=[at("#mCSB_"+e.idx+"_dragger_vertical"),at("#mCSB_"+e.idx+"_dragger_horizontal")];if(!i.length)return;e.tweenRunning&&$(t),s&&e&&n.callbacks.onBeforeUpdate&&"function"==typeof n.callbacks.onBeforeUpdate&&n.callbacks.onBeforeUpdate.call(this),t.hasClass(T[3])&&t.removeClass(T[3]),t.hasClass(T[4])&&t.removeClass(T[4]),r.css("max-height","none"),r.height()!==t.height()&&r.css("max-height",t.height()),y.call(this),"y"===n.axis||n.advanced.autoExpandHorizontalScroll||i.css("width",v(i)),e.overflowed=E.call(this),k.call(this),n.autoDraggerLength&&w.call(this),S.call(this),C.call(this);var a=[Math.abs(i[0].offsetTop),Math.abs(i[0].offsetLeft)];"x"!==n.axis&&(e.overflowed[0]?o[0].height()>o[0].parent().height()?A.call(this):(J(t,a[0].toString(),{dir:"y",dur:0,overwrite:"none"}),e.contentReset.y=null):(A.call(this),"y"===n.axis?_.call(this):"yx"===n.axis&&e.overflowed[1]&&J(t,a[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==n.axis&&(e.overflowed[1]?o[1].width()>o[1].parent().width()?A.call(this):(J(t,a[1].toString(),{dir:"x",dur:0,overwrite:"none"}),e.contentReset.x=null):(A.call(this),"x"===n.axis?_.call(this):"yx"===n.axis&&e.overflowed[0]&&J(t,a[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),s&&e&&(2===s&&n.callbacks.onImageLoad&&"function"==typeof n.callbacks.onImageLoad?n.callbacks.onImageLoad.call(this):3===s&&n.callbacks.onSelectorChange&&"function"==typeof n.callbacks.onSelectorChange?n.callbacks.onSelectorChange.call(this):n.callbacks.onUpdate&&"function"==typeof n.callbacks.onUpdate&&n.callbacks.onUpdate.call(this)),X.call(this)}})},scrollTo:function(s,l){if(void 0!==s&&null!=s){var t=u.call(this);return at(t).each(function(){var t=at(this);if(t.data(B)){var e=t.data(B),n=e.opt,i={trigger:"external",scrollInertia:n.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},r=at.extend(!0,{},i,l),o=V.call(this,s),a=0<r.scrollInertia&&r.scrollInertia<17?17:r.scrollInertia;o[0]=K.call(this,o[0],"y"),o[1]=K.call(this,o[1],"x"),r.moveDragger&&(o[0]*=e.scrollRatio.y,o[1]*=e.scrollRatio.x),r.dur=ot()?0:a,setTimeout(function(){null!==o[0]&&"undefined"!=typeof o[0]&&"x"!==n.axis&&e.overflowed[0]&&(r.dir="y",r.overwrite="all",J(t,o[0].toString(),r)),null!==o[1]&&"undefined"!=typeof o[1]&&"y"!==n.axis&&e.overflowed[1]&&(r.dir="x",r.overwrite="none",J(t,o[1].toString(),r))},r.timeout)}})}},stop:function(){var t=u.call(this);return at(t).each(function(){var t=at(this);t.data(B)&&$(t)})},disable:function(e){var t=u.call(this);return at(t).each(function(){var t=at(this);t.data(B)&&(t.data(B),X.call(this,"remove"),_.call(this),e&&A.call(this),k.call(this,!0),t.addClass(T[3]))})},destroy:function(){var a=u.call(this);return at(a).each(function(){var t=at(this);if(t.data(B)){var e=t.data(B),n=e.opt,i=at("#mCSB_"+e.idx),r=at("#mCSB_"+e.idx+"_container"),o=at(".mCSB_"+e.idx+"_scrollbar");n.live&&c(n.liveSelector||at(a).selector),X.call(this,"remove"),_.call(this),A.call(this),t.removeData(B),tt(this,"mcs"),o.remove(),r.find("img."+T[2]).removeClass(T[2]),i.replaceWith(r.contents()),t.removeClass(f+" _"+B+"_"+e.idx+" "+T[6]+" "+T[7]+" "+T[5]+" "+T[3]).addClass(T[4])}})}},u=function(){return"object"!=typeof at(this)||at(this).length<1?i:this},l=function(t){var e=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],n=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],i=["minimal","minimal-dark"],r=["minimal","minimal-dark"],o=["minimal","minimal-dark"];t.autoDraggerLength=!(-1<at.inArray(t.theme,e))&&t.autoDraggerLength,t.autoExpandScrollbar=!(-1<at.inArray(t.theme,n))&&t.autoExpandScrollbar,t.scrollButtons.enable=!(-1<at.inArray(t.theme,i))&&t.scrollButtons.enable,t.autoHideScrollbar=-1<at.inArray(t.theme,r)||t.autoHideScrollbar,t.scrollbarPosition=-1<at.inArray(t.theme,o)?"outside":t.scrollbarPosition},c=function(t){o[t]&&(clearTimeout(o[t]),tt(o,t))},h=function(t){return"yx"===t||"xy"===t||"auto"===t?"yx":"x"===t||"horizontal"===t?"x":"y"},d=function(t){return"stepped"===t||"pixels"===t||"step"===t||"click"===t?"stepped":"stepless"},g=function(){var t=at(this),e=t.data(B),n=e.opt,i=n.autoExpandScrollbar?" "+T[1]+"_expand":"",r=["<div id='mCSB_"+e.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+e.idx+"_scrollbar mCS-"+n.theme+" mCSB_scrollTools_vertical"+i+"'><div class='"+T[12]+"'><div id='mCSB_"+e.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+e.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+e.idx+"_scrollbar mCS-"+n.theme+" mCSB_scrollTools_horizontal"+i+"'><div class='"+T[12]+"'><div id='mCSB_"+e.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],o="yx"===n.axis?"mCSB_vertical_horizontal":"x"===n.axis?"mCSB_horizontal":"mCSB_vertical",a="yx"===n.axis?r[0]+r[1]:"x"===n.axis?r[1]:r[0],s="yx"===n.axis?"<div id='mCSB_"+e.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",l=n.autoHideScrollbar?" "+T[6]:"",u="x"!==n.axis&&"rtl"===e.langDir?" "+T[7]:"";n.setWidth&&t.css("width",n.setWidth),n.setHeight&&t.css("height",n.setHeight),n.setLeft="y"!==n.axis&&"rtl"===e.langDir?"989999px":n.setLeft,t.addClass(f+" _"+B+"_"+e.idx+l+u).wrapInner("<div id='mCSB_"+e.idx+"' class='mCustomScrollBox mCS-"+n.theme+" "+o+"'><div id='mCSB_"+e.idx+"_container' class='mCSB_container' style='position:relative; top:"+n.setTop+"; left:"+n.setLeft+";' dir='"+e.langDir+"' /></div>");var c=at("#mCSB_"+e.idx),h=at("#mCSB_"+e.idx+"_container");"y"===n.axis||n.advanced.autoExpandHorizontalScroll||h.css("width",v(h)),"outside"===n.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),c.addClass("mCSB_outside").after(a)):(c.addClass("mCSB_inside").append(a),h.wrap(s)),b.call(this);var d=[at("#mCSB_"+e.idx+"_dragger_vertical"),at("#mCSB_"+e.idx+"_dragger_horizontal")];d[0].css("min-height",d[0].height()),d[1].css("min-width",d[1].width())},v=function(t){var e=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return at(this).outerWidth(!0)}).get())],n=t.parent().width();return e[0]>n?e[0]:e[1]>n?e[1]:"100%"},y=function(){var t=at(this).data(B),e=t.opt,n=at("#mCSB_"+t.idx+"_container");if(e.advanced.autoExpandHorizontalScroll&&"y"!==e.axis){n.css({width:"auto","min-width":0,"overflow-x":"scroll"});var i=Math.ceil(n[0].scrollWidth);3===e.advanced.autoExpandHorizontalScroll||2!==e.advanced.autoExpandHorizontalScroll&&i>n.parent().width()?n.css({width:i,"min-width":"100%","overflow-x":"inherit"}):n.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(n[0].getBoundingClientRect().right+.4)-Math.floor(n[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},b=function(){var t=at(this).data(B),e=t.opt,n=at(".mCSB_"+t.idx+"_scrollbar:first"),i=it(e.scrollButtons.tabindex)?"tabindex='"+e.scrollButtons.tabindex+"'":"",r=["<a href='#' class='"+T[13]+"' "+i+" />","<a href='#' class='"+T[14]+"' "+i+" />","<a href='#' class='"+T[15]+"' "+i+" />","<a href='#' class='"+T[16]+"' "+i+" />"],o=["x"===e.axis?r[2]:r[0],"x"===e.axis?r[3]:r[1],r[2],r[3]];e.scrollButtons.enable&&n.prepend(o[0]).append(o[1]).next(".mCSB_scrollTools").prepend(o[2]).append(o[3])},w=function(){var t=at(this).data(B),e=at("#mCSB_"+t.idx),n=at("#mCSB_"+t.idx+"_container"),i=[at("#mCSB_"+t.idx+"_dragger_vertical"),at("#mCSB_"+t.idx+"_dragger_horizontal")],r=[e.height()/n.outerHeight(!1),e.width()/n.outerWidth(!1)],o=[parseInt(i[0].css("min-height")),Math.round(r[0]*i[0].parent().height()),parseInt(i[1].css("min-width")),Math.round(r[1]*i[1].parent().width())],a=m&&o[1]<o[0]?o[0]:o[1],s=m&&o[3]<o[2]?o[2]:o[3];i[0].css({height:a,"max-height":i[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":o[0]+"px"}),i[1].css({width:s,"max-width":i[1].parent().width()-10})},S=function(){var t=at(this).data(B),e=at("#mCSB_"+t.idx),n=at("#mCSB_"+t.idx+"_container"),i=[at("#mCSB_"+t.idx+"_dragger_vertical"),at("#mCSB_"+t.idx+"_dragger_horizontal")],r=[n.outerHeight(!1)-e.height(),n.outerWidth(!1)-e.width()],o=[r[0]/(i[0].parent().height()-i[0].height()),r[1]/(i[1].parent().width()-i[1].width())];t.scrollRatio={y:o[0],x:o[1]}},x=function(t,e,n){var i=n?T[0]+"_expanded":"",r=t.closest(".mCSB_scrollTools");"active"===e?(t.toggleClass(T[0]+" "+i),r.toggleClass(T[1]),t[0]._draggable=t[0]._draggable?0:1):t[0]._draggable||("hide"===e?(t.removeClass(T[0]),r.removeClass(T[1])):(t.addClass(T[0]),r.addClass(T[1])))},E=function(){var t=at(this).data(B),e=at("#mCSB_"+t.idx),n=at("#mCSB_"+t.idx+"_container"),i=null==t.overflowed?n.height():n.outerHeight(!1),r=null==t.overflowed?n.width():n.outerWidth(!1),o=n[0].scrollHeight,a=n[0].scrollWidth;return i<o&&(i=o),r<a&&(r=a),[i>e.height(),r>e.width()]},A=function(){var t=at(this),e=t.data(B),n=e.opt,i=at("#mCSB_"+e.idx),r=at("#mCSB_"+e.idx+"_container"),o=[at("#mCSB_"+e.idx+"_dragger_vertical"),at("#mCSB_"+e.idx+"_dragger_horizontal")];if($(t),("x"!==n.axis&&!e.overflowed[0]||"y"===n.axis&&e.overflowed[0])&&(o[0].add(r).css("top",0),J(t,"_resetY")),"y"!==n.axis&&!e.overflowed[1]||"x"===n.axis&&e.overflowed[1]){var a=dx=0;"rtl"===e.langDir&&(a=i.width()-r.outerWidth(!1),dx=Math.abs(a/e.scrollRatio.x)),r.css("left",a),o[1].css("left",dx),J(t,"_resetX")}},C=function(){function t(){r=setTimeout(function(){at.event.special.mousewheel?(clearTimeout(r),D.call(e[0])):t()},100)}var e=at(this),n=e.data(B),i=n.opt;if(!n.bindEvents){var r;if(a.call(this),i.contentTouchScroll&&R.call(this),L.call(this),i.mouseWheel.enable)t();N.call(this),q.call(this),i.advanced.autoScrollOnFocus&&M.call(this),i.scrollButtons.enable&&W.call(this),i.keyboard.enable&&G.call(this),n.bindEvents=!0}},_=function(){var t=at(this),e=t.data(B),n=e.opt,i=B+"_"+e.idx,r=".mCSB_"+e.idx+"_scrollbar",o=at("#mCSB_"+e.idx+",#mCSB_"+e.idx+"_container,#mCSB_"+e.idx+"_container_wrapper,"+r+" ."+T[12]+",#mCSB_"+e.idx+"_dragger_vertical,#mCSB_"+e.idx+"_dragger_horizontal,"+r+">a"),a=at("#mCSB_"+e.idx+"_container");n.advanced.releaseDraggableSelectors&&o.add(at(n.advanced.releaseDraggableSelectors)),n.advanced.extraDraggableSelectors&&o.add(at(n.advanced.extraDraggableSelectors)),e.bindEvents&&(at(document).add(at(!U()||top.document)).unbind("."+i),o.each(function(){at(this).unbind("."+i)}),clearTimeout(t[0]._focusTimeout),tt(t[0],"_focusTimeout"),clearTimeout(e.sequential.step),tt(e.sequential,"step"),clearTimeout(a[0].onCompleteTimeout),tt(a[0],"onCompleteTimeout"),e.bindEvents=!1)},k=function(t){var e=at(this),n=e.data(B),i=n.opt,r=at("#mCSB_"+n.idx+"_container_wrapper"),o=r.length?r:at("#mCSB_"+n.idx+"_container"),a=[at("#mCSB_"+n.idx+"_scrollbar_vertical"),at("#mCSB_"+n.idx+"_scrollbar_horizontal")],s=[a[0].find(".mCSB_dragger"),a[1].find(".mCSB_dragger")];"x"!==i.axis&&(n.overflowed[0]&&!t?(a[0].add(s[0]).add(a[0].children("a")).css("display","block"),o.removeClass(T[8]+" "+T[10])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&s[0].css("display","none"),o.removeClass(T[10])):(a[0].css("display","none"),o.addClass(T[10])),o.addClass(T[8]))),"y"!==i.axis&&(n.overflowed[1]&&!t?(a[1].add(s[1]).add(a[1].children("a")).css("display","block"),o.removeClass(T[9]+" "+T[11])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&s[1].css("display","none"),o.removeClass(T[11])):(a[1].css("display","none"),o.addClass(T[11])),o.addClass(T[9]))),n.overflowed[0]||n.overflowed[1]?e.removeClass(T[5]):e.addClass(T[5])},H=function(t){var e=t.type,n=t.target.ownerDocument!==document&&null!==frameElement?[at(frameElement).offset().top,at(frameElement).offset().left]:null,i=U()&&t.target.ownerDocument!==top.document&&null!==frameElement?[at(t.view.frameElement).offset().top,at(t.view.frameElement).offset().left]:[0,0];switch(e){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return n?[t.originalEvent.pageY-n[0]+i[0],t.originalEvent.pageX-n[1]+i[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var r=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],o=t.originalEvent.touches.length||t.originalEvent.changedTouches.length;return t.target.ownerDocument!==document?[r.screenY,r.screenX,1<o]:[r.pageY,r.pageX,1<o];default:return n?[t.pageY-n[0]+i[0],t.pageX-n[1]+i[1],!1
]:[t.pageY,t.pageX,!1]}},a=function(){function r(t,e,n,i){if(f[0].idleTimer=h.scrollInertia<233?250:0,a.attr("id")===d[1])var r="x",o=(a[0].offsetLeft-e+i)*c.scrollRatio.x;else r="y",o=(a[0].offsetTop-t+n)*c.scrollRatio.y;J(u,o.toString(),{dir:r,drag:!0})}var a,s,l,u=at(this),c=u.data(B),h=c.opt,t=B+"_"+c.idx,d=["mCSB_"+c.idx+"_dragger_vertical","mCSB_"+c.idx+"_dragger_horizontal"],f=at("#mCSB_"+c.idx+"_container"),e=at("#"+d[0]+",#"+d[1]),n=h.advanced.releaseDraggableSelectors?e.add(at(h.advanced.releaseDraggableSelectors)):e,i=h.advanced.extraDraggableSelectors?at(!U()||top.document).add(at(h.advanced.extraDraggableSelectors)):at(!U()||top.document);e.bind("contextmenu."+t,function(t){t.preventDefault()}).bind("mousedown."+t+" touchstart."+t+" pointerdown."+t+" MSPointerDown."+t,function(t){if(t.stopImmediatePropagation(),t.preventDefault(),et(t)){j=!0,m&&(document.onselectstart=function(){return!1}),I.call(f,!1),$(u);var e=(a=at(this)).offset(),n=H(t)[0]-e.top,i=H(t)[1]-e.left,r=a.height()+e.top,o=a.width()+e.left;n<r&&0<n&&i<o&&0<i&&(s=n,l=i),x(a,"active",h.autoExpandScrollbar)}}).bind("touchmove."+t,function(t){t.stopImmediatePropagation(),t.preventDefault();var e=a.offset(),n=H(t)[0]-e.top,i=H(t)[1]-e.left;r(s,l,n,i)}),at(document).add(i).bind("mousemove."+t+" pointermove."+t+" MSPointerMove."+t,function(t){if(a){var e=a.offset(),n=H(t)[0]-e.top,i=H(t)[1]-e.left;if(s===n&&l===i)return;r(s,l,n,i)}}).add(n).bind("mouseup."+t+" touchend."+t+" pointerup."+t+" MSPointerUp."+t,function(){a&&(x(a,"active",h.autoExpandScrollbar),a=null),j=!1,m&&(document.onselectstart=null),I.call(f,!0)})},R=function(){function e(t){if(!nt(t)||j||H(t)[2])F=0;else{A=E=0,d=F=1,x.removeClass("mCS_touch_action");var e=R.offset();u=H(t)[0]-e.top,f=H(t)[1]-e.left,N=[H(t)[0],H(t)[1]]}}function n(t){if(nt(t)&&!j&&!H(t)[2]&&(_.documentTouchScroll||t.preventDefault(),t.stopImmediatePropagation(),(!A||E)&&d)){v=Z();var e=k.offset(),n=H(t)[0]-e.top,i=H(t)[1]-e.left,r="mcsLinearOut";if(D.push(n),P.push(i),N[2]=Math.abs(H(t)[0]-N[0]),N[3]=Math.abs(H(t)[1]-N[1]),C.overflowed[0])var o=L[0].parent().height()-L[0].height(),a=0<u-n&&n-u>-o*C.scrollRatio.y&&(2*N[3]<N[2]||"yx"===_.axis);if(C.overflowed[1])var s=L[1].parent().width()-L[1].width(),l=0<f-i&&i-f>-s*C.scrollRatio.x&&(2*N[2]<N[3]||"yx"===_.axis);a||l?(M||t.preventDefault(),E=1):(A=1,x.addClass("mCS_touch_action")),M&&t.preventDefault(),T="yx"===_.axis?[u-n,f-i]:"x"===_.axis?[null,f-i]:[u-n,null],R[0].idleTimer=250,C.overflowed[0]&&h(T[0],I,r,"y","all",!0),C.overflowed[1]&&h(T[1],I,r,"x",O,!0)}}function i(t){if(!nt(t)||j||H(t)[2])F=0;else{F=1,t.stopImmediatePropagation(),$(x),m=Z();var e=k.offset();p=H(t)[0]-e.top,g=H(t)[1]-e.left,D=[],P=[]}}function r(t){if(nt(t)&&!j&&!H(t)[2]){d=0,t.stopImmediatePropagation(),A=E=0,y=Z();var e=k.offset(),n=H(t)[0]-e.top,i=H(t)[1]-e.left;if(!(30<y-v)){var r="mcsEaseOut",o=(w=1e3/(y-m))<2.5,a=o?[D[D.length-2],P[P.length-2]]:[0,0];b=o?[n-a[0],i-a[1]]:[n-p,i-g];var s=[Math.abs(b[0]),Math.abs(b[1])];w=o?[Math.abs(b[0]/4),Math.abs(b[1]/4)]:[w,w];var l=[Math.abs(R[0].offsetTop)-b[0]*c(s[0]/w[0],w[0]),Math.abs(R[0].offsetLeft)-b[1]*c(s[1]/w[1],w[1])];T="yx"===_.axis?[l[0],l[1]]:"x"===_.axis?[null,l[1]]:[l[0],null],S=[4*s[0]+_.scrollInertia,4*s[1]+_.scrollInertia];var u=parseInt(_.contentTouchScroll)||0;T[0]=s[0]>u?T[0]:0,T[1]=s[1]>u?T[1]:0,C.overflowed[0]&&h(T[0],S[0],r,"y",O,!1),C.overflowed[1]&&h(T[1],S[1],r,"x",O,!1)}}}function c(t,e){var n=[1.5*e,2*e,e/1.5,e/2];return 90<t?4<e?n[0]:n[3]:60<t?3<e?n[3]:n[2]:30<t?8<e?n[1]:6<e?n[0]:4<e?e:n[2]:8<e?e:n[3]}function h(t,e,n,i,r,o){t&&J(x,t.toString(),{dur:e,scrollEasing:n,dir:i,overwrite:r,drag:o})}var d,u,f,p,g,m,v,y,b,w,T,S,E,A,x=at(this),C=x.data(B),_=C.opt,t=B+"_"+C.idx,k=at("#mCSB_"+C.idx),R=at("#mCSB_"+C.idx+"_container"),L=[at("#mCSB_"+C.idx+"_dragger_vertical"),at("#mCSB_"+C.idx+"_dragger_horizontal")],D=[],P=[],I=0,O="yx"===_.axis?"none":"all",N=[],o=R.find("iframe"),a=["touchstart."+t+" pointerdown."+t+" MSPointerDown."+t,"touchmove."+t+" pointermove."+t+" MSPointerMove."+t,"touchend."+t+" pointerup."+t+" MSPointerUp."+t],M=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;R.bind(a[0],function(t){e(t)}).bind(a[1],function(t){n(t)}),k.bind(a[0],function(t){i(t)}).bind(a[2],function(t){r(t)}),o.length&&o.each(function(){at(this).bind("load",function(){U(this)&&at(this.contentDocument||this.contentWindow.document).bind(a[0],function(t){e(t),i(t)}).bind(a[1],function(t){n(t)}).bind(a[2],function(t){r(t)})})})},L=function(){function r(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function o(t,e,n){u.type=n&&a?"stepped":"stepless",u.scrollAmount=10,z(i,t,e,"mcsLinearOut",n?60:null)}var a,i=at(this),s=i.data(B),l=s.opt,u=s.sequential,t=B+"_"+s.idx,c=at("#mCSB_"+s.idx+"_container"),h=c.parent();c.bind("mousedown."+t,function(){F||a||(a=1,j=!0)}).add(document).bind("mousemove."+t,function(t){if(!F&&a&&r()){var e=c.offset(),n=H(t)[0]-e.top+c[0].offsetTop,i=H(t)[1]-e.left+c[0].offsetLeft;0<n&&n<h.height()&&0<i&&i<h.width()?u.step&&o("off",null,"stepped"):("x"!==l.axis&&s.overflowed[0]&&(n<0?o("on",38):n>h.height()&&o("on",40)),"y"!==l.axis&&s.overflowed[1]&&(i<0?o("on",37):i>h.width()&&o("on",39)))}}).bind("mouseup."+t+" dragend."+t,function(){F||(a&&(a=0,o("off",null)),j=!1)})},D=function(){function n(t,e){if($(h),!O(h,t.target)){var n="auto"!==f.mouseWheel.deltaFactor?parseInt(f.mouseWheel.deltaFactor):m&&t.deltaFactor<100?100:t.deltaFactor||100,i=f.scrollInertia;if("x"===f.axis||"x"===f.mouseWheel.axis)var r="x",o=[Math.round(n*d.scrollRatio.x),parseInt(f.mouseWheel.scrollAmount)],a="auto"!==f.mouseWheel.scrollAmount?o[1]:o[0]>=p.width()?.9*p.width():o[0],s=Math.abs(at("#mCSB_"+d.idx+"_container")[0].offsetLeft),l=g[1][0].offsetLeft,u=g[1].parent().width()-g[1].width(),c="y"===f.mouseWheel.axis?t.deltaY||e:t.deltaX;else r="y",o=[Math.round(n*d.scrollRatio.y),parseInt(f.mouseWheel.scrollAmount)],a="auto"!==f.mouseWheel.scrollAmount?o[1]:o[0]>=p.height()?.9*p.height():o[0],s=Math.abs(at("#mCSB_"+d.idx+"_container")[0].offsetTop),l=g[0][0].offsetTop,u=g[0].parent().height()-g[0].height(),c=t.deltaY||e;"y"===r&&!d.overflowed[0]||"x"===r&&!d.overflowed[1]||((f.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(c=-c),f.mouseWheel.normalizeDelta&&(c=c<0?-1:1),(0<c&&0!==l||c<0&&l!==u||f.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<5&&!f.mouseWheel.normalizeDelta&&(a=t.deltaFactor,i=17),J(h,(s-c*a).toString(),{dir:r,dur:i}))}}if(at(this).data(B)){var h=at(this),d=h.data(B),f=d.opt,t=B+"_"+d.idx,p=at("#mCSB_"+d.idx),g=[at("#mCSB_"+d.idx+"_dragger_vertical"),at("#mCSB_"+d.idx+"_dragger_horizontal")],e=at("#mCSB_"+d.idx+"_container").find("iframe");e.length&&e.each(function(){at(this).bind("load",function(){U(this)&&at(this.contentDocument||this.contentWindow.document).bind("mousewheel."+t,function(t,e){n(t,e)})})}),p.bind("mousewheel."+t,function(t,e){n(t,e)})}},P=new Object,U=function(t){var e=!1,n=!1,i=null;if(void 0===t?n="#empty":void 0!==at(t).attr("id")&&(n=at(t).attr("id")),!1!==n&&void 0!==P[n])return P[n];if(t){try{i=(t.contentDocument||t.contentWindow.document).body.innerHTML}catch(s){}e=null!==i}else{try{i=top.document.body.innerHTML}catch(s){}e=null!==i}return!1!==n&&(P[n]=e),e},I=function(t){var e=this.find("iframe");if(e.length){var n=t?"auto":"none";e.css("pointer-events",n)}},O=function(t,e){var n=e.nodeName.toLowerCase(),i=t.data(B).opt.mouseWheel.disableOver,r=["select","textarea"];return-1<at.inArray(n,i)&&!(-1<at.inArray(n,r)&&!at(e).is(":focus"))},N=function(){var a,s=at(this),l=s.data(B),t=B+"_"+l.idx,u=at("#mCSB_"+l.idx+"_container"),c=u.parent();at(".mCSB_"+l.idx+"_scrollbar ."+T[12]).bind("mousedown."+t+" touchstart."+t+" pointerdown."+t+" MSPointerDown."+t,function(t){j=!0,at(t.target).hasClass("mCSB_dragger")||(a=1)}).bind("touchend."+t+" pointerup."+t+" MSPointerUp."+t,function(){j=!1}).bind("click."+t,function(t){if(a&&(a=0,at(t.target).hasClass(T[12])||at(t.target).hasClass("mCSB_draggerRail"))){$(s);var e=at(this),n=e.find(".mCSB_dragger");if(0<e.parent(".mCSB_scrollTools_horizontal").length){if(!l.overflowed[1])return;var i="x",r=t.pageX>n.offset().left?-1:1,o=Math.abs(u[0].offsetLeft)-r*(.9*c.width())}else{if(!l.overflowed[0])return;i="y",r=t.pageY>n.offset().top?-1:1,o=Math.abs(u[0].offsetTop)-r*(.9*c.height())}J(s,o.toString(),{dir:i,scrollEasing:"mcsEaseInOut"})}})},M=function(){var a=at(this),t=a.data(B),s=t.opt,e=B+"_"+t.idx,l=at("#mCSB_"+t.idx+"_container"),u=l.parent();l.bind("focusin."+e,function(){var r=at(document.activeElement),t=l.find(".mCustomScrollBox").length,o=0;r.is(s.advanced.autoScrollOnFocus)&&($(a),clearTimeout(a[0]._focusTimeout),a[0]._focusTimer=t?(o+17)*t:0,a[0]._focusTimeout=setTimeout(function(){var t=[rt(r)[0],rt(r)[1]],e=[l[0].offsetTop,l[0].offsetLeft],n=[0<=e[0]+t[0]&&e[0]+t[0]<u.height()-r.outerHeight(!1),0<=e[1]+t[1]&&e[0]+t[1]<u.width()-r.outerWidth(!1)],i="yx"!==s.axis||n[0]||n[1]?"all":"none";"x"===s.axis||n[0]||J(a,t[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:i,dur:o}),"y"===s.axis||n[1]||J(a,t[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:i,dur:o})},a[0]._focusTimer))})},q=function(){var t=at(this).data(B),e=B+"_"+t.idx,n=at("#mCSB_"+t.idx+"_container").parent();n.bind("scroll."+e,function(){0===n.scrollTop()&&0===n.scrollLeft()||at(".mCSB_"+t.idx+"_scrollbar").css("visibility","hidden")})},W=function(){var i=at(this),r=i.data(B),o=r.opt,a=r.sequential,t=B+"_"+r.idx,e=".mCSB_"+r.idx+"_scrollbar";at(e+">a").bind("contextmenu."+t,function(t){t.preventDefault()}).bind("mousedown."+t+" touchstart."+t+" pointerdown."+t+" MSPointerDown."+t+" mouseup."+t+" touchend."+t+" pointerup."+t+" MSPointerUp."+t+" mouseout."+t+" pointerout."+t+" MSPointerOut."+t+" click."+t,function(t){function e(t,e){a.scrollAmount=o.scrollButtons.scrollAmount,z(i,t,e)}if(t.preventDefault(),et(t)){var n=at(this).attr("class");switch(a.type=o.scrollButtons.scrollType,t.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===a.type)return;j=!0,r.tweenRunning=!1,e("on",n);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===a.type)return;j=!1,a.dir&&e("off",n);break;case"click":if("stepped"!==a.type||r.tweenRunning)return;e("on",n)}}})},G=function(){function e(t){function e(t,e){c.type=u.keyboard.scrollType,c.scrollAmount=u.keyboard.scrollAmount,"stepped"===c.type&&l.tweenRunning||z(s,t,e)}switch(t.type){case"blur":l.tweenRunning&&c.dir&&e("off",null);break;case"keydown":case"keyup":var n=t.keyCode?t.keyCode:t.which,i="on";if("x"!==u.axis&&(38===n||40===n)||"y"!==u.axis&&(37===n||39===n)){if((38===n||40===n)&&!l.overflowed[0]||(37===n||39===n)&&!l.overflowed[1])return;"keyup"===t.type&&(i="off"),at(document.activeElement).is(f)||(t.preventDefault(),t.stopImmediatePropagation(),e(i,n))}else if(33===n||34===n){if((l.overflowed[0]||l.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){$(s);var r=34===n?-1:1;if("x"===u.axis||"yx"===u.axis&&l.overflowed[1]&&!l.overflowed[0])var o="x",a=Math.abs(h[0].offsetLeft)-r*(.9*d.width());else o="y",a=Math.abs(h[0].offsetTop)-r*(.9*d.height());J(s,a.toString(),{dir:o,scrollEasing:"mcsEaseInOut"})}}else if((35===n||36===n)&&!at(document.activeElement).is(f)&&((l.overflowed[0]||l.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===u.axis||"yx"===u.axis&&l.overflowed[1]&&!l.overflowed[0])o="x",a=35===n?Math.abs(d.width()-h.outerWidth(!1)):0;else o="y",a=35===n?Math.abs(d.height()-h.outerHeight(!1)):0;J(s,a.toString(),{dir:o,scrollEasing:"mcsEaseInOut"})}}}var s=at(this),l=s.data(B),u=l.opt,c=l.sequential,t=B+"_"+l.idx,n=at("#mCSB_"+l.idx),h=at("#mCSB_"+l.idx+"_container"),d=h.parent(),f="input,textarea,select,datalist,keygen,[contenteditable='true']",i=h.find("iframe"),r=["blur."+t+" keydown."+t+" keyup."+t];i.length&&i.each(function(){at(this).bind("load",function(){U(this)&&at(this.contentDocument||this.contentWindow.document).bind(r[0],function(t){e(t)})})}),n.attr("tabindex","0").bind(r[0],function(t){e(t)})},z=function(h,t,e,d,f){function p(t){m.snapAmount&&(v.scrollAmount=m.snapAmount instanceof Array?"x"===v.dir[0]?m.snapAmount[1]:m.snapAmount[0]:m.snapAmount);var e="stepped"!==v.type,n=f||(t?e?b/1.5:w:1e3/60),i=t?e?7.5:40:2.5,r=[Math.abs(y[0].offsetTop),Math.abs(y[0].offsetLeft)],o=[10<g.scrollRatio.y?10:g.scrollRatio.y,10<g.scrollRatio.x?10:g.scrollRatio.x],a="x"===v.dir[0]?r[1]+v.dir[1]*(o[1]*i):r[0]+v.dir[1]*(o[0]*i),s="x"===v.dir[0]?r[1]+v.dir[1]*parseInt(v.scrollAmount):r[0]+v.dir[1]*parseInt(v.scrollAmount),l="auto"!==v.scrollAmount?s:a,u=d||(t?e?"mcsLinearOut":"mcsEaseInOut":"mcsLinear"),c=!!t;return t&&n<17&&(l="x"===v.dir[0]?r[1]:r[0]),J(h,l.toString(),{dir:v.dir[0],scrollEasing:u,dur:n,onComplete:c}),t?void(v.dir=!1):(clearTimeout(v.step),void(v.step=setTimeout(function(){p()},n)))}function n(){clearTimeout(v.step),tt(v,"step"),$(h)}var g=h.data(B),m=g.opt,v=g.sequential,y=at("#mCSB_"+g.idx+"_container"),i="stepped"===v.type,b=m.scrollInertia<26?26:m.scrollInertia,w=m.scrollInertia<1?17:m.scrollInertia;switch(t){case"on":if(v.dir=[e===T[16]||e===T[15]||39===e||37===e?"x":"y",e===T[13]||e===T[15]||38===e||37===e?-1:1],$(h),it(e)&&"stepped"===v.type)return;p(i);break;case"off":n(),(i||g.tweenRunning&&v.dir)&&p(!0)}},V=function(t){var e=at(this).data(B).opt,n=[];return"function"==typeof t&&(t=t()),t instanceof Array?n=1<t.length?[t[0],t[1]]:"x"===e.axis?[null,t[0]]:[t[0],null]:(n[0]=t.y?t.y:t.x||"x"===e.axis?null:t,n[1]=t.x?t.x:t.y||"y"===e.axis?null:t),"function"==typeof n[0]&&(n[0]=n[0]()),"function"==typeof n[1]&&(n[1]=n[1]()),n},K=function(t,e){if(null!=t&&void 0!==t){var n=at(this),i=n.data(B),r=i.opt,o=at("#mCSB_"+i.idx+"_container"),a=o.parent(),s=typeof t;e||(e="x"===r.axis?"x":"y");var l="x"===e?o.outerWidth(!1)-a.width():o.outerHeight(!1)-a.height(),u="x"===e?o[0].offsetLeft:o[0].offsetTop,c="x"===e?"left":"top";switch(s){case"function":return t();case"object":if(!(d=t.jquery?t:at(t)).length)return;return"x"===e?rt(d)[1]:rt(d)[0];case"string":case"number":if(it(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(l*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(u-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var h=u+parseInt(t.split("+=")[1]);return 0<=h?0:Math.abs(h)}if(-1!==t.indexOf("px")&&it(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(a.height()-o.outerHeight(!1));if("right"===t)return Math.abs(a.width()-o.outerWidth(!1));if("first"===t||"last"===t){var d=o.find(":"+t);return"x"===e?rt(d)[1]:rt(d)[0]}return at(t).length?"x"===e?rt(at(t))[1]:rt(at(t))[0]:(o.css(c,t),void p.update.call(null,n[0]))}}},X=function(t){function e(){return clearTimeout(l[0].autoUpdate),0===o.parents("html").length?void(o=null):void(l[0].autoUpdate=setTimeout(function(){return s.advanced.updateOnSelectorChange&&(a.poll.change.n=i(),a.poll.change.n!==a.poll.change.o)?(a.poll.change.o=a.poll.change.n,void r(3)):s.advanced.updateOnContentResize&&(a.poll.size.n=o[0].scrollHeight+o[0].scrollWidth+l[0].offsetHeight+o[0].offsetHeight+o[0].offsetWidth,a.poll.size.n!==a.poll.size.o)?(a.poll.size.o=a.poll.size.n,void r(1)):!s.advanced.updateOnImageLoad||"auto"===s.advanced.updateOnImageLoad&&"y"===s.axis||(a.poll.img.n=l.find("img").length,a.poll.img.n===a.poll.img.o)?void((s.advanced.updateOnSelectorChange||s.advanced.updateOnContentResize||s.advanced.updateOnImageLoad)&&e()):(a.poll.img.o=a.poll.img.n,void l.find("img").each(function(){n(this)}))},s.advanced.autoUpdateTimeout))}function n(t){function e(t,e){return function(){return e.apply(t,arguments)}}function n(){this.onload=null,at(t).addClass(T[2]),r(2)}if(at(t).hasClass(T[2]))r();else{var i=new Image;i.onload=e(i,n),i.src=t.src}}function i(){!0===s.advanced.updateOnSelectorChange&&(s.advanced.updateOnSelectorChange="*");var t=0,e=l.find(s.advanced.updateOnSelectorChange);return s.advanced.updateOnSelectorChange&&0<e.length&&e.each(function(){t+=this.offsetHeight+this.offsetWidth}),t}function r(t){clearTimeout(l[0].autoUpdate),p.update.call(null,o[0],t)}var o=at(this),a=o.data(B),s=a.opt,l=at("#mCSB_"+a.idx+"_container");return t?(clearTimeout(l[0].autoUpdate),void tt(l[0],"autoUpdate")):void e()},Y=function(t,e,n){return Math.round(t/e)*e-n},$=function(t){var e=t.data(B);at("#mCSB_"+e.idx+"_container,#mCSB_"+e.idx+"_container_wrapper,#mCSB_"+e.idx+"_dragger_vertical,#mCSB_"+e.idx+"_dragger_horizontal").each(function(){n.call(this)})},J=function(r,t,o){function e(t){return a&&s.callbacks[t]&&"function"==typeof s.callbacks[t]}function n(){return[s.callbacks.alwaysTriggerOffsets||y>=b[0]+T,s.callbacks.alwaysTriggerOffsets||y<=-S]}function i(){var t=[h[0].offsetTop,h[0].offsetLeft],e=[m[0].offsetTop,m[0].offsetLeft],n=[h.outerHeight(!1),h.outerWidth(!1)],i=[c.height(),c.width()];r[0].mcs={content:h,top:t[0],left:t[1],draggerTop:e[0],draggerLeft:e[1],topPct:Math.round(100*Math.abs(t[0])/(Math.abs(n[0])-i[0])),leftPct:Math.round(100*Math.abs(t[1])/(Math.abs(n[1])-i[1])),direction:o.dir}}var a=r.data(B),s=a.opt,l={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:s.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},u=[(o=at.extend(l,o)).dur,o.drag?0:o.dur],c=at("#mCSB_"+a.idx),h=at("#mCSB_"+a.idx+"_container"),d=h.parent(),f=s.callbacks.onTotalScrollOffset?V.call(r,s.callbacks.onTotalScrollOffset):[0,0],p=s.callbacks.onTotalScrollBackOffset?V.call(r,s.callbacks.onTotalScrollBackOffset):[0,0];if(a.trigger=o.trigger,0===d.scrollTop()&&0===d.scrollLeft()||(at(".mCSB_"+a.idx+"_scrollbar").css("visibility","visible"),d.scrollTop(0).scrollLeft(0)),"_resetY"!==t||a.contentReset.y||(e("onOverflowYNone")&&s.callbacks.onOverflowYNone.call(r[0]),a.contentReset.y=1),"_resetX"!==t||a.contentReset.x||(e("onOverflowXNone")&&s.callbacks.onOverflowXNone.call(r[0]),a.contentReset.x=1),"_resetY"!==t&&"_resetX"!==t){if(!a.contentReset.y&&r[0].mcs||!a.overflowed[0]||(e("onOverflowY")&&s.callbacks.onOverflowY.call(r[0]),a.contentReset.x=null),!a.contentReset.x&&r[0].mcs||!a.overflowed[1]||(e("onOverflowX")&&s.callbacks.onOverflowX.call(r[0]),a.contentReset.x=null),s.snapAmount){var g=s.snapAmount instanceof Array?"x"===o.dir?s.snapAmount[1]:s.snapAmount[0]:s.snapAmount;t=Y(t,g,s.snapOffset)}switch(o.dir){case"x":var m=at("#mCSB_"+a.idx+"_dragger_horizontal"),v="left",y=h[0].offsetLeft,b=[c.width()-h.outerWidth(!1),m.parent().width()-m.width()],w=[t,0===t?0:t/a.scrollRatio.x],T=f[1],S=p[1],E=0<T?T/a.scrollRatio.x:0,A=0<S?S/a.scrollRatio.x:0;break;case"y":m=at("#mCSB_"+a.idx+"_dragger_vertical"),v="top",y=h[0].offsetTop,b=[c.height()-h.outerHeight(!1),m.parent().height()-m.height()],w=[t,0===t?0:t/a.scrollRatio.y],T=f[0],S=p[0],E=0<T?T/a.scrollRatio.y:0,A=0<S?S/a.scrollRatio.y:0}w[1]<0||0===w[0]&&0===w[1]?w=[0,0]:w[1]>=b[1]?w=[b[0],b[1]]:w[0]=-w[0],r[0].mcs||(i(),e("onInit")&&s.callbacks.onInit.call(r[0])),clearTimeout(h[0].onCompleteTimeout),Q(m[0],v,Math.round(w[1]),u[1],o.scrollEasing),!a.tweenRunning&&(0===y&&0<=w[0]||y===b[0]&&w[0]<=b[0])||Q(h[0],v,Math.round(w[0]),u[0],o.scrollEasing,o.overwrite,{onStart:function(){o.callbacks&&o.onStart&&!a.tweenRunning&&(e("onScrollStart")&&(i(),s.callbacks.onScrollStart.call(r[0])),a.tweenRunning=!0,x(m),a.cbOffsets=n())},onUpdate:function(){o.callbacks&&o.onUpdate&&e("whileScrolling")&&(i(),s.callbacks.whileScrolling.call(r[0]))},onComplete:function(){if(o.callbacks&&o.onComplete){"yx"===s.axis&&clearTimeout(h[0].onCompleteTimeout);var t=h[0].idleTimer||0;h[0].onCompleteTimeout=setTimeout(function(){e("onScroll")&&(i(),s.callbacks.onScroll.call(r[0])),e("onTotalScroll")&&w[1]>=b[1]-E&&a.cbOffsets[0]&&(i(),s.callbacks.onTotalScroll.call(r[0])),e("onTotalScrollBack")&&w[1]<=A&&a.cbOffsets[1]&&(i(),s.callbacks.onTotalScrollBack.call(r[0])),a.tweenRunning=!1,h[0].idleTimer=0,x(m,"hide")},t)}}})}},Q=function(t,e,n,i,r,o,a){function s(){T.stop||(y||p.call(),y=Z()-v,l(),y>=T.time&&(T.time=y>T.time?y+d-(y-T.time):y+d-1,T.time<y+1&&(T.time=y+1)),T.time<i?T.id=f(s):m.call())}function l(){0<i?(T.currVal=h(T.time,b,S,i,r),w[e]=Math.round(T.currVal)+"px"):w[e]=n+"px",g.call()}function u(){d=1e3/60,T.time=y+d,f=window.requestAnimationFrame?window.requestAnimationFrame:function(t){return l(),setTimeout(t,.01)},T.id=f(s)}function c(){null!=T.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(T.id):clearTimeout(T.id),T.id=null)}function h(t,e,n,i,r){switch(r){case"linear":case"mcsLinear":return n*t/i+e;case"mcsLinearOut":return t/=i,t--,n*Math.sqrt(1-t*t)+e;case"easeInOutSmooth":return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e;case"easeInOutStrong":return(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:(t--,n/2*(2-Math.pow(2,-10*t))+e);case"easeInOut":case"mcsEaseInOut":return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e;case"easeOutSmooth":return t/=i,-n*(--t*t*t*t-1)+e;case"easeOutStrong":return n*(1-Math.pow(2,-10*t/i))+e;case"easeOut":case"mcsEaseOut":default:var o=(t/=i)*t,a=o*t;return e+n*(.499999999999997*a*o+-2.5*o*o+5.5*a+-6.5*o+4*t)}}t._mTween||(t._mTween={top:{},left:{}});var d,f,p=(a=a||{}).onStart||function(){},g=a.onUpdate||function(){},m=a.onComplete||function(){},v=Z(),y=0,b=t.offsetTop,w=t.style,T=t._mTween[e];"left"===e&&(b=t.offsetLeft);var S=n-b;T.stop=0,"none"!==o&&c(),u()},Z=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},n=function(){var t=this;t._mTween||(t._mTween={top:{},left:{}});for(var e=["top","left"],n=0;n<e.length;n++){var i=e[n];t._mTween[i].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(t._mTween[i].id):clearTimeout(t._mTween[i].id),t._mTween[i].id=null,t._mTween[i].stop=1)}},tt=function(t,e){try{delete t[e]}catch(f){t[e]=null}},et=function(t){return!(t.which&&1!==t.which)},nt=function(t){var e=t.originalEvent.pointerType;return!(e&&"touch"!==e&&2!==e)},it=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},rt=function(t){var e=t.parents(".mCSB_container");return[t.offset().top-e.offset().top,t.offset().left-e.offset().left]},ot=function(){function t(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null}var e=t();return!!e&&document[e]};at.fn[f]=function(t){return p[t]?p[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void at.error("Method "+t+" does not exist"):p.init.apply(this,arguments)},at[f]=function(t){return p[t]?p[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void at.error("Method "+t+" does not exist"):p.init.apply(this,arguments)},at[f].defaults=r,window[f]=!0,at(window).bind("load",function(){at(i)[f](),at.extend(at.expr[":"],{mcsInView:at.expr[":"].mcsInView||function(t){var e,n,i=at(t),r=i.parents(".mCSB_container");if(r.length)return e=r.parent(),0<=(n=[r[0].offsetTop,r[0].offsetLeft])[0]+rt(i)[0]&&n[0]+rt(i)[0]<e.height()-i.outerHeight(!1)&&0<=n[1]+rt(i)[1]&&n[1]+rt(i)[1]<e.width()-i.outerWidth(!1)},mcsInSight:at.expr[":"].mcsInSight||function(t,e,n){var i,r,o,a,s=at(t),l=s.parents(".mCSB_container"),u="exact"===n[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(l.length)return i=[s.outerHeight(!1),s.outerWidth(!1)],o=[l[0].offsetTop+rt(s)[0],l[0].offsetLeft+rt(s)[1]],r=[l.parent()[0].offsetHeight,l.parent()[0].offsetWidth],a=[i[0]<r[0]?u[0]:u[1],i[1]<r[1]?u[0]:u[1]],o[0]-r[0]*a[0][0]<0&&0<=o[0]+i[0]-r[0]*a[0][1]&&o[1]-r[1]*a[1][0]<0&&0<=o[1]+i[1]-r[1]*a[1][1]},mcsOverflow:at.expr[":"].mcsOverflow||function(t){var e=at(t).data(B);if(e)return e.overflowed[0]||e.overflowed[1]}})})},e="function"==typeof define&&define.amd,n="undefined"!=typeof module&&module.exports,i="https:"==document.location.protocol?"https:":"http:",r="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js",e||(n?require("jquery-mousewheel")(at):at.event.special.mousewheel||at("head").append(decodeURI("%3Cscript src="+i+"//"+r+"%3E%3C/script%3E"))),t()}),function(e){function n(t,e){if(!(1<t.originalEvent.touches.length)){t.preventDefault();var n=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}}if(e.support.touch="ontouchend"in document,e.support.touch){var i,t=e.ui.mouse.prototype,r=t._mouseInit,o=t._mouseDestroy;t._touchStart=function(t){var e=this;!i&&e._mouseCapture(t.originalEvent.changedTouches[0])&&(i=!0,e._touchMoved=!1,n(t,"mouseover"),n(t,"mousemove"),n(t,"mousedown"))},t._touchMove=function(t){i&&(this._touchMoved=!0,n(t,"mousemove"))},t._touchEnd=function(t){i&&(n(t,"mouseup"),n(t,"mouseout"),this._touchMoved||n(t,"click"),i=!1)},t._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),r.call(t)},t._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),o.call(t)}}}(jQuery),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).jsmediatags=t()}(function(){return function i(r,o,a){function s(n,t){if(!o[n]){if(!r[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(l)return l(n,!0);throw(e=Error("Cannot find module '"+n+"'")).code="MODULE_NOT_FOUND",e}e=o[n]={exports:{}},r[n][0].call(e.exports,function(t){var e=r[n][1][t];return s(e||t)},e,e.exports,i,r,o,a)}return o[n].exports}for(var l="function"==typeof require&&require,t=0;t<a.length;t++)s(a[t]);return s}({1:[function(){},{}],2:[function(t,e){e.exports=XMLHttpRequest},{}],3:[function(t,e){function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();t=function(){function n(t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var e;if(e=Object.getPrototypeOf(n).call(this),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(e=!e||"object"!=typeof e&&"function"!=typeof e?this:e)._array=t,e._size=t.length,e._isInitialized=!0,e}return i(n,t("./MediaFileReader")),r(n,[{key:"init",value:function(t){setTimeout(t.onSuccess,0)}},{key:"loadRange",value:function(t,e){setTimeout(e.onSuccess,0)}},{key:"getByteAt",value:function(t){return this._array[t]}}],[{key:"canReadFile",value:function(t){return Array.isArray(t)||"function"==typeof Buffer&&Buffer.isBuffer(t)}}]),n}(),e.exports=t},{"./MediaFileReader":10}],4:[function(t,e){function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),o=t("./ChunkedFileData");t=function(){function n(t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var e;if(e=Object.getPrototypeOf(n).call(this),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(e=!e||"object"!=typeof e&&"function"!=typeof e?this:e)._blob=t,e._fileData=new o,e}return i(n,t("./MediaFileReader")),r(n,[{key:"_init",value:function(t){this._size=this._blob.size,setTimeout(t.onSuccess,1)}},{key:"loadRange",value:function(e,n){var i=this,t=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,e[0],e[1]+1),r=new FileReader;r.onloadend=function(t){t=new Uint8Array(r.result),i._fileData.addData(e[0],t),n.onSuccess()},r.onerror=r.onabort=function(){n.onError&&n.onError({type:"blob",info:r.error})},r.readAsArrayBuffer(t)}},{key:"getByteAt",value:function(t){return this._fileData.getByteAt(t)}}],[{key:"canReadFile",value:function(t){return"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof File&&t instanceof File}}]),n}(),e.exports=t},{"./ChunkedFileData":5,"./MediaFileReader":10}],5:[function(t,e){var n=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._fileData=[]}return n(t,null,[{key:"NOT_FOUND",get:function(){return-1}}]),n(t,[{key:"addData",value:function(t,e){var n=t+e.length-1,i=this._getChunkRange(t,n);if(-1===i.startIx)this._fileData.splice(i.insertIx||0,0,{offset:t,data:e});else{var r=this._fileData[i.startIx],o=this._fileData[i.endIx],a=(n=n<o.offset+o.data.length-1,{offset:Math.min(t,r.offset),data:e});t>r.offset&&(r=this._sliceData(r.data,0,t-r.offset),a.data=this._concatData(r,e)),n&&(r=this._sliceData(a.data,0,o.offset-a.offset),a.data=this._concatData(r,o.data)),this._fileData.splice(i.startIx,i.endIx-i.startIx+1,a)}}},{key:"_concatData",value:function(t,e){if("undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(t)){var n=new t.constructor(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}return t.concat(e)}},{key:"_sliceData",value:function(t,e,n){return t.slice?t.slice(e,n):t.subarray(e,n)}},{key:"_getChunkRange",value:function(t,e){for(var n=-1,i=-1,r=0,o=0;o<this._fileData.length;r=++o){var a=this._fileData[o].offset,s=a+this._fileData[o].data.length;if(e<a-1)break;if(t<=s+1&&a-1<=e){n=o;break}}if(-1===n)return{startIx:-1,endIx:-1,insertIx:r};for(o=n;o<this._fileData.length&&((a=this._fileData[o].offset)-1<=e&&(i=o),!(e<=(s=a+this._fileData[o].data.length)+1));o++);return-1===i&&(i=n),{startIx:n,endIx:i}}},{key:"hasDataRange",value:function(t,e){for(var n=0;n<this._fileData.length;n++){var i=this._fileData[n];if(e<i.offset)break;if(t>=i.offset&&e<i.offset+i.data.length)return!0}return!1}},{key:"getByteAt",value:function(t){for(var e,n=0;n<this._fileData.length;n++){var i=this._fileData[n].offset,r=i+this._fileData[n].data.length-1;if(i<=t&&t<=r){e=this._fileData[n];break}}if(e)return e.data[t-e.offset];throw Error("Offset "+t+" hasn't been loaded yet.")}}]),t}(),e.exports=t},{}],6:[function(t,e,n){function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();n=t("./MediaTagReader"),t("./MediaFileReader"),t=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=Object.getPrototypeOf(e).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?this:t}return i(e,n),r(e,[{key:"_loadData",value:function(t,e){var n=t.getSize();t.loadRange([n-128,n-1],e)}},{key:"_parseData",value:function(t){var e=t.getSize()-128,n=t.getStringWithCharsetAt(e+3,30).toString(),i=t.getStringWithCharsetAt(e+33,30).toString(),r=t.getStringWithCharsetAt(e+63,30).toString(),o=t.getStringWithCharsetAt(e+93,4).toString(),a=t.getByteAt(e+97+28),s=t.getByteAt(e+97+29);if(0==a&&0!=s){a="1.1"
;var l=t.getStringWithCharsetAt(e+97,28).toString()}else a="1.0",l=t.getStringWithCharsetAt(e+97,30).toString(),s=0;return n={type:"ID3",version:a,tags:{title:n,artist:i,album:r,year:o,comment:l,genre:(e=t.getByteAt(e+97+30))<255?u[e]:""}},s&&(n.tags.track=s),n}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(t){return"TAG"===String.fromCharCode.apply(String,t.slice(0,3))}}]),e}();var u="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");e.exports=t},{"./MediaFileReader":10,"./MediaTagReader":11}],7:[function(t,e){function s(t){var e;switch(t){case 0:e="iso-8859-1";break;case 1:e="utf-16";break;case 2:e="utf-16be";break;case 3:e="utf-8"}return e}t("./MediaFileReader");var r={APIC:function(t,e,n,i,r){r=r||"3",i=t;var o=s(n.getByteAt(t));switch(r){case"2":r=n.getStringAt(t+1,3),t+=4;break;case"3":case"4":t+=1+(r=n.getStringWithCharsetAt(t+1,e-1)).bytesReadCount;break;default:throw Error("Couldn't read ID3v2 major version.")}var a=n.getByteAt(t,1);a=l[a];return t+=1+(o=n.getStringWithCharsetAt(t+1,e-(t-i)-1,o)).bytesReadCount,{format:r.toString(),type:a,description:o.toString(),data:n.getBytesAt(t,i+e-t)}},COMM:function(t,e,n,i,r){var o=t,a=s(n.getByteAt(t));return i=n.getStringAt(t+1,3),t+=4+(r=n.getStringWithCharsetAt(t+4,e-4,a)).bytesReadCount,t=n.getStringWithCharsetAt(t,o+e-t,a),{language:i,short_description:r.toString(),text:t.toString()}}};r.COM=r.COMM,r.PIC=function(t,e,n,i){return r.APIC(t,e,n,i,"2")},r.PCNT=function(t,e,n){return n.getLongAt(t,!1)},r.CNT=r.PCNT,r["T*"]=function(t,e,n,i){return i=s(n.getByteAt(t)),n.getStringWithCharsetAt(t+1,e-1,i).toString()},r["W*"]=function(t,e,n,i){return void 0!==(i=s(n.getByteAt(t)))?n.getStringWithCharsetAt(t+1,e-1,i).toString():n.getStringWithCharsetAt(t,e,i).toString()},r.TCON=function(){return r["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")},r.TCO=r.TCON,r.USLT=function(t,e,n,i,r){var o=t,a=s(n.getByteAt(t));return i=n.getStringAt(t+1,3),t+=4+(r=n.getStringWithCharsetAt(t+4,e-4,a)).bytesReadCount,t=n.getStringWithCharsetAt(t,o+e-t,a),{language:i,descriptor:r.toString(),lyrics:t.toString()}},r.ULT=r.USLT;var l="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");e.exports={getFrameReaderFunction:function(t){return t in r?r[t]:"T"===t[0]?r["T*"]:"W"===t[0]?r["W*"]:null}}},{"./MediaFileReader":10}],8:[function(t,e,n){function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();n=t("./MediaTagReader"),t("./MediaFileReader");var o=t("./ArrayFileReader"),d=t("./ID3v2FrameReader");t=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=Object.getPrototypeOf(e).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?this:t}return i(e,n),r(e,[{key:"_loadData",value:function(t,e){t.loadRange([6,9],{onSuccess:function(){t.loadRange([0,10+t.getSynchsafeInteger32At(6)-1],e)},onError:e.onError})}},{key:"_parseData",value:function(t,e){var n=0;if(4<(u=t.getByteAt(n+3)))return{type:"ID3",version:">2.4",tags:{}};var i=t.getByteAt(n+4),r=t.isBitSetAt(n+5,7),o=t.isBitSetAt(n+5,6),a=t.isBitSetAt(n+5,5),s=t.getSynchsafeInteger32At(n+6);n+=10;if(o)n=n+(t.getLongAt(n,!0)+4);var l,u={type:"ID3",version:"2."+u+"."+i,major:u,revision:i,flags:{unsynchronisation:r,extended_header:o,experimental_indicator:a,footer_present:!1},size:s,tags:{}};n=this._readFrames(n,s-10,t,u,e);for(l in h)h.hasOwnProperty(l)&&(s=this._getFrameData(n,h[l]))&&(u.tags[l]=s);for(var c in n)n.hasOwnProperty(c)&&(u.tags[c]=n[c]);return u}},{key:"_getUnsyncFileReader",value:function(t,e,n){for(t=t.getBytesAt(e,n),e=0;e<t.length-1;e++)255===t[e]&&0===t[e+1]&&t.splice(e+1,1);return new o(t)}},{key:"_readFrames",value:function(t,e,n,i,r){var o={};for(r&&(r=this._expandShortcutTags(r));t<e;){var a=this._readFrameHeader(n,t,i),s=a.id;if(0===a.size)break;if(!s)break;var l=a.flags,u=a.size,c=t+a.headerSize,h=n;t+=a.headerSize+a.size,r&&-1===r.indexOf(s)||((i.flags.unsynchronisation||l&&l.format.unsynchronisation)&&(h=this._getUnsyncFileReader(h,c,u),c=0,u=h.getSize()),l&&l.format.data_length_indicator&&(c+=4,u-=4),l=(a=d.getFrameReaderFunction(s))?a(c,u,h,l):null,u={id:s,size:u,description:c=this._getFrameDescription(s),data:l},s in o?(o[s].id&&(o[s]=[o[s]]),o[s].push(u)):o[s]=u)}return o}},{key:"_readFrameHeader",value:function(t,e,n){var i=null;switch(n=n.major){case 2:var r=t.getStringAt(e,3),o=t.getInteger24At(e+3,!0),a=6;break;case 3:r=t.getStringAt(e,4),o=t.getLongAt(e+4,!0),a=10;break;case 4:r=t.getStringAt(e,4),o=t.getSynchsafeInteger32At(e+4),a=10}return r&&2<n&&(i=this._readFrameFlags(t,e+8)),{id:r||"",size:o||0,headerSize:a||0,flags:i}}},{key:"_readFrameFlags",value:function(t,e){return{message:{tag_alter_preservation:t.isBitSetAt(e,6),file_alter_preservation:t.isBitSetAt(e,5),read_only:t.isBitSetAt(e,4)},format:{grouping_identity:t.isBitSetAt(e+1,7),compression:t.isBitSetAt(e+1,3),encryption:t.isBitSetAt(e+1,2),unsynchronisation:t.isBitSetAt(e+1,1),data_length_indicator:t.isBitSetAt(e+1,0)}}}},{key:"_getFrameData",value:function(t,e){for(var n,i=0;n=e[i];i++)if(n in t)return t[n].data}},{key:"_getFrameDescription",value:function(t){return t in a?a[t]:"Unknown"}},{key:"getShortcuts",value:function(){return h}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(t){return"ID3"===String.fromCharCode.apply(String,t.slice(0,3))}}]),e}();var a={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},h={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};e.exports=t},{"./ArrayFileReader":3,"./ID3v2FrameReader":7,"./MediaFileReader":10,"./MediaTagReader":11}],9:[function(t,e,n){function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();n=t("./MediaTagReader"),t("./MediaFileReader"),t=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=Object.getPrototypeOf(e).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?this:t}return i(e,n),r(e,[{key:"_loadData",value:function(t,e){var n=this;t.loadRange([0,16],{onSuccess:function(){n._loadAtom(t,0,"",e)},onError:e.onError})}},{key:"_loadAtom",value:function(t,e,n,i){if(e>=t.getSize())i.onSuccess();else{var r=this,o=t.getLongAt(e,!0);if(0==o||isNaN(o))i.onSuccess();else{var a=t.getStringAt(e+4,4);if(this._isContainerAtom(a)){"meta"==a&&(e+=4);var s=(n?n+".":"")+a;"moov.udta.meta.ilst"===s?t.loadRange([e,e+o],i):t.loadRange([e+8,e+8+8],{onSuccess:function(){r._loadAtom(t,e+8,s,i)},onError:i.onError})}else t.loadRange([e+o,e+o+8],{onSuccess:function(){r._loadAtom(t,e+o,n,i)},onError:i.onError})}}}},{key:"_isContainerAtom",value:function(t){return 0<=["moov","udta","meta","ilst"].indexOf(t)}},{key:"_canReadAtom",value:function(t){return"----"!==t}},{key:"_parseData",value:function(t,e){var n={};for(var i in e=this._expandShortcutTags(e),this._readAtom(n,t,0,t.getSize(),e),o)if(o.hasOwnProperty(i)){var r=n[o[i]];r&&(n[i]="track"===i?r.data.track:r.data)}return{type:"MP4",ftyp:t.getStringAt(8,4),version:t.getLongAt(12,!0),tags:n}}},{key:"_readAtom",value:function(t,e,n,i,r,o,a){a=void 0===a?"":a+"  ";for(var s=n;s<n+i;){var l=e.getLongAt(s,!0);if(0==l)break;var u=e.getStringAt(s+4,4);if(this._isContainerAtom(u)){"meta"==u&&(s+=4),this._readAtom(t,e,s+8,l-8,r,(o?o+".":"")+u,a);break}(!r||0<=r.indexOf(u))&&"moov.udta.meta.ilst"===o&&this._canReadAtom(u)&&(t[u]=this._readMetadataAtom(e,s)),s+=l}}},{key:"_readMetadataAtom",value:function(t,e){var n,i=t.getLongAt(e,!0),r=t.getStringAt(e+4,4),o=t.getInteger24At(e+16+1,!0);o=l[o];if("trkn"==r)n={track:t.getByteAt(e+16+11),total:t.getByteAt(e+16+13)};else{var a=e+24,s=i-24;switch(o){case"text":n=t.getStringWithCharsetAt(a,s,"utf-8").toString();break;case"uint8":n=t.getShortAt(a,!1);break;case"jpeg":case"png":n={format:"image/"+o,data:t.getBytesAt(a,s)}}}return{id:r,size:i,description:u[r]||"Unknown",data:n}}},{key:"getShortcuts",value:function(){return o}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(t){return"ftyp"===String.fromCharCode.apply(String,t.slice(4,8))}}]),e}();var l={0:"uint8",1:"text",13:"jpeg",14:"png",21:"uint8"},u={"\xa9alb":"Album","\xa9ART":"Artist",aART:"Album Artist","\xa9day":"Release Date","\xa9nam":"Title","\xa9gen":"Genre",gnre:"Genre",trkn:"Track Number","\xa9wrt":"Composer","\xa9too":"Encoding Tool","\xa9enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","\xa9grp":"Grouping",keyw:"Keywords","\xa9lyr":"Lyrics","\xa9cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code"},o={title:"\xa9nam",artist:"\xa9ART",album:"\xa9alb",year:"\xa9day",comment:"\xa9cmt",track:"trkn",genre:"\xa9gen",picture:"covr",lyrics:"\xa9lyr"};e.exports=t},{"./MediaFileReader":10,"./MediaTagReader":11}],10:[function(t,e){var n=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),i=t("./StringUtils");t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._isInitialized=!1,this._size=0}return n(t,[{key:"init",value:function(t){var e=this;if(!this._isInitialized)return this._init({onSuccess:function(){e._isInitialized=!0,t.onSuccess()},onError:t.onError});setTimeout(t.onSuccess,1)}},{key:"_init",value:function(){throw Error("Must implement init function")}},{key:"loadRange",value:function(){throw Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(){throw Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(t,e){for(var n=Array(e),i=0;i<e;i++)n[i]=this.getByteAt(t+i);return n}},{key:"isBitSetAt",value:function(t,e){return 0!=(this.getByteAt(t)&1<<e)}},{key:"getSByteAt",value:function(t){return 127<(t=this.getByteAt(t))?t-256:t}},{key:"getShortAt",value:function(t,e){var n=e?(this.getByteAt(t)<<8)+this.getByteAt(t+1):(this.getByteAt(t+1)<<8)+this.getByteAt(t);return n<0&&(n+=65536),n}},{key:"getSShortAt",value:function(t,e){var n=this.getShortAt(t,e);return 32767<n?n-65536:n}},{key:"getLongAt",value:function(t,e){var n=this.getByteAt(t),i=this.getByteAt(t+1),r=this.getByteAt(t+2),o=this.getByteAt(t+3);return(n=e?(((n<<8)+i<<8)+r<<8)+o:(((o<<8)+r<<8)+i<<8)+n)<0&&(n+=4294967296),n}},{key:"getSLongAt",value:function(t,e){var n=this.getLongAt(t,e);return 2147483647<n?n-4294967296:n}},{key:"getInteger24At",value:function(t,e){var n=this.getByteAt(t),i=this.getByteAt(t+1),r=this.getByteAt(t+2);return(n=e?((n<<8)+i<<8)+r:((r<<8)+i<<8)+n)<0&&(n+=16777216),n}},{key:"getStringAt",value:function(t,e){for(var n=[],i=t,r=0;i<t+e;i++,r++)n[r]=String.fromCharCode(this.getByteAt(i));return n.join("")}},{key:"getStringWithCharsetAt",value:function(t,e,n){switch(t=this.getBytesAt(t,e),(n||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":n=i.readUTF16String(t,"utf-16be"===n);break;case"utf-8":n=i.readUTF8String(t);break;default:n=i.readNullTerminatedString(t)}return n}},{key:"getCharAt",value:function(t){return String.fromCharCode(this.getByteAt(t))}},{key:"getSynchsafeInteger32At",value:function(t){var e=this.getByteAt(t),n=this.getByteAt(t+1),i=this.getByteAt(t+2);return 127&this.getByteAt(t+3)|(127&i)<<7|(127&n)<<14|(127&e)<<21}}],[{key:"canReadFile",value:function(){throw Error("Must implement canReadFile function")}}]),t}(),e.exports=t},{"./StringUtils":12}],11:[function(t,e){var n=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();t("./MediaFileReader"),t=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._mediaFileReader=t,this._tags=null}return n(e,[{key:"setTagsToRead",value:function(t){return this._tags=t,this}},{key:"read",value:function(e){var n=this;this._mediaFileReader.init({onSuccess:function(){n._loadData(n._mediaFileReader,{onSuccess:function(){var t=n._parseData(n._mediaFileReader,n._tags);e.onSuccess(t)},onError:e.onError})},onError:e.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(){throw Error("Must implement _loadData function")}},{key:"_parseData",value:function(){throw Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(t){if(!t)return null;for(var e,n=[],i=this.getShortcuts(),r=0;e=t[r];r++)n=n.concat(i[e]||[e]);return n}}],[{key:"getTagIdentifierByteRange",value:function(){throw Error("Must implement")}},{key:"canReadTagFormat",value:function(){throw Error("Must implement")}}]),e}(),e.exports=t},{"./MediaFileReader":10}],12:[function(t,e){var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),u=function(){function n(t,e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._value=t,this.bytesReadCount=e,this.length=t.length}return i(n,[{key:"toString",value:function(){return this._value}}]),n}();e.exports={readUTF16String:function(t,e,n){var i=0,r=1,o=0;n=Math.min(n||t.length,t.length),254==t[0]&&255==t[1]?(e=!0,i=2):255==t[0]&&254==t[1]&&(e=!1,i=2),e&&(r=0,o=1),e=[];for(var a=0;i<n;a++){var s=t[i+r],l=(s<<8)+t[i+o];i=i+2;if(0==l)break;s<216||224<=s?e[a]=String.fromCharCode(l):(s=(t[i+r]<<8)+t[i+o],i+=2,e[a]=String.fromCharCode(l,s))}return new u(e.join(""),i)},readUTF8String:function(t,e){var n=0;e=Math.min(e||t.length,t.length),239==t[0]&&187==t[1]&&191==t[2]&&(n=3);for(var i=[],r=0;n<e;r++){if(0==(s=t[n++]))break;if(s<128)i[r]=String.fromCharCode(s);else if(194<=s&&s<224){var o=t[n++];i[r]=String.fromCharCode(((31&s)<<6)+(63&o))}else if(224<=s&&s<240){o=t[n++];var a=t[n++];i[r]=String.fromCharCode(((255&s)<<12)+((63&o)<<6)+(63&a))}else if(240<=s&&s<245){var s=((7&s)<<18)+((63&(o=t[n++]))<<12)+((63&(a=t[n++]))<<6)+(63&t[n++])-65536;i[r]=String.fromCharCode(55296+(s>>10),56320+(1023&s))}}return new u(i.join(""),n)},readNullTerminatedString:function(t,e){var n=[];e=e||t.length;for(var i=0;i<e;){var r=t[i++];if(0==r)break;n[i-1]=String.fromCharCode(r)}return new u(n.join(""),i)}}},{}],13:[function(t,e,n){function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=t("./ChunkedFileData");(n=function(){function o(t){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");var e;if(e=Object.getPrototypeOf(o).call(this),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(e=!e||"object"!=typeof e&&"function"!=typeof e?this:e)._url=t,e._fileData=new a,e}return i(o,t("./MediaFileReader")),r(o,[{key:"_init",value:function(t){o._config.avoidHeadRequests?this._fetchSizeWithGetRequest(t):this._fetchSizeWithHeadRequest(t)}},{key:"_fetchSizeWithHeadRequest",value:function(e){var n=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(t){(t=n._parseContentLength(t))?(n._size=t,e.onSuccess()):n._fetchSizeWithGetRequest(e)},onError:e.onError})}},{key:"_fetchSizeWithGetRequest",value:function(n){var i=this,t=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",t,{onSuccess:function(t){var e=i._parseContentRange(t);if(t=i._getXhrResponseContent(t),e){if(null==e.instanceLength)return void i._fetchEntireFile(n);i._size=e.instanceLength}else i._size=t.length;i._fileData.addData(0,t),n.onSuccess()},onError:n.onError})}},{key:"_fetchEntireFile",value:function(e){var n=this;this._makeXHRRequest("GET",null,{onSuccess:function(t){t=n._getXhrResponseContent(t),n._size=t.length,n._fileData.addData(0,t),e.onSuccess()},onError:e.onError})}},{key:"_getXhrResponseContent",value:function(t){return t.responseBody||t.responseText||""}},{key:"_parseContentLength",value:function(t){return null==(t=this._getResponseHeader(t,"Content-Length"))?t:parseInt(t,10)}},{key:"_parseContentRange",value:function(t){if(t=this._getResponseHeader(t,"Content-Range")){var e=t.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!e)throw Error("FIXME: Unknown Content-Range syntax: ",t);return{firstBytePosition:parseInt(e[1],10),lastBytePosition:parseInt(e[2],10),instanceLength:e[3]?parseInt(e[3],10):null}}return null}},{key:"loadRange",value:function(e,n){var i=this;i._fileData.hasDataRange(e[0],Math.min(i._size,e[1]))?setTimeout(n.onSuccess,1):((e=this._roundRangeToChunkMultiple(e))[1]=Math.min(i._size,e[1]),this._makeXHRRequest("GET",e,{onSuccess:function(t){t=i._getXhrResponseContent(t),i._fileData.addData(e[0],t),n.onSuccess()},onError:n.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(t){return[t[0],t[0]+1024*Math.ceil((t[1]-t[0]+1)/1024)-1]}},{key:"_makeXHRRequest",value:function(t,e,n){var i=this._createXHRObject(),r=function(){200===i.status||206===i.status?n.onSuccess(i):n.onError&&n.onError({type:"xhr",info:"Unexpected HTTP status "+i.status+".",xhr:i}),i=null};"undefined"!=typeof i.onload?(i.onload=r,i.onerror=function(){n.onError&&n.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:i})}):i.onreadystatechange=function(){4===i.readyState&&r()},o._config.timeoutInSec&&(i.timeout=1e3*o._config.timeoutInSec,i.ontimeout=function(){n.onError&&n.onError({type:"xhr",info:"Timeout after "+i.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:i})}),i.open(t,this._url),i.overrideMimeType("text/plain; charset=x-user-defined"),e&&this._setRequestHeader(i,"Range","bytes="+e[0]+"-"+e[1]),this._setRequestHeader(i,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),i.send(null)}},{key:"_setRequestHeader",value:function(t,e,n){o._config.disallowedXhrHeaders.indexOf(e.toLowerCase())<0&&t.setRequestHeader(e,n)}},{key:"_hasResponseHeader",value:function(t,e){if(!(n=t.getAllResponseHeaders()))return!1;for(var n=n.split("\r\n"),i=[],r=0;r<n.length;r++)i[r]=n[r].split(":")[0].toLowerCase();return 0<=i.indexOf(e.toLowerCase())}},{key:"_getResponseHeader",value:function(t,e){return this._hasResponseHeader(t,e)?t.getResponseHeader(e):null}},{key:"getByteAt",value:function(t){return 255&this._fileData.getByteAt(t).charCodeAt(0)}},{key:"_createXHRObject",value:function(){if("undefined"==typeof window)return new(t("xhr2").XMLHttpRequest);if(window.XMLHttpRequest)return new window.XMLHttpRequest;throw Error("XMLHttpRequest is not supported")}}],[{key:"canReadFile",value:function(t){return"string"==typeof t&&/^[a-z]+:\/\//i.test(t)}},{key:"setConfig",value:function(t){for(var e in t)t.hasOwnProperty(e)&&(this._config[e]=t[e]);for(t=this._config.disallowedXhrHeaders,e=0;e<t.length;e++)t[e]=t[e].toLowerCase()}}]),o}())._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},e.exports=n},{"./ChunkedFileData":5,"./MediaFileReader":10,xhr2:2}],14:[function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();t("./MediaFileReader"),n=t("./NodeFileReader");var o=t("./XhrFileReader"),a=t("./BlobFileReader"),s=t("./ArrayFileReader");t("./MediaTagReader");var l=t("./ID3v1TagReader"),u=t("./ID3v2TagReader");t=t("./MP4TagReader");var c=[],h=[],d=function(){function e(t){i(this,e),this._file=t}return r(e,[{key:"setTagsToRead",value:function(t){return this._tagsToRead=t,this}},{key:"setFileReader",value:function(t){return this._fileReader=t,this}},{key:"setTagReader",value:function(t){return this._tagReader=t,this}},{key:"read",value:function(e){var n=new(this._getFileReader())(this._file),i=this;n.init({onSuccess:function(){i._getTagReader(n,{onSuccess:function(t){new t(n).setTagsToRead(i._tagsToRead).read(e)},onError:e.onError})},onError:e.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var t=0;t<c.length;t++)if(c[t].canReadFile(this._file))return c[t];throw Error("No suitable file reader found for ",this._file)}},{key:"_getTagReader",value:function(t,e){if(this._tagReader){var n=this._tagReader;setTimeout(function(){e.onSuccess(n)},1)}else this._findTagReader(t,e)}},{key:"_findTagReader",value:function(n,i){for(var t=[],e=[],r=n.getSize(),o=0;o<h.length;o++){var a=h[o].getTagIdentifierByteRange();0<=a.offset&&a.offset<r/2||a.offset<0&&a.offset<-r/2?t.push(h[o]):e.push(h[o])}var s=!1;o={onSuccess:function(){if(s){for(var t=0;t<h.length;t++){var e=h[t].getTagIdentifierByteRange();e=n.getBytesAt(0<=e.offset?e.offset:e.offset+r,e.length);if(h[t].canReadTagFormat(e))return void i.onSuccess(h[t])}i.onError&&i.onError({type:"tagFormat",info:"No suitable tag reader found"})}else s=!0},onError:i.onError};this._loadTagIdentifierRanges(n,t,o),this._loadTagIdentifierRanges(n,e,o)}},{key:"_loadTagIdentifierRanges",value:function(t,e,n){if(0===e.length)setTimeout(n.onSuccess,1);else{for(var i=[Number.MAX_VALUE,0],r=t.getSize(),o=0;o<e.length;o++){var a=0<=(s=e[o].getTagIdentifierByteRange()).offset?s.offset:s.offset+r,s=a+s.length-1;i[0]=Math.min(a,i[0]),i[1]=Math.max(s,i[1])}t.loadRange(i,n)}}}]),e}(),f=function(){function e(){i(this,e)}return r(e,null,[{key:"addFileReader",value:function(t){return c.push(t),e}},{key:"addTagReader",value:function(t){return h.push(t),e}},{key:"removeTagReader",value:function(t){return 0<=(t=h.indexOf(t))&&h.splice(t,1),e}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){o.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(t){o.setConfig({disallowedXhrHeaders:t})}},{key:"setXhrTimeoutInSec",value:function(t){o.setConfig({timeoutInSec:t})}}]),e}();f.addFileReader(o).addFileReader(a).addFileReader(s).addTagReader(u).addTagReader(l).addTagReader(t),"undefined"!=typeof process&&f.addFileReader(n),e.exports={read:function(t,e){new d(t).read(e)},Reader:d,Config:f}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./ID3v1TagReader":6,"./ID3v2TagReader":8,"./MP4TagReader":9,"./MediaFileReader":10,"./MediaTagReader":11,"./NodeFileReader":1,"./XhrFileReader":13}]},{},[14])(14)}),function(wn){wn.fn.hap=function(u){function t(t){var e,n,i,r;e=document,n="script",i="facebook-jssdk",r=e.getElementsByTagName(n)[0],e.getElementById(i)||((e=e.createElement(n)).id=i,e.src="//connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(e,r)),window.fbAsyncInit=function(){FB.init({appId:t,xfbml:!0,version:"v2.9"})}}function e(t){if(ht){if(!Je){if("touchstart"==t.type){if(!((t=t.originalEvent.touches)&&0<t.length))return!1}else t.preventDefault();Je=!0,zt.on(Ye,function(t){t:{if("touchmove"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),n(e)}}).on($e,function(t){t:if(Je){if(Je=!1,zt.off(Ye).off($e),"touchend"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),n(e)}})}return!1}}function n(t){if(Ve?t=Ke.setProgress(t):((t=t.pageX-Ze.offset().left)<0?t=0:Qe<t&&(t=Qe),t=Math.max(0,Math.min(1,t/Qe))),Qt&&we)try{Qt.currentTime=t*Qt.duration}catch(e){console.log(e)}}function i(t){if(Ve)e=Ke.trackTooltip(t),n=K[0].getBoundingClientRect(),i=nn[0].getBoundingClientRect(),t=parseInt(i.top-n.top-ze.outerHeight()-10),r=parseInt(i.left-n.left-ze.outerWidth()/2+nn.outerWidth()/2);else{if(e=t.pageX-Ze.offset().left,!HAPUtils.isNumber(e))return!1;e<0?e=0:Qe<e&&(e=Qe);var e=Math.max(0,Math.min(1,e/Qe)),n=K[0].getBoundingClientRect(),i=nn[0].getBoundingClientRect(),r=parseInt(t.pageX-Gt.scrollLeft()-n.left-ze.outerWidth()/2);t=parseInt(i.top-n.top-5-ze.outerHeight(),10)}if(r+ze.outerWidth()>K.width()?r=K.width()-ze.outerWidth():r<0&&(r=0),t+n.top<0&&(t=parseInt(i.top-n.top+ze.outerHeight()+15)),ze.css({left:r+"px",top:t+"px"}).show(),!HAPUtils.isNumber(e))return!1;Qt&&(t=e*(n=Qt.duration),HAPUtils.isNumber(t)&&HAPUtils.isNumber(n)&&ze.find("p").html(HAPUtils.formatCurrentTime(t)+" / "+HAPUtils.formatDuration(n)))}function r(t){if(ht){if(!on){if("touchstart"==t.type){if(!((t=t.originalEvent.touches
)&&0<t.length))return!1}else t.preventDefault();on=!0,zt.on(Ye,function(t){t:{if("touchmove"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),o(e)}}).on($e,function(t){t:if(on){if(on=!1,zt.off(Ye).off($e),"touchend"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),o(e)}})}return!1}}function c(){if(!ht)return!1;0<Lt?(an=Lt,Lt=0):Lt=an,a()}function o(t){hn?Lt=1-(Lt=Math.max(0,Math.min(1,(t.pageY-un.offset().top)/dn))):Lt=Math.max(0,Math.min(1,(t.pageX-un.offset().left)/dn)),a()}function a(t){void 0!==t&&(Lt=t),Qt&&(Qt.volume=Lt),t=hn?"height":"width",HAPUtils.isNumber(dn)||(dn=volumeVertical?un.height():un.width()),cn.css(t,Lt*dn+"px"),0==Lt?sn.find("i").removeClass("fa-volume-up fa-volume-down").addClass("fa-volume-off"):0<Lt&&Lt<.5?sn.find("i").removeClass("fa-volume-off fa-volume-up").addClass("fa-volume-down"):sn.find("i").removeClass("fa-volume-off fa-volume-down").addClass("fa-volume-up"),wn(qt).trigger("volumeChange",{instance:qt,instanceName:vt,volume:Lt})}function s(t){var e=hn?t.pageY-un.offset().top:t.pageX-un.offset().left;if(e<0?e=0:dn<e&&(e=dn),e=Math.max(0,Math.min(1,e/dn)),!HAPUtils.isNumber(e))return!1;hn&&(e=1-e),e=parseInt(100*e,10),ze.find("p").text(e+" %"),e=K[0].getBoundingClientRect();var n=ln[0].getBoundingClientRect();if(hn){var i=parseInt(n.left-e.left-ze.outerWidth()/2+ln.outerWidth()/2);t=parseInt(t.pageY-Gt.scrollTop()-e.top-ze.outerHeight()-10)}else i=parseInt(t.pageX-Gt.scrollLeft()-e.left-ze.outerWidth()/2),t=parseInt(n.top-e.top-ze.outerHeight());i+ze.outerWidth()>K.width()?i=K.width()-ze.outerWidth():i<0&&(i=0),t+e.top<0&&(t=parseInt(n.top-e.top+ze.outerHeight()+15)),ze.css({left:i+"px",top:t+"px"}).show()}function h(t){return t.preventDefault(),!!ht&&(t=wn(t.currentTarget),(!be||!be.is(t))&&(he=!0,Ge.processPlaylistRequest(t.closest(".hap-playlist-item").index()),void wn(qt).trigger("clickPlaylistItem",{instance:qt,instanceName:vt})))}function d(t){return t.preventDefault(),!!ht&&(t=wn(t.currentTarget),(!be||!be.is(t))&&(t.removeClass("hap-playlist-non-selected").addClass("hap-playlist-selected"),void wn(qt).trigger("overPlaylistItem",{instance:qt,instanceName:vt,item:t})))}function f(t){return t.preventDefault(),!!ht&&(t=wn(t.currentTarget),(!be||!be.is(t))&&(t.removeClass("hap-playlist-selected").addClass("hap-playlist-non-selected"),void wn(qt).trigger("outPlaylistItem",{instance:qt,instanceName:vt,item:t})))}function l(t){if(!ht)return!1;if((t=wn(t.currentTarget)).hasClass("hap-prev-toggle"))qt.previousMedia();else if(t.hasClass("hap-playback-toggle"))qt.togglePlayback();else if(t.hasClass("hap-next-toggle"))qt.nextMedia();else if(t.hasClass("hap-volume-toggle"))c();else if(t.hasClass("hap-loop-toggle"))Tt=!Tt,Ge.setLooping(Tt),Tt?ut.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):ut.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color");else if(t.hasClass("hap-random-toggle"))St=!St,Ge.setRandom(St),St?ct.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):ct.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color");else if(t.hasClass("hap-sort-alpha"))qt.sort("title",Ce);else if(t.hasClass("hap-popup-toggle"))hapOpenPopup(qt,u);else if(t.hasClass("hap-share-toggle"))Z.toggle();else if(t.hasClass("hap-share-item")){t=t.attr("data-type").toLowerCase();var e,n="https:"==window.location.protocol?"https:":"http:",i=(window.screen.width-600)/2,r=(window.screen.height-300)/2,o=Ae.title||"",a=Ae.description||"",s=Ae.thumb||"",l=Ae.share||window.location.href;HAPUtils.relativePath(s)||(s=HAPUtils.qualifyURL(s)),"facebook"==t?window.FB&&FB.ui({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:{"og:url":l,"og:title":o,"og:description":a,"og:image":s}})}):"twitter"==t?e=n+"//twitter.com/share?url="+encodeURIComponent(l)+"&text="+encodeURIComponent(o):"googleplus"==t?e=n+"//plus.google.com/share?url="+encodeURIComponent(l):"tumblr"==t&&(e=n+"//www.tumblr.com/share/link?url="+encodeURIComponent(l)+"&amp;name="+encodeURIComponent(o)+"&amp;description="+encodeURIComponent(a)),e&&window.open(e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=600,height=300,left="+i+",top="+r)}}function p(t){if(!ht||on||Je)return!1;(t=wn(t.currentTarget).find("i")).hasClass("hap-icon-color")&&t.removeClass("hap-icon-color").addClass("hap-icon-rollover-color")}function g(t){if(!ht)return!1;var e=(t=wn(t.currentTarget)).find("i");t.hasClass("hap-random-toggle")&&St||t.hasClass("hap-loop-toggle")&&Tt||e.hasClass("hap-icon-rollover-color")&&e.removeClass("hap-icon-rollover-color").addClass("hap-icon-color")}function m(){be&&(wn(qt).trigger("playlistItemEnabled",{instance:qt,instanceName:vt,item:be}),be.removeClass("hap-playlist-selected").addClass("hap-playlist-non-selected"),be=null)}function v(t){dt=!0,et.show(),ye?W():J.empty();var e,n,i,r=wn(t);if(0==r.length)return alert("Failed playlist selection! Playlist - "+t+" does not exist. Check activePlaylist option in settings!"),O(),!1;(yt=t,wn(qt).trigger("playlistStartLoad",{instance:qt,instanceName:vt}),null!=r.attr("data-type")&&"xml"==r.attr("data-type"))?E(b(r)):(r.children(".hap-playlist-item").each(function(){n=wn(this),i=n.attr("data-type"),RegExp(/^audio$/).test(i)?je.push(n.clone()):RegExp(/^hls$/).test(i)?je.push(n.clone()):RegExp(/^radio$/).test(i)?je.push(n.clone()):(e=b(n),je.push(e))}),He=je.length,y())}function y(){if(He-1<++Fe)L();else{var t=je[Fe],e=t.type;e?RegExp(/^soundcloud$/).test(e)?(te=t.limit||1e3,De=[],Zt?_(!0,t.path):C(t.path)):RegExp(/^podcast$/).test(e)?A(t):RegExp(/^itunes_podcast_music$/).test(e)?x(t):RegExp(/^folder$/).test(e)?w(t):/^gdrive-folder$/.test(e)?T(t):RegExp(/^audio$/).test(e)?(Be.push(t),y()):RegExp(/^hls$/).test(e)&&(Be.push(t),y()):(Be.push(t),y())}}function b(t){var e={};if(e.origclasses=t.attr("class"),e.type=t.attr("data-type"),t.attr("data-hls")&&!HAPUtils.isEmpty(t.attr("data-hls"))&&(e.hls=t.attr("data-hls")),t.attr("data-mp3")&&!HAPUtils.isEmpty(t.attr("data-mp3"))&&(e.mp3=t.attr("data-mp3")),t.attr("data-wav")&&!HAPUtils.isEmpty(t.attr("data-wav"))&&(e.wav=t.attr("data-wav")),"audio"==e.type){if(null!=t.attr("data-path")&&!HAPUtils.isEmpty(t.attr("data-path"))){var n=t.attr("data-path"),i=n.substr(n.lastIndexOf(".")+1);"mp3"==i.toLowerCase()||"wav"==i.toLowerCase()?e[i.toLowerCase()]=n:e.mp3=n}}else null==t.attr("data-path")||HAPUtils.isEmpty(t.attr("data-path"))||(e.path=e.id=t.attr("data-path"));return null!=t.attr("data-limit")&&!HAPUtils.isEmpty(t.attr("data-limit"))&&HAPUtils.isNumber(t.attr("data-limit"))&&0!=Math.abs(parseInt(t.attr("data-limit"),10))&&(e.limit=Math.abs(parseInt(t.attr("data-limit"),10))),null==t.attr("data-artwork")||HAPUtils.isEmpty(t.attr("data-artwork"))||(e.artwork=t.data("artwork")),null==t.attr("data-thumb")||HAPUtils.isEmpty(t.attr("data-thumb"))?t.find(".hap-playlist-thumb img").length?e.thumb=t.find(".hap-playlist-thumb img").attr("src"):null==t.attr("data-thumb-default")||HAPUtils.isEmpty(t.attr("data-thumb-default"))||(e.thumbDefault=t.attr("data-thumb-default")):e.thumb=t.attr("data-thumb"),null==t.attr("data-thumb-quality")||HAPUtils.isEmpty(t.attr("data-thumb-quality"))||(e.thumbQuality=t.attr("data-thumb-quality")),null==t.attr("data-title")||HAPUtils.isEmpty(t.attr("data-title"))?t.find(".hap-playlist-title").length&&(e.title=t.find(".hap-playlist-title").html()):e.title=t.attr("data-title"),null==t.attr("data-description")||HAPUtils.isEmpty(t.attr("data-description"))||(e.description=t.attr("data-description")),null==t.attr("data-artist")||HAPUtils.isEmpty(t.attr("data-artist"))||(e.artist=t.attr("data-artist")),null==t.attr("data-album")||HAPUtils.isEmpty(t.attr("data-album"))||(e.album=t.attr("data-album")),null==t.attr("data-download")||HAPUtils.isEmpty(t.attr("data-download"))||(e.download=t.attr("data-download")),null!=t.attr("data-id3")&&(e.id3=!0),null==t.attr("data-start")||HAPUtils.isEmpty(t.attr("data-start"))||(e.start=Math.abs(t.attr("data-start"))),null==t.attr("data-end")||HAPUtils.isEmpty(t.attr("data-end"))||(e.end=Math.abs(t.attr("data-end"))),null!=t.attr("data-playback-rate")&&(e.playbackRate=1,HAPUtils.isEmpty(t.attr("data-playback-rate"))||(e.playbackRate=Math.abs(t.attr("data-playback-rate")))),null==t.attr("data-link")||HAPUtils.isEmpty(t.attr("data-link"))||(e.link=t.attr("data-link"),e.target="_blank",null==t.attr("data-target")||HAPUtils.isEmpty(t.attr("data-target"))||(e.target=t.attr("data-target"))),null==t.attr("data-share")||HAPUtils.isEmpty(t.attr("data-share"))||(e.share=t.attr("data-share")),t.is(":empty")||(e.content=t.html()),e}function w(a){if("file:"==window.location.protocol)return alert("Reading files from folders locally is not possible! This requires online server connection."),y(),!1;var t=a.path.replace(/\/\//g,"/"),e=mt+"includes/folder_parser.php";t={dir:t},a.id3&&(Yt=Xt=Be.length-1),wn.ajax({type:"GET",url:e,data:t,dataType:"json"}).done(function(t){var e,n=t.length;for(HAPUtils.keysrt(t,"filename"),e=0;e<n;e++){var i=t[e],r=wn.extend(!0,{},a);r.type="audio";var o=i.fullpath;r[i.extension]=o,delete r.path,"undefined"==typeof r.download&&(r.download=o),"undefined"==typeof r.share&&(r.share=o),r.title||(r.title=i.filename),Be.push(r),Xt++}a.id3?S():y()}).fail(function(t,e,n){console.log("Error processFolder: "+t,e,n),y()})}function T(a){return"file:"==window.location.protocol?(alert("Reading files from folders locally is not possible! This requires online server connection."),y(),!1):HAPUtils.isEmpty(Rt)?(alert("gDriveAppId has not been set in settings!"),y(),!1):void wn.ajax({url:"https://www.googleapis.com/drive/v3/files?q='"+a.path+"'+in+parents&key="+Rt,dataType:"jsonp"}).done(function(t){var e,n=t.files.length,i=[],r=[];for(e=0;e<n;e++){var o=t.files[e];/mp3|mpeg|mpeg3|wav/.test(o.mimeType)?r.push(o):/jpg|jpeg|png/.test(o.mimeType)&&i.push(o)}for(HAPUtils.keysrt(r,"name"),HAPUtils.keysrt(i,"name"),n=r.length,e=0;e<n;e++){o=r[e],(t=wn.extend(!0,{},a)).type="audio",t[o.name.substr(o.name.lastIndexOf(".")+1).toLowerCase()]="https://drive.google.com/uc?export=view&id="+o.id,delete t.path,"undefined"==typeof t.download&&(t.download="https://drive.google.com/uc?export=download&id="+o.id),"undefined"==typeof t.share&&(t.share="https://drive.google.com/open?id="+o.id),!t.thumb&&i[e]&&(t.thumb="https://drive.google.com/uc?export=view&id="+i[e].id),t.title||(t.title=o.name.substr(0,o.name.lastIndexOf("."))),Be.push(t)}y()}).fail(function(t,e,n){console.log("Error processGdriveFolder: "+t,e,n),y()})}function S(){var r=Be[Xt];jsmediatags.read(r.mp3||r.wav,{onSuccess:function(t){var e=t.tags;if(t=e.picture,e.artist&&(r.artist=e.artist),e.title&&(r.title=e.title),e.album&&(r.album=e.album),t){e="";var n,i=t.data.length;for(n=0;n<i;n++)e+=String.fromCharCode(t.data[n]);r.thumb="data:"+t.format+";base64,"+window.btoa(e)}Yt<--Xt?S():y()},onError:function(t){console.log("ID3 error: ",t.type,t.info),Yt<--Xt?S():y()}})}function E(t){wn.ajax({type:"GET",url:t.path,dataType:"html"}).done(function(t){var e,n,i;wn(t).children(".hap-playlist-item").each(function(){e=wn(this),n=e.attr("data-type"),RegExp(/^audio/).test(n)?je.push(e):RegExp(/^hls/).test(n)?je.push(e):(i=b(e),je.push(i))}),He=je.length,y()}).fail(function(t,e,n){console.log("Error processXml: "+t,e,n),y()})}function A(s){if("file:"==window.location.protocol)alert("Using Podcast locally is not possible! This requires online server connection!"),y();else{var t=Le+"?url="+encodeURIComponent(s.path);wn.ajax({url:t,dataType:"json",cache:!1}).done(function(t){var e,n,i,r=HAPUtils.parseXML(t.contents),o=0,a=s.limit||1e3;wn(r).find("image").length&&wn(r).find("image").attr("href")?i=wn(r).find("image").attr("href"):wn(t.contents).find("itunes\\:image").length&&wn(t.contents).find("itunes\\:image").attr("href")&&(i=wn(t.contents).find("itunes\\:image").attr("href")),wn(r).find("item").each(function(){if(a<=o)return!1;e=wn(this),(n=wn.extend(!0,{},s)).type="audio",n.path=e.find("enclosure").attr("url"),"undefined"==typeof n.download&&(n.download=n.path),!n.title&&e.find("title").length&&(n.title=e.find("title").text()),!n.artist&&e.find("author").length&&(n.artist=e.find("author").text()),!n.description&&e.find("description").length&&(n.description=e.find("description").text()),!n.duration&&e.find("duration").length&&(n.duration=e.find("duration").text()),n.thumb||(e.find("image").length&&e.find("image").attr("href")?n.thumb=e.find("image").attr("href"):i&&(n.thumb=i)),"undefined"==typeof n.share&&e.find("link").length&&(n.share=e.find("link").text()),Be.push(n),o++}),y()}).fail(function(t,e,n){console.log("Error processPodcast: "+t,e,n),y()})}}function x(s){"file:"==window.location.protocol?(alert("Using Podcast locally is not possible! This requires online server connection!"),y()):(encodeURIComponent(s.path),wn.ajax({url:s.path}).done(function(t){t=wn("<div></div>").html(t);var e,n,i,r=0,o=s.limit||500;if(t.find(".lockup.product.podcast").length){var a=t.find(".lockup.product.podcast").find("img");a.length&&(a.attr("src-swap-high-dpi").length?i=a.attr("src-swap-high-dpi"):a.attr("src-swap").length&&(i=a.attr("src-swap")))}t.find("tr.podcast-episode").each(function(){if(o<=r)return!1;e=wn(this),(n=wn.extend(!0,{},s)).type="audio",n.path=e.attr("audio-preview-url"),!n.title&&e.attr("preview-title").length&&(n.title=e.attr("preview-title")),!n.artist&&e.attr("preview-artist").length&&(n.artist=e.attr("preview-artist")),!n.description&&e.find(".episode-info").length&&(n.description=e.find(".episode-info").next().text()),!n.thumb&&i&&(n.thumb=i),"undefined"==typeof n.share&&(n.share=s.path),Be.push(n),r++}),y()}).fail(function(t,e,n){console.log("Error processPodcast: "+t,e,n),y()}))}function C(t){if("file:"==window.location.protocol)alert("Using SoundCloud locally is not possible! This requires online server connection!"),y();else{if(HAPUtils.isEmpty(kt))return alert("soundCloudAppId has not been set! Skipping Soundcloud url: "+t),y(),!1;var e=document.createElement("script");e.src="https://connect.soundcloud.com/sdk.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n);var i=setInterval(function(){window.SC&&(i&&clearInterval(i),SC.initialize({client_id:kt}),_(Zt=!0,t))},100)}}function _(t,o){SC.get(t?"https://api.soundcloud.com/resolve.json?url="+o+"&client_id="+kt:o,{limit:200,linked_partitioning:1},function(t,e){if(console.log(t),e){for(console.log("Error getSoundCloudPage: "+e);De.length;)Be.push(De.splice(0,1)[0]);y()}else{if("track"==t.kind)k(t);else if("playlist"==t.kind){var n,i=t.tracks.length;if(De.length+i>=te){i=te-De.length;var r=!0}for(n=0;n<i;n++)k(t.tracks[n])}else if(t.collection)for(i=t.collection.length,De.length+i>=te&&(i=te-De.length,r=!0),n=0;n<i;n++)k(t.collection[n]);else{if(t.username)return n=t.uri,void _(!1,n=/likes/.test(o)?n+"/likes":/favorites/.test(o)?n+"/favorites":n+"/tracks");if(wn.isArray(t))for(i=t.length,De.length+i>=te&&(i=te-De.length,r=!0),n=0;n<i;n++)k(t[n])}if(t.next_href&&!r)_(!1,t.next_href);else{for(;De.length;)Be.push(De.splice(0,1)[0]);y()}}})}function k(t){if(t.streamable&&t.stream_url){var e=wn.extend(!0,{},je[Fe]);e.type="audio",t.duration&&(e.duration=t.duration),e.path=t.stream_url+"?client_id="+kt,"undefined"==typeof e.download&&(t.downloadable&&t.download_url?e.download=e.path.replace(/\/stream\\?/,"/download"):delete e.download),!e.title&&t.title&&(e.title=t.title),!e.description&&t.description&&(e.description=t.description),!e.thumb&&t.artwork_url&&(e.thumb=t.artwork_url,e.thumbQuality&&(e.thumb=e.thumb.replace("large.jpg",e.thumbQuality))),e.favoritingsCount=parseInt(t.favoritings_count?t.favoritings_count:0,10),e.playbackCount=parseInt(t.playback_count?t.playback_count:0,10),e.hotness=e.favoritingsCount+e.playbackCount,"undefined"==typeof e.share&&t.permalink_url&&(e.share=t.permalink_url),De.push(e)}}function R(t){Ie.empty();var e,n=t.length;for(e=0;e<n;e++){var i=t[e],r=wn('<div class="hap-playlist-item"/>'),o=i.thumb;if(o){var a=new Image;a.className="hap-hidden",a.onload=function(){this.className="hap-visible"},a.src=o,0==e&&(oe=o),wn('<span class="hap-playlist-thumb"></span>').append(a).appendTo(r)}o=wn('<span class="hap-playlist-info"></span>').appendTo(r),wn('<span class="hap-playlist-title">'+i.title+"</span>").appendTo(o),wn('<span class="hap-playlist-artist">'+i.artist+"</span>").appendTo(o),r.appendTo(Ie)}ie||(ie=!0,I(Pe)),re||(re=!0,wn(qt).trigger("historyEndLoad"))}function L(){var t,e,n=Be.length,i=0;for(t=0;t<n;t++){pe&&i++;var r=Be[t],o=r.type;if(ft){if(r instanceof wn&&r.hasClass("hap-playlist-item")){if(o=r,pe){a?a.after(o):de?o.appendTo(J):J.children("div").eq(fe).before(o);var a=o}else o.appendTo(J);var s=o.find(".hap-playlist-non-selected, .hap-playlist-selected")}else{if(r.origclasses||(r.origclasses="hap-playlist-item"),o=wn('<div class="'+r.origclasses+'"/>').attr("data-type",o),pe?(a?a.after(o):de?o.appendTo(J):J.children("div").eq(fe).before(o),a=o):o.appendTo(J),s=wn('<a class="hap-playlist-non-selected" href="#"/>').appendTo(o),-1!=wn.inArray("thumb",It)&&(e=r.thumb||r.thumbDefault)){var l=new Image;l.className="hap-hidden",l.onload=function(){this.className="hap-visible"},l.src=e,wn('<span class="hap-playlist-thumb"></span>').append(l).appendTo(s),o.attr("data-thumb",e)}-1!=wn.inArray("title",It)&&(e=z(r),wn('<span class="hap-playlist-title">'+e+"</span>").appendTo(s),o.attr("data-title",r.title)),(r.path||r.mp3)&&o.attr("data-mp3",r.path||r.mp3),r.hls&&o.attr("data-hls",r.hls),r.description&&o.attr("data-description",r.description),r.share&&o.attr("data-share",r.share),r.download&&o.attr("data-download",r.download),r.album&&o.attr("data-album",r.album),r.id3&&o.attr("data-id3",r.id3),r.start&&o.attr("data-start",r.start),r.end&&o.attr("data-end",r.end),r.playbackRate&&o.attr("data-playback-rate",r.playbackRate),r.link&&(o.attr("data-link",r.link),r.target&&o.attr("data-target",r.target)),Bt&&r.link&&(e=wn('<a class="hap-link" href="'+r.link+'" target="'+r.target+'"><i class="fa fa-link"></i></a>'),s.after(e)),Vt&&Ft&&r.download&&(e=wn('<a class="hap-download" href="'+r.download+'" download title="Download"><i class="fa fa-download"></i></a>'),s.after(e)),r.content&&(o.append(r.content),delete r.content)}r.thumb&&!r.artwork&&(r.artwork=[{src:r.thumb}]),s.on("click",h),pt||s.on("mouseenter",d).on("mouseleave",f)}}ye=J,D(),console.log("playlistLength = ",He),pe?(t=Ge.getCounter(),Ge.setPlaylistItems(He,!1),fe<=t&&(de||Ge.reSetCounter(t+i)),me?(me=!1,ge&&!pt&&(wt=!0),Ge.setCounter(fe,!1)):ge&&Ge.setCounter(fe,!1)):Ge.setPlaylistItems(He),O(),wn(qt).trigger("playlistEndLoad",{instance:qt,instanceName:vt})}function D(){if(He=J.children(".hap-playlist-item").length,ft){var t,e,n,i,r=0;Ue=[],J.find(".hap-playlist-item").each(function(){e=wn(this).find(".hap-playlist-non-selected, .hap-playlist-selected"),(n=e.find(".hap-playlist-title")).length&&(t=n.html(),Ue.push(t),Et&&(i=HAPUtils.formatNumber(r)+Ht,e.find(".hap-playlist-title-num").length?e.find(".hap-playlist-title-num").html(i):n.before(wn('<span class="hap-playlist-title-num">'+i+"</span>")))),r++})}}function P(){if(ft){var t,e,n=0;J.find(".hap-playlist-item").each(function(){t=wn(this).find(".hap-playlist-non-selected, .hap-playlist-selected"),e=HAPUtils.formatNumber(n)+Ht,t.find(".hap-playlist-title-num").length?t.find(".hap-playlist-title-num").html(e):title_node.before(wn('<span class="hap-playlist-title-num">'+e+"</span>")),n++})}}function I(t){console.log("checkPlaylistScroll"),t.mCustomScrollbar({axis:"horizontal"==xt?"x":"y",theme:u.playlistScrollTheme,scrollInertia:0,mouseWheel:{normalizeDelta:!0,deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){t.find(".mCSB_container").addClass("hap-mCSB_full")},onOverflowY:function(){t.find(".mCSB_container").removeClass("hap-mCSB_full")}}})}function O(){if(et.hide(),dt=!1,ht||(ht=!0,At&&!ce&&(I($),ce=!0),G(),K.css("opacity",1),a(Lt),u.autoOpenPopup&&!u.isPopup&&hapOpenPopup(qt,u),wn(qt).trigger("setupDone",{instance:qt,instanceName:vt})),Ct&&!ue&&(J.sortable({update:function(){if(be){var t=be.closest(".hap-playlist-item").index();Ge.reSetCounter(t)}Et&&P()}}),ue=!0),!ve&&!pe&&0<He){var t=u.activeItem;He-1<t&&(t=He-1),-1<t&&Ge.setCounter(t,!1),ve=!0}pe=!1}function N(){var e,n,i,r=0;Ue=[],J.find(".hap-playlist-item").each(function(){wn(this).find(".hap-playlist-non-selected").each(function(){var t=wn(this).on("click",h);pt||t.on("mouseenter",d).on("mouseleave",f),(n=t.find(".hap-playlist-title")).length&&(e=n.html(),Ue.push(e),Et&&(i=HAPUtils.formatNumber(r)+Ht,t.find(".hap-playlist-title-num").length?t.find(".hap-playlist-title-num").html(i):n.before(wn('<span class="hap-playlist-title-num">'+i+"</span>"))))}),r++}),He=r,Ge.setPlaylistItems(He),ye=J,ht||(ht=!0,At&&!ce&&(I($),ce=!0),a(Lt),K.css("opacity",1),u.autoOpenPopup&&!u.isPopup&&hapOpenPopup(qt,u),wn(qt).trigger("setupDone",{instance:qt,instanceName:vt})),et.hide(),dt=!1,wn(qt).trigger("playlistEndLoad",{instance:qt,instanceName:vt});var t=u.activeItem;He-1<t&&(t=He-1),-1<t&&Ge.setCounter(t,!1)}function M(){++ae==se?B():ne.artist.getInfo({artist:Ne[ae].artist},{success:function(t){Oe||(t=""!=t.artist.image[3]["#text"].trim()?t.artist.image[3]["#text"].trim():Ae.thumbDefault,Ne[ae]&&(Ne[ae].thumb=t,M()))},error:function(){Oe||(Ne[ae].thumb=Ae.thumbDefault,M())}})}function F(){Ne=[],ae=-1;var t=Se;";"==t.substring(t.length-1)&&(t=t.substring(0,t.length-1));var r=new XMLHttpRequest;r.open("GET","https://cors-anywhere.herokuapp.com/"+t+"played.html"),r.onload=function(){var t,e=r.responseText,n=e.indexOf("Song Title")+12;for((e=(e=e.substr(n,e.length)).split("</td><td>")).shift(),se=e.length,t=0;t<se;t++){n=e[t].indexOf("</"),e[t]=e[t].substr(0,n),e[t]=e[t].replace(/<\/?[^>]+(>|$)/g,"");var i=e[t].split(" - ");n=i[0].trim(),i=i[1]?i[1].trim():"",0==t&&(i=i.substr(0,i.length-12)),Ne.push({title:i,artist:n})}Oe=!1,M()},r.onerror=function(){console.log("Radio history Error: ",r.status+" "+r.statusText),le&&clearInterval(le),le=setInterval(function(){F()},Me)},/^POST/i.test("GET")&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send()}function B(){var t=Ne.shift();if(it.find("img").attr("src")!=t.thumb){var e=new Image;e.className="hap-hidden",e.onload=function(){this.className="hap-visible"},it.empty(),it[0].appendChild(e),e.src=t.thumb}rt.html(t.title),ot.html(t.artist),u.generateHistory?oe!=Ne[0].thumb&&R(Ne):re||(re=!0,wn(qt).trigger("historyEndLoad")),le&&clearInterval(le),le=setInterval(function(){F()},Me)}function j(){var t;if($t||(Jt=wn(document.createElement("audio")).attr("preload",bt),Qt=Jt[0],$t=!0),Se=t=(Re||Qt.canPlayType("application/vnd.apple.mpegurl"))&&Ae.hls?Ae.hls:_e&&Ae.mp3?Ae.mp3:ke&&Ae.wav?Ae.wav:Ae.path,Qt.src=t,Jt.on("ended",function(){U()}).on("canplay",function(){}).on("canplaythrough",function(){}).on("loadedmetadata",function(){Ae.playbackRate&&(Qt.playbackRate=Number(Ae.playbackRate)),u.resumeTime?(Qt.currentTime=u.resumeTime,delete u.resumeTime):Ae.start&&(Qt.currentTime=Ae.start)}).on("play",function(){if(we||(we=!0,Qe=Ze.width(),xe&&cancelAnimationFrame(xe),xe=requestAnimationFrame(H),wn(qt).trigger("soundStart",{instance:qt,instanceName:vt,counter:Ge.getCounter()})),jt&&1<hap_mediaArr.length){var t,e=hap_mediaArr.length;for(t=0;t<e;t++)qt!=hap_mediaArr[t].inst&&hap_mediaArr[t].inst.pauseMedia()}lt.find("i").removeClass("fa-play").addClass("fa-pause"),Ee=!0,wn(qt).trigger("soundPlay",{instance:qt,instanceName:vt,counter:Ge.getCounter()})}).on("pause",function(){lt.find("i").removeClass("fa-pause").addClass("fa-play"),Ee=!1,wn(qt).trigger("soundPause",{instance:qt,instanceName:vt,counter:Ge.getCounter()})}).on("error",function(){wn(qt).trigger("soundError",{instance:qt,instanceName:vt,counter:Ge.getCounter()})}),Re&&"hls"==Te){if("file:"==window.location.protocol)return alert("Playing HLS requires server connection!"),!1;yn.attachMedia(Qt),wt&&Qt.play()}else wt&&(Qt.load(),Qt.play());Qt.volume=Lt,wt=!0,"radio"==Te&&((HAPUtils.isEmpty(u.lastFmApiKey)||HAPUtils.isEmpty(u.lastFmApiSecret))&&alert("Last.fm API credentials missing!"),ee||(ee=new LastFMCache,ne=new LastFM({apiKey:u.lastFmApiKey,apiSecret:u.lastFmApiSecret,cache:ee})),F())}function H(){if(Qt){var t=Qt.currentTime,e=Qt.duration;if(HAPUtils.isNumber(t)&&HAPUtils.isNumber(e)){if(at.html(HAPUtils.formatCurrentTime(t)),st.html(HAPUtils.formatDuration(e)),"undefined"!=typeof Qt.buffered&&0!=Qt.buffered.length){try{var n=Qt.buffered.end(Qt.buffered.length-1)}catch(r){}if(!isNaN(n))var i=n/e}Ve?Ke.drawSeekbar(i,t,e):(en.width(t/e*Qe),i&&tn.width(i*Qe)),Ae.end&&t>=Ae.end&&U()}}xe=requestAnimationFrame(H)}function U(){wn(qt).trigger("soundEnd",{instance:qt,instanceName:vt,counter:Ge.getCounter()});var t=Ae.start||0;"next"==Pt?qt.nextMedia():"loop"==Pt?(Qt.currentTime=t,Qt.play()):"rewind"==Pt?(Qt.currentTime=t,Qt.pause()):"stop"==Pt&&Qt.pause()}function q(){xe&&cancelAnimationFrame(xe),le&&clearInterval(le),le=null,Re&&"hls"==Te&&yn.detachMedia(),Qt&&(Qt.pause(),Qt.src=""),Jt&&Jt.off("ended canplay canplaythrough loadedmetadata pause play error"),at.html("0:00"),st.html("0:00"),it.empty(),rt.html(""),ot.html(""),en.width(0),tn.width(0),Te=null,ge=we=Ee=!1,lt.find("i").removeClass("fa-pause").addClass("fa-play")}function W(){Te&&(q(),m()),ft&&(Ct&&(J.sortable("destroy"),ue=!1),J.find(".hap-playlist-item").remove()),Ie.empty(),yt=ye=oe=null,ve=me=pe=!(Oe=!(re=!1)),He=0,Fe=-1,Be=[],je=[],Ue=[],Ge.reSetCounter(),qe.val(We),Ce=!1,tt.find("i").removeClass("fa-sort-alpha-up").addClass("fa-sort-alpha-down")}function G(){Qe=Ze.width()}function z(t){if("undefined"==typeof t.artist||HAPUtils.isEmpty(t.artist)||"undefined"==typeof t.title||HAPUtils.isEmpty(t.title))"undefined"!=typeof t.artist||"undefined"==typeof t.title||HAPUtils.isEmpty(t.title)?"undefined"==typeof t.artist||HAPUtils.isEmpty(t.artist)||"undefined"!=typeof t.title||(e=t.artist):e=t.title;else var e=t.artist+Ut+t.title;return e}function V(){if(it.length){var t=new Image;t.className="hap-hidden",t.onload=function(){this.className="hap-visible"},it.empty(),it[0].appendChild(t),t.src=Ae.thumb||Ae.thumbDefault}Ae.title&&rt.html(Ae.title),Ae.artist&&ot.html(Ae.artist)}var K=wn(this),X=wn(u.playlistList).hide(),Y=K.find(".hap-playlist-holder"),$=K.find(".hap-playlist-inner"),J=K.find(".hap-playlist-content"),Q=K.find(".hap-playlist-filter-msg"),Z=K.find(".hap-share-holder"),tt=K.find(".hap-sort-alpha"),et=K.find(".hap-preloader"),nt=K.find(".hap-popup-toggle");K.find(".hap-player-holder");var it=K.find(".hap-player-thumb"),rt=K.find(".hap-player-title"),ot=K.find(".hap-player-artist"),at=K.find(".hap-media-time-current"),st=K.find(".hap-media-time-total"),lt=K.find(".hap-playback-toggle"),ut=K.find(".hap-loop-toggle"),ct=K.find(".hap-random-toggle");et=K.find(".hap-preloader");var ht,dt,ft=Y.length,pt=HAPUtils.isMobile(),gt=HAPUtils.hasLocalStorage(),mt=u.sourcePath,vt=u.instanceName,yt=u.activePlaylist,bt=u.preload,wt=u.autoPlay,Tt=u.loopingOn,St=u.randomPlay,Et=u.useNumbersInPlaylist,At=u.usePlaylistScroll,xt=u.playlistScrollOrientation,Ct=!pt&&u.sortableTracks,_t=u.facebookAppId,kt=u.soundCloudAppId,Rt=u.gDriveAppId,Lt=u.volume,Dt=u.useKeyboardNavigationForPlayback,Pt=u.mediaEndAction,It=u.playlistItemContent.split(","),Ot=u.useContinousPlayback&&gt,Nt=u.continousKey,Mt=u.useMediaSession&&"mediaSession"in navigator,Ft=u.createDownloadIconsInPlaylist,Bt=u.createLinkIconsInPlaylist,jt=u.togglePlaybackOnMultipleInstances,Ht=u.numberTitleSeparator||".  ",Ut=u.artistTitleSeparator||" - ",qt=this;wn("body");var Wt,Gt=wn(window),zt=wn(document),Vt=HAPUtils.hasDownloadSupport(),Kt=HAPUtils.isIOS();HAPUtils.isAndroid();var Xt,Yt,$t,Jt,Qt,Zt,te,ee,ne,ie,re,oe,ae,se,le,ue,ce,he,de,fe,pe,ge,me,ve,ye,be,we,Te,Se,Ee,Ae,xe,Ce,_e=HAPUtils.canPlayMp3(),ke=HAPUtils.canPlayWav(),Re=window.Hls&&Hls.isSupported(),Le=mt+"includes/ba-simple-proxy.php",De=[],Pe=K.find(".hap-history-inner"),Ie=K.find(".hap-history-content"),Oe=!0,Ne=[],Me=u.lastPlayedInterval,Fe=-1,Be=[],je=[],He=0,Ue=[];"undefined"==typeof window.hap_mediaArr&&(window.hap_mediaArr=[]),window.hap_mediaArr.push({inst:qt,id:vt}),pt&&(wt=!1),Tt&&ut.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"),St&&ct.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"),K.find(".hap-select").change(function(){qt.loadPlaylist(wn(this).val())});var qe=K.find(".hap-search-filter"),We=qe.val();qe.on("focus",function(){wn(this).val()==We&&wn(this).val("")}).on("blur",function(){HAPUtils.isEmpty(wn(this).val())&&wn(this).val(We)}).on("keyup.apfilter",function(){if(0==Ue.length)return!1;var t=wn(this).val();t=Ue.filter(/./.test.bind(new RegExp(t,"i")));var e,n=0;for(e=0;e<He;e++){var i=J.children(".hap-playlist-item").eq(e).find(".hap-playlist-title").html();-1<wn.inArray(i,t)?J.children(".hap-playlist-item").eq(e).show():(J.children(".hap-playlist-item").eq(e).hide(),n++)}n==He?Q.show():Q.hide()}),HAPUtils.isEmpty(_t)||"file:"==window.location.protocol?console.log("facebookAppId has not been set in settings!"):t(_t);var Ge=new HAPPlaylistManager(u);wn(Ge).on("HAPPlaylistManager.COUNTER_READY",function(){Te&&q();var t=Ge.getCounter(),e=J.children(".hap-playlist-item").eq(t);Ae=b(e),Te=Ae.type,be&&m(),(be=J.children(".hap-playlist-item").eq(t).find(".hap-playlist-non-selected, .hap-playlist-selected")).length&&(be.removeClass("hap-playlist-non-selected").addClass("hap-playlist-selected"),At&&0<He&&(he||("horizontal"==xt?$.mCustomScrollbar("scrollTo",parseInt(be.closest(".hap-playlist-item").position().left),{scrollInertia:500}):$.mCustomScrollbar("scrollTo",parseInt(be.closest(".hap-playlist-item").position().top),{scrollInertia:500})),he=!1),wn(qt).trigger("playlistItemDisabled",{instance:qt,instanceName:vt,item:be})),V(),Mt&&(navigator.mediaSession.metadata=new MediaMetadata({title:Ae.title,artist:Ae.artist||"",album:Ae.album||"",artwork:Ae.artwork})),j(),wn(qt).trigger("soundRequest",{instance:qt,instanceName:vt,counter:t})}),Ot&&(window.attachEvent||window.addEventListener)(Kt?"pagehide":"beforeunload",function(t){if(window.event&&(window.event.cancelBubble=!0),!ht||!Te)return!1;t={volume:Lt,activeItem:Ge.getCounter(),resumeTime:qt.getCurrentTime(),autoPlay:Ee},localStorage.setItem(Nt,JSON.stringify(t))}),Mt&&(navigator.mediaSession.setActionHandler("play",function(){qt.playMedia()}),navigator.mediaSession.setActionHandler("pause",function(){qt.pauseMedia()}),navigator.mediaSession.setActionHandler("previoustrack",function(){qt.previousMedia()}),navigator.mediaSession.setActionHandler("nexttrack",function(){qt.nextMedia()}),navigator.mediaSession.setActionHandler("seekbackward",function(){qt.seekBackward()}),navigator.mediaSession.setActionHandler("seekforward",function(){qt.seekForward()}));var ze=K.find(".hap-tooltip");pt||K.find("[data-tooltip]").on("mouseenter",function(t){var e=wn(this);t=K[0].getBoundingClientRect();var n=e[0].getBoundingClientRect();ze.find("p").text(e.attr("data-tooltip"));var i=parseInt(n.top-t.top-ze.outerHeight());(e=parseInt(n.left-t.left-ze.outerWidth()/2+e.outerWidth()/2))+ze.outerWidth()>K.width()?e=K.width()-ze.outerWidth():e<0&&(e=0),i+t.top<0&&(i=parseInt(n.top-t.top+ze.outerHeight()+15)),ze.css({left:e+"px",top:i+"px"}).show()}).on("mouseleave",function(){ze.hide()});var Ve=K.find(".hap-circle-player").length;if(Ve&&HAPUtils.hasCanvas())var Ke=new HAPCirclePlayer({settings:u,parent:K});if("ontouchstart"in window)var Xe="touchstart.ap mousedown.ap",Ye="touchmove.ap mousemove.ap",$e="touchend.ap mouseup.ap";else window.PointerEvent?(Xe="pointerdown.ap",Ye="pointermove.ap",$e="pointerup.ap"):(Xe="mousedown.ap",Ye="mousemove.ap",$e="mouseup.ap");var Je,Qe,Ze=K.find(".hap-progress-bg"),tn=K.find(".hap-load-level"),en=K.find(".hap-progress-level"),nn=Ve?K.find(".hap-progress-canvas"):K.find(".hap-seekbar");if(nn.on(Xe,function(t){return e(t),!1}),!pt){var rn=function(){we&&(nn.off(Ye,i).off("mouseout",rn),zt.off("mouseout",rn),ze.hide())};nn.on("mouseover",function(){we&&(nn.on(Ye,i).on("mouseout",rn),zt.on("mouseout",rn))})}var on,an=.5,sn=K.find(".hap-volume-toggle"),ln=K.find(".hap-volume-seekbar"),un=K.find(".hap-volume-bg"),cn=K.find(".hap-volume-level"),hn=null!=ln.attr("data-is-vertical"),dn=hn?un.height(
):un.width();if(Lt<0?Lt=0:1<Lt&&(Lt=1),0!=Lt&&(an=Lt),ln.on(Xe,function(t){return r(t),!1}),!pt){var fn=function(){ln.off(Ye,s).off("mouseout",fn),zt.off("mouseout",fn),ze.hide()};ln.on("mouseover",function(){ln.on(Ye,s).on("mouseout",fn),zt.on("mouseout",fn)})}u.disableRightClickOverPlayer&&K.on("contextmenu",function(){return!1}),Dt&&zt.on("keyup.apnav",function(t){if(!ht)return!1;var e=t.keyCode;if(t=wn(t.target),37==e)qt.previousMedia();else if(39==e)qt.nextMedia();else if(32==e){if(t.hasClass("hap-search-filter"))return!1;qt.togglePlayback()}else if(77==e){if(t.hasClass("hap-search-filter"))return!1;c()}});var pn,gn=[K.find(".hap-next-toggle"),K.find(".hap-prev-toggle"),K.find(".hap-share-toggle"),K.find(".hap-playlist-toggle"),K.find(".hap-share-item"),sn,nt,tt,lt,ut,ct],mn=gn.length;for(pn=0;pn<mn;pn++){var vn=wn(gn[pn]).css("cursor","pointer").on("click",l);pt||vn.on("mouseenter",p).on("mouseleave",g)}if(Re){var yn=new Hls;yn.on(Hls.Events.MEDIA_ATTACHED,function(){yn.loadSource(Se)}),yn.on(Hls.Events.ERROR,function(t,e){if(e.fatal)switch(e.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover"),yn.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),yn.recoverMediaError();break;default:yn.destroy()}})}if(Gt.on("resize",function(){if(!ht)return!1;Wt&&clearTimeout(Wt),Wt=setTimeout(G,150)}),this.playMedia=function(){if(!ht||!Te||Ee)return!1;Qt&&Qt.play()},this.pauseMedia=function(){if(!ht||!Te||!Ee)return!1;Qt&&Qt.pause()},this.checkMedia=function(t){if(!ht||!Te)return!1;t=t.toLowerCase(),Ee&&"pause"==t&&Qt&&Qt.pause()},this.togglePlayback=function(){if(!ht||!Te)return!1;Qt&&(Qt.paused?Qt.play():Qt.pause())},this.nextMedia=function(){if(!ht)return!1;0!=He&&Ge.advanceHandler(1,!0)},this.previousMedia=function(){if(!ht)return!1;0!=He&&Ge.advanceHandler(-1,!0)},this.loadMedia=function(t){if(!ht||dt)return!1;if(0!=He){if(void 0===t)return alert("loadMedia method requires either a track number or a track title to load. LoadMedia failed."),!1;if("string"==typeof t){var e;if(J.find(".hap-playlist-item").each(function(){if(wn(this).find(".hap-playlist-title").html()==t)return t=wn(this).index(),!(e=!0)}),!e)return alert('Track with title "'+t+'" doesnt exist. LoadMedia failed.'),!1}else{if("number"!=typeof t)return alert("loadMedia method requires either a track number or a track title to load. LoadMedia failed."),!1;if(t<0||He-1<t)return alert('Invalid track number. Track number  "'+t+'" doesnt exist. LoadMedia failed.'),!1}Ge.processPlaylistRequest(t)}},this.loadPlaylist=function(t){return!(!ht||dt)&&(void 0===t||HAPUtils.isEmpty(t)?(alert("loadPlaylist method requires id parameter. loadPlaylist failed."),!1):yt!=t&&void v(t))},this.addTrack=function(t,e,n,i){if(!ht||dt)return!1;if(void 0===t)return alert("addTrack method requires format parameter. AddTrack failed."),!1;if(void 0===e)return alert("addTrack method requires track parameter. AddTrack failed."),!1;ge=!1,void 0!==n&&(ge=n);var r=!(n=1);if("string"!=typeof e&&"[object Object]"!==Object.prototype.toString.call(e)){if("[object Array]"!==Object.prototype.toString.call(e))return alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),!1;n=e.length,r=!0}if(fe=i,pe=!(de=!1),ye)if(void 0!==fe){if(fe<0||He<fe)return alert('Invalid position to insert track to. Position number "'+i+'" doesnt exist. AddTrack failed.'),!1;fe==He&&(de=!0)}else de=!0,fe=He;else{if(void 0!==fe){if(0!=fe)return alert('Invalid position to insert track to. Position number "'+i+'" doesnt exist. AddTrack failed.'),!1}else fe=0;de=!0}for(dt=!0,et.show(),Fe=-1,Be=[],je=[],i=0;i<n;i++){var o=r?e[i]:e;o="html"==t?wn(wn.parseHTML(o)):o,je.push(o)}He=je.length,me=!1,ye||(me=!0),ye=J,y()},this.inputAudio=function(t){return!(!ht||dt)&&(void 0===t?(alert("inputAudio method requires data parameter. inputAudio failed."),!1):(m(),Ge.reSetCounter(),Ae=t,Te="audio",V(),wt=!0,void j()))},this.removeTrack=function(t){if(!ht||dt)return!1;if(0!=He){if(void 0===t)return alert("removeTrack method requires id parameter. removeTrack failed."),!1;if("string"==typeof t){var e=!1;if(J.find(".hap-playlist-item").each(function(){if(wn(this).find(".hap-playlist-title").html()==t)return n=wn(this),t=n.index(),!(e=!0)}),!e)return alert('Track with title "'+t+'" doesnt exist. RemoveTrack failed.'),!1}else{if("number"!=typeof t)return alert("removeTrack method requires either a id number or a track title to remove. removeTrack failed."),!1;if((t=parseInt(t,10))<0||He-1<t)return alert('Invalid id number. Track number  "'+t+'" doesnt exist. RemoveTrack failed.'),!1;var n=J.find(".hap-playlist-item").eq(t)}if(n.remove(),D(),0<He){var i=Ge.getCounter();t==i?(q(),Ge.setPlaylistItems(He)):(Ge.setPlaylistItems(He,!1),t<i&&Ge.reSetCounter(Ge.getCounter()-1))}else W()}},this.sort=function(t,e){if(!ht)return!1;if(0!=He){if(void 0===t)return console.log("Sort method requires type parameter. Sort method failed."),!1;var n=t.toLowerCase();if("title"==n)e?(J.children(".hap-playlist-item").sort(function(t,e){return wn(e).find(".hap-playlist-title").html()>wn(t).find(".hap-playlist-title").html()?1:-1}).appendTo(J),Ce=!1):(J.children(".hap-playlist-item").sort(function(t,e){return wn(e).find(".hap-playlist-title").html()<wn(t).find(".hap-playlist-title").html()?1:-1}).appendTo(J),Ce=!0);else{if("random"!=n)return console.log("Sort method requires type parameter. Sort method failed."),!1;for(n=J.children();n.length;)J.append(n.splice(Math.floor(Math.random()*n.length),1));Ce=!1}Ce?tt.find("i").removeClass("fa-sort-alpha-up").addClass("fa-sort-alpha-down"):tt.find("i").removeClass("fa-sort-alpha-down").addClass("fa-sort-alpha-up"),be&&(n=be.closest(".hap-playlist-item").index(),Ge.reSetCounter(n)),Et&&P()}},this.destroyInstance=function(){Gt&&Gt.off(),ln&&ln.off(),nn&&nn.off(),q(),$.mCustomScrollbar("destroy"),ce=!1,Ct&&(J.sortable("destroy"),ue=!1)},this.destroyMedia=function(){if(!ht)return!1;ht&&Te&&(be&&m(),q(),Ge.reSetCounter())},this.destroyPlaylist=function(){if(!ht)return!1;W()},this.setPlaybackRate=function(t){if(!ht||!Te)return!1;Qt&&(Qt.playbackRate=Number(t))},this.toggleRandom=function(t){if(!ht||void 0===Ge)return!1;St=void 0!==t?t:!St,Ge.setRandom(St),St?ct.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):ct.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color")},this.toggleLoop=function(t){if(!ht||void 0===Ge)return!1;Tt=void 0!==t?t:!Tt,Ge.setLooping(Tt),Tt?ut.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):ut.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color")},this.getVolume=function(){return Lt},this.getVolumeSize=function(){return!!ht&&dn},this.getVolumeOrientation=function(){return!!ht&&hn},this.setVolume=function(t){if(!ht)return!1;t<0?t=0:1<t&&(t=1),a(t)},this.toggleMute=function(){if(!ht)return!1;c()},this.seek=function(t){if(!ht||!Te)return!1;try{Qt.currentTime=t}catch(e){console.log(e)}},this.seekBackward=function(){if(!ht||!Te)return!1;if(Qt)try{Qt.currentTime=Math.max(Qt.currentTime-10,0)}catch(t){console.log(t)}},this.seekForward=function(){if(!ht||!Te)return!1;if(Qt)try{Qt.currentTime=Math.min(Qt.currentTime+10,Qt.duration)}catch(t){console.log(t)}},this.getCurrentTime=function(){if(!ht||!Te)return!1;var t=0;return Qt&&(t=Qt.currentTime),t},this.getDuration=function(){if(!ht||!Te)return!1;if(Qt)var t=Qt.duration;return t},this.destroyPlaylistScroll=function(){if(!ht)return!1;$.mCustomScrollbar("destroy"),ce=!1},this.getPlaylistList=function(){return!!ht&&X},this.getSetupDone=function(){return ht},this.getMediaPlaying=function(){return!!ht&&Ee},this.getCounter=function(){return!!ht&&(void 0!==Ge?Ge.getCounter():-1)},this.getPlaylistLength=function(){return!!ht&&(HAPUtils.isNumber(He)?He:0)},this.getSettings=function(){return u},this.getCurrMediaData=function(){return!!ht&&Ae},this.getWrapper=function(){return K},this.getActivePlaylistItem=function(){return be},gt&&localStorage.getItem(Nt)){var bn=JSON.parse(localStorage.getItem(Nt));u.resumeTime=bn.resumeTime,Lt=bn.volume,wt=bn.autoPlay,u.activeItem=bn.activeItem,localStorage.removeItem(Nt)}return u.activePlaylist&&!HAPUtils.isEmpty(u.activePlaylist)?v(u.activePlaylist):N(),this}}(jQuery),function(n){var t=function(){};t.isEmpty=function(t){return 0==t.replace(/^\s+|\s+$/g,"").length},t.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},t.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)},t.isIE=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,n=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=n.exec(e)&&(t=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(e=navigator.userAgent,null!=(n=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/).exec(e)&&(t=parseFloat(RegExp.$1)));return-1!=t},t.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)},t.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")},t.hasDownloadSupport=function(){return"download"in document.createElement("a")},t.qualifyURL=function(t){var e=document.createElement("a");return e.href=t,e.href},t.relativePath=function(t){return/^(?:[a-z]+:)?\/\//i.test(t)},t.hasLocalStorage=function(){try{return"localStorage"in n&&null!==n.localStorage}catch(t){return!1}},t.randomiseArray=function(t){var e,n=[],i=[];for(e=0;e<t;e++)n[e]=e;for(e=0;e<t;e++){var r=Math.round(Math.random()*(n.length-1));i[e]=n[r],n.splice(r,1)}return i},t.sortArray=function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)r[n]=t[e[n]];return r},t.keysrt=function(t,r,e){var o=1;return e&&(o=-1),t.sort(function(t,e){var n=t[r],i=e[r];return o*(n<i?-1:i<n?1:0)})},t.parseXML=function(t){if(n.ActiveXObject&&n.GetObject){var e=new ActiveXObject("Microsoft.XMLDOM");return e.loadXML(t),e}if(n.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");throw Error("No XML parser available")},t.formatCurrentTime=function(t){t=Math.round(t);var e=Math.floor(t/60);return(10<=e?e:""+e)+":"+(10<=(t=Math.floor(t%60))?t:"0"+t)},t.formatDuration=function(t){t=Math.round(t);var e=Math.floor(t/60);return(10<=e?e:""+e)+":"+(10<=(t=Math.floor(t%60))?t:"0"+t)},t.formatNumber=function(t){return t<9?"0"+(t+1):t+1},t.nFormatter=function(t,e){var n,i=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"G"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}],r=/\.0+$|(\.[0-9]*[1-9])0+$/;for(n=0;n<i.length;n++)if(t>=i[n].value)return(t/i[n].value).toFixed(e).replace(r,"$1")+i[n].symbol;return t.toFixed(e).replace(r,"$1")},t.canPlayMp3=function(){var t=document.createElement("audio");return!(!t.canPlayType||!t.canPlayType("audio/mpeg;").replace(/no/,""))},t.canPlayWav=function(){var t=document.createElement("audio");return!(!t.canPlayType||!t.canPlayType("audio/wav;").replace(/no/,""))},t.canPlayOgg=function(){var t=document.createElement("audio");return!(!t.canPlayType||!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""))},t.hasCanvas=function(){return!!document.createElement("canvas")},n.HAPUtils=t}(window),function(t,f){t.HAPPlaylistManager=function(t){function i(){h=HAPUtils.randomiseArray(r)}var r,n,e,o=this,a=t.loopingOn,s=t.randomPlay,l=!1,u=-1,c=!1,h=[],d=!1;this.setCounter=function(t,e){if(void 0===e&&(e=!0),u=e?u+parseInt(t,10):parseInt(t,10),isNaN(u))alert("HAPPlaylistManager message: No active media, counter = "+u);else if(l=!1,a){if(s)if(r-1<u){if(u=h[r-1],i(),h[0]==u){var n=h.splice(0,1);h.push(n)}u=0,f(o).trigger("HAPPlaylistManager.PLAYLIST_END_ALERT")}else u<0&&(u=h[0],i(),h[r-1]==u&&(n=h.splice(r-1,1),h.unshift(n)),u=r-1);else r-1<u?(u=0,f(o).trigger("HAPPlaylistManager.PLAYLIST_END_ALERT")):u<0&&(u=r-1);f(o).trigger("HAPPlaylistManager.COUNTER_READY")}else r-1<u?(u=r-1,l=!0):u<0&&(u=0),l?f(o).trigger("HAPPlaylistManager.PLAYLIST_END"):f(o).trigger("HAPPlaylistManager.COUNTER_READY")},this.getCounter=function(){return s?d?u:h[u]:u},this.advanceHandler=function(t){d=!1,c?(c=!1,r-1<e+t?(u=r-1,f(o).trigger("HAPPlaylistManager.COUNTER_READY")):e+t<0?(u=0,f(o).trigger("HAPPlaylistManager.COUNTER_READY")):o.setCounter(e+t,!1)):o.setCounter(t)},this.processPlaylistRequest=function(t){d=!1,s&&(d=!0,n=t,c||(e=u,c=!0)),o.setCounter(t,!1)},this.setPlaylistItems=function(t,e){void 0===e&&(e=!0),e&&(u=-1),r=t,s&&i()},this.reSetCounter=function(t){void 0===t?u=-1:(t=parseInt(t,10),r?(r-1<t?t=r-1:t<0&&(t=0),u=t):u=-1)},this.setRandom=function(t){if((s=t)&&i(),s){var e=h.length;for(t=0;t<e;t++)if(h[t]==u){if(0==t)break;t=h.splice(t,1),h.unshift(parseInt(t,10));break}u=0}else c?(u=n,c=!1):u=h[u]},this.setLooping=function(t){a=t},this.getPosition=function(t){return h.indexOf(t)}}}(window,jQuery),function(){}.call(this),function(){var e;jQuery(function(){return Stripe.setPublishableKey($("meta[name='stripe-key']").attr("content")),$("#payment-form").submit(function(){var t;return t=$(this),$(".card-fields").hasClass("hidden")?t.get(0).submit():(t.find("button").prop("disabled",!0),Stripe.card.createToken(t,e)),!1}),$(".use-different-card").on("click",function(){return $(".card-on-file").hide(),$(".card-fields").removeClass("hidden")})}),e=function(t,e){var n,i;n=$("#payment-form"),e.error?(n.find(".payment-errors").text(e.error.message),n.find("button").prop("disabled",!1)):(i=e.id,n.append($('<input type="hidden" name="stripeToken" />').val(i)),n.append($('<input type="hidden" name="card_last4" />').val(e.card.last4)),n.append($('<input type="hidden" name="card_exp_month" />').val(e.card.exp_month)),n.append($('<input type="hidden" name="card_exp_year" />').val(e.card.exp_year)),n.append($('<input type="hidden" name="card_brand" />').val(e.card.brand)),n.get(0).submit())}}.call(this),function(){}.call(this),function(){null==window.Set&&(window.Set=function(){function t(){this.clear()}return t.prototype.clear=function(){return this.values=[]},t.prototype.has=function(t){return-1!==this.values.indexOf(t)},t.prototype.add=function(t){return this.has(t)||this.values.push(t),this},t.prototype["delete"]=function(t){var e;return-1!==(e=this.values.indexOf(t))&&(this.values.splice(e,1),!0)},t.prototype.forEach=function(){var t;return(t=this.values).forEach.apply(t,arguments)},t}())}.call(this),function(t){function i(){}function r(t,e){return function(){t.apply(e,arguments)}}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function a(n,i){for(;3===n._state;)n=n._value;return 0===n._state?void n._deferreds.push(i):(n._handled=!0,void d(function(){var t=1===n._state?i.onFulfilled:i.onRejected;if(null!==t){var e;try{e=t(n._value)}catch(a){return void l(i.promise,a)}s(i.promise,e)}else(1===n._state?s:l)(i.promise,n._value)}))}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void u(t);if("function"==typeof n)return void h(r(n,e),t)}t._state=1,t._value=e,u(t)}catch(s){l(t,s)}}function l(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&setTimeout(function(){t._handled||f(t._value)},1);for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,l(e,t))})}catch(o){if(n)return;n=!0,l(e,o)}}var e=setTimeout,d="function"==typeof setImmediate&&setImmediate||function(t){e(t,1)},f=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};o.prototype["catch"]=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new o(i);return a(this,new c(t,e,n)),n},o.all=function(t){var s=Array.prototype.slice.call(t);return new o(function(i,r){function o(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){o(e,t)},r)}s[e]=t,0==--a&&i(s)}catch(c){r(c)}}if(0===s.length)return i([]);for(var a=s.length,t=0;t<s.length;t++)o(t,s[t])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(r){return new o(function(t,e){for(var n=0,i=r.length;n<i;n++)r[n].then(t,e)})},o._setImmediateFn=function(t){d=t},o._setUnhandledRejectionFn=function(t){f=t},"undefined"!=typeof module&&module.exports?module.exports=o:t.Promise||(t.Promise=o)}(this),"undefined"==typeof WeakMap&&function(){var i=Object.defineProperty,t=Date.now()%1e9,e=function(){this.name="__st"+(1e9*Math.random()>>>0)+t+++"__"};e.prototype={set:function(t,e){var n=t[this.name];return n&&n[0]===t?n[1]=e:i(t,this.name,{value:[t,e],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},"delete":function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=void 0,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=e}(),function(t){function r(t){S.push(t),T||(T=!0,g(e))}function o(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function e(){T=!1;var t=S;S=[],t.sort(function(t,e){return t.uid_-e.uid_});var n=!1;t.forEach(function(t){var e=t.takeRecords();i(t),e.length&&(t.callback_(e,t),n=!0)}),n&&e()}function i(n){n.nodes_.forEach(function(t){var e=m.get(t);e&&e.forEach(function(t){t.observer===n&&t.removeTransientObservers()})})}function h(t,e){for(var n=t;n;n=n.parentNode){var i=m.get(n);if(i)for(var r=0;r<i.length;r++){var o=i[r],a=o.options;if(n===t||a.subtree){var s=e(a);s&&o.enqueue(s)}}}}function n(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++E}function a(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function s(t){var e=new a(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}function d(t,e){return b=new a(t,e)}function f(t){return w||((w=s(b)).oldValue=t,w)}function p(){b=w=void 0}function l(t){return t===w||t===b}function u(t,e){return t===e?t:w&&l(t)?w:null}function c(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var g,m=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))g=setTimeout;else if(window.setImmediate)g=window.setImmediate;else{var v=[],y=String(Math.random());window.addEventListener("message",function(t){if(t.data===y){var e=v;v=[],e.forEach(function(t){t()})}}),g=function(t){v.push(t),window.postMessage(y,"*")}}var b,w,T=!1,S=[],E=0;n.prototype={observe:function(t,e){if(t=o(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=m.get(t);n||m.set(t,n=[]);for(var i,r=0;r<n.length;r++)if(n[r].observer===this){(i=n[r]).removeListeners(),i.options=e;break}i||(i=new c(this,t,e),n.push(i),this.nodes_.push(t)),i.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=m.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}},c.prototype={enqueue:function(t){var e=this.observer.records_,n=e.length;if(0<e.length){var i=u(e[n-1],t);if(i)return void(e[n-1]=i)}else r(this.observer);e[n]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=m.get(t);e||m.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=m.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,n=t.relatedNode.namespaceURI,i=t.target;(o=new d("attributes",i)).attributeName=e,o.attributeNamespace=n;var r=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;h(i,function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(n)?void 0:t.attributeOldValue?f(r):o});break;case"DOMCharacterDataModified":var o=d("characterData",i=t.target);r=t.prevValue;h(i,function(t){return t.characterData?t.characterDataOldValue?f(r):o:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var a,s,l=t.target;"DOMNodeInserted"===t.type?(a=[l],s=[]):(a=[],s=[l]);var u=l.previousSibling,c=l.nextSibling;(o=d("childList",t.target.parentNode)).addedNodes=a,o.removedNodes=s,o.previousSibling=u,o.nextSibling=c,h(t.relatedNode,function(t){return t.childList?o:void 0})}p()}},t.JsMutationObserver=n,t.MutationObserver||((t.MutationObserver=n)._isPolyfilled=!0)}}(self),function(){"use strict";if(!window.performance){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}var e,n;if(window.requestAnimationFrame||(window.requestAnimationFrame=(e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)?function(t){return e(function(){t(performance.now())})}:function(t){return window.setTimeout(t,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}),!((n=document.createEvent("Event")).initEvent("foo",!0,!0),n.preventDefault(),n.defaultPrevented)){var i=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(i.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var r=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||r&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,Boolean(e.bubbles),Boolean(e.cancelable),e.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||r&&"function"!=typeof window.Event){var o=window.Event;window.Event=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n},window.Event.prototype=o.prototype}}(window.WebComponents),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,n=[],i=function(t){n.push(t)},r=function(){n.forEach(function(t){t(e)})};e.addModule=i,e.initializeModules=r,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(t){function i(t,e){r(t,function(t){return!!e(t)||void n(t,e)}),n(t,e)}function r(t,e,n){var i=t.firstElementChild;if(!i)for(i=t.firstChild;i&&i.nodeType!==Node.ELEMENT_NODE;)i=i.nextSibling;for(;i;)!0!==e(i,n)&&r(i,e,n),i=i.nextElementSibling;return null}function n(t,e){for(var n=t.shadowRoot;n;)i(n,e),n=n.olderShadowRoot}function e(t,e){s(t,e,[])}function s(t,e,n){if(t=window.wrap(t),!(0<=n.indexOf(t))){n.push(t);for(var i,r=t.querySelectorAll("link[rel="+l+"]"),o=0,a=r.length;o<a&&(i=r[o]);o++)i["import"]&&s(i["import"],e,n);e(t)}}var l=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";t.forDocumentTree=e,t.forSubtree=i}),window.CustomElements.addModule(function(n){function a(t,e){return i(t,e)||r(t,e)}function i(t,e){return!!n.upgrade(t,e)||void(e&&s(t))}function r(t,e){b(t,function(t){return!!i(t,e)||void 0})}function e(t){E.push(t),S||(S=!0,setTimeout(o))}function o(){S=!1;for(var t,e=E,n=0,i=e.length;n<i&&(t=e[n]);n++)t();E=[]}function s(t){T?e(function(){l(t)}):l(t)}function l(t){t.__upgraded__&&!t.__attached&&(t.__attached=!0,t.attachedCallback&&t.attachedCallback())}function u(t){c(t),b(t,function(t){c(t)})}function c(t){T?e(function(){h(t)}):h(t)}function h(t){t.__upgraded__&&t.__attached&&(t.__attached=!1,t.detachedCallback&&t.detachedCallback())}function d(t){for(var e=t,n=window.wrap(document);e;){if(e==n)return!0;e=e.parentNode||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host}}function t(t){if(t.shadowRoot&&!t.shadowRoot.__watched){y.dom&&console.log("watching shadow-root for: ",t.localName);for(var e=t.shadowRoot;e;)g(e),e=e.olderShadowRoot}}function f(t,e){if(y.dom){var n=e[0];if(n&&"childList"===n.type&&n.addedNodes&&n.addedNodes){for(var i=n.addedNodes[0];i&&i!==document&&!i.host;)i=i.parentNode;var r=i&&(i.URL||i._URL||i.host&&i.host.localName)||"";r=r.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",e.length,r||"")}var o=d(t);e.forEach(function(t){"childList"===t.type&&(A(t.addedNodes,function(t){t.localName&&a(t,o)}),A(t.removedNodes,function(t){t.localName&&u(t)}))}),y.dom&&console.groupEnd()}function p(t){for((t=window.wrap(t))||(t=window.wrap(document));t.parentNode;)t=t.parentNode;var e=t.__observer;e&&(f(t,e.takeRecords()),o())}function g(t){if(!t.__observer){var e=new MutationObserver(f.bind(this,t));e.observe(t,{childList:!0,subtree:!0}),t.__observer=e}}function m(t){t=window.wrap(t),y.dom&&console.group("upgradeDocument: ",t.baseURI.split("/").pop()),a(t,t===window.wrap(document)),g(t),y.dom&&console.groupEnd()}function v(t){w(t,m)}var y=n.flags,b=n.forSubtree,w=n.forDocumentTree,T=window.MutationObserver._isPolyfilled&&y["throttle-attached"];n.hasPolyfillMutations=T,n.hasThrottledAttached=T;var S=!1,E=[],A=Array.prototype.forEach.call.bind(Array.prototype.forEach),x=Element.prototype.createShadowRoot;x&&(Element.prototype.createShadowRoot=function(){var t=x.call(this);return window.CustomElements.watchShadow(this),t}),n.watchShadow=t,n.upgradeDocumentTree=v,n.upgradeDocument=m,n.upgradeSubtree=r,n.upgradeAll=a,n.attached=s,n.takeRecords=p}),window.CustomElements.addModule(function(r){function t(t,e){if("template"===t.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var n=t.getAttribute("is"),i=r.getRegisteredDefinition(t.localName)||r.getRegisteredDefinition(n);if(i&&(n&&i.tag==t.localName||!n&&!i["extends"]))return o(t,i,e)}}function o(t,e,n){return s.upgrade&&console.group("upgrade:",t.localName),e.is&&t.setAttribute("is",e.is),i(t,e),t.__upgraded__=!0,a(t),n&&r.attached(t),r.upgradeSubtree(t,n),s.upgrade&&console.groupEnd(),t}function i(t,e){Object.__proto__||n(t,e.prototype,e["native"]),t.__proto__=e.prototype}function n(t,e,n){for(var i={},r=e;r!==n&&r!==HTMLElement.prototype;){for(var o,a=Object.getOwnPropertyNames(r),s=0;o=a[s];s++)i[o]||(Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o)),i[o]=1);r=Object.getPrototypeOf(r)}}function a(t){t.createdCallback&&t.createdCallback()}var s=r.flags;r.upgrade=t,r.upgradeWithDefinition=o,r.implementPrototype=i}),window.CustomElements.addModule(function(i){function t(t,e){var n=e||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(a(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(c(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return n.prototype||(n.prototype=Object.create(HTMLElement.prototype)),n.__name=t.toLowerCase(),n["extends"]&&(n["extends"]=n["extends"].toLowerCase()),n.lifecycle=n.lifecycle||{},n.ancestry=s(n["extends"]),l(n),u(n),r(n.prototype),h(n.__name,n),n.ctor=d(n),n.ctor.prototype=n.prototype,n.prototype.constructor=n.ctor,i.ready&&m(document),n.ctor}function r(t){if(!t.setAttribute._polyfilled){var n=t.setAttribute;t.setAttribute=function(t,e){o.call(this,t,e,n)};var e=t.removeAttribute;t.removeAttribute=function(t){o.call(this,t,null,e)},t.setAttribute._polyfilled=!0}}function o(t,e,n){t=t.toLowerCase();var i=this.getAttribute(t);n.apply(this,arguments);var r=this.getAttribute(t);this.attributeChangedCallback&&r!==i&&this.attributeChangedCallback(t,i,r)}function a(t){for(var e=0;e<T.length;e++)if(t===T[e])return!0}function s(t){var e=c(t);return e?s(e["extends"]).concat([e]):[]}function l(t){for(var e,n=t["extends"],i=0;e=t.ancestry[i];i++)n=e.is&&e.tag;t.tag=n||t.__name,n&&(t.is=t.__name)}function u(t){if(!Object.__proto__){var e=HTMLElement.prototype;if(t.is){var n=document.createElement(t.tag);e=Object.getPrototypeOf(n)}for(var i,r=t.prototype,o=!1;r;)r==e&&(o=!0),(i=Object.getPrototypeOf(r))&&(r.__proto__=i),r=i;o||console.warn(t.tag+" prototype not found in prototype chain for "+t.is),t["native"]=e}}function e(t){return y(A(t.tag),t)}function c(t){return t?S[t.toLowerCase()]:void 0}function h(t,e){S[t]=e}function d(t){return function(){return e(t)}}function n(t,e,n){return t===E?f(e,n):x(t,e)}function f(t,e){t&&(t=t.toLowerCase()),e&&(e=e.toLowerCase());var n,i=c(e||t);if(i){if(t==i.tag&&e==i.is)return new i.ctor;if(!e&&!i.is)return new i.ctor}return e?(n=f(t)).setAttribute("is",e):(n=A(t),0<=t.indexOf("-")&&b(n,HTMLElement)),n}function p(t,e){var n=t[e];t[e]=function(){var t=n.apply(this,arguments);return v(t),t}}var g,m=(i.isIE,i.upgradeDocumentTree),v=i.upgradeAll,y=i.upgradeWithDefinition,b=i.implementPrototype,w=i.useNative,T=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],S={},E="http://www.w3.org/1999/xhtml",A=document.createElement.bind(document),x=document.createElementNS.bind(document);g=Object.__proto__||w?function(t,e){return t instanceof e}:function(t,e){if(t instanceof e)return!0;for(var n=t;n;){if(n===e.prototype)return!0;n=n.__proto__}return!1},p(Node.prototype,"cloneNode"),p(document,"importNode"),document.registerElement=t,document.createElement=f,document.createElementNS=n,i.registry=S,i["instanceof"]=g,i.reservedTagList=T,i.getRegisteredDefinition=c,document.register=document.registerElement}),function(t){function e(){o(window.wrap(document)),window.CustomElements.ready=!0,(window.requestAnimationFrame||function(t){setTimeout(t,16)})(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=t.useNative,i=t.initializeModules;if(t.isIE,n){var r=function(){};t.watchShadow=r,t.upgrade=r,t.upgradeAll=r,t.upgradeDocumentTree=r,t.upgradeSubtree=r,t.takeRecords=r,t["instanceof"]=function(t,e){return t instanceof e}}else i();var o=t.upgradeDocumentTree,a=t.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(t){return t}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(t){t["import"]&&a(wrap(t["import"]))}),"complete"===document.readyState||t.flags.eager)e();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,e)
}else e()}(window.CustomElements),function(){}.call(this),function(){var t=this;(function(){(function(){this.Trix={VERSION:"0.11.1",ZERO_WIDTH_SPACE:"\ufeff",NON_BREAKING_SPACE:"\xa0",OBJECT_REPLACEMENT_CHARACTER:"\ufffc",config:{}}}).call(this)}).call(t);var R=t.Trix;(function(){(function(){R.BasicObject=function(){function t(){}var a,s,i;return t.proxyMethod=function(t){var n,i,e,r,o;return e=s(t),n=e.name,r=e.toMethod,o=e.toProperty,i=e.optional,this.prototype[n]=function(){var t,e;return t=null!=r?i?"function"==typeof this[r]?this[r]():void 0:this[r]():null!=o?this[o]:void 0,i?null!=(e=null!=t?t[n]:void 0)?a.call(e,t,arguments):void 0:(e=t[n],a.call(e,t,arguments))}},s=function(t){var e,n;if(!(n=t.match(i)))throw new Error("can't parse @proxyMethod expression: "+t);return e={name:n[4]},null!=n[2]?e.toMethod=n[1]:e.toProperty=n[1],null!=n[3]&&(e.optional=!0),e},a=Function.prototype.apply,i=/^(.+?)(\(\))?(\?)?\.(.+?)$/,t}()}).call(this),function(){var i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Object=function(t){function e(){this.id=++n}var n;return i(e,t),n=0,e.fromJSONString=function(t){return this.fromJSON(JSON.parse(t))},e.prototype.hasSameConstructorAs=function(t){return this.constructor===(null!=t?t.constructor:void 0)},e.prototype.isEqualTo=function(t){return this===t},e.prototype.inspect=function(){var t,i,r;return t=function(){var t,e,n;for(i in n=[],e=null!=(t=this.contentsForInspection())?t:{})r=e[i],n.push(i+"="+r);return n}.call(this),"#<"+this.constructor.name+":"+this.id+(t.length?" "+t.join(", "):"")+">"},e.prototype.contentsForInspection=function(){},e.prototype.toJSONString=function(){return JSON.stringify(this)},e.prototype.toUTF16String=function(){return R.UTF16String.box(this)},e.prototype.getCacheKey=function(){return this.id.toString()},e}(R.BasicObject)}.call(this),function(){R.extend=function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this}}.call(this),function(){R.extend({defer:function(t){return setTimeout(t,1)}})}.call(this),function(){var s,a;R.extend({normalizeSpaces:function(t){return t.replace(RegExp(""+R.ZERO_WIDTH_SPACE,"g"),"").replace(RegExp(""+R.NON_BREAKING_SPACE,"g")," ")},normalizeNewlines:function(t){return t.replace(/\r\n/g,"\n")},breakableWhitespacePattern:RegExp("[^\\S"+R.NON_BREAKING_SPACE+"]"),squishBreakableWhitespace:function(t){return t.replace(RegExp(""+R.breakableWhitespacePattern.source,"g")," ").replace(/\ {2,}/g," ")},summarizeStringChange:function(t,e){var n,i,r,o;return t=R.UTF16String.box(t),(e=R.UTF16String.box(e)).length<t.length?(o=(i=a(t,e))[0],n=i[1]):(n=(r=a(e,t))[0],o=r[1]),{added:n,removed:o}}}),a=function(t,e){var n,i,r,o,a;return t.isEqualTo(e)?["",""]:(r=(o=(i=s(t,e)).utf16String.length)?(a=i.offset,n=t.codepoints.slice(0,a).concat(t.codepoints.slice(a+o)),s(e,R.UTF16String.fromCodepoints(n))):s(e,t),[i.utf16String.toString(),r.utf16String.toString()])},s=function(t,e){var n,i,r;for(n=0,i=t.length,r=e.length;n<i&&t.charAt(n).isEqualTo(e.charAt(n));)n++;for(;n+1<i&&t.charAt(i-1).isEqualTo(e.charAt(r-1));)i--,r--;return{utf16String:t.slice(n,i),offset:n}}}.call(this),function(){R.extend({copyObject:function(t){var e,n,i;for(e in null==t&&(t={}),n={},t)i=t[e],n[e]=i;return n},objectsAreEqual:function(t,e){var n;if(null==t&&(t={}),null==e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(n in t)if(t[n]!==e[n])return!1;return!0}})}.call(this),function(){var r=[].slice;R.extend({arraysAreEqual:function(t,e){var n,i,r;if(null==t&&(t=[]),null==e&&(e=[]),t.length!==e.length)return!1;for(i=n=0,r=t.length;n<r;i=++n)if(t[i]!==e[i])return!1;return!0},arrayStartsWith:function(t,e){return null==t&&(t=[]),null==e&&(e=[]),R.arraysAreEqual(t.slice(0,e.length),e)},spliceArray:function(t){var e,n,i;return n=t,e=2<=arguments.length?r.call(arguments,1):[],(i=n.slice(0)).splice.apply(i,e),i},summarizeArrayChange:function(t,e){var n,i,r,o,a,s,l,u,c,h,d;for(null==t&&(t=[]),null==e&&(e=[]),n=[],h=[],r=new Set,o=0,l=t.length;o<l;o++)d=t[o],r.add(d);for(i=new Set,a=0,u=e.length;a<u;a++)d=e[a],i.add(d),r.has(d)||n.push(d);for(s=0,c=t.length;s<c;s++)d=t[s],i.has(d)||h.push(d);return{added:n,removed:h}}})}.call(this),function(){var t,e,r,n;r=n=e=t=null,R.extend({getAllAttributeNames:function(){return null!=t?t:t=R.getTextAttributeNames().concat(R.getBlockAttributeNames())},getBlockConfig:function(t){return R.config.blockAttributes[t]},getBlockAttributeNames:function(){return null!=e?e:e=Object.keys(R.config.blockAttributes)},getTextConfig:function(t){return R.config.textAttributes[t]},getTextAttributeNames:function(){return null!=n?n:n=Object.keys(R.config.textAttributes)},getListAttributeNames:function(){var n,i;return null!=r?r:r=function(){var t,e;for(n in e=[],t=R.config.blockAttributes)null!=(i=t[n].listAttribute)&&e.push(i);return e}()}})}.call(this),function(){var f,n,t,e,i,r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};f=document.documentElement,n=null!=(t=null!=(e=null!=(i=f.matchesSelector)?i:f.webkitMatchesSelector)?e:f.msMatchesSelector)?t:f.mozMatchesSelector,R.extend({handleEvent:function(t,e){var n,i,r,o,a,s,l,u,c,h,d;return a=(l=null!=e?e:{}).onElement,o=l.matchingSelector,d=l.withCallback,r=l.inPhase,s=l.preventDefault,c=l.times,n=null!=a?a:f,u=o,d,h="capturing"===r,(i=function(t){var e;return null!=c&&0==--c&&i.destroy(),null!=(e=R.findClosestElementFromNode(t.target,{matchingSelector:u}))&&(null!=d&&d.call(e,t,e),s)?t.preventDefault():void 0}).destroy=function(){return n.removeEventListener(t,i,h)},n.addEventListener(t,i,h),i},handleEventOnce:function(t,e){return null==e&&(e={}),e.times=1,R.handleEvent(t,e)},triggerEvent:function(t,e){var n,i,r,o,a,s,l;return s=(l=null!=e?e:{}).onElement,i=l.bubbles,r=l.cancelable,n=l.attributes,o=null!=s?s:f,i=!1!==i,r=!1!==r,(a=document.createEvent("Events")).initEvent(t,i,r),null!=n&&R.extend.call(a,n),o.dispatchEvent(a)},elementMatchesSelector:function(t,e){return 1===(null!=t?t.nodeType:void 0)?n.call(t,e):void 0},findClosestElementFromNode:function(t,e){var n,i,r;for(n=(i=null!=e?e:{}).matchingSelector,r=i.untilNode;null!=t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;if(null!=t){if(null==n)return t;if(t.closest&&null==r)return t.closest(n);for(;t&&t!==r;){if(R.elementMatchesSelector(t,n))return t;t=t.parentNode}}},findInnerElement:function(t){for(;null!=t?t.firstElementChild:void 0;)t=t.firstElementChild;return t},innerElementIsActive:function(t){return document.activeElement!==t&&R.elementContainsNode(t,document.activeElement)},elementContainsNode:function(t,e){if(t&&e)for(;e;){if(e===t)return!0;e=e.parentNode}},findNodeFromContainerAndOffset:function(t,e){var n;if(t)return t.nodeType===Node.TEXT_NODE?t:0===e?null!=(n=t.firstChild)?n:t:t.childNodes.item(e-1)},findElementFromContainerAndOffset:function(t,e){var n;return n=R.findNodeFromContainerAndOffset(t,e),R.findClosestElementFromNode(n)},findChildIndexOfNode:function(t){var e;if(null!=t?t.parentNode:void 0){for(e=0;t=t.previousSibling;)e++;return e}},walkTree:function(t,e){var n,i,r,o,a;return i=(r=null!=e?e:{}).onlyNodesOfType,o=r.usingFilter,n=r.expandEntityReferences,a=function(){switch(i){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}}(),document.createTreeWalker(t,a,null!=o?o:null,!0===n)},tagName:function(t){var e;return null!=t&&null!=(e=t.tagName)?e.toLowerCase():void 0},makeElement:function(t,e){var n,i,r,o,a,s,l,u,c,h;if(null==e&&(e={}),"object"==typeof t?t=(e=t).tagName:e={attributes:e},i=document.createElement(t),null!=e.editable&&(null==e.attributes&&(e.attributes={}),e.attributes.contenteditable=e.editable),e.attributes)for(o in s=e.attributes)h=s[o],i.setAttribute(o,h);if(e.style)for(o in l=e.style)h=l[o],i.style[o]=h;if(e.data)for(o in u=e.data)h=u[o],i.dataset[o]=h;if(e.className)for(r=0,a=(c=e.className.split(" ")).length;r<a;r++)n=c[r],i.classList.add(n);return e.textContent&&(i.textContent=e.textContent),i},getBlockTagNames:function(){var n,i;return null!=R.blockTagNames?R.blockTagNames:R.blockTagNames=function(){var t,e;for(n in e=[],t=R.config.blockAttributes)i=t[n],e.push(i.tagName);return e}()},nodeIsBlockContainer:function(t){return R.nodeIsBlockStartComment(null!=t?t.firstChild:void 0)},nodeProbablyIsBlockContainer:function(t){var e,n;return e=R.tagName(t),0<=r.call(R.getBlockTagNames(),e)&&(n=R.tagName(t.firstChild),r.call(R.getBlockTagNames(),n)<0)},nodeIsBlockStart:function(t,e){return(null!=e?e:{strict:!0}).strict?R.nodeIsBlockStartComment(t):R.nodeIsBlockStartComment(t)||!R.nodeIsBlockStartComment(t.firstChild)&&R.nodeProbablyIsBlockContainer(t)},nodeIsBlockStartComment:function(t){return R.nodeIsCommentNode(t)&&"block"===(null!=t?t.data:void 0)},nodeIsCommentNode:function(t){return(null!=t?t.nodeType:void 0)===Node.COMMENT_NODE},nodeIsCursorTarget:function(t){return t?R.nodeIsTextNode(t)?t.data===R.ZERO_WIDTH_SPACE:R.nodeIsCursorTarget(t.firstChild):void 0},nodeIsAttachmentElement:function(t){return R.elementMatchesSelector(t,R.AttachmentView.attachmentSelector)},nodeIsEmptyTextNode:function(t){return R.nodeIsTextNode(t)&&""===(null!=t?t.data:void 0)},nodeIsTextNode:function(t){return(null!=t?t.nodeType:void 0)===Node.TEXT_NODE}})}.call(this),function(){var e,n,l,i,u;e=R.copyObject,i=R.objectsAreEqual,R.extend({normalizeRange:l=function(t){var e;if(null!=t)return Array.isArray(t)||(t=[t,t]),[n(t[0]),n(null!=(e=t[1])?e:t[0])]},rangeIsCollapsed:function(t){var e,n,i;if(null!=t)return i=(n=l(t))[0],e=n[1],u(i,e)},rangesAreEqual:function(t,e){var n,i,r,o,a,s;if(null!=t&&null!=e)return i=(r=l(t))[0],n=r[1],s=(o=l(e))[0],a=o[1],u(i,s)&&u(n,a)}}),n=function(t){return"number"==typeof t?t:e(t)},u=function(t,e){return"number"==typeof t?t===e:i(t,e)}}.call(this),function(){var u,n,c,h;u={extendsTagName:"div",css:"%t { display: block; }"},R.registerElement=function(t,e){var n,i,r,o,a,s,l;return null==e&&(e={}),t=t.toLowerCase(),o=null!=(l=(a=h(e)).extendsTagName)?l:u.extendsTagName,delete a.extendsTagName,i=a.defaultCSS,delete a.defaultCSS,null!=i&&o===u.extendsTagName?i+="\n"+u.css:i=u.css,c(i,t),(r=Object.getPrototypeOf(document.createElement(o))).__super__=r,s=Object.create(r,a),n=document.registerElement(t,{prototype:s}),Object.defineProperty(s,"constructor",{value:n}),n},c=function(t,e){return n(e).textContent=t.replace(/%t/g,e)},n=function(t){var e;return(e=document.createElement("style")).setAttribute("type","text/css"),e.setAttribute("data-tag-name",t.toLowerCase()),document.head.insertBefore(e,document.head.firstChild),e},h=function(t){var e,n,i;for(e in n={},t)i=t[e],n[e]="function"==typeof i?{value:i}:i;return n}}.call(this),function(){var n,e;R.extend({getDOMSelection:function(){var t;return 0<(t=window.getSelection()).rangeCount?t:void 0},getDOMRange:function(){var t,e;return(t=null!=(e=R.getDOMSelection())?e.getRangeAt(0):void 0)&&!n(t)?t:void 0},setDOMRange:function(t){var e;return(e=window.getSelection()).removeAllRanges(),e.addRange(t),R.selectionChangeObserver.update()}}),n=function(t){return e(t.startContainer)||e(t.endContainer)},e=function(t){return!Object.getPrototypeOf(t)}}.call(this),function(){}.call(this),function(){var a,l=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;a=R.arraysAreEqual,R.Hash=function(t){function e(t){null==t&&(t={}),this.values=o(t),e.__super__.constructor.apply(this,arguments)}var s,o,n,i,r;return l(e,t),e.fromCommonAttributesOfObjects=function(t){var e,n,i,r,o,a;if(null==t&&(t=[]),!t.length)return new this;for(i=(e=s(t[0])).getKeys(),n=0,r=(a=t.slice(1)).length;n<r;n++)o=a[n],i=e.getKeysCommonToHash(s(o)),e=e.slice(i);return e},e.box=function(t){return s(t)},e.prototype.add=function(t,e){return this.merge(i(t,e))},e.prototype.remove=function(t){return new R.Hash(o(this.values,t))},e.prototype.get=function(t){return this.values[t]},e.prototype.has=function(t){return t in this.values},e.prototype.merge=function(t){return new R.Hash(n(this.values,r(t)))},e.prototype.slice=function(t){var e,n,i,r;for(r={},e=0,i=t.length;e<i;e++)n=t[e],this.has(n)&&(r[n]=this.values[n]);return new R.Hash(r)},e.prototype.getKeys=function(){return Object.keys(this.values)},e.prototype.getKeysCommonToHash=function(t){var e,n,i,r,o;for(t=s(t),o=[],e=0,i=(r=this.getKeys()).length;e<i;e++)n=r[e],this.values[n]===t.values[n]&&o.push(n);return o},e.prototype.isEqualTo=function(t){return a(this.toArray(),s(t).toArray())},e.prototype.isEmpty=function(){return 0===this.getKeys().length},e.prototype.toArray=function(){var e,n,i;return(null!=this.array?this.array:this.array=function(){var t;for(e in n=[],t=this.values)i=t[e],n.push(e,i);return n}.call(this)).slice(0)},e.prototype.toObject=function(){return o(this.values)},e.prototype.toJSON=function(){return this.toObject()},e.prototype.contentsForInspection=function(){return{values:JSON.stringify(this.values)}},i=function(t,e){var n;return(n={})[t]=e,n},n=function(t,e){var n,i,r;for(n in i=o(t),e)r=e[n],i[n]=r;return i},o=function(t,e){var n,i,r,o,a;for(o={},n=0,r=(a=Object.keys(t).sort()).length;n<r;n++)(i=a[n])!==e&&(o[i]=t[i]);return o},s=function(t){return t instanceof R.Hash?t:new R.Hash(t)},r=function(t){return t instanceof R.Hash?t.values:t},e}(R.Object)}.call(this),function(){R.ObjectGroup=function(){function t(t,e){var n,i;this.objects=null!=t?t:[],i=e.depth,(n=e.asTree)&&(this.depth=i,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}return t.groupObjects=function(t,e){var n,i,r,o,a,s,l,u,c;for(null==t&&(t=[]),r=(c=null!=e?e:{}).depth,(n=c.asTree)&&null==r&&(r=0),u=[],a=0,s=t.length;a<s;a++){if(l=t[a],o){if(("function"==typeof l.canBeGrouped?l.canBeGrouped(r):void 0)&&("function"==typeof(i=o[o.length-1]).canBeGroupedWith?i.canBeGroupedWith(l,r):void 0)){o.push(l);continue}u.push(new this(o,{depth:r,asTree:n})),o=null}("function"==typeof l.canBeGrouped?l.canBeGrouped(r):void 0)?o=[l]:u.push(l)}return o&&u.push(new this(o,{depth:r,asTree:n})),u},t.prototype.getObjects=function(){return this.objects},t.prototype.getDepth=function(){return this.depth},t.prototype.getCacheKey=function(){var t,e,n,i,r;for(e=["objectGroup"],t=0,n=(r=this.getObjects()).length;t<n;t++)i=r[t],e.push(i.getCacheKey());return e.join("/")},t}()}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.ObjectMap=function(t){function e(t){var e,n,i,r,o;for(null==t&&(t=[]),this.objects={},i=0,r=t.length;i<r;i++)o=t[i],n=JSON.stringify(o),null==(e=this.objects)[n]&&(e[n]=o)}return n(e,t),e.prototype.find=function(t){var e;return e=JSON.stringify(t),this.objects[e]},e}(R.BasicObject)}.call(this),function(){R.ElementStore=function(){function t(t){this.reset(t)}var i;return t.prototype.add=function(t){var e;return e=i(t),this.elements[e]=t},t.prototype.remove=function(t){var e,n;return e=i(t),(n=this.elements[e])?(delete this.elements[e],n):void 0},t.prototype.reset=function(t){var e,n,i;for(null==t&&(t=[]),this.elements={},n=0,i=t.length;n<i;n++)e=t[n],this.add(e);return t},i=function(t){return t.dataset.trixStoreKey},t}()}.call(this),function(){}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Operation=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.isPerforming=function(){return!0===this.performing},e.prototype.hasPerformed=function(){return!0===this.performed},e.prototype.hasSucceeded=function(){return this.performed&&this.succeeded},e.prototype.hasFailed=function(){return this.performed&&!this.succeeded},e.prototype.getPromise=function(){return null!=this.promise?this.promise:this.promise=new Promise((r=this,function(n,i){return r.performing=!0,r.perform(function(t,e){return r.succeeded=t,r.performing=!1,r.performed=!0,r.succeeded?n(e):i(e)})}));var r},e.prototype.perform=function(t){return t(!1)},e.prototype.release=function(){var t;return null!=(t=this.promise)&&"function"==typeof t.cancel&&t.cancel(),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null},e.proxyMethod("getPromise().then"),e.proxyMethod("getPromise().catch"),e}(R.BasicObject)}.call(this),function(){var t,e,n,i,r,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;R.UTF16String=function(t){function e(t,e){this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}return o(e,t),e.box=function(t){return null==t&&(t=""),t instanceof this?t:this.fromUCS2String(null!=t?t.toString():void 0)},e.fromUCS2String=function(t){return new this(t,i(t))},e.fromCodepoints=function(t){return new this(r(t),t)},e.prototype.offsetToUCS2Offset=function(t){return r(this.codepoints.slice(0,Math.max(0,t))).length},e.prototype.offsetFromUCS2Offset=function(t){return i(this.ucs2String.slice(0,Math.max(0,t))).length},e.prototype.slice=function(){var t;return this.constructor.fromCodepoints((t=this.codepoints).slice.apply(t,arguments))},e.prototype.charAt=function(t){return this.slice(t,t+1)},e.prototype.isEqualTo=function(t){return this.constructor.box(t).ucs2String===this.ucs2String},e.prototype.toJSON=function(){return this.ucs2String},e.prototype.getCacheKey=function(){return this.ucs2String},e.prototype.toString=function(){return this.ucs2String},e}(R.BasicObject),t=1===("function"==typeof Array.from?Array.from("\ud83d\udc7c").length:void 0),e=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),n=" \ud83d\udc7c"===("function"==typeof String.fromCodePoint?String.fromCodePoint(32,128124):void 0),i=t&&e?function(t){return Array.from(t).map(function(t){return t.codePointAt(0)})}:function(t){var e,n,i,r,o;for(r=[],e=0,i=t.length;e<i;)55296<=(o=t.charCodeAt(e++))&&o<=56319&&e<i&&(56320==(64512&(n=t.charCodeAt(e++)))?o=((1023&o)<<10)+(1023&n)+65536:e--),r.push(o);return r},r=n?function(t){return String.fromCodePoint.apply(String,t)}:function(i){var r,o;return function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],r="",65535<o&&(o-=65536,r+=String.fromCharCode(o>>>10&1023|55296),o=56320|1023&o),n.push(r+String.fromCharCode(o));return n}().join("")}}.call(this),function(){}.call(this),function(){}.call(this),function(){R.config.lang={bold:"Bold",bullets:"Bullets","byte":"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"}}.call(this),function(){R.config.css={attachment:"attachment",attachmentProgress:"attachment__progress",attachmentName:"attachment__name",attachmentSize:"attachment__size",attachmentRemove:"attachment__remove",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor"}}.call(this),function(){var e;R.config.blockAttributes=e={"default":{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test:function(t){return R.tagName(t.parentNode)===e[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test:function(t){return R.tagName(t.parentNode)===e[this.listAttribute].tagName}}}}.call(this),function(){var i,r;i=R.config.lang,r=[i.bytes,i.KB,i.MB,i.GB,i.TB,i.PB],R.config.fileSize={prefix:"IEC",precision:2,formatter:function(t){var e,n;switch(t){case 0:return"0 "+i.bytes;case 1:return"1 "+i["byte"];default:return e=function(){switch(this.prefix){case"SI":return 1e3;case"IEC":return 1024}}.call(this),n=Math.floor(Math.log(t)/Math.log(e)),(t/Math.pow(e,n)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"")+" "+r[n]}}}}.call(this),function(){R.config.textAttributes={bold:{tagName:"strong",inheritable:!0,parser:function(t){var e;return"bold"===(e=window.getComputedStyle(t)).fontWeight||600<=e.fontWeight}},italic:{tagName:"em",inheritable:!0,parser:function(t){return"italic"===window.getComputedStyle(t).fontStyle}},href:{groupTagName:"a",parser:function(t){var e,n;return n="a:not("+R.AttachmentView.attachmentSelector+")",(e=R.findClosestElementFromNode(t,{matchingSelector:n}))?e.getAttribute("href"):void 0}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}}}.call(this),function(){var b,w,T,S,E;E="[data-trix-serialize=false]",S=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],T="["+(w="data-trix-serialized-attributes")+"]",b=new RegExp("<!--block-->","g"),R.extend({serializers:{"application/json":function(t){var e;if(t instanceof R.Document)e=t;else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");e=R.Document.fromHTML(t.innerHTML)}return e.toSerializableDocument().toJSONString()},"text/html":function(t){var e,n,i,r,o,a,s,l,u,c,h,d,f,p,g,m,v;if(t instanceof R.Document)r=R.DocumentView.render(t);else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");r=t.cloneNode(!0)}for(o=0,u=(p=r.querySelectorAll(E)).length;o<u;o++)(i=p[o]).parentNode.removeChild(i);for(a=0,c=S.length;a<c;a++)for(e=S[a],s=0,h=(g=r.querySelectorAll("["+e+"]")).length;s<h;s++)(i=g[s]).removeAttribute(e);for(l=0,d=(m=r.querySelectorAll(T)).length;l<d;l++){i=m[l];try{for(f in n=JSON.parse(i.getAttribute(w)),i.removeAttribute(w),n)v=n[f],i.setAttribute(f,v)}catch(y){}}return r.innerHTML.replace(b,"")}},deserializers:{"application/json":function(t){return R.Document.fromJSONString(t)},"text/html":function(t){return R.Document.fromHTML(t)}},serializeToContentType:function(t,e){var n;if(n=R.serializers[e])return n(t);throw new Error("unknown content type: "+e)},deserializeFromContentType:function(t,e){var n;if(n=R.deserializers[e])return n(t);throw new Error("unknown content type: "+e)}})}.call(this),function(){var t;t=R.config.lang,R.config.toolbar={getDefaultHTML:function(){return'<div class="trix-button-row">\n  <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="'+t.bold+'" tabindex="-1">'+t.bold+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="'+t.italic+'" tabindex="-1">'+t.italic+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="'+t.strike+'" tabindex="-1">'+t.strike+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="'+t.link+'" tabindex="-1">'+t.link+'</button>\n  </span>\n\n  <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="'+t.heading1+'" tabindex="-1">'+t.heading1+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="'+t.quote+'" tabindex="-1">'+t.quote+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="'+t.code+'" tabindex="-1">'+t.code+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="'+t.bullets+'" tabindex="-1">'+t.bullets+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="'+t.numbers+'" tabindex="-1">'+t.numbers+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="'+t.outdent+'" tabindex="-1">'+t.outdent+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="'+t.indent+'" tabindex="-1">'+t.indent+'</button>\n  </span>\n\n  <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="'+t.undo+'" tabindex="-1">'+t.undo+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="'+t.redo+'" tabindex="-1">'+t.redo+'</button>\n  </span>\n</div>\n\n<div class="trix-dialogs" data-trix-dialogs>\n  <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">\n    <div class="trix-dialog__link-fields">\n      <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="'+t.urlPlaceholder+'" required data-trix-input>\n      <div class="trix-button-group">\n        <input type="button" class="trix-button trix-button--dialog" value="'+t.link+'" data-trix-method="setAttribute">\n        <input type="button" class="trix-button trix-button--dialog" value="'+t.unlink+'" data-trix-method="removeAttribute">\n      </div>\n    </div>\n  </div>\n</div>'}}}.call(this),function(){R.config.undoInterval=5e3}.call(this),function(){R.config.attachments={preview:{caption:{name:!0,size:!0}},file:{caption:{size:!0}}}}.call(this),function(){}.call(this),function(){R.registerElement("trix-toolbar",{defaultCSS:"%t {\n  white-space: nowrap;\n}\n\n%t [data-trix-dialog] {\n  display: none;\n}\n\n%t [data-trix-dialog][data-trix-active] {\n  display: block;\n}\n\n%t [data-trix-dialog] [data-trix-validate]:invalid {\n  background-color: #ffdddd;\n}",createdCallback:function(){return""===this.innerHTML?this.innerHTML=R.config.toolbar.getDefaultHTML():void 0}})}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};R.ObjectView=function(t){function e(t,e){this.object=t,this.options=null!=e?e:{},this.childViews=[],this.rootView=this}return n(e,t),e.prototype.getNodes=function(){var t,e,n,i,r;for(null==this.nodes&&(this.nodes=this.createNodes()),r=[],t=0,e=(i=this.nodes).length;t<e;t++)n=i[t],r.push(n.cloneNode(!0));return r},e.prototype.invalidate=function(){var t;return(this.nodes=null)!=(t=this.parentView)?t.invalidate():void 0},e.prototype.invalidateViewForObject=function(t){var e;return null!=(e=this.findViewForObject(t))?e.invalidate():void 0},e.prototype.findOrCreateCachedChildView=function(t,e){var n;return(n=this.getCachedViewForObject(e))?this.recordChildView(n):(n=this.createChildView.apply(this,arguments),this.cacheViewForObject(n,e)),n},e.prototype.createChildView=function(t,e,n){var i;return null==n&&(n={}),e instanceof R.ObjectGroup&&(n.viewClass=t,t=R.ObjectGroupView),i=new t(e,n),this.recordChildView(i)},e.prototype.recordChildView=function(t){return t.parentView=this,t.rootView=this.rootView,a.call(this.childViews,t)<0&&this.childViews.push(t),t},e.prototype.getAllChildViews=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.childViews).length;e<n;e++)t=i[e],r.push(t),r=r.concat(t.getAllChildViews());return r},e.prototype.findElement=function(){return this.findElementForObject(this.object)},e.prototype.findElementForObject=function(t){var e;return(e=null!=t?t.id:void 0)?this.rootView.element.querySelector("[data-trix-id='"+e+"']"):void 0},e.prototype.findViewForObject=function(t){var e,n,i,r;for(e=0,n=(i=this.getAllChildViews()).length;e<n;e++)if((r=i[e]).object===t)return r},e.prototype.getViewCache=function(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?null!=this.viewCache?this.viewCache:this.viewCache={}:void 0},e.prototype.isViewCachingEnabled=function(){return!1!==this.shouldCacheViews},e.prototype.enableViewCaching=function(){return this.shouldCacheViews=!0},e.prototype.disableViewCaching=function(){return this.shouldCacheViews=!1},e.prototype.getCachedViewForObject=function(t){var e;return null!=(e=this.getViewCache())?e[t.getCacheKey()]:void 0},e.prototype.cacheViewForObject=function(t,e){var n;return null!=(n=this.getViewCache())?n[e.getCacheKey()]=t:void 0},e.prototype.garbageCollectCachedViews=function(){var t,e,n,i,r,o;if(t=this.getViewCache()){for(e in o=this.getAllChildViews().concat(this),n=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)r=o[t],n.push(r.object.getCacheKey());return n}(),i=[],t)a.call(n,e)<0&&i.push(delete t[e]);return i}},e}(R.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.ObjectGroupView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}return n(e,t),e.prototype.getChildViews=function(){var t,e,n,i;if(!this.childViews.length)for(t=0,e=(i=this.objectGroup.getObjects()).length;t<e;t++)n=i[t],this.findOrCreateCachedChildView(this.viewClass,n,this.options);return this.childViews},e.prototype.createNodes=function(){var t,e,n,i,r,o,a,s;for(t=this.createContainerElement(),e=0,i=(a=this.getChildViews()).length;e<i;e++)for(n=0,r=(s=a[e].getNodes()).length;n<r;n++)o=s[n],t.appendChild(o);return[t]},e.prototype.createContainerElement=function(t){return null==t&&(t=this.objectGroup.getDepth()),this.getChildViews()[0].createContainerElement(t)},e}(R.ObjectView)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Controller=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(R.BasicObject)}.call(this),function(){var o,h,a,d,l,s,u=function(t,e){return function(){return t.apply(e,arguments)}},f=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,p=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};o=R.findClosestElementFromNode,a=R.nodeIsEmptyTextNode,h=R.nodeIsBlockStartComment,d=R.normalizeSpaces,l=R.summarizeStringChange,s=R.tagName,R.MutationObserver=function(t){function e(t){this.element=t,this.didMutate=u(this.didMutate,this),this.observer=new window.MutationObserver(this.didMutate),this.start()}var c,n,i,r;return f(e,t),i="["+(n="data-trix-mutable")+"]",r={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},e.prototype.start=function(){return this.reset(),this.observer.observe(this.element,r)},e.prototype.stop=function(){return this.observer.disconnect()},e.prototype.didMutate=function(t){var e,n;return(e=this.mutations).push.apply(e,this.findSignificantMutations(t)),this.mutations.length?(null!=(n=this.delegate)&&"function"==typeof n.elementDidMutate&&n.elementDidMutate(this.getMutationSummary()),this.reset()):void 0},e.prototype.reset=function(){return this.mutations=[]},e.prototype.findSignificantMutations=function(t){var e,n,i,r;for(r=[],e=0,n=t.length;e<n;e++)i=t[e],this.mutationIsSignificant(i)&&r.push(i);return r},e.prototype.mutationIsSignificant=function(t){var e,n,i,r;for(e=0,n=(r=this.nodesModifiedByMutation(t)).length;e<n;e++)if(i=r[e],
this.nodeIsSignificant(i))return!0;return!1},e.prototype.nodeIsSignificant=function(t){return t!==this.element&&!this.nodeIsMutable(t)&&!a(t)},e.prototype.nodeIsMutable=function(t){return o(t,{matchingSelector:i})},e.prototype.nodesModifiedByMutation=function(t){var e;switch(e=[],t.type){case"attributes":t.attributeName!==n&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push.apply(e,t.addedNodes),e.push.apply(e,t.removedNodes)}return e},e.prototype.getMutationSummary=function(){return this.getTextMutationSummary()},e.prototype.getTextMutationSummary=function(){var t,e,n,i,r,o,a,s,l,u,c;for(n=(s=this.getTextChangesFromCharacterData()).additions,r=s.deletions,o=0,a=(l=(c=this.getTextChangesFromChildList()).additions).length;o<a;o++)e=l[o],p.call(n,e)<0&&n.push(e);return r.push.apply(r,c.deletions),u={},(t=n.join(""))&&(u.textAdded=t),(i=r.join(""))&&(u.textDeleted=i),u},e.prototype.getMutationsByType=function(t){var e,n,i,r,o;for(o=[],e=0,n=(r=this.mutations).length;e<n;e++)(i=r[e]).type===t&&o.push(i);return o},e.prototype.getTextChangesFromChildList=function(){var t,e,i,n,r,o,a,s,l,u;for(t=[],a=[],e=0,n=(o=this.getMutationsByType("childList")).length;e<n;e++)r=o[e],t.push.apply(t,r.addedNodes),a.push.apply(a,r.removedNodes);return 0===t.length&&1===a.length&&h(a[0])?(l=[],u=["\n"]):(l=c(t),u=c(a)),{additions:function(){var t,e,n;for(n=[],i=t=0,e=l.length;t<e;i=++t)(s=l[i])!==u[i]&&n.push(d(s));return n}(),deletions:function(){var t,e,n;for(n=[],i=t=0,e=u.length;t<e;i=++t)(s=u[i])!==l[i]&&n.push(d(s));return n}()}},e.prototype.getTextChangesFromCharacterData=function(){var t,e,n,i,r,o,a,s;return(e=this.getMutationsByType("characterData")).length&&(s=e[0],n=e[e.length-1],r=d(s.oldValue),i=d(n.target.data),t=(o=l(r,i)).added,a=o.removed),{additions:t?[t]:[],deletions:a?[a]:[]}},c=function(t){var e,n,i,r;for(null==t&&(t=[]),r=[],e=0,n=t.length;e<n;e++)switch(i=t[e],i.nodeType){case Node.TEXT_NODE:r.push(i.data);break;case Node.ELEMENT_NODE:"br"===s(i)?r.push("\n"):r.push.apply(r,c(i.childNodes))}return r},e}(R.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.FileVerificationOperation=function(t){function e(t){this.file=t}return n(e,t),e.prototype.perform=function(e){var n,i;return(n=new FileReader).onerror=function(){return e(!1)},n.onload=(i=this,function(){n.onerror=null;try{n.abort()}catch(t){}return e(!0,i.file)}),n.readAsArrayBuffer(this.file)},e}(R.Operation)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.CompositionInput=function(t){function e(t){var e;this.inputController=t,e=this.inputController,this.responder=e.responder,this.delegate=e.delegate,this.inputSummary=e.inputSummary,this.data={}}return n(e,t),e.prototype.start=function(t){var e,n;return this.data.start=t,"keypress"===this.inputSummary.eventName&&this.inputSummary.textAdded&&null!=(e=this.responder)&&e.deleteInDirection("left"),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=null!=(n=this.responder)?n.getSelectedRange():void 0},e.prototype.update=function(t){var e;return this.data.update=t,(e=this.selectPlaceholder())?(this.forgetPlaceholder(),this.range=e):void 0},e.prototype.end=function(t){var e,n,i,r;return this.data.end=t,this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0}),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.setSelectedRange(this.range),null!=(i=this.responder)&&i.insertString(this.data.end),null!=(r=this.responder)?r.setSelectedRange(this.range[0]+this.data.end.length):void 0):null!=this.data.start||null!=this.data.update?(this.requestReparse(),this.inputController.reset()):void 0},e.prototype.getEndData=function(){return this.data.end},e.prototype.isEnded=function(){return null!=this.getEndData()},e.prototype.canApplyToDocument=function(){var t,e;return 0===(null!=(t=this.data.start)?t.length:void 0)&&0<(null!=(e=this.data.end)?e.length:void 0)&&null!=this.range},e.proxyMethod("inputController.setInputSummary"),e.proxyMethod("inputController.requestRender"),e.proxyMethod("inputController.requestReparse"),e.proxyMethod("responder?.selectionIsExpanded"),e.proxyMethod("responder?.insertPlaceholder"),e.proxyMethod("responder?.selectPlaceholder"),e.proxyMethod("responder?.forgetPlaceholder"),e}(R.BasicObject)}.call(this),function(){var x,i,C,n,r,o,c,a,s,l,u,_,h,d,f=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty,k=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};n=R.handleEvent,l=R.makeElement,o=R.innerElementIsActive,u=R.objectsAreEqual,R.tagName,R.InputController=function(t){function e(t){var e;for(e in this.element=t,this.resetInputSummary(),this.mutationObserver=new R.MutationObserver(this.element),(this.mutationObserver.delegate=this).events)n(e,{onElement:this.element,withCallback:this.handlerFor(e),inPhase:"capturing"})}var A;return f(e,t),A=0,e.keyNames={8:"backspace",9:"tab",13:"return",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},e.prototype.handlerFor=function(e){return n=this,function(t){return n.handleInput(function(){return o(this.element)?void 0:(this.eventName=e,this.events[e].call(this,t))})};var n},e.prototype.setInputSummary=function(t){var e,n;for(e in null==t&&(t={}),this.inputSummary.eventName=this.eventName,t)n=t[e],this.inputSummary[e]=n;return this.inputSummary},e.prototype.resetInputSummary=function(){return this.inputSummary={}},e.prototype.reset=function(){return this.resetInputSummary(),R.selectionChangeObserver.reset()},e.prototype.editorWillSyncDocumentView=function(){return this.mutationObserver.stop()},e.prototype.editorDidSyncDocumentView=function(){return this.mutationObserver.start()},e.prototype.requestRender=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestRender?t.inputControllerDidRequestRender():void 0},e.prototype.requestReparse=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestReparse&&t.inputControllerDidRequestReparse(),this.requestRender()},e.prototype.elementDidMutate=function(t){var e;return this.isComposing()?null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidAllowUnhandledInput?e.inputControllerDidAllowUnhandledInput():void 0:this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})},e.prototype.mutationIsExpected=function(t){var e,n,i,r,o,a,s,l,u;return a=t.textAdded,s=t.textDeleted,!!this.inputSummary.preferDocument||(e=null!=a?a===this.inputSummary.textAdded:!this.inputSummary.textAdded,n=null!=s?this.inputSummary.didDelete:!this.inputSummary.didDelete,u="\n"===s&&!n,!!(((l=("\n"===a||" \n"===a)&&!e)&&!u||u&&!l)&&(r=this.getSelectedRange())&&(i=l?a.replace(/\n$/,"").length||-1:(null!=a?a.length:void 0)||1,null!=(o=this.responder)?o.positionIsBlockBreak(r[1]+i):void 0))||e&&n)},e.prototype.mutationIsSignificant=function(t){var e,n,i;return i=0<Object.keys(t).length,e=""===(null!=(n=this.compositionInput)?n.getEndData():void 0),i||!e},e.prototype.attachFiles=function(i){var r,t,e;return t=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(new R.FileVerificationOperation(r));return n}(),Promise.all(t).then((e=this,function(n){return e.handleInput(function(){var t,e;return null!=(t=this.delegate)&&t.inputControllerWillAttachFiles(),null!=(e=this.responder)&&e.insertFiles(n),this.requestRender()})}))},e.prototype.events={keydown:function(r){var t,e,n,i,o,a,s,l,u;if(this.isComposing()||this.resetInputSummary(),i=this.constructor.keyNames[r.keyCode]){for(e=this.keys,n=0,a=(l=["ctrl","alt","shift","meta"]).length;n<a;n++)s=l[n],r[s+"Key"]&&("ctrl"===s&&(s="control"),e=null!=e?e[s]:void 0);null!=(null!=e?e[i]:void 0)&&(this.setInputSummary({keyName:i}),R.selectionChangeObserver.reset(),e[i].call(this,r))}return c(r)&&(t=String.fromCharCode(r.keyCode).toLowerCase())&&((o=function(){var t,e,n,i;for(i=[],t=0,e=(n=["alt","shift"]).length;t<e;t++)s=n[t],r[s+"Key"]&&i.push(s);return i}()).push(t),null!=(u=this.delegate)?u.inputControllerDidReceiveKeyboardCommand(o):void 0)?r.preventDefault():void 0},keypress:function(t){var e,n,i;if(null==this.inputSummary.eventName&&(!t.metaKey&&!t.ctrlKey||t.altKey)&&!s(t)&&!a(t))return(i=h(t))?(null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString(i),this.setInputSummary({textAdded:i,didDelete:this.selectionIsExpanded()})):void 0},textInput:function(t){var e,n,i,r;return e=t.data,(r=this.inputSummary.textAdded)&&r!==e&&r.toUpperCase()===e?(n=this.getSelectedRange(),this.setSelectedRange([n[0],n[1]+r.length]),null!=(i=this.responder)&&i.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(n)):void 0},dragenter:function(t){return t.preventDefault()},dragstart:function(t){var e;return t.target,this.serializeSelectionToDataTransfer(t.dataTransfer),this.draggedRange=this.getSelectedRange(),null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidStartDrag?e.inputControllerDidStartDrag():void 0},dragover:function(t){var e,n;return!this.draggedRange&&!this.canAcceptDataTransfer(t.dataTransfer)||(t.preventDefault(),e={x:t.clientX,y:t.clientY},u(e,this.draggingPoint))?void 0:(this.draggingPoint=e,null!=(n=this.delegate)&&"function"==typeof n.inputControllerDidReceiveDragOverPoint?n.inputControllerDidReceiveDragOverPoint(this.draggingPoint):void 0)},dragend:function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidCancelDrag&&t.inputControllerDidCancelDrag(),this.draggedRange=null,this.draggingPoint=null},drop:function(t){var e,n,i,r,o,a,s,l,u;return t.preventDefault(),i=null!=(o=t.dataTransfer)?o.files:void 0,r={x:t.clientX,y:t.clientY},null!=(a=this.responder)&&a.setLocationRangeFromPointRange(r),(null!=i?i.length:void 0)?this.attachFiles(i):this.draggedRange?(null!=(s=this.delegate)&&s.inputControllerWillMoveText(),null!=(l=this.responder)&&l.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()):(n=t.dataTransfer.getData("application/x-trix-document"))&&(e=R.Document.fromJSONString(n),null!=(u=this.responder)&&u.insertDocument(e),this.requestRender()),this.draggedRange=null,this.draggingPoint=null},cut:function(t){var e,n;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&(this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault(),null!=(n=this.delegate)&&n.inputControllerWillCutText(),this.deleteInDirection("backward"),t.defaultPrevented)?this.requestRender():void 0},copy:function(t){var e;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&this.serializeSelectionToDataTransfer(t.clipboardData)?t.preventDefault():void 0},paste:function(t){var e,n,i,r,o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,w,T,S,E;return e=null!=(l=t.clipboardData)?l:t.testClipboardData,s={clipboard:e},null==e||_(t)?void this.getPastedHTMLUsingHiddenElement((E=this,function(t){var e,n,i;return s.type="text/html",s.html=t,null!=(e=E.delegate)&&e.inputControllerWillPaste(s),null!=(n=E.responder)&&n.insertHTML(s.html),E.requestRender(),null!=(i=E.delegate)?i.inputControllerDidPaste(s):void 0})):((r=e.getData("URL"))?(s.type="URL",s.href=r,s.string=(a=e.getData("public.url-name"))?R.squishBreakableWhitespace(a).trim():r,null!=(u=this.delegate)&&u.inputControllerWillPaste(s),this.setInputSummary({textAdded:s.string,didDelete:this.selectionIsExpanded()}),null!=(g=this.responder)&&g.insertText(R.Text.textForStringWithAttributes(s.string,{href:s.href})),this.requestRender(),null!=(m=this.delegate)&&m.inputControllerDidPaste(s)):x(e)?(s.type="text/plain",s.string=e.getData("text/plain"),null!=(v=this.delegate)&&v.inputControllerWillPaste(s),this.setInputSummary({textAdded:s.string,didDelete:this.selectionIsExpanded()}),null!=(y=this.responder)&&y.insertString(s.string),this.requestRender(),null!=(b=this.delegate)&&b.inputControllerDidPaste(s)):(o=e.getData("text/html"))?(s.type="text/html",s.html=o,null!=(w=this.delegate)&&w.inputControllerWillPaste(s),null!=(T=this.responder)&&T.insertHTML(s.html),this.requestRender(),null!=(S=this.delegate)&&S.inputControllerDidPaste(s)):0<=k.call(e.types,"Files")&&(i=null!=(c=e.items)&&null!=(h=c[0])&&"function"==typeof h.getAsFile?h.getAsFile():void 0)&&(!i.name&&(n=C(i))&&(i.name="pasted-file-"+ ++A+"."+n),s.type="File",s.file=i,null!=(d=this.delegate)&&d.inputControllerWillAttachFiles(),null!=(f=this.responder)&&f.insertFile(s.file),this.requestRender(),null!=(p=this.delegate)&&p.inputControllerDidPaste(s)),t.preventDefault())},compositionstart:function(t){return this.getCompositionInput().start(t.data)},compositionupdate:function(t){return this.getCompositionInput().update(t.data)},compositionend:function(t){return this.getCompositionInput().end(t.data)},input:function(t){return t.stopPropagation()}},e.prototype.keys={backspace:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},"delete":function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},"return":function(){var t,e;return this.setInputSummary({preferDocument:!0}),null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),null!=(e=this.responder)?e.insertLineBreak():void 0},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canIncreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.increaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},right:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},control:{d:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},h:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},o:function(t){var e,n;return t.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n",{updatePosition:!1}),this.requestRender()}},shift:{"return":function(t){var e,n;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n"),this.requestRender(),t.preventDefault()},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canDecreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.decreaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("backward")):void 0},right:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("forward")):void 0}},alt:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}},meta:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}}},e.prototype.handleInput=function(t){var e,n;try{return null!=(e=this.delegate)&&e.inputControllerWillHandleInput(),t.call(this)}finally{null!=(n=this.delegate)&&n.inputControllerDidHandleInput()}},e.prototype.getCompositionInput=function(){return this.isComposing()?this.compositionInput:this.compositionInput=new R.CompositionInput(this)},e.prototype.isComposing=function(){return null!=this.compositionInput&&!this.compositionInput.isEnded()},e.prototype.deleteInDirection=function(t,e){var n;return!1!==(null!=(n=this.responder)?n.deleteInDirection(t):void 0)?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0},e.prototype.serializeSelectionToDataTransfer=function(t){var e,n;if(i(t))return e=null!=(n=this.responder)?n.getSelectedDocument().toSerializableDocument():void 0,t.setData("application/x-trix-document",JSON.stringify(e)),t.setData("text/html",R.DocumentView.render(e).innerHTML),t.setData("text/plain",e.toString().replace(/\n$/,"")),!0},e.prototype.canAcceptDataTransfer=function(t){var e,n,i,r,o;for(o={},e=0,n=(r=null!=(i=null!=t?t.types:void 0)?i:[]).length;e<n;e++)o[r[e]]=!0;return o.Files||o["application/x-trix-document"]||o["text/html"]||o["text/plain"]},e.prototype.getPastedHTMLUsingHiddenElement=function(e){var n,i,t,r;return i=this.getSelectedRange(),t={position:"absolute",left:window.pageXOffset+"px",top:window.pageYOffset+"px",opacity:0},n=l({style:t,tagName:"div",editable:!0}),document.body.appendChild(n),n.focus(),requestAnimationFrame((r=this,function(){var t;return t=n.innerHTML,document.body.removeChild(n),r.setSelectedRange(i),e(t)}))},e.proxyMethod("responder?.getSelectedRange"),e.proxyMethod("responder?.setSelectedRange"),e.proxyMethod("responder?.expandSelectionInDirection"),e.proxyMethod("responder?.selectionIsInCursorTarget"),e.proxyMethod("responder?.selectionIsExpanded"),e}(R.BasicObject),C=function(t){var e,n;return null!=(e=t.type)&&null!=(n=e.match(/\/(\w+)$/))?n[1]:void 0},r=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),h=function(t){var e;return t.key&&r&&t.key.codePointAt(0)===t.keyCode?t.key:(null===t.which?e=t.keyCode:0!==t.which&&0!==t.charCode&&(e=t.charCode),null!=e?R.UTF16String.fromCodepoints([e]).toString():void 0)},s=function(t){return t.metaKey&&t.altKey&&!t.shiftKey&&94===t.keyCode},a=function(t){return t.metaKey&&t.altKey&&t.shiftKey&&9674===t.keyCode},c=function(t){return/Mac|^iP/.test(navigator.platform)?t.metaKey:t.ctrlKey},_=function(t){var e,n,i,r,o,a,s,l,u;if(s=t.clipboardData){if(0<=k.call(s.types,"text/html")){for(i=0,a=(l=s.types).length;i<a;i++)if(u=l[i],e=/^CorePasteboardFlavorType/.test(u),n=/^dyn\./.test(u)&&s.getData(u),e||n)return!0;return!1}return r=0<=k.call(s.types,"com.apple.webarchive"),o=0<=k.call(s.types,"com.apple.flat-rtfd"),r||o}},x=function(t){var e,n,i;return i=t.getData("text/plain"),n=t.getData("text/html"),i&&n?((e=l("div")).innerHTML=n,e.textContent===i?!e.querySelector(":not(meta)"):void 0):null!=i?i.length:void 0},d={"application/x-trix-feature-detection":"test"},i=function(t){var e,n;if(null!=(null!=t?t.setData:void 0)){for(e in d)if(n=d[e],!function(){try{return t.setData(e,n),t.getData(e)===n}catch(C){}}())return;return!0}}}.call(this),function(){var o,a,i,s,l,t,r,u=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty;a=R.handleEvent,l=R.makeElement,r=R.tagName,i=R.InputController.keyNames,t=R.config,s=t.lang,o=t.css,R.AttachmentEditorController=function(t){function e(t,e,n){this.attachmentPiece=t,this.element=e,this.container=n,this.didBlurCaption=u(this.didBlurCaption,this),this.didChangeCaption=u(this.didChangeCaption,this),this.didInputCaption=u(this.didInputCaption,this),this.didKeyDownCaption=u(this.didKeyDownCaption,this),this.didClickCaption=u(this.didClickCaption,this),this.didClickRemoveButton=u(this.didClickRemoveButton,this),this.attachment=this.attachmentPiece.attachment,"a"===r(this.element)&&(this.element=this.element.firstChild),this.install()}var n;return c(e,t),n=function(e){return function(){var t;return(t=e.apply(this,arguments))["do"](),null==this.undos&&(this.undos=[]),this.undos.push(t.undo)}},e.prototype.install=function(){return this.makeElementMutable(),this.attachment.isPreviewable()&&this.makeCaptionEditable(),this.addRemoveButton()},e.prototype.uninstall=function(){var t,e;for(this.savePendingCaption();e=this.undos.pop();)e();return null!=(t=this.delegate)?t.didUninstallAttachmentEditor(this):void 0},e.prototype.savePendingCaption=function(){var t,e,n;return null!=this.pendingCaption?(t=this.pendingCaption,this.pendingCaption=null,t?null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestUpdatingAttributesForAttachment?e.attachmentEditorDidRequestUpdatingAttributesForAttachment({caption:t},this.attachment):void 0:null!=(n=this.delegate)&&"function"==typeof n.attachmentEditorDidRequestRemovingAttributeForAttachment?n.attachmentEditorDidRequestRemovingAttributeForAttachment("caption",this.attachment):void 0):void 0},e.prototype.makeElementMutable=n(function(){return{"do":(e=this,function(){return e.element.dataset.trixMutable=!0}),undo:(t=this,function(){return delete t.element.dataset.trixMutable})};var t,e}),e.prototype.makeCaptionEditable=n(function(){var t,e,n;return t=this.element.querySelector("figcaption"),e=null,{"do":(n=this,function(){return e=a("click",{onElement:t,withCallback:n.didClickCaption,inPhase:"capturing"})}),undo:function(){return e.destroy()}}}),e.prototype.addRemoveButton=n(function(){var t,e,n;return t=l({tagName:"button",textContent:s.remove,className:o.attachmentRemove+" "+o.attachmentRemove+"--icon",attributes:{type:"button",title:s.remove},data:{trixMutable:!0}}),a("click",{onElement:t,withCallback:this.didClickRemoveButton}),{"do":(n=this,function(){return n.element.appendChild(t)}),undo:(e=this,function(){return e.element.removeChild(t)})}}),e.prototype.editCaption=n(function(){var t,e,n,i,r;return(i=l({tagName:"textarea",className:o.attachmentCaptionEditor,attributes:{placeholder:s.captionPlaceholder}})).value=this.attachmentPiece.getCaption(),(r=i.cloneNode()).classList.add("trix-autoresize-clone"),t=function(){return r.value=i.value,i.style.height=r.scrollHeight+"px"},a("keydown",{onElement:i,withCallback:this.didKeyDownCaption}),a("input",{onElement:i,withCallback:this.didInputCaption}),a("change",{onElement:i,withCallback:this.didChangeCaption}),a("blur",{onElement:i,withCallback:this.didBlurCaption}),n=this.element.querySelector("figcaption"),e=n.cloneNode(),{"do":function(){return n.style.display="none",e.appendChild(i),e.appendChild(r),e.classList.add(o.attachmentCaption+"--editing"),n.parentElement.insertBefore(e,n),t(),i.focus()},undo:function(){return e.parentNode.removeChild(e),n.style.display=null}}}),e.prototype.didClickRemoveButton=function(t){var e;return t.preventDefault(),t.stopPropagation(),null!=(e=this.delegate)?e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment):void 0},e.prototype.didClickCaption=function(t){return t.preventDefault(),this.editCaption()},e.prototype.didKeyDownCaption=function(t){var e;return"return"===i[t.keyCode]?(t.preventDefault(),this.savePendingCaption(),null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestDeselectingAttachment?e.attachmentEditorDidRequestDeselectingAttachment(this.attachment):void 0):void 0},e.prototype.didInputCaption=function(t){return this.pendingCaption=t.target.value.replace(/\s/g," ").trim()},e.prototype.didChangeCaption=function(){return this.savePendingCaption()},e.prototype.didBlurCaption=function(){return this.savePendingCaption()},e}(R.BasicObject)}.call(this),function(){var d,n,f,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;f=R.makeElement,d=R.config.css,R.AttachmentView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.attachment=this.object,(this.attachment.uploadProgressDelegate=this).attachmentPiece=this.options.piece}var h;return i(e,t),e.attachmentSelector="[data-trix-attachment]",e.prototype.createContentNodes=function(){return[]},e.prototype.createNodes=function(){var t,e,n,i,r,o,a,s,l,u,c;if(i=f({tagName:"figure",className:this.getClassName()}),this.attachment.hasContent())i.innerHTML=this.attachment.getContent();else for(o=0,s=(u=this.createContentNodes()).length;o<s;o++)l=u[o],i.appendChild(l);for(a in i.appendChild(this.createCaptionElement()),e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},(t=this.attachmentPiece.getAttributesForAttachment()).isEmpty()||(e.trixAttributes=JSON.stringify(t)),this.attachment.isPending()&&(this.progressElement=f({tagName:"progress",attributes:{"class":d.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),i.appendChild(this.progressElement),e.trixSerialize=!1),(r=this.getHref())?(n=f("a",{href:r,tabindex:-1})).appendChild(i):n=i,e)c=e[a],n.dataset[a]=c;return n.setAttribute("contenteditable",!1),[h("left"),n,h("right")]},e.prototype.createCaptionElement=function(){var t,e,n,i,r,o,a;return n=f({tagName:"figcaption",className:d.attachmentCaption}),(t=this.attachmentPiece.getCaption())?(n.classList.add(d.attachmentCaption+"--edited"),n.textContent=t):((e=this.getCaptionConfig()).name&&(i=this.attachment.getFilename()),e.size&&(o=this.attachment.getFormattedFilesize()),i&&(r=f({tagName:"span",className:d.attachmentName,textContent:i}),n.appendChild(r)),o&&(i&&n.appendChild(document.createTextNode(" ")),a=f({tagName:"span",className:d.attachmentSize,textContent:o}),n.appendChild(a))),n},e.prototype.getClassName=function(){var t,e;return e=[d.attachment,d.attachment+"--"+this.attachment.getType()],(t=this.attachment.getExtension())&&e.push(d.attachment+"--"+t),e.join(" ")},e.prototype.getHref=function(){return n(this.attachment.getContent(),"a")?void 0:this.attachment.getHref()},e.prototype.getCaptionConfig=function(){var t,e,n;return n=this.attachment.getType(),t=R.copyObject(null!=(e=R.config.attachments[n])?e.caption:void 0),"file"===n&&(t.name=!0),t},e.prototype.findProgressElement=function(){var t;return null!=(t=this.findElement())?t.querySelector("progress"):void 0},h=function(t){return f({tagName:"span",textContent:R.ZERO_WIDTH_SPACE,data:{trixCursorTarget:t,trixSerialize:!1}})},e.prototype.attachmentDidChangeUploadProgress=function(){var t,e;return e=this.attachment.getUploadProgress(),null!=(t=this.findProgressElement())?t.value=e:void 0},e}(R.ObjectView),n=function(t,e){var n;return(n=f("div")).innerHTML=null!=t?t:"",n.querySelector(e)}}.call(this),function(){var n,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;n=R.makeElement,R.PreviewableAttachmentView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.attachment.previewDelegate=this}return i(e,t),e.prototype.createContentNodes=function(){return this.image=n({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]},e.prototype.createCaptionElement=function(){var t;return(t=e.__super__.createCaptionElement.apply(this,arguments)).textContent||t.setAttribute("data-trix-placeholder",R.config.lang.captionPlaceholder),t},e.prototype.refresh=function(t){var e;return null==t&&(t=null!=(e=this.findElement())?e.querySelector("img"):void 0),t?this.updateAttributesForImage(t):void 0},e.prototype.updateAttributesForImage=function(t){var e,n,i,r,o,a;return o=this.attachment.getURL(),n=this.attachment.getPreviewURL(),t.src=n||o,n===o?t.removeAttribute("data-trix-serialized-attributes"):(i=JSON.stringify({src:o}),t.setAttribute("data-trix-serialized-attributes",i)),a=this.attachment.getWidth(),e=this.attachment.getHeight(),null!=a&&(t.width=a),null!=e&&(t.height=e),r=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/"),t.dataset.trixStoreKey=r},e.prototype.attachmentDidChangeAttributes=function(){return this.refresh(this.image),this.refresh()},e}(R.AttachmentView)}.call(this),function(){var a,u,c,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;c=R.makeElement,a=R.findInnerElement,u=R.getTextConfig,R.PieceView=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),t=this.options,this.textConfig=t.textConfig,this.context=t.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}var n;return i(e,t),e.prototype.createNodes=function(){var t,e,n,i,r,o;if(o=this.attachment?this.createAttachmentNodes():this.createStringNodes(),t=this.createElement()){for(n=a(t),e=0,i=o.length;e<i;e++)r=o[e],n.appendChild(r);o=[t]}return o},e.prototype.createAttachmentNodes=function(){var t;return t=this.attachment.isPreviewable()?R.PreviewableAttachmentView:R.AttachmentView,this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()},e.prototype.createStringNodes=function(){var t,e,n,i,r,o,a,s,l;if(null!=(a=this.textConfig)?a.plaintext:void 0)return[document.createTextNode(this.string)];for(o=[],n=e=0,i=(s=this.string.split("\n")).length;e<i;n=++e)l=s[n],0<n&&(t=c("br"),o.push(t)),l.length&&(r=document.createTextNode(this.preserveSpaces(l)),o.push(r));return o},e.prototype.createElement=function(){var t,e,n,i,r,o,a,s,l;for(i in s={},o=this.attributes)if(l=o[i],(t=u(i))&&(t.tagName&&(r=c(t.tagName),n?(n.appendChild(r),n=r):e=n=r),t.styleProperty&&(s[t.styleProperty]=l),t.style))for(i in a=t.style)l=a[i],s[i]=l;if(Object.keys(s).length)for(i in null==e&&(e=c("span")),s)l=s[i],e.style[i]=l;return e},e.prototype.createContainerElement=function(){var t,e,n,i,r;for(n in i=this.attributes)if(r=i[n],(e=u(n))&&e.groupTagName)return(t={})[n]=r,c(e.groupTagName,t)},n=R.NON_BREAKING_SPACE,e.prototype.preserveSpaces=function(t){return this.context.isLast&&(t=t.replace(/\ $/,n)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 "+n+" $2").replace(/\ {2}/g,n+" ").replace(/\ {2}/g," "+n),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,n)),t},e}(R.ObjectView)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.TextView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.text=this.object,this.textConfig=this.options.textConfig}var c;return n(e,t),e.prototype.createNodes=function(){var t,e,n,i,r,o,a,s,l,u;for(o=[],i=(s=R.ObjectGroup.groupObjects(this.getPieces())).length-1,n=e=0,r=s.length;e<r;n=++e)a=s[n],t={},0===n&&(t.isFirst=!0),n===i&&(t.isLast=!0),c(l)&&(t.followsWhitespace=!0),u=this.findOrCreateCachedChildView(R.PieceView,a,{textConfig:this.textConfig,context:t}),o.push.apply(o,u.getNodes()),l=a;return o},e.prototype.getPieces=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.text.getPieces()).length;t<e;t++)(n=i[t]).hasAttribute("blockBreak")||r.push(n);return r},c=function(t){return/\s$/.test(null!=t?t.toString():void 0)},e}(R.ObjectView)}.call(this),function(){var l,u,n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;u=R.makeElement,l=R.getBlockConfig,R.BlockView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.block=this.object,this.attributes=this.block.getAttributes()}return n(e,t),e.prototype.createNodes=function(){var t,e,n,i,r,o,a,s;if(r=[document.createComment("block")],this.block.isEmpty()?r.push(u("br")):(a=null!=(o=l(this.block.getLastAttribute()))?o.text:void 0,s=this.findOrCreateCachedChildView(R.TextView,this.block.text,{textConfig:a}),r.push.apply(r,s.getNodes()),this.shouldAddExtraNewlineElement()&&r.push(u("br"))),this.attributes.length)return r;for(t=u(R.config.blockAttributes["default"].tagName),e=0,n=r.length;e<n;e++)i=r[e],t.appendChild(i);return[t]},e.prototype.createContainerElement=function(t){var e,n;return e=this.attributes[t],n=l(e),u(n.tagName)},e.prototype.shouldAddExtraNewlineElement=function(){return/\n\n$/.test(this.block.toString())},e}(R.ObjectView)}.call(this),function(){var r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=R.defer,
s=R.makeElement,R.DocumentView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.element=this.options.element,this.elementStore=new R.ElementStore,this.setDocument(this.object)}var n,c,i;return o(e,t),e.render=function(t){var e,n;return(n=new this(t,{element:e=s("div")})).render(),n.sync(),e},e.prototype.setDocument=function(t){return t.isEqualTo(this.document)?void 0:this.document=this.object=t},e.prototype.render=function(){var t,e,r,n,i,o,a;if(this.childViews=[],this.shadowElement=s("div"),!this.document.isEmpty()){for(o=[],t=0,e=(i=R.ObjectGroup.groupObjects(this.document.getBlocks(),{asTree:!0})).length;t<e;t++)n=i[t],a=this.findOrCreateCachedChildView(R.BlockView,n),o.push(function(){var t,e,n,i;for(i=[],t=0,e=(n=a.getNodes()).length;t<e;t++)r=n[t],i.push(this.shadowElement.appendChild(r));return i}.call(this));return o}},e.prototype.isSynced=function(){return n(this.shadowElement,this.element)},e.prototype.sync=function(){var t;for(t=this.createDocumentFragmentForSync();this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()},e.prototype.didSync=function(){return this.elementStore.reset(c(this.element)),r((t=this,function(){return t.garbageCollectCachedViews()}));var t},e.prototype.createDocumentFragmentForSync=function(){var t,e,n,i,r,o,a,s,l,u;for(e=document.createDocumentFragment(),n=0,r=(s=this.shadowElement.childNodes).length;n<r;n++)a=s[n],e.appendChild(a.cloneNode(!0));for(i=0,o=(l=c(e)).length;i<o;i++)t=l[i],(u=this.elementStore.remove(t))&&t.parentNode.replaceChild(u,t);return e},c=function(t){return t.querySelectorAll("[data-trix-store-key]")},n=function(t,e){return i(t.innerHTML)===i(e.innerHTML)},i=function(t){return t.replace(/&nbsp;/g," ")},e}(R.ObjectView)}.call(this),function(){var n,i,r,o,a=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;r=R.handleEvent,o=R.innerElementIsActive,i=R.defer,n=R.AttachmentView.attachmentSelector,R.CompositionController=function(t){function e(t,e){this.element=t,this.composition=e,this.didClickAttachment=a(this.didClickAttachment,this),this.didBlur=a(this.didBlur,this),this.didFocus=a(this.didFocus,this),this.documentView=new R.DocumentView(this.composition.document,{element:this.element}),r("focus",{onElement:this.element,withCallback:this.didFocus}),r("blur",{onElement:this.element,withCallback:this.didBlur}),r("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),r("mousedown",{onElement:this.element,matchingSelector:n,withCallback:this.didClickAttachment}),r("click",{onElement:this.element,matchingSelector:"a"+n,preventDefault:!0})}return s(e,t),e.prototype.didFocus=function(){var t,e,n,i;return t=function(){var t;return i.focused?void 0:(i.focused=!0,null!=(t=i.delegate)&&"function"==typeof t.compositionControllerDidFocus?t.compositionControllerDidFocus():void 0)},null!=(e=null!=(n=(i=this).blurPromise)?n.then(t):void 0)?e:t()},e.prototype.didBlur=function(){return this.blurPromise=new Promise((n=this,function(e){return i(function(){var t;return o(n.element)||(n.focused=null)!=(t=n.delegate)&&"function"==typeof t.compositionControllerDidBlur&&t.compositionControllerDidBlur(),n.blurPromise=null,e()})}));var n},e.prototype.didClickAttachment=function(t,e){var n,i;return n=this.findAttachmentForElement(e),null!=(i=this.delegate)&&"function"==typeof i.compositionControllerDidSelectAttachment?i.compositionControllerDidSelectAttachment(n):void 0},e.prototype.getSerializableElement=function(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element},e.prototype.render=function(){var t,e,n;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&(null!=(t=this.delegate)&&"function"==typeof t.compositionControllerWillSyncDocumentView&&t.compositionControllerWillSyncDocumentView(),this.documentView.sync(),null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidSyncDocumentView&&e.compositionControllerDidSyncDocumentView()),null!=(n=this.delegate)&&"function"==typeof n.compositionControllerDidRender?n.compositionControllerDidRender():void 0},e.prototype.rerenderViewForObject=function(t){return this.invalidateViewForObject(t),this.render()},e.prototype.invalidateViewForObject=function(t){return this.documentView.invalidateViewForObject(t)},e.prototype.isViewCachingEnabled=function(){return this.documentView.isViewCachingEnabled()},e.prototype.enableViewCaching=function(){return this.documentView.enableViewCaching()},e.prototype.disableViewCaching=function(){return this.documentView.disableViewCaching()},e.prototype.refreshViewCache=function(){return this.documentView.garbageCollectCachedViews()},e.prototype.isEditingAttachment=function(){return null!=this.attachmentEditor},e.prototype.installAttachmentEditorForAttachment=function(t){var e,n,i;if((null!=(i=this.attachmentEditor)?i.attachment:void 0)!==t&&(n=this.documentView.findElementForObject(t)))return this.uninstallAttachmentEditor(),e=this.composition.document.getAttachmentPieceForAttachment(t),this.attachmentEditor=new R.AttachmentEditorController(e,n,this.element),this.attachmentEditor.delegate=this},e.prototype.uninstallAttachmentEditor=function(){var t;return null!=(t=this.attachmentEditor)?t.uninstall():void 0},e.prototype.editAttachmentCaption=function(){var t;return null!=(t=this.attachmentEditor)?t.editCaption():void 0},e.prototype.didUninstallAttachmentEditor=function(){return this.attachmentEditor=null,this.render()},e.prototype.attachmentEditorDidRequestUpdatingAttributesForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.updateAttributesForAttachment(t,e)},e.prototype.attachmentEditorDidRequestRemovingAttributeForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.removeAttributeForAttachment(t,e)},e.prototype.attachmentEditorDidRequestRemovalOfAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestRemovalOfAttachment?e.compositionControllerDidRequestRemovalOfAttachment(t):void 0},e.prototype.attachmentEditorDidRequestDeselectingAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestDeselectingAttachment?e.compositionControllerDidRequestDeselectingAttachment(t):void 0},e.prototype.canSyncDocumentView=function(){return!this.isEditingAttachment()},e.prototype.findAttachmentForElement=function(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))},e}(R.BasicObject)}.call(this),function(){var f,p,g,m=function(t,e){return function(){return t.apply(e,arguments)}},v=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;p=R.handleEvent,g=R.triggerEvent,f=R.findClosestElementFromNode,R.ToolbarController=function(t){function e(t){this.element=t,this.didKeyDownDialogInput=m(this.didKeyDownDialogInput,this),this.didClickDialogButton=m(this.didClickDialogButton,this),this.didClickAttributeButton=m(this.didClickAttributeButton,this),this.didClickActionButton=m(this.didClickActionButton,this),this.attributes={},this.actions={},this.resetDialogInputs(),p("mousedown",{onElement:this.element,matchingSelector:a,withCallback:this.didClickActionButton}),p("mousedown",{onElement:this.element,matchingSelector:s,withCallback:this.didClickAttributeButton}),p("click",{onElement:this.element,matchingSelector:d,preventDefault:!0}),p("click",{onElement:this.element,matchingSelector:i,withCallback:this.didClickDialogButton}),p("keydown",{onElement:this.element,matchingSelector:o,withCallback:this.didKeyDownDialogInput})}var a,n,s,i,o,r,l,c,u,h,d;return v(e,t),d=(s="[data-trix-attribute]")+", "+(a="[data-trix-action]"),n=(r="[data-trix-dialog]")+"[data-trix-active]",i=r+" [data-trix-method]",o=r+" [data-trix-input]",e.prototype.didClickActionButton=function(t,e){var n,i,r;return null!=(i=this.delegate)&&i.toolbarDidClickButton(),t.preventDefault(),n=l(e),this.getDialog(n)?this.toggleDialog(n):null!=(r=this.delegate)?r.toolbarDidInvokeAction(n):void 0},e.prototype.didClickAttributeButton=function(t,e){var n,i,r;return null!=(i=this.delegate)&&i.toolbarDidClickButton(),t.preventDefault(),n=c(e),this.getDialog(n)?this.toggleDialog(n):null!=(r=this.delegate)&&r.toolbarDidToggleAttribute(n),this.refreshAttributeButtons()},e.prototype.didClickDialogButton=function(t,e){var n;return n=f(e,{matchingSelector:r}),this[e.getAttribute("data-trix-method")].call(this,n)},e.prototype.didKeyDownDialogInput=function(t,e){var n,i;return 13===t.keyCode&&(t.preventDefault(),n=e.getAttribute("name"),i=this.getDialog(n),this.setAttribute(i)),27===t.keyCode?(t.preventDefault(),this.hideDialog()):void 0},e.prototype.updateActions=function(t){return this.actions=t,this.refreshActionButtons()},e.prototype.refreshActionButtons=function(){return this.eachActionButton((n=this,function(t,e){return t.disabled=!1===n.actions[e]}));var n},e.prototype.eachActionButton=function(t){var e,n,i,r,o;for(o=[],n=0,i=(r=this.element.querySelectorAll(a)).length;n<i;n++)e=r[n],o.push(t(e,l(e)));return o},e.prototype.updateAttributes=function(t){return this.attributes=t,this.refreshAttributeButtons()},e.prototype.refreshAttributeButtons=function(){return this.eachAttributeButton((n=this,function(t,e){return t.disabled=!1===n.attributes[e],n.attributes[e]||n.dialogIsVisible(e)?(t.setAttribute("data-trix-active",""),t.classList.add("trix-active")):(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"))}));var n},e.prototype.eachAttributeButton=function(t){var e,n,i,r,o;for(o=[],n=0,i=(r=this.element.querySelectorAll(s)).length;n<i;n++)e=r[n],o.push(t(e,c(e)));return o},e.prototype.applyKeyboardCommand=function(t){var e,n,i,r,o,a;for(r=JSON.stringify(t.sort()),i=0,o=(a=this.element.querySelectorAll("[data-trix-key]")).length;i<o;i++)if(n=(e=a[i]).getAttribute("data-trix-key").split("+"),JSON.stringify(n.sort())===r)return g("mousedown",{onElement:e}),!0;return!1},e.prototype.dialogIsVisible=function(t){var e;return(e=this.getDialog(t))?e.hasAttribute("data-trix-active"):void 0},e.prototype.toggleDialog=function(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)},e.prototype.showDialog=function(t){var e,n,i,r,o,a,s,l,u;for(this.hideDialog(),null!=(a=this.delegate)&&a.toolbarWillShowDialog(),(n=this.getDialog(t)).setAttribute("data-trix-active",""),n.classList.add("trix-active"),i=0,o=(s=n.querySelectorAll("input[disabled]")).length;i<o;i++)s[i].removeAttribute("disabled");return(e=c(n))&&(r=h(n,t))&&(r.value=null!=(l=this.attributes[e])?l:"",r.select()),null!=(u=this.delegate)?u.toolbarDidShowDialog(t):void 0},e.prototype.setAttribute=function(t){var e,n,i;return e=c(t),(n=h(t,e)).willValidate&&!n.checkValidity()?(n.setAttribute("data-trix-validate",""),n.classList.add("trix-validate"),n.focus()):(null!=(i=this.delegate)&&i.toolbarDidUpdateAttribute(e,n.value),this.hideDialog())},e.prototype.removeAttribute=function(t){var e,n;return e=c(t),null!=(n=this.delegate)&&n.toolbarDidRemoveAttribute(e),this.hideDialog()},e.prototype.hideDialog=function(){var t,e;return(t=this.element.querySelector(n))?(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),null!=(e=this.delegate)?e.toolbarDidHideDialog(u(t)):void 0):void 0},e.prototype.resetDialogInputs=function(){var t,e,n,i,r;for(r=[],t=0,n=(i=this.element.querySelectorAll(o)).length;t<n;t++)(e=i[t]).setAttribute("disabled","disabled"),e.removeAttribute("data-trix-validate"),r.push(e.classList.remove("trix-validate"));return r},e.prototype.getDialog=function(t){return this.element.querySelector("[data-trix-dialog="+t+"]")},h=function(t,e){return null==e&&(e=c(t)),t.querySelector("[data-trix-input][name='"+e+"']")},l=function(t){return t.getAttribute("data-trix-action")},c=function(t){var e;return null!=(e=t.getAttribute("data-trix-attribute"))?e:t.getAttribute("data-trix-dialog-attribute")},u=function(t){return t.getAttribute("data-trix-dialog")},e}(R.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.ImagePreloadOperation=function(t){function e(t){this.url=t}return n(e,t),e.prototype.perform=function(t){var e,n;return(e=new Image).onload=(n=this,function(){return e.width=n.width=e.naturalWidth,e.height=n.height=e.naturalHeight,t(!0,e)}),e.onerror=function(){return t(!1)},e.src=this.url},e}(R.Operation)}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Attachment=function(t){function e(t){null==t&&(t={}),this.releaseFile=n(this.releaseFile,this),e.__super__.constructor.apply(this,arguments),this.attributes=R.Hash.box(t),this.didChangeAttributes()}return i(e,t),e.previewablePattern=/^image(\/(gif|png|jpe?g)|$)/,e.attachmentForFile=function(t){var e;return(e=new this(this.attributesForFile(t))).setFile(t),e},e.attributesForFile=function(t){return new R.Hash({filename:t.name,filesize:t.size,contentType:t.type})},e.fromJSON=function(t){return new this(t)},e.prototype.getAttribute=function(t){return this.attributes.get(t)},e.prototype.hasAttribute=function(t){return this.attributes.has(t)},e.prototype.getAttributes=function(){return this.attributes.toObject()},e.prototype.setAttributes=function(t){var e,n,i;return null==t&&(t={}),e=this.attributes.merge(t),this.attributes.isEqualTo(e)?void 0:(this.attributes=e,this.didChangeAttributes(),null!=(n=this.previewDelegate)&&"function"==typeof n.attachmentDidChangeAttributes&&n.attachmentDidChangeAttributes(this),null!=(i=this.delegate)&&"function"==typeof i.attachmentDidChangeAttributes?i.attachmentDidChangeAttributes(this):void 0)},e.prototype.didChangeAttributes=function(){return this.isPreviewable()?this.preloadURL():void 0},e.prototype.isPending=function(){return null!=this.file&&!(this.getURL()||this.getHref())},e.prototype.isPreviewable=function(){return this.attributes.has("previewable")?this.attributes.get("previewable"):this.constructor.previewablePattern.test(this.getContentType())},e.prototype.getType=function(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"},e.prototype.getURL=function(){return this.attributes.get("url")},e.prototype.getHref=function(){return this.attributes.get("href")},e.prototype.getFilename=function(){var t;return null!=(t=this.attributes.get("filename"))?t:""},e.prototype.getFilesize=function(){return this.attributes.get("filesize")},e.prototype.getFormattedFilesize=function(){var t;return"number"==typeof(t=this.attributes.get("filesize"))?R.config.fileSize.formatter(t):""},e.prototype.getExtension=function(){var t;return null!=(t=this.getFilename().match(/\.(\w+)$/))?t[1].toLowerCase():void 0},e.prototype.getContentType=function(){return this.attributes.get("contentType")},e.prototype.hasContent=function(){return this.attributes.has("content")},e.prototype.getContent=function(){return this.attributes.get("content")},e.prototype.getWidth=function(){return this.attributes.get("width")},e.prototype.getHeight=function(){return this.attributes.get("height")},e.prototype.getFile=function(){return this.file},e.prototype.setFile=function(t){return this.file=t,this.isPreviewable()?this.preloadFile():void 0},e.prototype.releaseFile=function(){return this.releasePreloadedFile(),this.file=null},e.prototype.getUploadProgress=function(){var t;return null!=(t=this.uploadProgress)?t:0},e.prototype.setUploadProgress=function(t){var e;return this.uploadProgress!==t?(this.uploadProgress=t,null!=(e=this.uploadProgressDelegate)&&"function"==typeof e.attachmentDidChangeUploadProgress?e.attachmentDidChangeUploadProgress(this):void 0):void 0},e.prototype.toJSON=function(){return this.getAttributes()},e.prototype.getCacheKey=function(){return[e.__super__.getCacheKey.apply(this,arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")},e.prototype.getPreviewURL=function(){return this.previewURL||this.preloadingURL},e.prototype.setPreviewURL=function(t){var e,n;return t!==this.getPreviewURL()?(this.previewURL=t,null!=(e=this.previewDelegate)&&"function"==typeof e.attachmentDidChangeAttributes&&e.attachmentDidChangeAttributes(this),null!=(n=this.delegate)&&"function"==typeof n.attachmentDidChangePreviewURL?n.attachmentDidChangePreviewURL(this):void 0):void 0},e.prototype.preloadURL=function(){return this.preload(this.getURL(),this.releaseFile)},e.prototype.preloadFile=function(){return this.file?(this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)):void 0},e.prototype.releasePreloadedFile=function(){return this.fileObjectURL?(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null):void 0},e.prototype.preload=function(i,r){var o;return i&&i!==this.getPreviewURL()?(this.preloadingURL=i,new R.ImagePreloadOperation(i).then((o=this,function(t){var e,n;return n=t.width,e=t.height,o.setAttributes({width:n,height:e}),o.preloadingURL=null,o.setPreviewURL(i),"function"==typeof r?r():void 0}))):void 0},e}(R.Object)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Piece=function(t){function n(t,e){null==e&&(e={}),n.__super__.constructor.apply(this,arguments),this.attributes=R.Hash.box(e)}return e(n,t),n.types={},n.registerType=function(t,e){return e.type=t,this.types[t]=e},n.fromJSON=function(t){var e;return(e=this.types[t.type])?e.fromJSON(t):void 0},n.prototype.copyWithAttributes=function(t){return new this.constructor(this.getValue(),t)},n.prototype.copyWithAdditionalAttributes=function(t){return this.copyWithAttributes(this.attributes.merge(t))},n.prototype.copyWithoutAttribute=function(t){return this.copyWithAttributes(this.attributes.remove(t))},n.prototype.copy=function(){return this.copyWithAttributes(this.attributes)},n.prototype.getAttribute=function(t){return this.attributes.get(t)},n.prototype.getAttributesHash=function(){return this.attributes},n.prototype.getAttributes=function(){return this.attributes.toObject()},n.prototype.getCommonAttributes=function(){var e,n,t;return(t=pieceList.getPieceAtIndex(0))?(e=t.attributes,n=e.getKeys(),pieceList.eachPiece(function(t){return n=e.getKeysCommonToHash(t.attributes),e=e.slice(n)}),e.toObject()):{}},n.prototype.hasAttribute=function(t){return this.attributes.has(t)},n.prototype.hasSameStringValueAsPiece=function(t){return null!=t&&this.toString()===t.toString()},n.prototype.hasSameAttributesAsPiece=function(t){return null!=t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))},n.prototype.isBlockBreak=function(){return!1},n.prototype.isEqualTo=function(t){return n.__super__.isEqualTo.apply(this,arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)},n.prototype.isEmpty=function(){return 0===this.length},n.prototype.isSerializable=function(){return!0},n.prototype.toJSON=function(){return{type:this.constructor.type,attributes:this.getAttributes()}},n.prototype.contentsForInspection=function(){return{type:this.constructor.type,attributes:this.attributes.inspect()}},n.prototype.canBeGrouped=function(){return this.hasAttribute("href")},n.prototype.canBeGroupedWith=function(t){return this.getAttribute("href")===t.getAttribute("href")},n.prototype.getLength=function(){return this.length},n.prototype.canBeConsolidatedWith=function(){return!1},n}(R.Object)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Piece.registerType("attachment",R.AttachmentPiece=function(t){function n(t){this.attachment=t,n.__super__.constructor.apply(this,arguments),this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href")}return e(n,t),n.fromJSON=function(t){return new this(R.Attachment.fromJSON(t.attachment),t.attributes)},n.prototype.ensureAttachmentExclusivelyHasAttribute=function(t){return this.hasAttribute(t)&&this.attachment.hasAttribute(t)?this.attributes=this.attributes.remove(t):void 0},n.prototype.getValue=function(){return this.attachment},n.prototype.isSerializable=function(){return!this.attachment.isPending()},n.prototype.getCaption=function(){var t;return null!=(t=this.attributes.get("caption"))?t:""},n.prototype.getAttributesForAttachment=function(){return this.attributes.slice(["caption"])},n.prototype.canBeGrouped=function(){return n.__super__.canBeGrouped.apply(this,arguments)&&!this.attachment.hasAttribute("href")},n.prototype.isEqualTo=function(t){var e;return n.__super__.isEqualTo.apply(this,arguments)&&this.attachment.id===(null!=t&&null!=(e=t.attachment)?e.id:void 0)},n.prototype.toString=function(){return R.OBJECT_REPLACEMENT_CHARACTER},n.prototype.toJSON=function(){var t;return(t=n.__super__.toJSON.apply(this,arguments)).attachment=this.attachment,t},n.prototype.getCacheKey=function(){return[n.__super__.getCacheKey.apply(this,arguments),this.attachment.getCacheKey()].join("/")},n.prototype.toConsole=function(){return JSON.stringify(this.toString())},n}(R.Piece))}.call(this),function(){var n,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;n=R.normalizeNewlines,R.Piece.registerType("string",R.StringPiece=function(t){function e(t){e.__super__.constructor.apply(this,arguments),this.string=n(t),this.length=this.string.length}return i(e,t),e.fromJSON=function(t){return new this(t.string,t.attributes)},e.prototype.getValue=function(){return this.string},e.prototype.toString=function(){return this.string.toString()},e.prototype.isBlockBreak=function(){return"\n"===this.toString()&&!0===this.getAttribute("blockBreak")},e.prototype.toJSON=function(){var t;return(t=e.__super__.toJSON.apply(this,arguments)).string=this.string,t},e.prototype.canBeConsolidatedWith=function(t){return null!=t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)},e.prototype.consolidateWith=function(t){return new this.constructor(this.toString()+t.toString(),this.attributes)},e.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.length?(e=this,n=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),n=new this.constructor(this.string.slice(t),this.attributes)),[e,n]},e.prototype.toConsole=function(){var t;return 15<(t=this.string).length&&(t=t.slice(0,14)+"\u2026"),JSON.stringify(t.toString())},e}(R.Piece))}.call(this),function(){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,l=[].slice;i=R.spliceArray,R.SplittableList=function(t){function e(t){null==t&&(t=[]),e.__super__.constructor.apply(this,arguments),this.objects=t.slice(0),this.length=this.objects.length}var a,n,s;return r(e,t),e.box=function(t){return t instanceof this?t:new this(t)},e.prototype.indexOf=function(t){return this.objects.indexOf(t)},e.prototype.splice=function(){var t;return t=1<=arguments.length?l.call(arguments,0):[],new this.constructor(i.apply(null,[this.objects].concat(l.call(t))))},e.prototype.eachObject=function(t){var e,n,i,r,o,a;for(a=[],n=e=0,i=(o=this.objects).length;e<i;n=++e)r=o[n],a.push(t(r,n));return a},e.prototype.insertObjectAtIndex=function(t,e){return this.splice(e,0,t)},e.prototype.insertSplittableListAtIndex=function(t,e){return this.splice.apply(this,[e,0].concat(l.call(t.objects)))},e.prototype.insertSplittableListAtPosition=function(t,e){var n,i,r;return i=(r=this.splitObjectAtPosition(e))[0],n=r[1],new this.constructor(i).insertSplittableListAtIndex(t,n)},e.prototype.editObjectAtIndex=function(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)},e.prototype.replaceObjectAtIndex=function(t,e){return this.splice(e,1,t)},e.prototype.removeObjectAtIndex=function(t){return this.splice(t,1)},e.prototype.getObjectAtIndex=function(t){return this.objects[t]},e.prototype.getSplittableListInRange=function(t){var e,n,i,r;return n=(i=this.splitObjectsAtRange(t))[0],e=i[1],r=i[2],new this.constructor(n.slice(e,r+1))},e.prototype.selectSplittableList=function(r){var o,t;return t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.objects).length;t<e;t++)o=n[t],r(o)&&i.push(o);return i}.call(this),new this.constructor(t)},e.prototype.removeObjectsInRange=function(t){var e,n,i,r;return n=(i=this.splitObjectsAtRange(t))[0],e=i[1],r=i[2],new this.constructor(n).splice(e,r-e+1)},e.prototype.transformObjectsInRange=function(t,i){var r,o,a,s,e,l,n;return e=this.splitObjectsAtRange(t),s=e[0],o=e[1],l=e[2],n=function(){var t,e,n;for(n=[],r=t=0,e=s.length;t<e;r=++t)a=s[r],n.push(o<=r&&r<=l?i(a):a);return n}(),new this.constructor(n)},e.prototype.splitObjectsAtRange=function(t){var e,n,i,r,o;return n=(r=this.splitObjectAtPosition(s(t)))[0],e=r[1],i=r[2],[n=(o=new this.constructor(n).splitObjectAtPosition(a(t)+i))[0],e,o[1]-1]},e.prototype.getObjectAtPosition=function(t){var e,n;return e=(n=this.findIndexAndOffsetAtPosition(t)).index,n.offset,this.objects[e]},e.prototype.splitObjectAtPosition=function(t){var e,n,i,r,o,a,s,l,u;return e=(o=this.findIndexAndOffsetAtPosition(t)).index,r=o.offset,i=this.objects.slice(0),null!=e?0===r?(l=e,u=0):(n=(a=this.getObjectAtIndex(e).splitAtOffset(r))[0],s=a[1],i.splice(e,1,n,s),l=e+1,u=n.getLength()-r):(l=i.length,u=0),[i,l,u]},e.prototype.consolidate=function(){var t,e,n,i,r,o;for(i=[],r=this.objects[0],t=0,e=(o=this.objects.slice(1)).length;t<e;t++)n=o[t],("function"==typeof r.canBeConsolidatedWith?r.canBeConsolidatedWith(n):void 0)?r=r.consolidateWith(n):(i.push(r),r=n);return null!=r&&i.push(r),new this.constructor(i)},e.prototype.consolidateFromIndexToIndex=function(t,e){var n,i;return i=this.objects.slice(0).slice(t,e+1),n=new this.constructor(i).consolidate().toArray(),this.splice.apply(this,[t,i.length].concat(l.call(n)))},e.prototype.findIndexAndOffsetAtPosition=function(t){var e,n,i,r,o,a;for(i=n=e=0,r=(a=this.objects).length;n<r;i=++n){if(o=e+a[i].getLength(),e<=t&&t<o)return{index:i,offset:t-e};e=o}return{index:null,offset:null}},e.prototype.findPositionAtIndexAndOffset=function(t,e){var n,i,r,o,a,s;for(n=i=a=0,r=(s=this.objects).length;i<r;n=++i)if(o=s[n],n<t)a+=o.getLength();else if(n===t){a+=e;break}return a},e.prototype.getEndPosition=function(){var i,r;return null!=this.endPosition?this.endPosition:this.endPosition=function(){var t,e,n;for(t=r=0,e=(n=this.objects).length;t<e;t++)i=n[t],r+=i.getLength();return r}.call(this)},e.prototype.toString=function(){return this.objects.join("")},e.prototype.toArray=function(){return this.objects.slice(0)},e.prototype.toJSON=function(){return this.toArray()},e.prototype.isEqualTo=function(t){return e.__super__.isEqualTo.apply(this,arguments)||n(this.objects,null!=t?t.objects:void 0)},n=function(t,e){var n,i,r,o,a;if(null==e&&(e=[]),t.length!==e.length)return!1;for(a=!0,i=n=0,r=t.length;n<r;i=++n)o=t[i],a&&!o.isEqualTo(e[i])&&(a=!1);return a},e.prototype.contentsForInspection=function(){var r;return{objects:"["+function(){var t,e,n,i;for(i=[],t=0,e=(n=this.objects).length;t<e;t++)r=n[t],i.push(r.inspect());return i}.call(this).join(", ")+"]"}},s=function(t){return t[0]},a=function(t){return t[1]},e}(R.Object)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Text=function(t){function n(i){var r;null==i&&(i=[]),n.__super__.constructor.apply(this,arguments),this.pieceList=new R.SplittableList(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)(r=i[t]).isEmpty()||n.push(r);return n}())}return e(n,t),n.textForAttachmentWithAttributes=function(t,e){return new this([new R.AttachmentPiece(t,e)])},n.textForStringWithAttributes=function(t,e){return new this([new R.StringPiece(t,e)])},n.fromJSON=function(i){var r;return new this(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(R.Piece.fromJSON(r));return n}())},n.prototype.copy=function(){return this.copyWithPieceList(this.pieceList)},n.prototype.copyWithPieceList=function(t){return new this.constructor(t.consolidate().toArray())},n.prototype.copyUsingObjectMap=function(o){var a,t;return t=function(){var t,e,n,i,r;for(r=[],t=0,e=(n=this.getPieces()).length;t<e;t++)a=n[t],r.push(null!=(i=o.find(a))?i:a);return r}.call(this),new this.constructor(t)},n.prototype.appendText=function(t){return this.insertTextAtPosition(t,this.getLength())},n.prototype.insertTextAtPosition=function(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))},n.prototype.removeTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))},n.prototype.replaceTextAtRange=function(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])},n.prototype.moveTextFromRangeToPosition=function(t,e){var n,i;if(!(t[0]<=e&&e<=t[1]))return n=(i=this.getTextAtRange(t)).getLength(),t[0]<e&&(e-=n),this.removeTextAtRange(t).insertTextAtPosition(i,e)},n.prototype.addAttributeAtRange=function(t,e,n){var i;return(i={})[t]=e,this.addAttributesAtRange(i,n)},n.prototype.addAttributesAtRange=function(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,function(t){return t.copyWithAdditionalAttributes(e)}))},n.prototype.removeAttributeAtRange=function(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,function(t){return t.copyWithoutAttribute(e)}))},n.prototype.setAttributesAtRange=function(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,function(t){return t.copyWithAttributes(e)}))},n.prototype.getAttributesAtPosition=function(t){var e,n;return null!=(e=null!=(n=this.pieceList.getObjectAtPosition(t))?n.getAttributes():void 0)?e:{}},n.prototype.getCommonAttributes=function(){var t,r;return t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.pieceList.toArray()).length;t<e;t++)r=n[t],i.push(r.getAttributes());return i}.call(this),R.Hash.fromCommonAttributesOfObjects(t).toObject()},n.prototype.getCommonAttributesAtRange=function(t){var e;return null!=(e=this.getTextAtRange(t).getCommonAttributes())?e:{}},n.prototype.getExpandedRangeForAttributeAtOffset=function(t,e){var n,i,r;for(n=r=e,i=this.getLength();0<n&&this.getCommonAttributesAtRange([n-1,r])[t];)n--;for(;r<i&&this.getCommonAttributesAtRange([e,r+1])[t];)r++;return[n,r]},n.prototype.getTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))},n.prototype.getStringAtRange=function(t){return this.pieceList.getSplittableListInRange(t).toString()},n.prototype.getStringAtPosition=function(t){return this.getStringAtRange([t,t+1])},n.prototype.startsWithString=function(t){return this.getStringAtRange([0,t.length])===t},n.prototype.endsWithString=function(t){var e;return e=this.getLength(),this.getStringAtRange([e-t.length,e])===t},n.prototype.getAttachmentPieces=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.pieceList.toArray()).length;t<e;t++)null!=(n=i[t]).attachment&&r.push(n);return r},n.prototype.getAttachments=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.getAttachmentPieces()).length;t<e;t++)n=i[t],r.push(n.attachment);return r},n.prototype.getAttachmentAndPositionById=function(t){var e,n,i,r,o,a;for(e=r=0,n=(o=this.pieceList.toArray()).length;e<n;e++){if((null!=(a=(i=o[e]).attachment)?a.id:void 0)===t)return{attachment:i.attachment,position:r};r+=i.length}return{attachment:null,position:null}},n.prototype.getAttachmentById=function(t){var e,n;return e=(
n=this.getAttachmentAndPositionById(t)).attachment,n.position,e},n.prototype.getRangeOfAttachment=function(t){var e,n;return t=(n=this.getAttachmentAndPositionById(t.id)).attachment,e=n.position,null!=t?[e,e+1]:void 0},n.prototype.updateAttributesForAttachment=function(t,e){var n;return(n=this.getRangeOfAttachment(e))?this.addAttributesAtRange(t,n):this},n.prototype.getLength=function(){return this.pieceList.getEndPosition()},n.prototype.isEmpty=function(){return 0===this.getLength()},n.prototype.isEqualTo=function(t){var e;return n.__super__.isEqualTo.apply(this,arguments)||(null!=t&&null!=(e=t.pieceList)?e.isEqualTo(this.pieceList):void 0)},n.prototype.isBlockBreak=function(){return 1===this.getLength()&&this.pieceList.getObjectAtIndex(0).isBlockBreak()},n.prototype.eachPiece=function(t){return this.pieceList.eachObject(t)},n.prototype.getPieces=function(){return this.pieceList.toArray()},n.prototype.getPieceAtPosition=function(t){return this.pieceList.getObjectAtPosition(t)},n.prototype.contentsForInspection=function(){return{pieceList:this.pieceList.inspect()}},n.prototype.toSerializableText=function(){var t;return t=this.pieceList.selectSplittableList(function(t){return t.isSerializable()}),this.copyWithPieceList(t)},n.prototype.toString=function(){return this.pieceList.toString()},n.prototype.toJSON=function(){return this.pieceList.toJSON()},n.prototype.toConsole=function(){var r;return JSON.stringify(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.pieceList.toArray()).length;t<e;t++)r=n[t],i.push(JSON.parse(r.toConsole()));return i}.call(this))},n}(R.Object)}.call(this),function(){var h,d,f,p,g=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,m=[].slice,v=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};h=R.arraysAreEqual,p=R.spliceArray,d=R.getBlockConfig,R.getBlockAttributeNames,f=R.getListAttributeNames,R.Block=function(t){function n(t,e){null==t&&(t=new R.Text),null==e&&(e=[]),n.__super__.constructor.apply(this,arguments),this.text=i(t),this.attributes=e}var e,i,r,o,a,s,l,u,c;return g(n,t),n.fromJSON=function(t){return new this(R.Text.fromJSON(t.text),t.attributes)},n.prototype.isEmpty=function(){return this.text.isBlockBreak()},n.prototype.isEqualTo=function(t){return n.__super__.isEqualTo.apply(this,arguments)||this.text.isEqualTo(null!=t?t.text:void 0)&&h(this.attributes,null!=t?t.attributes:void 0)},n.prototype.copyWithText=function(t){return new this.constructor(t,this.attributes)},n.prototype.copyWithoutText=function(){return this.copyWithText(null)},n.prototype.copyWithAttributes=function(t){return new this.constructor(this.text,t)},n.prototype.copyUsingObjectMap=function(t){var e;return this.copyWithText((e=t.find(this.text))?e:this.text.copyUsingObjectMap(t))},n.prototype.addAttribute=function(t){var e;return e=this.attributes.concat(o(t)),this.copyWithAttributes(e)},n.prototype.removeAttribute=function(t){var e,n;return n=d(t).listAttribute,e=s(s(this.attributes,t),n),this.copyWithAttributes(e)},n.prototype.removeLastAttribute=function(){return this.removeAttribute(this.getLastAttribute())},n.prototype.getLastAttribute=function(){return a(this.attributes)},n.prototype.getAttributes=function(){return this.attributes.slice(0)},n.prototype.getAttributeLevel=function(){return this.attributes.length},n.prototype.getAttributeAtLevel=function(t){return this.attributes[t-1]},n.prototype.hasAttributes=function(){return 0<this.getAttributeLevel()},n.prototype.getLastNestableAttribute=function(){return a(this.getNestableAttributes())},n.prototype.getNestableAttributes=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.attributes).length;e<n;e++)t=i[e],d(t).nestable&&r.push(t);return r},n.prototype.getNestingLevel=function(){return this.getNestableAttributes().length},n.prototype.decreaseNestingLevel=function(){var t;return(t=this.getLastNestableAttribute())?this.removeAttribute(t):this},n.prototype.increaseNestingLevel=function(){var t,e,n;return(t=this.getLastNestableAttribute())?(n=this.attributes.lastIndexOf(t),e=p.apply(null,[this.attributes,n+1,0].concat(m.call(o(t)))),this.copyWithAttributes(e)):this},n.prototype.getListItemAttributes=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.attributes).length;e<n;e++)t=i[e],d(t).listAttribute&&r.push(t);return r},n.prototype.isListItem=function(){var t;return null!=(t=d(this.getLastAttribute()))?t.listAttribute:void 0},n.prototype.isTerminalBlock=function(){var t;return null!=(t=d(this.getLastAttribute()))?t.terminal:void 0},n.prototype.breaksOnReturn=function(){var t;return null!=(t=d(this.getLastAttribute()))?t.breakOnReturn:void 0},n.prototype.findLineBreakInDirectionFromPosition=function(t,e){var n,i;return i=this.toString(),-1!==(n=function(){switch(t){case"forward":return i.indexOf("\n",e);case"backward":return i.slice(0,e).lastIndexOf("\n")}}())?n:void 0},n.prototype.contentsForInspection=function(){return{text:this.text.inspect(),attributes:this.attributes}},n.prototype.toString=function(){return this.text.toString()},n.prototype.toJSON=function(){return{text:this.text,attributes:this.attributes}},n.prototype.getLength=function(){return this.text.getLength()},n.prototype.canBeConsolidatedWith=function(t){return!this.hasAttributes()&&!t.hasAttributes()},n.prototype.consolidateWith=function(t){var e,n;return e=R.Text.textForStringWithAttributes("\n"),n=this.getTextWithoutBlockBreak().appendText(e),this.copyWithText(n.appendText(t.text))},n.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.getLength()?(e=this,n=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),n=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,n]},n.prototype.getBlockBreakPosition=function(){return this.text.getLength()-1},n.prototype.getTextWithoutBlockBreak=function(){return l(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()},n.prototype.canBeGrouped=function(t){return this.attributes[t]},n.prototype.canBeGroupedWith=function(t,e){var n,i,r,o;return i=(r=t.getAttributes())[e],(n=this.attributes[e])===i&&!(!1===d(n).group&&(o=r[e+1],v.call(f(),o)<0))},i=function(t){return t=c(t),e(t)},c=function(t){var e,i,n,r,o,a;return r=!1,a=t.getPieces(),i=2<=a.length?m.call(a,0,e=a.length-1):(e=0,[]),null==(n=a[e++])?t:(i=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)(o=i[t]).isBlockBreak()?(r=!0,n.push(u(o))):n.push(o);return n}(),r?new R.Text(m.call(i).concat([n])):t)},r=R.Text.textForStringWithAttributes("\n",{blockBreak:!0}),e=function(t){return l(t)?t:t.appendText(r)},l=function(t){var e;return 0!==(e=t.getLength())&&t.getTextAtRange([e-1,e]).isBlockBreak()},u=function(t){return t.copyWithoutAttribute("blockBreak")},o=function(t){var e;return null!=(e=d(t).listAttribute)?[e,t]:[t]},a=function(t){return t.slice(-1)[0]},s=function(t,e){var n;return-1===(n=t.lastIndexOf(e))?t:p(t,n,1)},n}(R.Object)}.call(this),function(){var r,a,s,l=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,u=[].slice,c=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};a=R.tagName,s=R.walkTree,r=R.nodeIsAttachmentElement,R.HTMLSanitizer=function(t){function e(t,e){this.allowedAttributes=(null!=e?e:{}).allowedAttributes,null==this.allowedAttributes&&(this.allowedAttributes=n),this.body=i(t)}var n,i,o;return l(e,t),n="style href src width height class".split(" "),e.sanitize=function(t,e){var n;return(n=new this(t,e)).sanitize(),n},e.prototype.sanitize=function(){return this.sanitizeElements()},e.prototype.getHTML=function(){return this.body.innerHTML},e.prototype.getBody=function(){return this.body},e.prototype.sanitizeElements=function(){var t,e,n,i,r;for(r=s(this.body),i=[];r.nextNode();)switch(n=r.currentNode,n.nodeType){case Node.ELEMENT_NODE:o(n)?i.push(n):this.sanitizeElement(n);break;case Node.COMMENT_NODE:i.push(n)}for(t=0,e=i.length;t<e;t++)(n=i[t]).parentNode.removeChild(n);return this.body},e.prototype.sanitizeElement=function(t){var e,n,i,r;for(e=0,n=(r=u.call(t.attributes)).length;e<n;e++)i=r[e].name,0<=c.call(this.allowedAttributes,i)||0===i.indexOf("data-trix")||t.removeAttribute(i);return t},o=function(t){return(null!=t?t.nodeType:void 0)!==Node.ELEMENT_NODE||r(t)?void 0:"script"===a(t)||"false"===t.getAttribute("data-trix-serialize")},i=function(t){var e,n,i,r,o;for(null==t&&(t=""),t=t.replace(/<\/html[^>]*>[^]*$/i,"</html>"),(e=document.implementation.createHTMLDocument("")).documentElement.innerHTML=t,i=0,r=(o=e.head.querySelectorAll("style")).length;i<r;i++)n=o[i],e.body.appendChild(n);return e.body},e}(R.BasicObject)}.call(this),function(){var p,g,m,v,y,b,w,T,S,E,A,x=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,C=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};p=R.arraysAreEqual,b=R.makeElement,E=R.tagName,y=R.getBlockTagNames,A=R.walkTree,v=R.findClosestElementFromNode,m=R.elementContainsNode,w=R.nodeIsAttachmentElement,T=R.normalizeSpaces,g=R.breakableWhitespacePattern,S=R.squishBreakableWhitespace,R.HTMLParser=function(t){function e(t,e){this.html=t,this.referenceElement=(null!=e?e:{}).referenceElement,this.blocks=[],this.blockElements=[],this.processedElements=[]}var i,r,a,o,s,l,u,n,c,h,d,f;return x(e,t),e.parse=function(t,e){var n;return(n=new this(t,e)).parse(),n},e.prototype.getDocument=function(){return R.Document.fromJSON(this.blocks)},e.prototype.parse=function(){var t,e;try{for(this.createHiddenContainer(),t=R.HTMLSanitizer.sanitize(this.html).getHTML(),this.containerElement.innerHTML=t,e=A(this.containerElement,{usingFilter:n});e.nextNode();)this.processNode(e.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}},e.prototype.createHiddenContainer=function(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=b({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))},e.prototype.removeHiddenContainer=function(){return this.containerElement.parentNode.removeChild(this.containerElement)},n=function(t){return"style"===E(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},e.prototype.processNode=function(t){switch(t.nodeType){case Node.TEXT_NODE:return this.processTextNode(t);case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}},e.prototype.appendBlockForElement=function(t){var e,n,i,r;if(i=this.isBlockElement(t),n=m(this.currentBlockElement,t),i&&!this.isBlockElement(t.firstChild)){if(!(this.isInsignificantTextNode(t.firstChild)&&this.isBlockElement(t.firstElementChild)||(e=this.getBlockAttributes(t),n&&p(e,this.currentBlock.attributes))))return this.currentBlock=this.appendBlockForAttributesWithElement(e,t),this.currentBlockElement=t}else if(this.currentBlockElement&&!n&&!i)return(r=this.findParentBlockElement(t))?this.appendBlockForElement(r):(this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null)},e.prototype.findParentBlockElement=function(t){var e;for(e=t.parentElement;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&0<=C.call(this.blockElements,e))return e;e=e.parentElement}return null},e.prototype.processTextNode=function(t){var e,n;return this.isInsignificantTextNode(t)?void 0:(n=t.data,r(t.parentNode)||(n=S(n),d(null!=(e=t.previousSibling)?e.textContent:void 0)&&(n=l(n))),this.appendStringWithAttributes(n,this.getTextAttributes(t.parentNode)))},e.prototype.processElement=function(t){var e,n,i,r,o;if(w(t))return e=a(t),Object.keys(e).length&&(r=this.getTextAttributes(t),this.appendAttachmentWithAttributes(e,r),t.innerHTML=""),this.processedElements.push(t);switch(E(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes("\n",this.getTextAttributes(t)),this.processedElements.push(t);case"img":for(n in e={url:t.getAttribute("src"),contentType:"image"},i=s(t))o=i[n],e[n]=o;return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes("\n");break;case"td":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes(" | ")}},e.prototype.appendBlockForAttributesWithElement=function(t,e){var n;return this.blockElements.push(e),n=i(t),this.blocks.push(n),n},e.prototype.appendEmptyBlock=function(){return this.appendBlockForAttributesWithElement([],null)},e.prototype.appendStringWithAttributes=function(t,e){return this.appendPiece(h(t,e))},e.prototype.appendAttachmentWithAttributes=function(t,e){return this.appendPiece(c(t,e))},e.prototype.appendPiece=function(t){return 0===this.blocks.length&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)},e.prototype.appendStringToTextAtIndex=function(t,e){var n,i;return"string"===(null!=(n=(i=this.blocks[e].text)[i.length-1])?n.type:void 0)?n.string+=t:i.push(h(t))},e.prototype.prependStringToTextAtIndex=function(t,e){var n,i;return"string"===(null!=(n=(i=this.blocks[e].text)[0])?n.type:void 0)?n.string=t+n.string:i.unshift(h(t))},h=function(t,e){var n;return null==e&&(e={}),n="string",{string:t=T(t),attributes:e,type:n}},c=function(t,e){return null==e&&(e={}),{attachment:t,attributes:e,type:"attachment"}},i=function(t){return null==t&&(t={}),{text:[],attributes:t}},e.prototype.getTextAttributes=function(t){var e,n,i,r,o,a,s,l,u,c,h,d,f;for(e in i={},c=R.config.textAttributes)if((o=c[e]).tagName&&v(t,{matchingSelector:o.tagName,untilNode:this.containerElement}))i[e]=!0;else if(o.parser){if(f=o.parser(t)){for(n=!1,a=0,u=(h=this.findBlockElementAncestors(t)).length;a<u;a++)if(r=h[a],o.parser(r)===f){n=!0;break}n||(i[e]=f)}}else o.styleProperty&&(f=t.style[o.styleProperty])&&(i[e]=f);if(w(t)&&(s=t.getAttribute("data-trix-attributes")))for(l in d=JSON.parse(s))f=d[l],i[l]=f;return i},e.prototype.getBlockAttributes=function(t){var e,n,i,r;for(n=[];t&&t!==this.containerElement;){for(e in r=R.config.blockAttributes)!1!==(i=r[e]).parse&&E(t)===i.tagName&&(("function"==typeof i.test?i.test(t):void 0)||!i.test)&&(n.push(e),i.listAttribute&&n.push(i.listAttribute));t=t.parentNode}return n.reverse()},e.prototype.findBlockElementAncestors=function(t){var e,n;for(e=[];t&&t!==this.containerElement;)n=E(t),0<=C.call(y(),n)&&e.push(t),t=t.parentNode;return e},a=function(t){return JSON.parse(t.getAttribute("data-trix-attachment"))},s=function(t){var e,n,i;return i=t.getAttribute("width"),n=t.getAttribute("height"),e={},i&&(e.width=parseInt(i,10)),n&&(e.height=parseInt(n,10)),e},e.prototype.isBlockElement=function(t){var e;if((null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE&&!v(t,{matchingSelector:"td",untilNode:this.containerElement}))return e=E(t),0<=C.call(y(),e)||"block"===window.getComputedStyle(t).display},e.prototype.isInsignificantTextNode=function(t){var e,n,i;if((null!=t?t.nodeType:void 0)===Node.TEXT_NODE&&f(t.data)&&(n=t.parentNode,i=t.previousSibling,e=t.nextSibling,(!u(n.previousSibling)||this.isBlockElement(n.previousSibling))&&!r(n)))return!i||this.isBlockElement(i)||!e||this.isBlockElement(e)},e.prototype.isExtraBR=function(t){return"br"===E(t)&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t},r=function(t){var e;return"pre"===(e=window.getComputedStyle(t).whiteSpace)||"pre-wrap"===e||"pre-line"===e},u=function(t){return t&&!d(t.textContent)},e.prototype.translateBlockElementMarginsToNewlines=function(){var t,e,n,i,r,o,a;for(t=this.getMarginOfDefaultBlockElement(),a=[],n=e=0,i=(o=this.blocks).length;e<i;n=++e)o[n],(r=this.getMarginOfBlockElementAtIndex(n))&&(r.top>2*t.top&&this.prependStringToTextAtIndex("\n",n),a.push(r.bottom>2*t.bottom?this.appendStringToTextAtIndex("\n",n):void 0));return a},e.prototype.getMarginOfBlockElementAtIndex=function(t){var e,n;return!(e=this.blockElements[t])||!e.textContent||(n=E(e),0<=C.call(y(),n)||0<=C.call(this.processedElements,e))?void 0:o(e)},e.prototype.getMarginOfDefaultBlockElement=function(){var t;return t=b(R.config.blockAttributes["default"].tagName),this.containerElement.appendChild(t),o(t)},o=function(t){var e;return"block"===(e=window.getComputedStyle(t)).display?{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}:void 0},l=function(t){return t.replace(RegExp("^"+g.source+"+"),"")},f=function(t){return RegExp("^"+g.source+"*$").test(t)},d=function(t){return/\s$/.test(t)},e}(R.BasicObject)}.call(this),function(){var p,s,b,w,n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,d=[].slice,f=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};p=R.arraysAreEqual,b=R.normalizeRange,w=R.rangeIsCollapsed,s=R.getBlockConfig,R.Document=function(t){function e(t){null==t&&(t=[]),e.__super__.constructor.apply(this,arguments),0===t.length&&(t=[new R.Block]),this.blockList=R.SplittableList.box(t)}var h;return n(e,t),e.fromJSON=function(i){var r;return new this(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(R.Block.fromJSON(r));return n}())},e.fromHTML=function(t,e){return R.HTMLParser.parse(t,e).getDocument()},e.fromString=function(t,e){var n;return n=R.Text.textForStringWithAttributes(t,e),new this([new R.Block(n)])},e.prototype.isEmpty=function(){var t;return 1===this.blockList.length&&((t=this.getBlockAtIndex(0)).isEmpty()&&!t.hasAttributes())},e.prototype.copy=function(t){var e;return null==t&&(t={}),e=t.consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray(),new this.constructor(e)},e.prototype.copyUsingObjectsFromDocument=function(t){var e;return e=new R.ObjectMap(t.getObjects()),this.copyUsingObjectMap(e)},e.prototype.copyUsingObjectMap=function(r){var o,t,a;return t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getBlocks()).length;t<e;t++)o=n[t],i.push((a=r.find(o))?a:o.copyUsingObjectMap(r));return i}.call(this),new this.constructor(t)},e.prototype.copyWithBaseBlockAttributes=function(r){var o,a,t;return null==r&&(r=[]),t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getBlocks()).length;t<e;t++)a=n[t],o=r.concat(a.getAttributes()),i.push(a.copyWithAttributes(o));return i}.call(this),new this.constructor(t)},e.prototype.replaceBlock=function(t,e){var n;return-1===(n=this.blockList.indexOf(t))?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,n))},e.prototype.insertDocumentAtRange=function(t,e){var n,i,r,o,a,s,l;return i=t.blockList,a=(e=b(e))[0],r=(s=this.locationFromPosition(a)).index,o=s.offset,n=(l=this).getBlockAtPosition(a),w(e)&&n.isEmpty()&&!n.hasAttributes()?l=new this.constructor(l.blockList.removeObjectAtIndex(r)):n.getBlockBreakPosition()===o&&a++,l=l.removeTextAtRange(e),new this.constructor(l.blockList.insertSplittableListAtPosition(i,a))},e.prototype.mergeDocumentAtRange=function(t,e){var n,i,r,o,a,s,l,u,c,h,d,f;return d=(e=b(e))[0],h=this.locationFromPosition(d),i=this.getBlockAtIndex(h.index).getAttributes(),n=t.getBaseBlockAttributes(),f=i.slice(-n.length),p(n,f)?(l=i.slice(0,-n.length),s=t.copyWithBaseBlockAttributes(l)):s=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(i),r=s.getBlockCount(),o=s.getBlockAtIndex(0),p(i,o.getAttributes())?(a=o.getTextWithoutBlockBreak(),c=this.insertTextAtRange(a,e),1<r&&(s=new this.constructor(s.getBlocks().slice(1)),u=d+a.getLength(),c=c.insertDocumentAtRange(s,u))):c=this.insertDocumentAtRange(s,e),c},e.prototype.insertTextAtRange=function(e,t){var n,i,r,o,a;return a=(t=b(t))[0],i=(o=this.locationFromPosition(a)).index,r=o.offset,n=this.removeTextAtRange(t),new this.constructor(n.blockList.editObjectAtIndex(i,function(t){return t.copyWithText(t.text.insertTextAtPosition(e,r))}))},e.prototype.removeTextAtRange=function(t){var e,n,i,r,o,a,s,l,u,c,h,d,f,p,g,m,v,y;return l=(c=t=b(t))[0],m=c[1],w(t)?this:(a=(h=this.locationRangeFromRange(t))[0],p=h[1],o=a.index,s=a.offset,r=this.getBlockAtIndex(o),f=p.index,g=p.offset,d=this.getBlockAtIndex(f),m-l==1&&r.getBlockBreakPosition()===s&&d.getBlockBreakPosition()!==g&&"\n"===d.text.getStringAtPosition(g)?i=this.blockList.editObjectAtIndex(f,function(t){return t.copyWithText(t.text.removeTextAtRange([g,g+1]))}):(u=r.text.getTextAtRange([0,s]),v=d.text.getTextAtRange([g,d.getLength()]),y=u.appendText(v),n=o!==f&&0===s&&r.getAttributeLevel()>=d.getAttributeLevel()?d.copyWithText(y):r.copyWithText(y),e=f+1-o,i=this.blockList.splice(o,e,n)),new this.constructor(i))},e.prototype.moveTextFromRangeToPosition=function(t,e){var n,i,r,o,a,s,l,u,c,h;if(c=(s=t=b(t))[0],r=s[1],c<=e&&e<=r)return this;if(i=this.getDocumentAtRange(t),u=this.removeTextAtRange(t),(a=c<e)&&(e-=i.getLength()),!u.firstBlockInRangeIsEntirelySelected(t)){if(o=(l=i.getBlocks())[0],0===(n=2<=l.length?d.call(l,1):[]).length?(h=o.getTextWithoutBlockBreak(),a&&(e+=1)):h=o.text,u=u.insertTextAtRange(h,e),0===n.length)return u;i=new this.constructor(n),e+=h.getLength()}return u.insertDocumentAtRange(i,e)},e.prototype.addAttributeAtRange=function(i,r,t){var o;return o=this.blockList,this.eachBlockAtRange(t,function(t,e,n){return o=o.editObjectAtIndex(n,function(){return s(i)?t.addAttribute(i,r):e[0]===e[1]?t:t.copyWithText(t.text.addAttributeAtRange(i,r,e))})}),new this.constructor(o)},e.prototype.addAttribute=function(n,i){var r;return r=this.blockList,this.eachBlock(function(t,e){return r=r.editObjectAtIndex(e,function(){return t.addAttribute(n,i)})}),new this.constructor(r)},e.prototype.removeAttributeAtRange=function(i,t){var r;return r=this.blockList,this.eachBlockAtRange(t,function(t,e,n){return s(i)?r=r.editObjectAtIndex(n,function(){return t.removeAttribute(i)}):e[0]!==e[1]?r=r.editObjectAtIndex(n,function(){return t.copyWithText(t.text.removeAttributeAtRange(i,e))}):void 0}),new this.constructor(r)},e.prototype.updateAttributesForAttachment=function(e,n){var t,i,r;return i=this.getRangeOfAttachment(n)[0],t=this.locationFromPosition(i).index,r=this.getTextAtIndex(t),new this.constructor(this.blockList.editObjectAtIndex(t,function(t){return t.copyWithText(r.updateAttributesForAttachment(e,n))}))},e.prototype.removeAttributeForAttachment=function(t,e){var n;return n=this.getRangeOfAttachment(e),this.removeAttributeAtRange(t,n)},e.prototype.insertBlockBreakAtRange=function(t){var e,n,i,r;return r=(t=b(t))[0],i=this.locationFromPosition(r).offset,n=this.removeTextAtRange(t),0===i&&(e=[new R.Block]),new this.constructor(n.blockList.insertSplittableListAtPosition(new R.SplittableList(e),r))},e.prototype.applyBlockAttributeAtRange=function(t,e,n){var i,r,o,a;return r=(o=this.expandRangeToLineBreaksAndSplitBlocks(n)).document,n=o.range,(i=s(t)).listAttribute?(r=(a=(r=r.removeLastListAttributeAtRange(n,{exceptAttributeName:t})).convertLineBreaksToBlockBreaksInRange(n)).document,n=a.range):r=i.terminal?r.removeLastTerminalAttributeAtRange(n):r.consolidateBlocksAtRange(n),r.addAttributeAtRange(t,e,n)},e.prototype.removeLastListAttributeAtRange=function(t,r){var o;return null==r&&(r={}),o=this.blockList,this.eachBlockAtRange(t,function(t,e,n){var i;if((i=t.getLastAttribute())&&s(i).listAttribute&&i!==r.exceptAttributeName)return o=o.editObjectAtIndex(n,function(){return t.removeAttribute(i)})}),new this.constructor(o)},e.prototype.removeLastTerminalAttributeAtRange=function(t){var r;return r=this.blockList,this.eachBlockAtRange(t,function(t,e,n){var i;if((i=t.getLastAttribute())&&s(i).terminal)return r=r.editObjectAtIndex(n,function(){return t.removeAttribute(i)})}),new this.constructor(r)},e.prototype.firstBlockInRangeIsEntirelySelected=function(t){var e,n,i,r,o,a;return a=(r=t=b(t))[0],e=r[1],n=this.locationFromPosition(a),o=this.locationFromPosition(e),0===n.offset&&n.index<o.index||n.index===o.index&&(i=this.getBlockAtIndex(n.index).getLength(),0===n.offset&&o.offset===i)},e.prototype.expandRangeToLineBreaksAndSplitBlocks=function(t){var e,n,i,r,o,a,s,l,u;return u=(a=t=b(t))[0],r=a[1],l=this.locationFromPosition(u),i=this.locationFromPosition(r),s=(e=this).getBlockAtIndex(l.index),null!=(l.offset=s.findLineBreakInDirectionFromPosition("backward",l.offset))&&(o=e.positionFromLocation(l),e=e.insertBlockBreakAtRange([o,o+1]),i.index+=1,i.offset-=e.getBlockAtIndex(l.index).getLength(),l.index+=1),(l.offset=0)===i.offset&&i.index>l.index?(i.index-=1,i.offset=e.getBlockAtIndex(i.index).getBlockBreakPosition()):("\n"===(n=e.getBlockAtIndex(i.index)).text.getStringAtRange([i.offset-1,i.offset])?i.offset-=1:i.offset=n.findLineBreakInDirectionFromPosition("forward",i.offset),i.offset!==n.getBlockBreakPosition()&&(o=e.positionFromLocation(i),e=e.insertBlockBreakAtRange([o,o+1]))),u=e.positionFromLocation(l),r=e.positionFromLocation(i),{document:e,range:t=b([u,r])}},e.prototype.convertLineBreaksToBlockBreaksInRange=function(t){var e,n,i;return n=(t=b(t))[0],i=this.getStringAtRange(t).slice(0,-1),e=this,i.replace(/.*?\n/g,function(t){return n+=t.length,e=e.insertBlockBreakAtRange([n-1,n])}),{document:e,range:t}},e.prototype.consolidateBlocksAtRange=function(t){var e,n,i,r,o;return o=(i=t=b(t))[0],n=i[1],r=this.locationFromPosition(o).index,e=this.locationFromPosition(n).index,new this.constructor(this.blockList.consolidateFromIndexToIndex(r,e))},e.prototype.getDocumentAtRange=function(t){var e;return t=b(t),e=this.blockList.getSplittableListInRange(t).toArray(),new this.constructor(e)},e.prototype.getStringAtRange=function(t){var e,n;return(n=t=b(t))[n.length-1]!==this.getLength()&&(e=-1),this.getDocumentAtRange(t).toString().slice(0,e)},e.prototype.getBlockAtIndex=function(t){return this.blockList.getObjectAtIndex(t)},e.prototype.getBlockAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getBlockAtIndex(e)},e.prototype.getTextAtIndex=function(t){var e;return null!=(e=this.getBlockAtIndex(t))?e.text:void 0},e.prototype.getTextAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getTextAtIndex(e)},e.prototype.getPieceAtPosition=function(t){var e,n,i;return e=(i=this.locationFromPosition(t)).index,n=i.offset,this.getTextAtIndex(e).getPieceAtPosition(n)},e.prototype.getCharacterAtPosition=function(t){var e,n,i;return e=(i=this.locationFromPosition(t)).index,n=i.offset,this.getTextAtIndex(e).getStringAtRange([n,n+1])},e.prototype.getLength=function(){return this.blockList.getEndPosition()},e.prototype.getBlocks=function(){return this.blockList.toArray()},e.prototype.getBlockCount=function(){return this.blockList.length},e.prototype.getEditCount=function(){return this.editCount},e.prototype.eachBlock=function(t){return this.blockList.eachObject(t)},e.prototype.eachBlockAtRange=function(t,e){var n,i,r,o,a,s,l,u,c,h,d,f;if(d=(s=t=b(t))[0],r=s[1],h=this.locationFromPosition(d),i=this.locationFromPosition(r),h.index===i.index)return n=this.getBlockAtIndex(h.index),f=[h.offset,i.offset],e(n,f,h.index);for(c=[],a=o=l=h.index,u=i.index;l<=u?o<=u:u<=o;a=l<=u?++o:--o)(n=this.getBlockAtIndex(a))?(f=function(){switch(a){case h.index:return[h.offset,n.text.getLength()];case i.index:return[0,i.offset];default:return[0,n.text.getLength()]}}(),c.push(e(n,f,a))):c.push(void 0);return c},e.prototype.getCommonAttributesAtRange=function(t){var n,e,i;return e=(t=b(t))[0],w(t)?this.getCommonAttributesAtPosition(e):(i=[],n=[],this.eachBlockAtRange(t,function(t,e){return e[0]!==e[1]?(i.push(t.text.getCommonAttributesAtRange(e)),n.push(h(t))):void 0}),R.Hash.fromCommonAttributesOfObjects(i).merge(R.Hash.fromCommonAttributesOfObjects(n)).toObject())},e.prototype.getCommonAttributesAtPosition=function(t){var e,n,i,r,o,a,s,l,u,c;if(o=(u=this.locationFromPosition(t)).index,l=u.offset,!(i=this.getBlockAtIndex(o)))return{};for(s in r=h(i),e=i.text.getAttributesAtPosition(l),n=i.text.getAttributesAtPosition(l-1),a=function(){var t,e;for(s in e=[],t=R.config.textAttributes)(c=t[s]).inheritable&&e.push(s);return e}(),n)((c=n[s])===e[s]||0<=f.call(a,s))&&(r[s]=c);return r},e.prototype.getRangeOfCommonAttributeAtPosition=function(t,e){var n,i,r,o,a,s,l,u;return r=(a=this.locationFromPosition(e)).index,o=a.offset,u=(s=this.getTextAtIndex(r).getExpandedRangeForAttributeAtOffset(t,o))[0],i=s[1],l=this.positionFromLocation({index:r,offset:u}),n=this.positionFromLocation({index:r,offset:i}),b([l,n])},e.prototype.getBaseBlockAttributes=function(){var i,r,t,e,o,a,n;for(i=this.getBlockAtIndex(0).getAttributes(),t=e=1,n=this.getBlockCount();1<=n?e<n:n<e;t=1<=n?++e:--e)r=this.getBlockAtIndex(t).getAttributes(),a=Math.min(i.length,r.length),i=function(){var t,e,n;for(n=[],o=t=0,e=a;(0<=e?t<e:e<t)&&r[o]===i[o];o=0<=e?++t:--t)n.push(r[o]);return n}();return i},h=function(t){var e,n;return n={},(e=t.getLastAttribute())&&(n[e]=!0),n},e.prototype.getAttachmentById=function(t){var e,n,i,r;for(n=0,i=(r=this.getAttachments()).length;n<i;n++)if((e=r[n]).id===t)return e},e.prototype.getAttachmentPieces=function(){var n;return n=[],this.blockList.eachObject(function(t){var e;return e=t.text,n=n.concat(e.getAttachmentPieces())}),n},e.prototype.getAttachments=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.getAttachmentPieces()).length;t<e;t++)n=i[t],r.push(n.attachment);return r},e.prototype.getRangeOfAttachment=function(t){var e,n,i,r,o,a,s;for(n=e=r=0,i=(o=this.blockList.toArray()).length;e<i;n=++e){if(s=(a=o[n].text).getRangeOfAttachment(t))return b([r+s[0],r+s[1]]);r+=a.getLength()}},e.prototype.getLocationRangeOfAttachment=function(t){var e;return e=this.getRangeOfAttachment(t),this.locationRangeFromRange(e)},e.prototype.getAttachmentPieceForAttachment=function(t){var e,n,i,r;for(e=0,n=(r=this.getAttachmentPieces()).length;e<n;e++)if((i=r[e]).attachment===t)return i},e.prototype.findRangesForTextAttribute=function(e,t){var n,i,r,o,a,s,l,u,c,h;for(h=(null!=t?t:{}).withValue,l=[],u=[],o=function(t){return null!=h?t.getAttribute(e)===h:t.hasAttribute(e)},n=s=0,i=(c=this.getPieces()).length;n<i;n++)r=(a=c[n]).getLength(),o(a)&&(l[1]===s?l[1]=s+r:u.push(l=[s,s+r])),s+=r;return u},e.prototype.locationFromPosition=function(t){var e,n;return null!=(n=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t))).index?n:{index:(e=this.getBlocks()).length-1,offset:e[e.length-1].getLength()}},e.prototype.positionFromLocation=function(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)},e.prototype.locationRangeFromPosition=function(t){return b(this.locationFromPosition(t))},e.prototype.locationRangeFromRange=function(t){var e,n,i,r;if(t=b(t))return r=t[0],n=t[1],i=this.locationFromPosition(r),e=this.locationFromPosition(n),b([i,e])},e.prototype.rangeFromLocationRange=function(t){var e,n;return t=b(t),e=this.positionFromLocation(t[0]),w(t)||(n=this.positionFromLocation(t[1])),b([e,n])},e.prototype.isEqualTo=function(t){return this.blockList.isEqualTo(null!=t?t.blockList:void 0)},e.prototype.getTexts=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getBlocks()).length;e<n;e++)t=i[e],r.push(t.text);return r},e.prototype.getPieces=function(){var t,e,n,i,r;for(n=[],t=0,e=(i=this.getTexts()).length;t<e;t++)r=i[t],n.push.apply(n,r.getPieces());return n},e.prototype.getObjects=function(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())},e.prototype.toSerializableDocument=function(){var e;return e=[],this.blockList.eachObject(function(t){return e.push(t.copyWithText(t.text.toSerializableText()))}),new this.constructor(e)},e.prototype.toString=function(){return this.blockList.toString()},e.prototype.toJSON=function(){return this.blockList.toJSON()},e.prototype.toConsole=function(){var r;return JSON.stringify(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.blockList.toArray()).length;t<e;t++)r=n[t],i.push(JSON.parse(r.text.toConsole()));return i}.call(this))},e}(R.Object)}.call(this),function(){R.LineBreakInsertion=function(){function t(t){var e;this.composition=t,this.document=this.composition.document,e=this.composition.getSelectedRange(),this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),
this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}return t.prototype.shouldInsertBlockBreak=function(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?0!==this.startLocation.offset:this.breaksOnReturn&&"\n"!==this.nextCharacter},t.prototype.shouldBreakFormattedBlock=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&"\n"===this.nextCharacter||"\n"===this.previousCharacter)},t.prototype.shouldDecreaseListLevel=function(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()},t.prototype.shouldPrependListItem=function(){return this.block.isListItem()&&0===this.startLocation.offset&&!this.block.isEmpty()},t.prototype.shouldRemoveLastBlockAttribute=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()},t}()}.call(this),function(){var i,r,a,o,s,l,u,c,h,d,f=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;l=R.normalizeRange,h=R.rangesAreEqual,c=R.rangeIsCollapsed,u=R.objectsAreEqual,i=R.arrayStartsWith,d=R.summarizeArrayChange,a=R.getAllAttributeNames,o=R.getBlockConfig,s=R.getTextConfig,r=R.extend,R.Composition=function(t){function e(){this.document=new R.Document,this.attachments=[],this.currentAttributes={},this.revision=0}var n;return f(e,t),e.prototype.setDocument=function(t){var e;return t.isEqualTo(this.document)?void 0:(this.document=t,this.refreshAttachments(),this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeDocument?e.compositionDidChangeDocument(t):void 0)},e.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.getSelectedRange()}},e.prototype.loadSnapshot=function(t){var e,n,i,r;return e=t.document,r=t.selectedRange,null!=(n=this.delegate)&&"function"==typeof n.compositionWillLoadSnapshot&&n.compositionWillLoadSnapshot(),this.setDocument(null!=e?e:new R.Document),this.setSelection(null!=r?r:[0,0]),null!=(i=this.delegate)&&"function"==typeof i.compositionDidLoadSnapshot?i.compositionDidLoadSnapshot():void 0},e.prototype.insertText=function(t,e){var n,i,r,o;return o=(null!=e?e:{updatePosition:!0}).updatePosition,i=this.getSelectedRange(),this.setDocument(this.document.insertTextAtRange(t,i)),n=(r=i[0])+t.getLength(),o&&this.setSelection(n),this.notifyDelegateOfInsertionAtRange([r,n])},e.prototype.insertBlock=function(t){var e;return null==t&&(t=new R.Block),e=new R.Document([t]),this.insertDocument(e)},e.prototype.insertDocument=function(t){var e,n,i;return null==t&&(t=new R.Document),n=this.getSelectedRange(),this.setDocument(this.document.insertDocumentAtRange(t,n)),e=(i=n[0])+t.getLength(),this.setSelection(e),this.notifyDelegateOfInsertionAtRange([i,e])},e.prototype.insertString=function(t,e){var n,i;return n=this.getCurrentTextAttributes(),i=R.Text.textForStringWithAttributes(t,n),this.insertText(i,e)},e.prototype.insertBlockBreak=function(){var t,e,n;return e=this.getSelectedRange(),this.setDocument(this.document.insertBlockBreakAtRange(e)),t=(n=e[0])+1,this.setSelection(t),this.notifyDelegateOfInsertionAtRange([n,t])},e.prototype.insertLineBreak=function(){var t,e;return(e=new R.LineBreakInsertion(this)).shouldDecreaseListLevel()?(this.decreaseListLevel(),this.setSelection(e.startPosition)):e.shouldPrependListItem()?(t=new R.Document([e.block.copyWithoutText()]),this.insertDocument(t)):e.shouldInsertBlockBreak()?this.insertBlockBreak():e.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():e.shouldBreakFormattedBlock()?this.breakFormattedBlock(e):this.insertString("\n")},e.prototype.insertHTML=function(t){var e,n,i,r;return e=R.Document.fromHTML(t),i=this.getSelectedRange(),this.setDocument(this.document.mergeDocumentAtRange(e,i)),n=(r=i[0])+e.getLength()-1,this.setSelection(n),this.notifyDelegateOfInsertionAtRange([r,n])},e.prototype.replaceHTML=function(t){var e,n,i;return e=R.Document.fromHTML(t).copyUsingObjectsFromDocument(this.document),n=this.getLocationRange({strict:!1}),i=this.document.rangeFromLocationRange(n),this.setDocument(e),this.setSelection(i)},e.prototype.insertFile=function(t){var e,n;return(null!=(n=this.delegate)?n.compositionShouldAcceptFile(t):void 0)?(e=R.Attachment.attachmentForFile(t),this.insertAttachment(e)):void 0},e.prototype.insertFiles=function(t){var e,n,i,r,o,a,s;for(s=new R.Text,r=0,o=t.length;r<o;r++)i=t[r],(null!=(a=this.delegate)?a.compositionShouldAcceptFile(i):void 0)&&(e=R.Attachment.attachmentForFile(i),n=R.Text.textForAttachmentWithAttributes(e,this.currentAttributes),s=s.appendText(n));return this.insertText(s)},e.prototype.insertAttachment=function(t){var e;return e=R.Text.textForAttachmentWithAttributes(t,this.currentAttributes),this.insertText(e)},e.prototype.deleteInDirection=function(t){var e,n,i,r,o,a,s;return r=this.getLocationRange(),o=this.getSelectedRange(),(a=c(o))?i="backward"===t&&0===r[0].offset:s=r[0].index!==r[1].index,!(i&&this.canDecreaseBlockAttributeLevel()&&((n=this.getBlock()).isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(o[0]),n.isEmpty()))&&(a&&(o=this.getExpandedRangeInDirection(t),"backward"===t&&(e=this.getAttachmentAtRange(o))),e?(this.editAttachment(e),!1):(this.setDocument(this.document.removeTextAtRange(o)),this.setSelection(o[0]),!i&&!s&&void 0))},e.prototype.moveTextFromRange=function(t){var e;return e=this.getSelectedRange()[0],this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)},e.prototype.removeAttachment=function(t){var e;return(e=this.document.getRangeOfAttachment(t))?(this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])):void 0},e.prototype.removeLastBlockAttribute=function(){var t,e,n,i;return i=(n=this.getSelectedRange())[0],e=n[1],t=this.document.getBlockAtPosition(e),this.removeCurrentAttribute(t.getLastAttribute()),this.setSelection(i)},n=" ",e.prototype.insertPlaceholder=function(){return this.placeholderPosition=this.getPosition(),this.insertString(n)},e.prototype.selectPlaceholder=function(){return null!=this.placeholderPosition?(this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+n.length]),this.getSelectedRange()):void 0},e.prototype.forgetPlaceholder=function(){return this.placeholderPosition=null},e.prototype.hasCurrentAttribute=function(t){var e;return null!=(e=this.currentAttributes[t])&&!1!==e},e.prototype.toggleCurrentAttribute=function(t){var e;return(e=!this.currentAttributes[t])?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)},e.prototype.canSetCurrentAttribute=function(t){return o(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)},e.prototype.canSetCurrentTextAttribute=function(t){switch(t){case"href":return!this.selectionContainsAttachmentWithAttribute(t);default:return!0}},e.prototype.canSetCurrentBlockAttribute=function(){var t;if(t=this.getBlock())return!t.isTerminalBlock()},e.prototype.setCurrentAttribute=function(t,e){return o(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())},e.prototype.setTextAttribute=function(t,e){var n,i;if(n=this.getSelectedRange())return n[0]!==n[1]?this.setDocument(this.document.addAttributeAtRange(t,e,n)):"href"===t?(i=R.Text.textForStringWithAttributes(e,{href:e}),this.insertText(i)):void 0},e.prototype.setBlockAttribute=function(t,e){var n;if(n=this.getSelectedRange())return this.canSetCurrentAttribute(t)?(this.getBlock(),this.setDocument(this.document.applyBlockAttributeAtRange(t,e,n)),this.setSelection(n)):void 0},e.prototype.removeCurrentAttribute=function(t){return o(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())},e.prototype.removeTextAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},e.prototype.removeBlockAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},e.prototype.canDecreaseNestingLevel=function(){var t;return 0<(null!=(t=this.getBlock())?t.getNestingLevel():void 0)},e.prototype.canIncreaseNestingLevel=function(){var t,e,n;if(t=this.getBlock())return null!=(n=o(t.getLastNestableAttribute()))&&n.listAttribute?(e=this.getPreviousBlock())?i(e.getListItemAttributes(),t.getListItemAttributes()):void 0:0<t.getNestingLevel()},e.prototype.decreaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))},e.prototype.increaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))},e.prototype.canDecreaseBlockAttributeLevel=function(){var t;return 0<(null!=(t=this.getBlock())?t.getAttributeLevel():void 0)},e.prototype.decreaseBlockAttributeLevel=function(){var t,e;return(t=null!=(e=this.getBlock())?e.getLastAttribute():void 0)?this.removeCurrentAttribute(t):void 0},e.prototype.decreaseListLevel=function(){var t,e,n,i,r,o;for(o=this.getSelectedRange()[0],n=r=this.document.locationFromPosition(o).index,t=this.getBlock().getAttributeLevel();(e=this.document.getBlockAtIndex(n+1))&&e.isListItem()&&e.getAttributeLevel()>t;)n++;return o=this.document.positionFromLocation({index:r,offset:0}),i=this.document.positionFromLocation({index:n,offset:0}),this.setDocument(this.document.removeLastListAttributeAtRange([o,i]))},e.prototype.updateCurrentAttributes=function(){var t,e,n,i,r,o;if(o=this.getSelectedRange({ignoreLock:!0})){for(e=this.document.getCommonAttributesAtRange(o),n=0,i=(r=a()).length;n<i;n++)e[t=r[n]]||this.canSetCurrentAttribute(t)||(e[t]=!1);if(!u(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}},e.prototype.getCurrentAttributes=function(){return r.call({},this.currentAttributes)},e.prototype.getCurrentTextAttributes=function(){var t,e,n,i;for(e in t={},n=this.currentAttributes)i=n[e],s(e)&&(t[e]=i);return t},e.prototype.freezeSelection=function(){return this.setCurrentAttribute("frozen",!0)},e.prototype.thawSelection=function(){return this.removeCurrentAttribute("frozen")},e.prototype.hasFrozenSelection=function(){return this.hasCurrentAttribute("frozen")},e.proxyMethod("getSelectionManager().getPointRange"),e.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),e.proxyMethod("getSelectionManager().locationIsCursorTarget"),e.proxyMethod("getSelectionManager().selectionIsExpanded"),e.proxyMethod("delegate?.getSelectionManager"),e.prototype.setSelection=function(t){var e,n;return e=this.document.locationRangeFromRange(t),null!=(n=this.delegate)?n.compositionDidRequestChangingSelectionToLocationRange(e):void 0},e.prototype.getSelectedRange=function(){var t;return(t=this.getLocationRange())?this.document.rangeFromLocationRange(t):void 0},e.prototype.setSelectedRange=function(t){var e;return e=this.document.locationRangeFromRange(t),this.getSelectionManager().setLocationRange(e)},e.prototype.getPosition=function(){var t;return(t=this.getLocationRange())?this.document.positionFromLocation(t[0]):void 0},e.prototype.getLocationRange=function(t){var e;return null!=(e=this.getSelectionManager().getLocationRange(t))?e:l({index:0,offset:0})},e.prototype.getExpandedRangeInDirection=function(t){var e,n,i;return i=(n=this.getSelectedRange())[0],e=n[1],"backward"===t?i=this.translateUTF16PositionFromOffset(i,-1):e=this.translateUTF16PositionFromOffset(e,1),l([i,e])},e.prototype.moveCursorInDirection=function(t){var e,n,i,r;return this.editingAttachment?i=this.document.getRangeOfAttachment(this.editingAttachment):(r=this.getSelectedRange(),i=this.getExpandedRangeInDirection(t),n=!h(r,i)),this.setSelectedRange("backward"===t?i[0]:i[1]),n&&(e=this.getAttachmentAtRange(i))?this.editAttachment(e):void 0},e.prototype.expandSelectionInDirection=function(t){var e;return e=this.getExpandedRangeInDirection(t),this.setSelectedRange(e)},e.prototype.expandSelectionForEditing=function(){return this.hasCurrentAttribute("href")?this.expandSelectionAroundCommonAttribute("href"):void 0},e.prototype.expandSelectionAroundCommonAttribute=function(t){var e,n;return e=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(t,e),this.setSelectedRange(n)},e.prototype.selectionContainsAttachmentWithAttribute=function(t){var e,n,i,r;if(r=this.getSelectedRange()){for(e=0,n=(i=this.document.getDocumentAtRange(r).getAttachments()).length;e<n;e++)if(i[e].hasAttribute(t))return!0;return!1}},e.prototype.selectionIsInCursorTarget=function(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())},e.prototype.positionIsCursorTarget=function(t){var e;return(e=this.document.locationFromPosition(t))?this.locationIsCursorTarget(e):void 0},e.prototype.positionIsBlockBreak=function(t){var e;return null!=(e=this.document.getPieceAtPosition(t))?e.isBlockBreak():void 0},e.prototype.getSelectedDocument=function(){var t;return(t=this.getSelectedRange())?this.document.getDocumentAtRange(t):void 0},e.prototype.getAttachments=function(){return this.attachments.slice(0)},e.prototype.refreshAttachments=function(){var t,e,n,i,r,o,a,s,l,u,c,h;for(n=this.document.getAttachments(),t=(s=d(this.attachments,n)).added,c=s.removed,this.attachments=n,i=0,o=c.length;i<o;i++)((e=c[i]).delegate=null)!=(l=this.delegate)&&"function"==typeof l.compositionDidRemoveAttachment&&l.compositionDidRemoveAttachment(e);for(h=[],r=0,a=t.length;r<a;r++)(e=t[r]).delegate=this,h.push(null!=(u=this.delegate)&&"function"==typeof u.compositionDidAddAttachment?u.compositionDidAddAttachment(e):void 0);return h},e.prototype.attachmentDidChangeAttributes=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidEditAttachment?e.compositionDidEditAttachment(t):void 0},e.prototype.attachmentDidChangePreviewURL=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeAttachmentPreviewURL?e.compositionDidChangeAttachmentPreviewURL(t):void 0},e.prototype.editAttachment=function(t){var e;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,null!=(e=this.delegate)&&"function"==typeof e.compositionDidStartEditingAttachment?e.compositionDidStartEditingAttachment(this.editingAttachment):void 0},e.prototype.stopEditingAttachment=function(){var t;if(this.editingAttachment)return null!=(t=this.delegate)&&"function"==typeof t.compositionDidStopEditingAttachment&&t.compositionDidStopEditingAttachment(this.editingAttachment),this.editingAttachment=null},e.prototype.canEditAttachmentCaption=function(){var t;return null!=(t=this.editingAttachment)?t.isPreviewable():void 0},e.prototype.updateAttributesForAttachment=function(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))},e.prototype.removeAttributeForAttachment=function(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))},e.prototype.breakFormattedBlock=function(t){var e,n,i,r,o;return n=t.document,e=t.block,o=[(r=t.startPosition)-1,r],e.getBlockBreakPosition()===t.startLocation.offset?(e.breaksOnReturn()&&"\n"===t.nextCharacter?r+=1:n=n.removeTextAtRange(o),o=[r,r]):"\n"===t.nextCharacter?"\n"===t.previousCharacter?o=[r-1,r+1]:(o=[r,r+1],r+=1):t.startLocation.offset-1!=0&&(r+=1),i=new R.Document([e.removeLastAttribute().copyWithoutText()]),this.setDocument(n.insertDocumentAtRange(i,o)),this.setSelection(r)},e.prototype.getPreviousBlock=function(){var t,e;return(e=this.getLocationRange())&&0<(t=e[0].index)?this.document.getBlockAtIndex(t-1):void 0},e.prototype.getBlock=function(){var t;return(t=this.getLocationRange())?this.document.getBlockAtIndex(t[0].index):void 0},e.prototype.getAttachmentAtRange=function(t){var e;return(e=this.document.getDocumentAtRange(t)).toString()===R.OBJECT_REPLACEMENT_CHARACTER+"\n"?e.getAttachments()[0]:void 0},e.prototype.notifyDelegateOfCurrentAttributesChange=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.compositionDidChangeCurrentAttributes?t.compositionDidChangeCurrentAttributes(this.currentAttributes):void 0},e.prototype.notifyDelegateOfInsertionAtRange=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionDidPerformInsertionAtRange?e.compositionDidPerformInsertionAtRange(t):void 0},e.prototype.translateUTF16PositionFromOffset=function(t,e){var n,i;return n=(i=this.document.toUTF16String()).offsetFromUCS2Offset(t),i.offsetToUCS2Offset(n+e)},e}(R.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.UndoManager=function(t){function e(t){this.composition=t,this.undoEntries=[],this.redoEntries=[]}var s;return n(e,t),e.prototype.recordUndoEntry=function(t,e){var n,i,r,o,a;return i=(o=null!=e?e:{}).context,n=o.consolidatable,r=this.undoEntries.slice(-1)[0],n&&s(r,t,i)?void 0:(a=this.createEntry({description:t,context:i}),this.undoEntries.push(a),this.redoEntries=[])},e.prototype.undo=function(){var t,e;return(e=this.undoEntries.pop())?(t=this.createEntry(e),this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)):void 0},e.prototype.redo=function(){var t,e;return(t=this.redoEntries.pop())?(e=this.createEntry(t),this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)):void 0},e.prototype.canUndo=function(){return 0<this.undoEntries.length},e.prototype.canRedo=function(){return 0<this.redoEntries.length},e.prototype.createEntry=function(t){var e,n,i;return n=(i=null!=t?t:{}).description,e=i.context,{description:null!=n?n.toString():void 0,context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}},s=function(t,e,n){return(null!=t?t.description:void 0)===(null!=e?e.toString():void 0)&&(null!=t?t.context:void 0)===JSON.stringify(n)},e}(R.BasicObject)}.call(this),function(){R.Editor=function(){function t(t,e,n){this.composition=t,this.selectionManager=e,this.element=n,this.undoManager=new R.UndoManager(this.composition)}return t.prototype.loadDocument=function(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})},t.prototype.loadHTML=function(t){return null==t&&(t=""),this.loadDocument(R.Document.fromHTML(t,{referenceElement:this.element}))},t.prototype.loadJSON=function(t){var e,n;return e=t.document,n=t.selectedRange,e=R.Document.fromJSON(e),this.loadSnapshot({document:e,selectedRange:n})},t.prototype.loadSnapshot=function(t){return this.undoManager=new R.UndoManager(this.composition),this.composition.loadSnapshot(t)},t.prototype.getDocument=function(){return this.composition.document},t.prototype.getSelectedDocument=function(){return this.composition.getSelectedDocument()},t.prototype.getSnapshot=function(){return this.composition.getSnapshot()},t.prototype.toJSON=function(){return this.getSnapshot()},t.prototype.deleteInDirection=function(t){return this.composition.deleteInDirection(t)},t.prototype.insertAttachment=function(t){return this.composition.insertAttachment(t)},t.prototype.insertDocument=function(t){return this.composition.insertDocument(t)},t.prototype.insertFile=function(t){return this.composition.insertFile(t)},t.prototype.insertHTML=function(t){return this.composition.insertHTML(t)},t.prototype.insertString=function(t){return this.composition.insertString(t)},t.prototype.insertText=function(t){return this.composition.insertText(t)},t.prototype.insertLineBreak=function(){return this.composition.insertLineBreak()},t.prototype.getSelectedRange=function(){return this.composition.getSelectedRange()},t.prototype.getPosition=function(){return this.composition.getPosition()},t.prototype.getClientRectAtPosition=function(t){var e;return e=this.getDocument().locationRangeFromRange([t,t+1]),this.selectionManager.getClientRectAtLocationRange(e)},t.prototype.expandSelectionInDirection=function(t){return this.composition.expandSelectionInDirection(t)},t.prototype.moveCursorInDirection=function(t){return this.composition.moveCursorInDirection(t)},t.prototype.setSelectedRange=function(t){return this.composition.setSelectedRange(t)},t.prototype.activateAttribute=function(t,e){return null==e&&(e=!0),this.composition.setCurrentAttribute(t,e)},t.prototype.attributeIsActive=function(t){return this.composition.hasCurrentAttribute(t)},t.prototype.canActivateAttribute=function(t){return this.composition.canSetCurrentAttribute(t)},t.prototype.deactivateAttribute=function(t){return this.composition.removeCurrentAttribute(t)},t.prototype.canDecreaseNestingLevel=function(){return this.composition.canDecreaseNestingLevel()},t.prototype.canIncreaseNestingLevel=function(){return this.composition.canIncreaseNestingLevel()},t.prototype.decreaseNestingLevel=function(){return this.canDecreaseNestingLevel()?this.composition.decreaseNestingLevel():void 0},t.prototype.increaseNestingLevel=function(){return this.canIncreaseNestingLevel()?this.composition.increaseNestingLevel():void 0},t.prototype.canDecreaseIndentationLevel=function(){return this.canDecreaseNestingLevel()},t.prototype.canIncreaseIndentationLevel=function(){return this.canIncreaseNestingLevel()},t.prototype.decreaseIndentationLevel=function(){return this.decreaseNestingLevel()},t.prototype.increaseIndentationLevel=function(){return this.increaseNestingLevel()},t.prototype.canRedo=function(){return this.undoManager.canRedo()},t.prototype.canUndo=function(){return this.undoManager.canUndo()},t.prototype.recordUndoEntry=function(t,e){var n,i,r;return i=(r=null!=e?e:{}).context,n=r.consolidatable,this.undoManager.recordUndoEntry(t,{context:i,consolidatable:n})},t.prototype.redo=function(){return this.canRedo()?this.undoManager.redo():void 0},t.prototype.undo=function(){return this.canUndo()?this.undoManager.undo():void 0},t}()}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.ManagedAttachment=function(t){function e(t,e){var n;this.attachmentManager=t,this.attachment=e,n=this.attachment,this.id=n.id,this.file=n.file}return n(e,t),e.prototype.remove=function(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)},e.proxyMethod("attachment.getAttribute"),e.proxyMethod("attachment.hasAttribute"),e.proxyMethod("attachment.setAttribute"),e.proxyMethod("attachment.getAttributes"),e.proxyMethod("attachment.setAttributes"),e.proxyMethod("attachment.isPending"),e.proxyMethod("attachment.isPreviewable"),e.proxyMethod("attachment.getURL"),e.proxyMethod("attachment.getHref"),e.proxyMethod("attachment.getFilename"),e.proxyMethod("attachment.getFilesize"),e.proxyMethod("attachment.getFormattedFilesize"),e.proxyMethod("attachment.getExtension"),e.proxyMethod("attachment.getContentType"),e.proxyMethod("attachment.getFile"),e.proxyMethod("attachment.setFile"),e.proxyMethod("attachment.releaseFile"),e.proxyMethod("attachment.getUploadProgress"),e.proxyMethod("attachment.setUploadProgress"),e}(R.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.AttachmentManager=function(t){function e(t){var e,n,i;for(null==t&&(t=[]),this.managedAttachments={},n=0,i=t.length;n<i;n++)e=t[n],this.manageAttachment(e)}return n(e,t),e.prototype.getAttachments=function(){var t,e,n,i;for(e in i=[],n=this.managedAttachments)t=n[e],i.push(t);return i},e.prototype.manageAttachment=function(t){var e,n;return null!=(e=this.managedAttachments)[n=t.id]?e[n]:e[n]=new R.ManagedAttachment(this,t)},e.prototype.attachmentIsManaged=function(t){return t.id in this.managedAttachments},e.prototype.requestRemovalOfAttachment=function(t){var e;return this.attachmentIsManaged(t)&&null!=(e=this.delegate)&&"function"==typeof e.attachmentManagerDidRequestRemovalOfAttachment?e.attachmentManagerDidRequestRemovalOfAttachment(t):void 0},e.prototype.unmanageAttachment=function(t){var e;return e=this.managedAttachments[t.id],delete this.managedAttachments[t.id],e},e}(R.BasicObject)}.call(this),function(){var d,f,n,s,p,l,g,i,m,r,v;d=R.elementContainsNode,f=R.findChildIndexOfNode,p=R.nodeIsBlockStart,l=R.nodeIsBlockStartComment,s=R.nodeIsBlockContainer,g=R.nodeIsCursorTarget,i=R.nodeIsEmptyTextNode,m=R.nodeIsTextNode,n=R.nodeIsAttachmentElement,r=R.tagName,v=R.walkTree,R.LocationMapper=function(){function t(t){this.element=t}var a,c,h,e;return t.prototype.findLocationFromContainerAndOffset=function(t,e,n){var i,r,o,a,s,l,u;for(l=(null!=n?n:{strict:!0}).strict,o=!1,a={index:r=0,offset:0},(i=this.findAttachmentElementParentForNode(t))&&(t=i.parentNode,e=f(i)),u=v(this.element,{usingFilter:h});u.nextNode();){if((s=u.currentNode)===t&&m(t)){g(s)||(a.offset+=e);break}if(s.parentNode===t){if(r++===e)break}else if(!d(t,s)&&0<r)break;p(s,{strict:l})?(o&&a.index++,o=!(a.offset=0)):a.offset+=c(s)}return a},t.prototype.findContainerAndOffsetFromLocation=function(t){var e,n,i,r,o;if(0===t.index&&0===t.offset){for(e=this.element,r=0;e.firstChild;)if(e=e.firstChild,s(e)){r=1;break}return[e,r]}if(n=(o=this.findNodeAndOffsetFromLocation(t))[0],i=o[1],n){if(m(n))(e=n).textContent,r=t.offset-i;else{if(e=n.parentNode,!p(n.previousSibling)&&!s(e))for(;n===e.lastChild&&(e=(n=e).parentNode,!s(e)););r=f(n),0!==t.offset&&r++}return[e,r]}},t.prototype.findNodeAndOffsetFromLocation=function(t){var e,n,i,r,o,a,s,l;for(n=s=0,i=(l=this.getSignificantNodesForIndex(t.index)).length;n<i;n++){if(e=l[n],r=c(e),t.offset<=s+r)if(m(e)){if(o=e,a=s,t.offset===a&&g(o))break}else o||(o=e,a=s);if((s+=r)>t.offset)break}return[o,a]},t.prototype.findAttachmentElementParentForNode=function(t){for(;t&&t!==this.element;){if(n(t))return t;t=t.parentNode}},t.prototype.getSignificantNodesForIndex=function(t){var e,n,i,r,o;for(i=[],o=v(this.element,{usingFilter:a}),r=!1;o.nextNode();)if(n=o.currentNode,l(n)){if(null!=e?e++:e=0,e===t)r=!0;else if(r)break}else r&&i.push(n);return i},c=function(t){return t.nodeType===Node.TEXT_NODE?g(t)?0:t.textContent.length:"br"===r(t)||n(t)?1:0},a=function(t){return e(t)===NodeFilter.FILTER_ACCEPT?h(t):NodeFilter.FILTER_REJECT},e=function(t){return i(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},h=function(t){return n(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},t}()}.call(this),function(){var c,h,n=[].slice;c=R.getDOMRange,h=R.setDOMRange,R.PointMapper=function(){function t(){}return t.prototype.createDOMRangeFromPoint=function(t){var e,n,i,r,o,a,s,l;if(s=t.x,l=t.y,document.caretPositionFromPoint)return i=(o=document.caretPositionFromPoint(s,l)).offsetNode,n=o.offset,(e=document.createRange()).setStart(i,n),e;if(document.caretRangeFromPoint)return document.caretRangeFromPoint(s,l);if(document.body.createTextRange){r=c();try{(a=document.body.createTextRange()).moveToPoint(s,l),a.select()}catch(u){}return e=c(),h(r),e}},t.prototype.getClientRectsForDOMRange=function(t){var e;return[(e=n.call(t.getClientRects()))[0],e[e.length-1]]},t}()}.call(this),function(){var i,r=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=R.getDOMRange,R.SelectionChangeObserver=function(t){function e(){this.run=r(this.run,this),this.update=r(this.update,this),this.selectionManagers=[]}var n;return o(e,t),e.prototype.start=function(){return this.started?void 0:(this.started=!0,"onselectionchange"in document?document.addEventListener("selectionchange",this.update,!0):this.run())},e.prototype.stop=function(){return this.started?(this.started=!1,document.removeEventListener("selectionchange",this.update,!0)):void 0},e.prototype.registerSelectionManager=function(t){return s.call(this.selectionManagers,t)<0?(this.selectionManagers.push(t),this.start()):void 0},e.prototype.unregisterSelectionManager=function(r){var o;return this.selectionManagers=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.selectionManagers).length;t<e;t++)(o=n[t])!==r&&i.push(o);return i}.call(this),0===this.selectionManagers.length?this.stop():void 0},e.prototype.notifySelectionManagersOfSelectionChange=function(){var t,e,n,i,r;for(i=[],t=0,e=(n=this.selectionManagers).length;t<e;t++)r=n[t],i.push(r.selectionDidChange());return i},e.prototype.update=function(){var t;return t=i(),n(t,this.domRange)?void 0:(this.domRange=t,this.notifySelectionManagersOfSelectionChange())},e.prototype.reset=function(){return this.domRange=null,this.update()},e.prototype.run=function(){return this.started?(this.update(),requestAnimationFrame(this.run)):void 0},n=function(t,e){return(null!=t?t.startContainer:void 0)===(null!=e?e.startContainer:void 0)&&(null!=t?t.startOffset:void 0)===(null!=e?e.startOffset:void 0)&&(null!=t?t.endContainer:void 0)===(null!=e?e.endContainer:void 0)&&(null!=t?t.endOffset:void 0)===(null!=e?e.endOffset:void 0)},e}(R.BasicObject),null==R.selectionChangeObserver&&(R.selectionChangeObserver=new R.SelectionChangeObserver)}.call(this),function(){var s,n,i,l,r,o,a,u,c,h,d=function(t,e){return function(){return t.apply(e,arguments)}},f=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;i=R.getDOMSelection,n=R.getDOMRange,h=R.setDOMRange,s=R.elementContainsNode,o=R.nodeIsCursorTarget,r=R.innerElementIsActive,l=R.handleEvent,a=R.normalizeRange,u=R.rangeIsCollapsed,c=R.rangesAreEqual,R.SelectionManager=function(t){function e(t){this.element=t,this.selectionDidChange=d(this.selectionDidChange,this),this.didMouseDown=d(this.didMouseDown,this),this.locationMapper=new R.LocationMapper(this.element),this.pointMapper=new R.PointMapper,this.lockCount=0,l("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}return f(e,t),e.prototype.getLocationRange=function(t){var e;return null==t&&(t={}),!1===t.strict?this.createLocationRangeFromDOMRange(n(),{strict:!1}):t.ignoreLock?this.currentLocationRange:null!=(e=this.lockedLocationRange)?e:this.currentLocationRange},e.prototype.setLocationRange=function(t){var e;if(!this.lockedLocationRange)return t=a(t),(e=this.createDOMRangeFromLocationRange(t))?(h(e),this.updateCurrentLocationRange(t)):void 0},e.prototype.setLocationRangeFromPointRange=function(t){var e,n;return t=a(t),n=this.getLocationAtPoint(t[0]),e=this.getLocationAtPoint(t[1]),this.setLocationRange([n,e])},e.prototype.getClientRectAtLocationRange=function(t){var e;return(e=this.createDOMRangeFromLocationRange(t))?this.getClientRectsForDOMRange(e)[1]:void 0},e.prototype.locationIsCursorTarget=function(t){var e,n;return e=(n=this.findNodeAndOffsetFromLocation(t))[0],n[1],o(e)},e.prototype.lock=function(){return 0==this.lockCount++?(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange()):void 0},e.prototype.unlock=function(){var t;return 0==--this.lockCount&&(t=this.lockedLocationRange,(this.lockedLocationRange=null)!=t)?this.setLocationRange(t):void 0},e.prototype.clearSelection=function(){var t;return null!=(t=i())?t.removeAllRanges():void 0},e.prototype.selectionIsCollapsed=function(){var t;return!0===(null!=(t=n())?t.collapsed:void 0)},e.prototype.selectionIsExpanded=function(){return!this.selectionIsCollapsed()},e.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),e.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),e.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),e.proxyMethod("pointMapper.createDOMRangeFromPoint"),e.proxyMethod("pointMapper.getClientRectsForDOMRange"),e.prototype.didMouseDown=function(){return this.pauseTemporarily()},e.prototype.pauseTemporarily=function(){var r,o,n,i,a;return this.paused=!0,a=this,o=function(){var t,e;for(a.paused=!1,clearTimeout(i),t=0,e=n.length;t<e;t++)n[t].destroy();return s(document,a.element)?a.selectionDidChange():void 0},i=setTimeout(o,200),n=function(){var t,e,n,i;for(i=[],t=0,e=(n=["mousemove","keydown"]).length;t<e;t++)r=n[t],i.push(l(r,{onElement:document,
withCallback:o}));return i}()},e.prototype.selectionDidChange=function(){return this.paused||r(this.element)?void 0:this.updateCurrentLocationRange()},e.prototype.updateCurrentLocationRange=function(t){var e;return(null!=t?t:t=this.createLocationRangeFromDOMRange(n()))&&!c(t,this.currentLocationRange)?(this.currentLocationRange=t,null!=(e=this.delegate)&&"function"==typeof e.locationRangeDidChange?e.locationRangeDidChange(this.currentLocationRange.slice(0)):void 0):void 0},e.prototype.createDOMRangeFromLocationRange=function(t){var e,n,i,r;return i=this.findContainerAndOffsetFromLocation(t[0]),n=u(t)?i:null!=(r=this.findContainerAndOffsetFromLocation(t[1]))?r:i,null!=i&&null!=n?((e=document.createRange()).setStart.apply(e,i),e.setEnd.apply(e,n),e):void 0},e.prototype.createLocationRangeFromDOMRange=function(t,e){var n,i;if(null!=t&&this.domRangeWithinElement(t)&&(i=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e)))return t.collapsed||(n=this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e)),a([i,n])},e.prototype.getLocationAtPoint=function(t){var e,n;return(e=this.createDOMRangeFromPoint(t))&&null!=(n=this.createLocationRangeFromDOMRange(e))?n[0]:void 0},e.prototype.domRangeWithinElement=function(t){return t.collapsed?s(this.element,t.startContainer):s(this.element,t.startContainer)&&s(this.element,t.endContainer)},e}(R.BasicObject)}.call(this),function(){var n,i,r,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,s=[].slice;i=R.rangeIsCollapsed,r=R.rangesAreEqual,n=R.objectsAreEqual,R.EditorController=function(t){function e(t){var e,n;this.editorElement=t.editorElement,e=t.document,n=t.html,this.selectionManager=new R.SelectionManager(this.editorElement),(this.selectionManager.delegate=this).composition=new R.Composition,(this.composition.delegate=this).attachmentManager=new R.AttachmentManager(this.composition.getAttachments()),(this.attachmentManager.delegate=this).inputController=new R.InputController(this.editorElement),(this.inputController.delegate=this).inputController.responder=this.composition,this.compositionController=new R.CompositionController(this.editorElement,this.composition),(this.compositionController.delegate=this).toolbarController=new R.ToolbarController(this.editorElement.toolbarElement),(this.toolbarController.delegate=this).editor=new R.Editor(this.composition,this.selectionManager,this.editorElement),null!=e?this.editor.loadDocument(e):this.editor.loadHTML(n)}return o(e,t),e.prototype.registerSelectionManager=function(){return R.selectionChangeObserver.registerSelectionManager(this.selectionManager)},e.prototype.unregisterSelectionManager=function(){return R.selectionChangeObserver.unregisterSelectionManager(this.selectionManager)},e.prototype.compositionDidChangeDocument=function(){return this.notifyEditorElement("document-change"),this.handlingInput?void 0:this.render()},e.prototype.compositionDidChangeCurrentAttributes=function(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})},e.prototype.compositionDidPerformInsertionAtRange=function(t){return this.pasting?this.pastedRange=t:void 0},e.prototype.compositionShouldAcceptFile=function(t){return this.notifyEditorElement("file-accept",{file:t})},e.prototype.compositionDidAddAttachment=function(t){var e;return e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-add",{attachment:e})},e.prototype.compositionDidEditAttachment=function(t){var e;return this.compositionController.rerenderViewForObject(t),e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-edit",{attachment:e}),this.notifyEditorElement("change")},e.prototype.compositionDidChangeAttachmentPreviewURL=function(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")},e.prototype.compositionDidRemoveAttachment=function(t){var e;return e=this.attachmentManager.unmanageAttachment(t),this.notifyEditorElement("attachment-remove",{attachment:e})},e.prototype.compositionDidStartEditingAttachment=function(t){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t),this.selectionManager.setLocationRange(this.attachmentLocationRange)},e.prototype.compositionDidStopEditingAttachment=function(){return this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null},e.prototype.compositionDidRequestChangingSelectionToLocationRange=function(t){return!this.loadingSnapshot||this.isFocused()?(this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()):void 0},e.prototype.compositionWillLoadSnapshot=function(){return this.loadingSnapshot=!0},e.prototype.compositionDidLoadSnapshot=function(){return this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1},e.prototype.getSelectionManager=function(){return this.selectionManager},e.proxyMethod("getSelectionManager().setLocationRange"),e.proxyMethod("getSelectionManager().getLocationRange"),e.prototype.attachmentManagerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},e.prototype.compositionControllerWillSyncDocumentView=function(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()},e.prototype.compositionControllerDidSyncDocumentView=function(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")},e.prototype.compositionControllerDidRender=function(){return null!=this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision},e.prototype.compositionControllerDidFocus=function(){return this.toolbarController.hideDialog(),this.notifyEditorElement("focus")},e.prototype.compositionControllerDidBlur=function(){return this.notifyEditorElement("blur")},e.prototype.compositionControllerDidSelectAttachment=function(t){return this.composition.editAttachment(t)},e.prototype.compositionControllerDidRequestDeselectingAttachment=function(t){var e,n;return e=null!=(n=this.attachmentLocationRange)?n:this.composition.document.getLocationRangeOfAttachment(t),this.selectionManager.setLocationRange(e[1])},e.prototype.compositionControllerWillUpdateAttachment=function(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})},e.prototype.compositionControllerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},e.prototype.inputControllerWillHandleInput=function(){return this.handlingInput=!0,this.requestedRender=!1},e.prototype.inputControllerDidRequestRender=function(){return this.requestedRender=!0},e.prototype.inputControllerDidHandleInput=function(){return this.handlingInput=!1,this.requestedRender?(this.requestedRender=!1,this.render()):void 0},e.prototype.inputControllerDidAllowUnhandledInput=function(){return this.notifyEditorElement("change")},e.prototype.inputControllerDidRequestReparse=function(){return this.reparse()},e.prototype.inputControllerWillPerformTyping=function(){return this.recordTypingUndoEntry()},e.prototype.inputControllerWillCutText=function(){return this.editor.recordUndoEntry("Cut")},e.prototype.inputControllerWillPaste=function(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})},e.prototype.inputControllerDidPaste=function(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})},e.prototype.inputControllerWillMoveText=function(){return this.editor.recordUndoEntry("Move")},e.prototype.inputControllerWillAttachFiles=function(){return this.editor.recordUndoEntry("Drop Files")},e.prototype.inputControllerDidReceiveKeyboardCommand=function(t){return this.toolbarController.applyKeyboardCommand(t)},e.prototype.inputControllerDidStartDrag=function(){return this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()},e.prototype.inputControllerDidReceiveDragOverPoint=function(t){return this.selectionManager.setLocationRangeFromPointRange(t)},e.prototype.inputControllerDidCancelDrag=function(){return this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null},e.prototype.locationRangeDidChange=function(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!r(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")},e.prototype.toolbarDidClickButton=function(){return this.getLocationRange()?void 0:this.setLocationRange({index:0,offset:0})},e.prototype.toolbarDidInvokeAction=function(t){return this.invokeAction(t)},e.prototype.toolbarDidToggleAttribute=function(t){return this.recordFormattingUndoEntry(),this.composition.toggleCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},e.prototype.toolbarDidUpdateAttribute=function(t,e){return this.recordFormattingUndoEntry(),this.composition.setCurrentAttribute(t,e),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},e.prototype.toolbarDidRemoveAttribute=function(t){return this.recordFormattingUndoEntry(),this.composition.removeCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},e.prototype.toolbarWillShowDialog=function(){return this.composition.expandSelectionForEditing(),this.freezeSelection()},e.prototype.toolbarDidShowDialog=function(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})},e.prototype.toolbarDidHideDialog=function(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})},e.prototype.freezeSelection=function(){return this.selectionFrozen?void 0:(this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render())},e.prototype.thawSelection=function(){return this.selectionFrozen?(this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()):void 0},e.prototype.actions={undo:{test:function(){return this.editor.canUndo()},perform:function(){return this.editor.undo()}},redo:{test:function(){return this.editor.canRedo()},perform:function(){return this.editor.redo()}},link:{test:function(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}},increaseBlockLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseBlockLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}}},e.prototype.canInvokeAction=function(t){var e,n;return!!this.actionIsExternal(t)||!!(null!=(e=this.actions[t])&&null!=(n=e.test)?n.call(this):void 0)},e.prototype.invokeAction=function(t){var e,n;return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t}):null!=(e=this.actions[t])&&null!=(n=e.perform)?n.call(this):void 0},e.prototype.actionIsExternal=function(t){return/^x-./.test(t)},e.prototype.getCurrentActions=function(){var t,e;for(t in e={},this.actions)e[t]=this.canInvokeAction(t);return e},e.prototype.updateCurrentActions=function(){var t;return t=this.getCurrentActions(),n(t,this.currentActions)?void 0:(this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions}))},e.prototype.reparse=function(){return this.composition.replaceHTML(this.editorElement.innerHTML)},e.prototype.render=function(){return this.compositionController.render()},e.prototype.updateInputElement=function(){var t,e;return t=this.compositionController.getSerializableElement(),e=R.serializeToContentType(t,"text/html"),this.editorElement.setInputElementValue(e)},e.prototype.notifyEditorElement=function(t,e){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,e)},e.prototype.removeAttachment=function(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()},e.prototype.recordFormattingUndoEntry=function(){var t;return t=this.selectionManager.getLocationRange(),i(t)?void 0:this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})},e.prototype.recordTypingUndoEntry=function(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})},e.prototype.getUndoContext=function(){var t;return t=1<=arguments.length?s.call(arguments,0):[],[this.getLocationContext(),this.getTimeContext()].concat(s.call(t))},e.prototype.getLocationContext=function(){var t;return t=this.selectionManager.getLocationRange(),i(t)?t[0].index:t},e.prototype.getTimeContext=function(){return 0<R.config.undoInterval?Math.floor((new Date).getTime()/R.config.undoInterval):0},e.prototype.isFocused=function(){var t;return this.editorElement===(null!=(t=this.editorElement.ownerDocument)?t.activeElement:void 0)},e}(R.Controller)}.call(this),function(){var t,e,n,i,r,o,a,s,l,u,c,h,d;i=R.makeElement,r=R.triggerEvent,e=R.handleEvent,n=R.handleEventOnce,t=R.AttachmentView.attachmentSelector,R.registerElement("trix-editor",(c=0,o=function(t){return!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t?t.focus():void 0},h=function(t){return t.hasAttribute("contenteditable")?void 0:(t.setAttribute("contenteditable",""),n("focus",{onElement:t,withCallback:function(){return s(t)}}))},s=function(t){return u(t),d(t)},u=function(t){return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("enableObjectResizing"):void 0)?(document.execCommand("enableObjectResizing",!1,!1),e("mscontrolselect",{onElement:t,preventDefault:!0})):void 0},d=function(){var t;return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("DefaultParagraphSeparator"):void 0)&&("div"===(t=R.config.blockAttributes["default"].tagName)||"p"===t)?document.execCommand("DefaultParagraphSeparator",!1,t):void 0},a=/Trident.*rv:11/.test(navigator.userAgent),{defaultCSS:"%t:empty:not(:focus)::before {\n  content: attr(placeholder);\n  color: graytext;\n}\n\n%t a[contenteditable=false] {\n  cursor: text;\n}\n\n%t img {\n  max-width: 100%;\n  height: auto;\n}\n\n%t "+t+" figcaption textarea {\n  resize: none;\n}\n\n%t "+t+" figcaption textarea.trix-autoresize-clone {\n  position: absolute;\n  left: -9999px;\n  max-height: 0px;\n}\n\n%t "+t+" figcaption[data-trix-placeholder]:empty::before {\n  content: attr(data-trix-placeholder);\n  color: graytext;\n}\n\n%t [data-trix-cursor-target] {\n  display: "+(l=a?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"}).display+" !important;\n  width: "+l.width+" !important;\n  padding: 0 !important;\n  margin: 0 !important;\n  border: none !important;\n}\n\n%t [data-trix-cursor-target=left] {\n  vertical-align: top !important;\n  margin-left: -1px !important;\n}\n\n%t [data-trix-cursor-target=right] {\n  vertical-align: bottom !important;\n  margin-right: -1px !important;\n}",trixId:{get:function(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++c),this.trixId)}},toolbarElement:{get:function(){var t,e,n;return this.hasAttribute("toolbar")?null!=(e=this.ownerDocument)?e.getElementById(this.getAttribute("toolbar")):void 0:this.parentNode?(n="trix-toolbar-"+this.trixId,this.setAttribute("toolbar",n),t=i("trix-toolbar",{id:n}),this.parentNode.insertBefore(t,this),t):void 0}},inputElement:{get:function(){var t,e,n;return this.hasAttribute("input")?null!=(n=this.ownerDocument)?n.getElementById(this.getAttribute("input")):void 0:this.parentNode?(e="trix-input-"+this.trixId,this.setAttribute("input",e),t=i("input",{type:"hidden",id:e}),this.parentNode.insertBefore(t,this.nextElementSibling),t):void 0}},editor:{get:function(){var t;return null!=(t=this.editorController)?t.editor:void 0}},name:{get:function(){var t;return null!=(t=this.inputElement)?t.name:void 0}},value:{get:function(){var t;return null!=(t=this.inputElement)?t.value:void 0},set:function(t){var e;return this.defaultValue=t,null!=(e=this.editor)?e.loadHTML(this.defaultValue):void 0}},notify:function(t,e){return this.editorController?r("trix-"+t,{onElement:this,attributes:e}):void 0},setInputElementValue:function(t){var e;return null!=(e=this.inputElement)?e.value=t:void 0},createdCallback:function(){return h(this)},attachedCallback:function(){return this.hasAttribute("data-trix-internal")?void 0:(null==this.editorController&&(this.editorController=new R.EditorController({editorElement:this,html:this.defaultValue=this.value})),this.editorController.registerSelectionManager(),this.registerResetListener(),o(this),requestAnimationFrame((t=this,function(){return t.notify("initialize")})));var t},detachedCallback:function(){var t;return null!=(t=this.editorController)&&t.unregisterSelectionManager(),this.unregisterResetListener()},registerResetListener:function(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)},unregisterResetListener:function(){return window.removeEventListener("reset",this.resetListener,!1)},resetBubbled:function(t){var e;return t.target!==(null!=(e=this.inputElement)?e.form:void 0)||t.defaultPrevented?void 0:this.reset()},reset:function(){return this.value=this.defaultValue}}))}.call(this),function(){}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=R:"function"==typeof define&&define.amd&&define(R)}.call(this);