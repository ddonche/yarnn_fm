<% content_for :head do %>
  <!-- Facebook -->
  <meta property="og:title" content="<%= @blog.title %>" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="<%= request.original_url %>" />
  <% if @blog.image? %>
  <meta property="og:image:url" content="<%= @blog.image.url %>" />
  <% end %>
  <meta property="og:description" content="<%= truncate(strip_tags(@blog.body.to_s), length: 250)%>" />
  <meta property="og:site_name" content="Yarnn.FM" />
  <meta property="fb:app_id" content="395394867776017" />
  
  <!-- Twitter Card data -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@totaldanarchy">
  <meta name="twitter:title" content="<%= @blog.title %>">
  <meta name="twitter:description" content="<%= truncate(strip_tags(@blog.body.to_s), length: 250)%>">
  <meta name="twitter:creator" content="<%= @blog.user.username %>">
  <% if @blog.image? %>
  <meta name="twitter:image:src" content="<%= @blog.image.url %>">
  <% end %>
<% end %>

<body class="bg-white">
<%= render 'shared/alert' %>

  <!-- Page Header -->
  <header>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <% if @blog.image? %>
              <%= image_tag @blog.image.url, width: "100%", class: "mt-4 p-2 border" %>
            <% end %>
          <div class="post-heading mt-2">
            <h1><%= @blog.title %></h1>
          </div>
          
          <div class="row mb-2">
                <div class="col-12">
                  
                  <small><i>Posted by</i></small> <%= link_to @blog.user.name, user_path(@blog.user), class: "mx-1" %>
  						    <i>- <%= time_ago_in_words(@blog.created_at) %> ago</i>
  						    <small>
  						    <% if @blog.user == current_user %>
                    <i class="fas fa-cog site-red mr-1 ml-3"></i><%= link_to "edit", edit_blog_path(@blog) %>
                  <% end %>
                  <% if @user_flag.try(:any?) %>
                      <i class="fas fa-flag site-red ml-3 mr-2"></i>You reported this.
                  <% else %>
                      <%= render "blogs/flag_form" %>
                  <% end %>
                  </small>
  						    
  						    
                </div>
            </div><!-- end row -->
            <div class="row mb-4">
              <div class="col-12">
                <ul class="nav text-uppercase">
    								<li class="site-blue small mr-3">
    									<i class="fas fa-headphones site-blue" title="tracks"></i> Tracks (<%= @blog.user.tracks.count %>)
    								</li>
    								<li class="site-blue small mr-3">
    									<i class="fas fa-compact-disc site-blue" title="albums"></i> Albums (<%= @blog.user.albums.count %>)
    								</li>
    								<li class="site-blue small mr-3">
    									<i class="fas fa-pen-nib site-blue" title="blog posts"></i> Blog Posts (<%= @blog.user.blogs.count %>)
    								</li>
    								<li class="site-red mr-3">
    								  <%= link_to like_blog_path(@blog), method: :put, remote: true do %><i class="fa fa-chevron-up" title="upvotes"></i><% end %> <div id="upvote" style="display: inline;"><%= @blog.get_upvotes.size %></div>
    								</li>
    								<li class="site-red">
    								  <%= link_to dislike_blog_path(@blog), method: :put, remote: true do %><i class="fa fa-chevron-down" title="downvotes"></i><% end %> <div id="downvote" style="display: inline;"><%= @blog.get_downvotes.size %></div>
    								</li>
    						</ul>

              </div>
            </div><!-- end row -->
            
        </div><!-- end column -->
      </div>
    </div>
  </header>

  <!-- Post Content -->
  <article>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <%= @blog.body %>
          <hr class="colorgraph my-3">
          <div class="row">
            <div class="col-12 mb-2">
    	        <% if user_signed_in? %>
                <%= render "comments/form" %>
              <% else %>
                <div class="small" style="color: #fc0000;"><em><strong>You must be logged in to comment.</strong></em></div>
              <% end %>
            </div>
            <div class="col-12">
              <%= render 'comments/comments', :commentable => @blog %>
            </div>
          </div><!-- end row -->
        </div>
        
      </div>
      
    </div>
  </article>
  
</body>