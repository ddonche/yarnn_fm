(function(e){e.fn.hap=function(c){function d(a){(function(a,f,l){var b=a.getElementsByTagName(f)[0];a.getElementById(l)||(a=a.createElement(f),a.id=l,a.src="//connect.facebook.net/en_US/sdk.js",b.parentNode.insertBefore(a,b))})(document,"script","facebook-jssdk");window.fbAsyncInit=function(){FB.init({appId:a,xfbml:!0,version:"v2.9"})}}function na(a){if(n){if(!Aa){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();Aa=!0;O.on(K,function(a){a:{if("touchmove"==
a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();z(b)}}).on(oa,function(a){a:if(Aa){Aa=!1;O.off(K).off(oa);if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=
a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();z(b)}})}return!1}}function z(a){Ba?a=gb.setProgress(a):(a=a.pageX-Ma.offset().left,0>a?a=0:a>L&&(a=L),a=Math.max(0,Math.min(1,a/L)));if(h&&pa)try{h.currentTime=a*h.duration}catch(b){console.log(b)}}function E(a){if(Ba)b=gb.trackTooltip(a),f=k[0].getBoundingClientRect(),l=P[0].getBoundingClientRect(),a=parseInt(l.top-f.top-v.outerHeight()-10),g=parseInt(l.left-f.left-v.outerWidth()/2+P.outerWidth()/
2);else{b=a.pageX-Ma.offset().left;if(!HAPUtils.isNumber(b))return!1;0>b?b=0:b>L&&(b=L);var b=Math.max(0,Math.min(1,b/L)),f=k[0].getBoundingClientRect(),l=P[0].getBoundingClientRect(),g=parseInt(a.pageX-qa.scrollLeft()-f.left-v.outerWidth()/2);a=parseInt(l.top-f.top-5-v.outerHeight(),10)}g+v.outerWidth()>k.width()?g=k.width()-v.outerWidth():0>g&&(g=0);0>a+f.top&&(a=parseInt(l.top-f.top+v.outerHeight()+15));v.css({left:g+"px",top:a+"px"}).show();if(!HAPUtils.isNumber(b))return!1;h&&(f=h.duration,a=
b*f,HAPUtils.isNumber(a)&&HAPUtils.isNumber(f)&&v.find("p").html(HAPUtils.formatCurrentTime(a)+" / "+HAPUtils.formatDuration(f)))}function A(a){if(n){if(!Ca){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();Ca=!0;O.on(K,function(a){a:{if("touchmove"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;
else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();ra(b)}}).on(oa,function(a){a:if(Ca){Ca=!1;O.off(K).off(oa);if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();ra(b)}})}return!1}}function B(){if(!n)return!1;0<w?(hb=w,w=0):w=hb;p()}function ra(a){ba?
(w=Math.max(0,Math.min(1,(a.pageY-X.offset().top)/Q)),w=1-w):w=Math.max(0,Math.min(1,(a.pageX-X.offset().left)/Q));p()}function p(a){"undefined"!==typeof a&&(w=a);h&&(h.volume=w);a=ba?"height":"width";HAPUtils.isNumber(Q)||(Q=volumeVertical?X.height():X.width());ec.css(a,w*Q+"px");0==w?Na.find("i").removeClass("fa-volume-up fa-volume-down").addClass("fa-volume-off"):0<w&&.5>w?Na.find("i").removeClass("fa-volume-off fa-volume-up").addClass("fa-volume-down"):Na.find("i").removeClass("fa-volume-off fa-volume-down").addClass("fa-volume-up");
e(m).trigger("volumeChange",{instance:m,instanceName:F,volume:w})}function Da(a){var b=ba?a.pageY-X.offset().top:a.pageX-X.offset().left;0>b?b=0:b>Q&&(b=Q);b=Math.max(0,Math.min(1,b/Q));if(!HAPUtils.isNumber(b))return!1;ba&&(b=1-b);b=parseInt(100*b,10);v.find("p").text(b+" %");b=k[0].getBoundingClientRect();var f=R[0].getBoundingClientRect();if(ba){var l=parseInt(f.left-b.left-v.outerWidth()/2+R.outerWidth()/2);a=parseInt(a.pageY-qa.scrollTop()-b.top-v.outerHeight()-10)}else l=parseInt(a.pageX-qa.scrollLeft()-
b.left-v.outerWidth()/2),a=parseInt(f.top-b.top-v.outerHeight());l+v.outerWidth()>k.width()?l=k.width()-v.outerWidth():0>l&&(l=0);0>a+b.top&&(a=parseInt(f.top-b.top+v.outerHeight()+15));v.css({left:l+"px",top:a+"px"}).show()}function ca(a){a.preventDefault();if(!n)return!1;a=e(a.currentTarget);if(y&&y.is(a))return!1;ib=!0;q.processPlaylistRequest(a.closest(".hap-playlist-item").index());e(m).trigger("clickPlaylistItem",{instance:m,instanceName:F})}function S(a){a.preventDefault();if(!n)return!1;a=
e(a.currentTarget);if(y&&y.is(a))return!1;a.removeClass("hap-playlist-non-selected").addClass("hap-playlist-selected");e(m).trigger("overPlaylistItem",{instance:m,instanceName:F,item:a})}function D(a){a.preventDefault();if(!n)return!1;a=e(a.currentTarget);if(y&&y.is(a))return!1;a.removeClass("hap-playlist-selected").addClass("hap-playlist-non-selected");e(m).trigger("outPlaylistItem",{instance:m,instanceName:F,item:a})}function sa(a){if(!n)return!1;a=e(a.currentTarget);if(a.hasClass("hap-prev-toggle"))m.previousMedia();
else if(a.hasClass("hap-playback-toggle"))m.togglePlayback();else if(a.hasClass("hap-next-toggle"))m.nextMedia();else if(a.hasClass("hap-volume-toggle"))B();else if(a.hasClass("hap-loop-toggle"))M=!M,q.setLooping(M),M?ta.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):ta.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color");else if(a.hasClass("hap-random-toggle"))N=!N,q.setRandom(N),N?ua.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):
ua.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color");else if(a.hasClass("hap-sort-alpha"))m.sort("title",va);else if(a.hasClass("hap-popup-toggle"))hapOpenPopup(m,c);else if(a.hasClass("hap-share-toggle"))fc.toggle();else if(a.hasClass("hap-share-item")){a=a.attr("data-type").toLowerCase();var b="https:"==window.location.protocol?"https:":"http:",f=(window.screen.width-600)/2,l=(window.screen.height-300)/2,g=r.title||"",da=r.description||"",d=r.thumb||"",h=r.share||window.location.href,
k;HAPUtils.relativePath(d)||(d=HAPUtils.qualifyURL(d));"facebook"==a?window.FB&&FB.ui({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:{"og:url":h,"og:title":g,"og:description":da,"og:image":d}})}):"twitter"==a?k=b+"//twitter.com/share?url="+encodeURIComponent(h)+"&text="+encodeURIComponent(g):"googleplus"==a?k=b+"//plus.google.com/share?url="+encodeURIComponent(h):"tumblr"==a&&(k=b+"//www.tumblr.com/share/link?url="+encodeURIComponent(h)+"&amp;name="+encodeURIComponent(g)+
"&amp;description="+encodeURIComponent(da));k&&window.open(k,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=600,height=300,left="+f+",top="+l)}}function Ea(a){if(!n||Ca||Aa)return!1;a=e(a.currentTarget).find("i");a.hasClass("hap-icon-color")&&a.removeClass("hap-icon-color").addClass("hap-icon-rollover-color")}function Fa(a){if(!n)return!1;a=e(a.currentTarget);var b=a.find("i");a.hasClass("hap-random-toggle")&&N||a.hasClass("hap-loop-toggle")&&M||b.hasClass("hap-icon-rollover-color")&&
b.removeClass("hap-icon-rollover-color").addClass("hap-icon-color")}function Oa(){y&&(e(m).trigger("playlistItemEnabled",{instance:m,instanceName:F,item:y}),y.removeClass("hap-playlist-selected").addClass("hap-playlist-non-selected"),y=null)}function Eb(a){T=!0;Ga.show();ea?jb():u.empty();var b=e(a);if(0==b.length)return alert("Failed playlist selection! Playlist - "+a+" does not exist. Check activePlaylist option in settings!"),Fb(),!1;kb=a;e(m).trigger("playlistStartLoad",{instance:m,instanceName:F});
if(void 0!=b.attr("data-type")&&"xml"==b.attr("data-type"))gc(Pa(b));else{var f,l,g;b.children(".hap-playlist-item").each(function(){l=e(this);g=l.attr("data-type");RegExp(/^audio$/).test(g)?G.push(l.clone()):RegExp(/^hls$/).test(g)?G.push(l.clone()):RegExp(/^radio$/).test(g)?G.push(l.clone()):(f=Pa(l),G.push(f))});t=G.length;x()}}function x(){wa++;if(wa>t-1)hc();else{var a=G[wa],b=a.type;b?RegExp(/^soundcloud$/).test(b)?(fa=a.limit||1E3,J=[],Gb?Qa(!0,a.path):ic(a.path)):RegExp(/^podcast$/).test(b)?
jc(a):RegExp(/^itunes_podcast_music$/).test(b)?kc(a):RegExp(/^folder$/).test(b)?lc(a):/^gdrive-folder$/.test(b)?mc(a):RegExp(/^audio$/).test(b)?(H.push(a),x()):RegExp(/^hls$/).test(b)&&(H.push(a),x()):(H.push(a),x())}}function Pa(a){var b={};b.origclasses=a.attr("class");b.type=a.attr("data-type");a.attr("data-hls")&&!HAPUtils.isEmpty(a.attr("data-hls"))&&(b.hls=a.attr("data-hls"));a.attr("data-mp3")&&!HAPUtils.isEmpty(a.attr("data-mp3"))&&(b.mp3=a.attr("data-mp3"));a.attr("data-wav")&&!HAPUtils.isEmpty(a.attr("data-wav"))&&
(b.wav=a.attr("data-wav"));if("audio"==b.type){if(void 0!=a.attr("data-path")&&!HAPUtils.isEmpty(a.attr("data-path"))){var f=a.attr("data-path"),l=f.substr(f.lastIndexOf(".")+1);"mp3"==l.toLowerCase()||"wav"==l.toLowerCase()?b[l.toLowerCase()]=f:b.mp3=f}}else void 0==a.attr("data-path")||HAPUtils.isEmpty(a.attr("data-path"))||(b.path=b.id=a.attr("data-path"));void 0!=a.attr("data-limit")&&!HAPUtils.isEmpty(a.attr("data-limit"))&&HAPUtils.isNumber(a.attr("data-limit"))&&0!=Math.abs(parseInt(a.attr("data-limit"),
10))&&(b.limit=Math.abs(parseInt(a.attr("data-limit"),10)));void 0==a.attr("data-artwork")||HAPUtils.isEmpty(a.attr("data-artwork"))||(b.artwork=a.data("artwork"));void 0==a.attr("data-thumb")||HAPUtils.isEmpty(a.attr("data-thumb"))?a.find(".hap-playlist-thumb img").length?b.thumb=a.find(".hap-playlist-thumb img").attr("src"):void 0==a.attr("data-thumb-default")||HAPUtils.isEmpty(a.attr("data-thumb-default"))||(b.thumbDefault=a.attr("data-thumb-default")):b.thumb=a.attr("data-thumb");void 0==a.attr("data-thumb-quality")||
HAPUtils.isEmpty(a.attr("data-thumb-quality"))||(b.thumbQuality=a.attr("data-thumb-quality"));void 0==a.attr("data-title")||HAPUtils.isEmpty(a.attr("data-title"))?a.find(".hap-playlist-title").length&&(b.title=a.find(".hap-playlist-title").html()):b.title=a.attr("data-title");void 0==a.attr("data-description")||HAPUtils.isEmpty(a.attr("data-description"))||(b.description=a.attr("data-description"));void 0==a.attr("data-artist")||HAPUtils.isEmpty(a.attr("data-artist"))||(b.artist=a.attr("data-artist"));
void 0==a.attr("data-album")||HAPUtils.isEmpty(a.attr("data-album"))||(b.album=a.attr("data-album"));void 0==a.attr("data-download")||HAPUtils.isEmpty(a.attr("data-download"))||(b.download=a.attr("data-download"));void 0!=a.attr("data-id3")&&(b.id3=!0);void 0==a.attr("data-start")||HAPUtils.isEmpty(a.attr("data-start"))||(b.start=Math.abs(a.attr("data-start")));void 0==a.attr("data-end")||HAPUtils.isEmpty(a.attr("data-end"))||(b.end=Math.abs(a.attr("data-end")));void 0!=a.attr("data-playback-rate")&&
(b.playbackRate=1,HAPUtils.isEmpty(a.attr("data-playback-rate"))||(b.playbackRate=Math.abs(a.attr("data-playback-rate"))));void 0==a.attr("data-link")||HAPUtils.isEmpty(a.attr("data-link"))||(b.link=a.attr("data-link"),b.target="_blank",void 0==a.attr("data-target")||HAPUtils.isEmpty(a.attr("data-target"))||(b.target=a.attr("data-target")));void 0==a.attr("data-share")||HAPUtils.isEmpty(a.attr("data-share"))||(b.share=a.attr("data-share"));a.is(":empty")||(b.content=a.html());return b}function lc(a){if("file:"==
window.location.protocol)return alert("Reading files from folders locally is not possible! This requires online server connection."),x(),!1;var b=a.path.replace(/\/\//g,"/"),f=Hb+"includes/folder_parser.php";b={dir:b};a.id3&&(lb=ha=H.length-1);e.ajax({type:"GET",url:f,data:b,dataType:"json"}).done(function(b){var f,l=b.length;HAPUtils.keysrt(b,"filename");for(f=0;f<l;f++){var c=b[f];var d=e.extend(!0,{},a);d.type="audio";var h=c.fullpath;d[c.extension]=h;delete d.path;"undefined"===typeof d.download&&
(d.download=h);"undefined"===typeof d.share&&(d.share=h);d.title||(d.title=c.filename);H.push(d);ha++}a.id3?mb():x()}).fail(function(a,b,f){console.log("Error processFolder: "+a,b,f);x()})}function mc(a){if("file:"==window.location.protocol)return alert("Reading files from folders locally is not possible! This requires online server connection."),x(),!1;if(HAPUtils.isEmpty(Ib))return alert("gDriveAppId has not been set in settings!"),x(),!1;e.ajax({url:"https://www.googleapis.com/drive/v3/files?q='"+
a.path+"'+in+parents&key="+Ib,dataType:"jsonp"}).done(function(b){var f,l=b.files.length,g=[],da=[];for(f=0;f<l;f++){var c=b.files[f];/mp3|mpeg|mpeg3|wav/.test(c.mimeType)?da.push(c):/jpg|jpeg|png/.test(c.mimeType)&&g.push(c)}HAPUtils.keysrt(da,"name");HAPUtils.keysrt(g,"name");l=da.length;for(f=0;f<l;f++){c=da[f];b=e.extend(!0,{},a);b.type="audio";var d=c.name.substr(c.name.lastIndexOf(".")+1);b[d.toLowerCase()]="https://drive.google.com/uc?export=view&id="+c.id;delete b.path;"undefined"===typeof b.download&&
(b.download="https://drive.google.com/uc?export=download&id="+c.id);"undefined"===typeof b.share&&(b.share="https://drive.google.com/open?id="+c.id);!b.thumb&&g[f]&&(b.thumb="https://drive.google.com/uc?export=view&id="+g[f].id);b.title||(b.title=c.name.substr(0,c.name.lastIndexOf(".")));H.push(b)}x()}).fail(function(a,f,l){console.log("Error processGdriveFolder: "+a,f,l);x()})}function mb(){var a=H[ha];jsmediatags.read(a.mp3||a.wav,{onSuccess:function(b){var f=b.tags;b=f.picture;f.artist&&(a.artist=
f.artist);f.title&&(a.title=f.title);f.album&&(a.album=f.album);if(b){f="";var l,g=b.data.length;for(l=0;l<g;l++)f+=String.fromCharCode(b.data[l]);a.thumb="data:"+b.format+";base64,"+window.btoa(f)}ha--;ha>lb?mb():x()},onError:function(a){console.log("ID3 error: ",a.type,a.info);ha--;ha>lb?mb():x()}})}function gc(a){e.ajax({type:"GET",url:a.path,dataType:"html"}).done(function(a){var b,l,g;e(a).children(".hap-playlist-item").each(function(){b=e(this);l=b.attr("data-type");RegExp(/^audio/).test(l)?
G.push(b):RegExp(/^hls/).test(l)?G.push(b):(g=Pa(b),G.push(g))});t=G.length;x()}).fail(function(a,f,l){console.log("Error processXml: "+a,f,l);x()})}function jc(a){if("file:"==window.location.protocol)alert("Using Podcast locally is not possible! This requires online server connection!"),x();else{var b=nc+"?url="+encodeURIComponent(a.path);e.ajax({url:b,dataType:"json",cache:!1}).done(function(b){var f=HAPUtils.parseXML(b.contents),g,c,d,h=0,k=a.limit||1E3;e(f).find("image").length&&e(f).find("image").attr("href")?
d=e(f).find("image").attr("href"):e(b.contents).find("itunes\\:image").length&&e(b.contents).find("itunes\\:image").attr("href")&&(d=e(b.contents).find("itunes\\:image").attr("href"));e(f).find("item").each(function(){if(h>=k)return!1;g=e(this);c=e.extend(!0,{},a);c.type="audio";c.path=g.find("enclosure").attr("url");"undefined"===typeof c.download&&(c.download=c.path);!c.title&&g.find("title").length&&(c.title=g.find("title").text());!c.artist&&g.find("author").length&&(c.artist=g.find("author").text());
!c.description&&g.find("description").length&&(c.description=g.find("description").text());!c.duration&&g.find("duration").length&&(c.duration=g.find("duration").text());c.thumb||(g.find("image").length&&g.find("image").attr("href")?c.thumb=g.find("image").attr("href"):d&&(c.thumb=d));"undefined"===typeof c.share&&g.find("link").length&&(c.share=g.find("link").text());H.push(c);h++});x()}).fail(function(a,b,g){console.log("Error processPodcast: "+a,b,g);x()})}}function kc(a){"file:"==window.location.protocol?
(alert("Using Podcast locally is not possible! This requires online server connection!"),x()):(encodeURIComponent(a.path),e.ajax({url:a.path}).done(function(b){b=e("<div></div>").html(b);var f,c,g,d=0,h=a.limit||500;if(b.find(".lockup.product.podcast").length){var k=b.find(".lockup.product.podcast").find("img");k.length&&(k.attr("src-swap-high-dpi").length?g=k.attr("src-swap-high-dpi"):k.attr("src-swap").length&&(g=k.attr("src-swap")))}b.find("tr.podcast-episode").each(function(){if(d>=h)return!1;
f=e(this);c=e.extend(!0,{},a);c.type="audio";c.path=f.attr("audio-preview-url");!c.title&&f.attr("preview-title").length&&(c.title=f.attr("preview-title"));!c.artist&&f.attr("preview-artist").length&&(c.artist=f.attr("preview-artist"));!c.description&&f.find(".episode-info").length&&(c.description=f.find(".episode-info").next().text());!c.thumb&&g&&(c.thumb=g);"undefined"===typeof c.share&&(c.share=a.path);H.push(c);d++});x()}).fail(function(a,f,c){console.log("Error processPodcast: "+a,f,c);x()}))}
function ic(a){if("file:"==window.location.protocol)alert("Using SoundCloud locally is not possible! This requires online server connection!"),x();else{if(HAPUtils.isEmpty(Ra))return alert("soundCloudAppId has not been set! Skipping Soundcloud url: "+a),x(),!1;var b=document.createElement("script");b.src="https://connect.soundcloud.com/sdk.js";var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(b,f);var c=setInterval(function(){window.SC&&(c&&clearInterval(c),SC.initialize({client_id:Ra}),
Gb=!0,Qa(!0,a))},100)}}function Qa(a,b){SC.get(a?"https://api.soundcloud.com/resolve.json?url="+b+"&client_id="+Ra:b,{limit:200,linked_partitioning:1},function(a,c){console.log(a);if(c){for(console.log("Error getSoundCloudPage: "+c);J.length;)H.push(J.splice(0,1)[0]);x()}else{if("track"==a.kind)Sa(a);else if("playlist"==a.kind){var f,l=a.tracks.length;if(J.length+l>=fa){l=fa-J.length;var d=!0}for(f=0;f<l;f++)Sa(a.tracks[f])}else if(a.collection)for(l=a.collection.length,J.length+l>=fa&&(l=fa-J.length,
d=!0),f=0;f<l;f++)Sa(a.collection[f]);else{if(a.username){f=a.uri;f=/likes/.test(b)?f+"/likes":/favorites/.test(b)?f+"/favorites":f+"/tracks";Qa(!1,f);return}if(e.isArray(a))for(l=a.length,J.length+l>=fa&&(l=fa-J.length,d=!0),f=0;f<l;f++)Sa(a[f])}if(a.next_href&&!d)Qa(!1,a.next_href);else{for(;J.length;)H.push(J.splice(0,1)[0]);x()}}})}function Sa(a){if(a.streamable&&a.stream_url){var b=e.extend(!0,{},G[wa]);b.type="audio";a.duration&&(b.duration=a.duration);b.path=a.stream_url+"?client_id="+Ra;"undefined"===
typeof b.download&&(a.downloadable&&a.download_url?b.download=b.path.replace(/\/stream\\?/,"/download"):delete b.download);!b.title&&a.title&&(b.title=a.title);!b.description&&a.description&&(b.description=a.description);!b.thumb&&a.artwork_url&&(b.thumb=a.artwork_url,b.thumbQuality&&(b.thumb=b.thumb.replace("large.jpg",b.thumbQuality)));b.favoritingsCount=parseInt(a.favoritings_count?a.favoritings_count:0,10);b.playbackCount=parseInt(a.playback_count?a.playback_count:0,10);b.hotness=b.favoritingsCount+
b.playbackCount;"undefined"===typeof b.share&&a.permalink_url&&(b.share=a.permalink_url);J.push(b)}}function oc(a){nb.empty();var b,f=a.length;for(b=0;b<f;b++){var c=a[b];var g=e('<div class="hap-playlist-item"/>');var d=c.thumb;if(d){var h=new Image;h.className="hap-hidden";h.onload=function(){this.className="hap-visible"};h.src=d;0==b&&(ob=d);e('<span class="hap-playlist-thumb"></span>').append(h).appendTo(g)}d=e('<span class="hap-playlist-info"></span>').appendTo(g);e('<span class="hap-playlist-title">'+
c.title+"</span>").appendTo(d);e('<span class="hap-playlist-artist">'+c.artist+"</span>").appendTo(d);g.appendTo(nb)}Jb||(Jb=!0,pb(pc));Ha||(Ha=!0,e(m).trigger("historyEndLoad"))}function hc(){var a,b=H.length,f,c=0;for(a=0;a<b;a++){Y&&c++;var g=H[a];var d=g.type;if(Ta){if(g instanceof e&&g.hasClass("hap-playlist-item")){d=g;if(Y){h?h.after(d):ia?d.appendTo(u):u.children("div").eq(I).before(d);var h=d}else d.appendTo(u);var k=d.find(".hap-playlist-non-selected, .hap-playlist-selected")}else{g.origclasses||
(g.origclasses="hap-playlist-item");d=e('<div class="'+g.origclasses+'"/>').attr("data-type",d);Y?(h?h.after(d):ia?d.appendTo(u):u.children("div").eq(I).before(d),h=d):d.appendTo(u);k=e('<a class="hap-playlist-non-selected" href="#"/>').appendTo(d);if(-1!=e.inArray("thumb",Kb)&&(f=g.thumb||g.thumbDefault)){var n=new Image;n.className="hap-hidden";n.onload=function(){this.className="hap-visible"};n.src=f;e('<span class="hap-playlist-thumb"></span>').append(n).appendTo(k);d.attr("data-thumb",f)}-1!=
e.inArray("title",Kb)&&(f=qc(g),e('<span class="hap-playlist-title">'+f+"</span>").appendTo(k),d.attr("data-title",g.title));(g.path||g.mp3)&&d.attr("data-mp3",g.path||g.mp3);g.hls&&d.attr("data-hls",g.hls);g.description&&d.attr("data-description",g.description);g.share&&d.attr("data-share",g.share);g.download&&d.attr("data-download",g.download);g.album&&d.attr("data-album",g.album);g.id3&&d.attr("data-id3",g.id3);g.start&&d.attr("data-start",g.start);g.end&&d.attr("data-end",g.end);g.playbackRate&&
d.attr("data-playback-rate",g.playbackRate);g.link&&(d.attr("data-link",g.link),g.target&&d.attr("data-target",g.target));rc&&g.link&&(f=e('<a class="hap-link" href="'+g.link+'" target="'+g.target+'"><i class="fa fa-link"></i></a>'),k.after(f));sc&&tc&&g.download&&(f=e('<a class="hap-download" href="'+g.download+'" download title="Download"><i class="fa fa-download"></i></a>'),k.after(f));g.content&&(d.append(g.content),delete g.content)}g.thumb&&!g.artwork&&(g.artwork=[{src:g.thumb}]);k.on("click",
ca);if(!U)k.on("mouseenter",S).on("mouseleave",D)}}ea=u;Lb();console.log("playlistLength = ",t);Y?(a=q.getCounter(),q.setPlaylistItems(t,!1),I<=a&&(ia||q.reSetCounter(a+c)),Ia?(Ia=!1,Ja&&!U&&(ja=!0),q.setCounter(I,!1)):Ja&&q.setCounter(I,!1)):q.setPlaylistItems(t);Fb();e(m).trigger("playlistEndLoad",{instance:m,instanceName:F})}function Lb(){t=u.children(".hap-playlist-item").length;if(Ta){var a=0,b,f,c,d;ka=[];u.find(".hap-playlist-item").each(function(){f=e(this).find(".hap-playlist-non-selected, .hap-playlist-selected");
c=f.find(".hap-playlist-title");c.length&&(b=c.html(),ka.push(b),Ua&&(d=HAPUtils.formatNumber(a)+qb,f.find(".hap-playlist-title-num").length?f.find(".hap-playlist-title-num").html(d):c.before(e('<span class="hap-playlist-title-num">'+d+"</span>"))));a++})}}function Mb(){if(Ta){var a=0,b,f;u.find(".hap-playlist-item").each(function(){b=e(this).find(".hap-playlist-non-selected, .hap-playlist-selected");f=HAPUtils.formatNumber(a)+qb;b.find(".hap-playlist-title-num").length?b.find(".hap-playlist-title-num").html(f):
title_node.before(e('<span class="hap-playlist-title-num">'+f+"</span>"));a++})}}function pb(a){console.log("checkPlaylistScroll");a.mCustomScrollbar({axis:"horizontal"==Nb?"x":"y",theme:c.playlistScrollTheme,scrollInertia:0,mouseWheel:{normalizeDelta:!0,deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){a.find(".mCSB_container").addClass("hap-mCSB_full")},onOverflowY:function(){a.find(".mCSB_container").removeClass("hap-mCSB_full")}}})}
function Fb(){Ga.hide();T=!1;n||(n=!0,rb&&!xa&&(pb(ya),xa=!0),Ob(),k.css("opacity",1),p(w),c.autoOpenPopup&&!c.isPopup&&hapOpenPopup(m,c),e(m).trigger("setupDone",{instance:m,instanceName:F}));sb&&!Va&&(u.sortable({update:function(a,f){if(y){var b=y.closest(".hap-playlist-item").index();q.reSetCounter(b)}Ua&&Mb()}}),Va=!0);if(!tb&&!Y&&0<t){var a=c.activeItem;a>t-1&&(a=t-1);-1<a&&q.setCounter(a,!1);tb=!0}Y=!1}function uc(){var a=0,b,f,d;ka=[];u.find(".hap-playlist-item").each(function(){e(this).find(".hap-playlist-non-selected").each(function(){var c=
e(this).on("click",ca);if(!U)c.on("mouseenter",S).on("mouseleave",D);f=c.find(".hap-playlist-title");f.length&&(b=f.html(),ka.push(b),Ua&&(d=HAPUtils.formatNumber(a)+qb,c.find(".hap-playlist-title-num").length?c.find(".hap-playlist-title-num").html(d):f.before(e('<span class="hap-playlist-title-num">'+d+"</span>"))))});a++});t=a;q.setPlaylistItems(t);ea=u;n||(n=!0,rb&&!xa&&(pb(ya),xa=!0),p(w),k.css("opacity",1),c.autoOpenPopup&&!c.isPopup&&hapOpenPopup(m,c),e(m).trigger("setupDone",{instance:m,instanceName:F}));
Ga.hide();T=!1;e(m).trigger("playlistEndLoad",{instance:m,instanceName:F});var g=c.activeItem;g>t-1&&(g=t-1);-1<g&&q.setCounter(g,!1)}function ub(){la++;la==vb?vc():Pb.artist.getInfo({artist:V[la].artist},{success:function(a){Wa||(a=""!=a.artist.image[3]["#text"].trim()?a.artist.image[3]["#text"].trim():r.thumbDefault,V[la]&&(V[la].thumb=a,ub()))},error:function(a,b){Wa||(V[la].thumb=r.thumbDefault,ub())}})}function wb(){V=[];la=-1;var a=xb;";"==a.substring(a.length-1)&&(a=a.substring(0,a.length-
1));var b=new XMLHttpRequest;b.open("GET","https://cors-anywhere.herokuapp.com/"+a+"played.html");b.onload=function(){var a=b.responseText,c=a.indexOf("Song Title")+12;a=a.substr(c,a.length);a=a.split("</td><td>");a.shift();var d;vb=a.length;for(d=0;d<vb;d++){c=a[d].indexOf("</");a[d]=a[d].substr(0,c);a[d]=a[d].replace(/<\/?[^>]+(>|$)/g,"");var e=a[d].split(" - ");c=e[0].trim();e=e[1]?e[1].trim():"";0==d&&(e=e.substr(0,e.length-12));V.push({title:e,artist:c})}Wa=!1;ub()};b.onerror=function(){console.log("Radio history Error: ",
b.status+" "+b.statusText);W&&clearInterval(W);W=setInterval(function(){wb()},Qb)};/^POST/i.test("GET")&&b.setRequestHeader("Content-Type","application/x-www-form-urlencoded");b.send()}function vc(){var a=V.shift();if(ma.find("img").attr("src")!=a.thumb){var b=new Image;b.className="hap-hidden";b.onload=function(){this.className="hap-visible"};ma.empty();ma[0].appendChild(b);b.src=a.thumb}yb.html(a.title);zb.html(a.artist);c.generateHistory?ob!=V[0].thumb&&oc(V):Ha||(Ha=!0,e(m).trigger("historyEndLoad"));
W&&clearInterval(W);W=setInterval(function(){wb()},Qb)}function Rb(){Sb||(Ka=e(document.createElement("audio")).attr("preload",wc),h=Ka[0],Sb=!0);var a;xb=a=(Xa||h.canPlayType("application/vnd.apple.mpegurl"))&&r.hls?r.hls:xc&&r.mp3?r.mp3:yc&&r.wav?r.wav:r.path;h.src=a;Ka.on("ended",function(){Tb()}).on("canplay",function(a){}).on("canplaythrough",function(a){}).on("loadedmetadata",function(){r.playbackRate&&(h.playbackRate=Number(r.playbackRate));c.resumeTime?(h.currentTime=c.resumeTime,delete c.resumeTime):
r.start&&(h.currentTime=r.start)}).on("play",function(){pa||(pa=!0,L=Ma.width(),za&&cancelAnimationFrame(za),za=requestAnimationFrame(Ub),e(m).trigger("soundStart",{instance:m,instanceName:F,counter:q.getCounter()}));if(zc&&1<hap_mediaArr.length){var a,c=hap_mediaArr.length;for(a=0;a<c;a++)m!=hap_mediaArr[a].inst&&hap_mediaArr[a].inst.pauseMedia()}Ya.find("i").removeClass("fa-play").addClass("fa-pause");Z=!0;e(m).trigger("soundPlay",{instance:m,instanceName:F,counter:q.getCounter()})}).on("pause",
function(){Ya.find("i").removeClass("fa-pause").addClass("fa-play");Z=!1;e(m).trigger("soundPause",{instance:m,instanceName:F,counter:q.getCounter()})}).on("error",function(a){e(m).trigger("soundError",{instance:m,instanceName:F,counter:q.getCounter()})});if(Xa&&"hls"==C){if("file:"==window.location.protocol)return alert("Playing HLS requires server connection!"),!1;aa.attachMedia(h);ja&&h.play()}else ja&&(h.load(),h.play());h.volume=w;ja=!0;"radio"==C&&((HAPUtils.isEmpty(c.lastFmApiKey)||HAPUtils.isEmpty(c.lastFmApiSecret))&&
alert("Last.fm API credentials missing!"),Ab||(Ab=new LastFMCache,Pb=new LastFM({apiKey:c.lastFmApiKey,apiSecret:c.lastFmApiSecret,cache:Ab})),wb())}function Ub(){if(h){var a=h.currentTime,b=h.duration;if(HAPUtils.isNumber(a)&&HAPUtils.isNumber(b)){Vb.html(HAPUtils.formatCurrentTime(a));Wb.html(HAPUtils.formatDuration(b));if("undefined"!==typeof h.buffered&&0!=h.buffered.length){try{var c=h.buffered.end(h.buffered.length-1)}catch(g){}if(!isNaN(c))var d=c/b}Ba?gb.drawSeekbar(d,a,b):(Xb.width(a/b*L),
d&&Yb.width(d*L));r.end&&a>=r.end&&Tb()}}za=requestAnimationFrame(Ub)}function Tb(){e(m).trigger("soundEnd",{instance:m,instanceName:F,counter:q.getCounter()});var a=r.start||0;"next"==Za?m.nextMedia():"loop"==Za?(h.currentTime=a,h.play()):"rewind"==Za?(h.currentTime=a,h.pause()):"stop"==Za&&h.pause()}function La(){za&&cancelAnimationFrame(za);W&&clearInterval(W);W=null;Xa&&"hls"==C&&aa.detachMedia();h&&(h.pause(),h.src="");Ka&&Ka.off("ended canplay canplaythrough loadedmetadata pause play error");
Vb.html("0:00");Wb.html("0:00");ma.empty();yb.html("");zb.html("");Xb.width(0);Yb.width(0);C=null;Ja=pa=Z=!1;Ya.find("i").removeClass("fa-pause").addClass("fa-play")}function jb(){C&&(La(),Oa());Ta&&(sb&&(u.sortable("destroy"),Va=!1),u.find(".hap-playlist-item").remove());nb.empty();ob=null;Ha=!1;Wa=!0;kb=ea=null;tb=Ia=Y=!1;t=0;wa=-1;H=[];G=[];ka=[];q.reSetCounter();Bb.val(Cb);va=!1;$a.find("i").removeClass("fa-sort-alpha-up").addClass("fa-sort-alpha-down")}function Ob(){L=Ma.width()}function qc(a){if("undefined"===
typeof a.artist||HAPUtils.isEmpty(a.artist)||"undefined"===typeof a.title||HAPUtils.isEmpty(a.title))"undefined"!==typeof a.artist||"undefined"===typeof a.title||HAPUtils.isEmpty(a.title)?"undefined"===typeof a.artist||HAPUtils.isEmpty(a.artist)||"undefined"!==typeof a.title||(b=a.artist):b=a.title;else var b=a.artist+Ac+a.title;return b}function Zb(){if(ma.length){var a=new Image;a.className="hap-hidden";a.onload=function(){this.className="hap-visible"};ma.empty();ma[0].appendChild(a);a.src=r.thumb||
r.thumbDefault}r.title&&yb.html(r.title);r.artist&&zb.html(r.artist)}var k=e(this),Bc=e(c.playlistList).hide(),Cc=k.find(".hap-playlist-holder"),ya=k.find(".hap-playlist-inner"),u=k.find(".hap-playlist-content"),$b=k.find(".hap-playlist-filter-msg"),fc=k.find(".hap-share-holder"),$a=k.find(".hap-sort-alpha"),Ga=k.find(".hap-preloader"),Dc=k.find(".hap-popup-toggle");k.find(".hap-player-holder");var ma=k.find(".hap-player-thumb"),yb=k.find(".hap-player-title"),zb=k.find(".hap-player-artist"),Vb=k.find(".hap-media-time-current"),
Wb=k.find(".hap-media-time-total"),Ya=k.find(".hap-playback-toggle"),ta=k.find(".hap-loop-toggle"),ua=k.find(".hap-random-toggle");Ga=k.find(".hap-preloader");var Ta=Cc.length,U=HAPUtils.isMobile(),ac=HAPUtils.hasLocalStorage(),Hb=c.sourcePath,F=c.instanceName,kb=c.activePlaylist,wc=c.preload,ja=c.autoPlay,M=c.loopingOn,N=c.randomPlay,Ua=c.useNumbersInPlaylist,rb=c.usePlaylistScroll,Nb=c.playlistScrollOrientation,sb=U?!1:c.sortableTracks,bc=c.facebookAppId,Ra=c.soundCloudAppId,Ib=c.gDriveAppId,w=
c.volume,Ec=c.useKeyboardNavigationForPlayback,Za=c.mediaEndAction,Kb=c.playlistItemContent.split(","),Fc=c.useContinousPlayback&&ac,ab=c.continousKey,cc=c.useMediaSession&&"mediaSession"in navigator,tc=c.createDownloadIconsInPlaylist,rc=c.createLinkIconsInPlaylist,zc=c.togglePlaybackOnMultipleInstances,qb=c.numberTitleSeparator||".  ",Ac=c.artistTitleSeparator||" - ",m=this,n,T;e("body");var qa=e(window),O=e(document),Db,sc=HAPUtils.hasDownloadSupport(),Gc=HAPUtils.isIOS();HAPUtils.isAndroid();var xc=
HAPUtils.canPlayMp3(),yc=HAPUtils.canPlayWav(),Xa=window.Hls&&Hls.isSupported(),nc=Hb+"includes/ba-simple-proxy.php",ha,lb,Sb,Ka,h,Gb,fa,J=[],Ab,Pb,pc=k.find(".hap-history-inner"),nb=k.find(".hap-history-content"),Jb,Ha,Wa=!0,ob,V=[],la,vb,W,Qb=c.lastPlayedInterval,Va,xa,ib,ia,I,Y,Ja,Ia,wa=-1,H=[],G=[],t=0,tb,ea,y,pa,C,xb,Z,r,za,va,ka=[];"undefined"===typeof window.hap_mediaArr&&(window.hap_mediaArr=[]);window.hap_mediaArr.push({inst:m,id:F});U&&(ja=!1);M&&ta.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color");
N&&ua.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color");k.find(".hap-select").change(function(){m.loadPlaylist(e(this).val())});var Bb=k.find(".hap-search-filter"),Cb=Bb.val();Bb.on("focus",function(a){e(this).val()==Cb&&e(this).val("")}).on("blur",function(){HAPUtils.isEmpty(e(this).val())&&e(this).val(Cb)}).on("keyup.apfilter",function(){if(0==ka.length)return!1;var a=e(this).val();a=ka.filter(/./.test.bind(new RegExp(a,"i")));var b,c=0;for(b=0;b<t;b++){var d=u.children(".hap-playlist-item").eq(b).find(".hap-playlist-title").html();
-1<e.inArray(d,a)?u.children(".hap-playlist-item").eq(b).show():(u.children(".hap-playlist-item").eq(b).hide(),c++)}c==t?$b.show():$b.hide()});HAPUtils.isEmpty(bc)||"file:"==window.location.protocol?console.log("facebookAppId has not been set in settings!"):d(bc);var q=new HAPPlaylistManager(c);e(q).on("HAPPlaylistManager.COUNTER_READY",function(){C&&La();var a=q.getCounter(),b=u.children(".hap-playlist-item").eq(a);r=Pa(b);C=r.type;y&&Oa();y=u.children(".hap-playlist-item").eq(a).find(".hap-playlist-non-selected, .hap-playlist-selected");
y.length&&(y.removeClass("hap-playlist-non-selected").addClass("hap-playlist-selected"),rb&&0<t&&(ib||("horizontal"==Nb?ya.mCustomScrollbar("scrollTo",parseInt(y.closest(".hap-playlist-item").position().left),{scrollInertia:500}):ya.mCustomScrollbar("scrollTo",parseInt(y.closest(".hap-playlist-item").position().top),{scrollInertia:500})),ib=!1),e(m).trigger("playlistItemDisabled",{instance:m,instanceName:F,item:y}));Zb();cc&&(navigator.mediaSession.metadata=new MediaMetadata({title:r.title,artist:r.artist||
"",album:r.album||"",artwork:r.artwork}));Rb();e(m).trigger("soundRequest",{instance:m,instanceName:F,counter:a})});Fc&&(window.attachEvent||window.addEventListener)(Gc?"pagehide":"beforeunload",function(a){window.event&&(window.event.cancelBubble=!0);if(!n||!C)return!1;a={volume:w,activeItem:q.getCounter(),resumeTime:m.getCurrentTime(),autoPlay:Z};localStorage.setItem(ab,JSON.stringify(a))});cc&&(navigator.mediaSession.setActionHandler("play",function(){m.playMedia()}),navigator.mediaSession.setActionHandler("pause",
function(){m.pauseMedia()}),navigator.mediaSession.setActionHandler("previoustrack",function(){m.previousMedia()}),navigator.mediaSession.setActionHandler("nexttrack",function(){m.nextMedia()}),navigator.mediaSession.setActionHandler("seekbackward",function(){m.seekBackward()}),navigator.mediaSession.setActionHandler("seekforward",function(){m.seekForward()}));var v=k.find(".hap-tooltip");if(!U)k.find("[data-tooltip]").on("mouseenter",function(a){var b=e(this);a=k[0].getBoundingClientRect();var c=
b[0].getBoundingClientRect();v.find("p").text(b.attr("data-tooltip"));var d=parseInt(c.top-a.top-v.outerHeight());b=parseInt(c.left-a.left-v.outerWidth()/2+b.outerWidth()/2);b+v.outerWidth()>k.width()?b=k.width()-v.outerWidth():0>b&&(b=0);0>d+a.top&&(d=parseInt(c.top-a.top+v.outerHeight()+15));v.css({left:b+"px",top:d+"px"}).show()}).on("mouseleave",function(a){v.hide()});var Ba=k.find(".hap-circle-player").length;if(Ba&&HAPUtils.hasCanvas())var gb=new HAPCirclePlayer({settings:c,parent:k});if("ontouchstart"in
window){var bb="touchstart.ap mousedown.ap";var K="touchmove.ap mousemove.ap";var oa="touchend.ap mouseup.ap"}else window.PointerEvent?(bb="pointerdown.ap",K="pointermove.ap",oa="pointerup.ap"):(bb="mousedown.ap",K="mousemove.ap",oa="mouseup.ap");var Aa,Ma=k.find(".hap-progress-bg"),Yb=k.find(".hap-load-level"),Xb=k.find(".hap-progress-level"),L,P=Ba?k.find(".hap-progress-canvas"):k.find(".hap-seekbar");P.on(bb,function(a){na(a);return!1});if(!U){var cb=function(){pa&&(P.off(K,E).off("mouseout",cb),
O.off("mouseout",cb),v.hide())};P.on("mouseover",function(){pa&&(P.on(K,E).on("mouseout",cb),O.on("mouseout",cb))})}var hb=.5,Ca,Na=k.find(".hap-volume-toggle"),R=k.find(".hap-volume-seekbar"),X=k.find(".hap-volume-bg"),ec=k.find(".hap-volume-level"),ba=void 0!=R.attr("data-is-vertical")?!0:!1,Q=ba?X.height():X.width();0>w?w=0:1<w&&(w=1);0!=w&&(hb=w);R.on(bb,function(a){A(a);return!1});if(!U){var db=function(){R.off(K,Da).off("mouseout",db);O.off("mouseout",db);v.hide()};R.on("mouseover",function(){R.on(K,
Da).on("mouseout",db);O.on("mouseout",db)})}if(c.disableRightClickOverPlayer)k.on("contextmenu",function(){return!1});if(Ec)O.on("keyup.apnav",function(a){if(!n)return!1;var b=a.keyCode;a=e(a.target);if(37==b)m.previousMedia();else if(39==b)m.nextMedia();else if(32==b){if(a.hasClass("hap-search-filter"))return!1;m.togglePlayback()}else if(77==b){if(a.hasClass("hap-search-filter"))return!1;B()}});var dc=[k.find(".hap-next-toggle"),k.find(".hap-prev-toggle"),k.find(".hap-share-toggle"),k.find(".hap-playlist-toggle"),
k.find(".hap-share-item"),Na,Dc,$a,Ya,ta,ua],Hc=dc.length,eb;for(eb=0;eb<Hc;eb++){var Ic=e(dc[eb]).css("cursor","pointer").on("click",sa);if(!U)Ic.on("mouseenter",Ea).on("mouseleave",Fa)}if(Xa){var aa=new Hls;aa.on(Hls.Events.MEDIA_ATTACHED,function(){aa.loadSource(xb)});aa.on(Hls.Events.ERROR,function(a,b){if(b.fatal)switch(b.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover");aa.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover");
aa.recoverMediaError();break;default:aa.destroy()}})}qa.on("resize",function(){if(!n)return!1;Db&&clearTimeout(Db);Db=setTimeout(Ob,150)});this.playMedia=function(){if(!n||!C||Z)return!1;h&&h.play()};this.pauseMedia=function(){if(!n||!C||!Z)return!1;h&&h.pause()};this.checkMedia=function(a){if(!n||!C)return!1;a=a.toLowerCase();Z&&"pause"==a&&h&&h.pause()};this.togglePlayback=function(){if(!n||!C)return!1;h&&(h.paused?h.play():h.pause())};this.nextMedia=function(){if(!n)return!1;0!=t&&q.advanceHandler(1,
!0)};this.previousMedia=function(){if(!n)return!1;0!=t&&q.advanceHandler(-1,!0)};this.loadMedia=function(a){if(!n||T)return!1;if(0!=t){if("undefined"===typeof a)return alert("loadMedia method requires either a track number or a track title to load. LoadMedia failed."),!1;if("string"===typeof a){var b;u.find(".hap-playlist-item").each(function(){if(e(this).find(".hap-playlist-title").html()==a)return a=e(this).index(),b=!0,!1});if(!b)return alert('Track with title "'+a+'" doesnt exist. LoadMedia failed.'),
!1}else if("number"===typeof a){if(0>a||a>t-1)return alert('Invalid track number. Track number  "'+a+'" doesnt exist. LoadMedia failed.'),!1}else return alert("loadMedia method requires either a track number or a track title to load. LoadMedia failed."),!1;q.processPlaylistRequest(a)}};this.loadPlaylist=function(a){if(!n||T)return!1;if("undefined"===typeof a||HAPUtils.isEmpty(a))return alert("loadPlaylist method requires id parameter. loadPlaylist failed."),!1;if(kb==a)return!1;Eb(a)};this.addTrack=
function(a,b,c,d){if(!n||T)return!1;if("undefined"===typeof a)return alert("addTrack method requires format parameter. AddTrack failed."),!1;if("undefined"===typeof b)return alert("addTrack method requires track parameter. AddTrack failed."),!1;Ja=!1;"undefined"!==typeof c&&(Ja=c);c=1;var f=!1;if("string"!==typeof b&&"[object Object]"!==Object.prototype.toString.call(b))if("[object Array]"===Object.prototype.toString.call(b))c=b.length,f=!0;else return alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),
!1;I=d;ia=!1;Y=!0;if(ea)if("undefined"!==typeof I){if(0>I||I>t)return alert('Invalid position to insert track to. Position number "'+d+'" doesnt exist. AddTrack failed.'),!1;I==t&&(ia=!0)}else ia=!0,I=t;else{if("undefined"!==typeof I){if(0!=I)return alert('Invalid position to insert track to. Position number "'+d+'" doesnt exist. AddTrack failed.'),!1}else I=0;ia=!0}T=!0;Ga.show();wa=-1;H=[];G=[];for(d=0;d<c;d++){var h=f?b[d]:b;h="html"==a?e(e.parseHTML(h)):h;G.push(h)}t=G.length;Ia=!1;ea||(Ia=!0);
ea=u;x()};this.inputAudio=function(a){if(!n||T)return!1;if("undefined"===typeof a)return alert("inputAudio method requires data parameter. inputAudio failed."),!1;Oa();q.reSetCounter();r=a;C="audio";Zb();ja=!0;Rb()};this.removeTrack=function(a){if(!n||T)return!1;if(0!=t){if("undefined"===typeof a)return alert("removeTrack method requires id parameter. removeTrack failed."),!1;if("string"===typeof a){var b=!1;u.find(".hap-playlist-item").each(function(){if(e(this).find(".hap-playlist-title").html()==
a)return c=e(this),a=c.index(),b=!0,!1});if(!b)return alert('Track with title "'+a+'" doesnt exist. RemoveTrack failed.'),!1}else if("number"===typeof a){a=parseInt(a,10);if(0>a||a>t-1)return alert('Invalid id number. Track number  "'+a+'" doesnt exist. RemoveTrack failed.'),!1;var c=u.find(".hap-playlist-item").eq(a)}else return alert("removeTrack method requires either a id number or a track title to remove. removeTrack failed."),!1;c.remove();Lb();if(0<t){var d=q.getCounter();a==d?(La(),q.setPlaylistItems(t)):
(q.setPlaylistItems(t,!1),a<d&&q.reSetCounter(q.getCounter()-1))}else jb()}};this.sort=function(a,b){if(!n)return!1;if(0!=t){if("undefined"===typeof a)return console.log("Sort method requires type parameter. Sort method failed."),!1;var c=a.toLowerCase();if("title"==c)b?(u.children(".hap-playlist-item").sort(function(a,b){return e(b).find(".hap-playlist-title").html()>e(a).find(".hap-playlist-title").html()?1:-1}).appendTo(u),va=!1):(u.children(".hap-playlist-item").sort(function(a,b){return e(b).find(".hap-playlist-title").html()<
e(a).find(".hap-playlist-title").html()?1:-1}).appendTo(u),va=!0);else if("random"==c){for(c=u.children();c.length;)u.append(c.splice(Math.floor(Math.random()*c.length),1));va=!1}else return console.log("Sort method requires type parameter. Sort method failed."),!1;va?$a.find("i").removeClass("fa-sort-alpha-up").addClass("fa-sort-alpha-down"):$a.find("i").removeClass("fa-sort-alpha-down").addClass("fa-sort-alpha-up");y&&(c=y.closest(".hap-playlist-item").index(),q.reSetCounter(c));Ua&&Mb()}};this.destroyInstance=
function(){qa&&qa.off();R&&R.off();P&&P.off();La();ya.mCustomScrollbar("destroy");xa=!1;sb&&(u.sortable("destroy"),Va=!1)};this.destroyMedia=function(){if(!n)return!1;n&&C&&(y&&Oa(),La(),q.reSetCounter())};this.destroyPlaylist=function(){if(!n)return!1;jb()};this.setPlaybackRate=function(a){if(!n||!C)return!1;h&&(h.playbackRate=Number(a))};this.toggleRandom=function(a){if(!n||"undefined"===typeof q)return!1;N="undefined"!==typeof a?a:!N;q.setRandom(N);N?ua.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):
ua.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color")};this.toggleLoop=function(a){if(!n||"undefined"===typeof q)return!1;M="undefined"!==typeof a?a:!M;q.setLooping(M);M?ta.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):ta.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color")};this.getVolume=function(){return w};this.getVolumeSize=function(){return n?Q:!1};this.getVolumeOrientation=function(){return n?ba:!1};this.setVolume=
function(a){if(!n)return!1;0>a?a=0:1<a&&(a=1);p(a)};this.toggleMute=function(){if(!n)return!1;B()};this.seek=function(a){if(!n||!C)return!1;try{h.currentTime=a}catch(b){console.log(b)}};this.seekBackward=function(){if(!n||!C)return!1;if(h)try{h.currentTime=Math.max(h.currentTime-10,0)}catch(a){console.log(a)}};this.seekForward=function(){if(!n||!C)return!1;if(h)try{h.currentTime=Math.min(h.currentTime+10,h.duration)}catch(a){console.log(a)}};this.getCurrentTime=function(){if(!n||!C)return!1;var a=
0;h&&(a=h.currentTime);return a};this.getDuration=function(){if(!n||!C)return!1;if(h)var a=h.duration;return a};this.destroyPlaylistScroll=function(){if(!n)return!1;ya.mCustomScrollbar("destroy");xa=!1};this.getPlaylistList=function(){return n?Bc:!1};this.getSetupDone=function(){return n};this.getMediaPlaying=function(){return n?Z:!1};this.getCounter=function(){return n?"undefined"!==typeof q?q.getCounter():-1:!1};this.getPlaylistLength=function(){return n?HAPUtils.isNumber(t)?t:0:!1};this.getSettings=
function(){return c};this.getCurrMediaData=function(){return n?r:!1};this.getWrapper=function(){return k};this.getActivePlaylistItem=function(){return y};if(ac&&localStorage.getItem(ab)){var fb=JSON.parse(localStorage.getItem(ab));c.resumeTime=fb.resumeTime;w=fb.volume;ja=fb.autoPlay;c.activeItem=fb.activeItem;localStorage.removeItem(ab)}c.activePlaylist&&!HAPUtils.isEmpty(c.activePlaylist)?Eb(c.activePlaylist):uc();return this}})(jQuery);
(function(e){var c=function(){};c.isEmpty=function(c){return 0==c.replace(/^\s+|\s+$/g,"").length};c.isNumber=function(c){return!isNaN(parseFloat(c))&&isFinite(c)};c.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)};c.isIE=function(){var c=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,z=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=z.exec(e)&&(c=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(e=navigator.userAgent,
z=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=z.exec(e)&&(c=parseFloat(RegExp.$1)));return-1!=c?!0:!1};c.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)};c.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")};c.hasDownloadSupport=function(){return"download"in document.createElement("a")};c.qualifyURL=function(c){var d=document.createElement("a");d.href=c;return d.href};c.relativePath=function(c){return/^(?:[a-z]+:)?\/\//i.test(c)};c.hasLocalStorage=function(){try{return"localStorage"in
e&&null!==e.localStorage}catch(d){return!1}};c.randomiseArray=function(c){var d=[],e=[],E;for(E=0;E<c;E++)d[E]=E;for(E=0;E<c;E++){var A=Math.round(Math.random()*(d.length-1));e[E]=d[A];d.splice(A,1)}return e};c.sortArray=function(c,e){var d,na=c.length,A=[];for(d=0;d<na;d++)A[d]=c[e[d]];return A};c.keysrt=function(c,e,z){var d=1;z&&(d=-1);return c.sort(function(c,z){var na=c[e],p=z[e];return d*(na<p?-1:na>p?1:0)})};c.parseXML=function(c){if(e.ActiveXObject&&e.GetObject){var d=new ActiveXObject("Microsoft.XMLDOM");
d.loadXML(c);return d}if(e.DOMParser)return(new DOMParser).parseFromString(c,"text/xml");throw Error("No XML parser available");};c.formatCurrentTime=function(c){c=Math.round(c);var d=Math.floor(c/60);c=Math.floor(c%60);return(10<=d?d:""+d)+":"+(10<=c?c:"0"+c)};c.formatDuration=function(c){c=Math.round(c);var d=Math.floor(c/60);c=Math.floor(c%60);return(10<=d?d:""+d)+":"+(10<=c?c:"0"+c)};c.formatNumber=function(c){return 9>c?"0"+(c+1):c+1};c.nFormatter=function(c,e){var d=[{value:1E18,symbol:"E"},
{value:1E15,symbol:"P"},{value:1E12,symbol:"T"},{value:1E9,symbol:"G"},{value:1E6,symbol:"M"},{value:1E3,symbol:"k"}],E=/\.0+$|(\.[0-9]*[1-9])0+$/,A;for(A=0;A<d.length;A++)if(c>=d[A].value)return(c/d[A].value).toFixed(e).replace(E,"$1")+d[A].symbol;return c.toFixed(e).replace(E,"$1")};c.canPlayMp3=function(){var c=document.createElement("audio");return!(!c.canPlayType||!c.canPlayType("audio/mpeg;").replace(/no/,""))};c.canPlayWav=function(){var c=document.createElement("audio");return!(!c.canPlayType||
!c.canPlayType("audio/wav;").replace(/no/,""))};c.canPlayOgg=function(){var c=document.createElement("audio");return!(!c.canPlayType||!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""))};c.hasCanvas=function(){return!!document.createElement("canvas")};e.HAPUtils=c})(window);
(function(e,c){e.HAPPlaylistManager=function(d){function e(){D=HAPUtils.randomiseArray(B)}var z=this,E=d.loopingOn,A=d.randomPlay,B,ra=!1,p=-1,Da,ca,S=!1,D=[],sa=!1;this.setCounter=function(d,Fa){"undefined"===typeof Fa&&(Fa=!0);p=Fa?p+parseInt(d,10):parseInt(d,10);if(isNaN(p))alert("HAPPlaylistManager message: No active media, counter = "+p);else if(ra=!1,E){if(A)if(p>B-1){p=D[B-1];e();if(D[0]==p){var Ea=D.splice(0,1);D.push(Ea)}p=0;c(z).trigger("HAPPlaylistManager.PLAYLIST_END_ALERT")}else 0>p&&
(p=D[0],e(),D[B-1]==p&&(Ea=D.splice(B-1,1),D.unshift(Ea)),p=B-1);else p>B-1?(p=0,c(z).trigger("HAPPlaylistManager.PLAYLIST_END_ALERT")):0>p&&(p=B-1);c(z).trigger("HAPPlaylistManager.COUNTER_READY")}else p>B-1?(p=B-1,ra=!0):0>p&&(p=0),ra?c(z).trigger("HAPPlaylistManager.PLAYLIST_END"):c(z).trigger("HAPPlaylistManager.COUNTER_READY")};this.getCounter=function(){return A?sa?p:D[p]:p};this.advanceHandler=function(d){sa=!1;S?(S=!1,ca+d>B-1?(p=B-1,c(z).trigger("HAPPlaylistManager.COUNTER_READY")):0>ca+
d?(p=0,c(z).trigger("HAPPlaylistManager.COUNTER_READY")):z.setCounter(ca+d,!1)):z.setCounter(d)};this.processPlaylistRequest=function(c){sa=!1;A&&(sa=!0,Da=c,S||(ca=p,S=!0));z.setCounter(c,!1)};this.setPlaylistItems=function(c,d){"undefined"===typeof d&&(d=!0);d&&(p=-1);B=c;A&&e()};this.reSetCounter=function(c){"undefined"===typeof c?p=-1:(c=parseInt(c,10),B?(c>B-1?c=B-1:0>c&&(c=0),p=c):p=-1)};this.setRandom=function(c){(A=c)&&e();if(A){var d=D.length;for(c=0;c<d;c++)if(D[c]==p){if(0==c)break;c=D.splice(c,
1);D.unshift(parseInt(c,10));break}p=0}else S?(p=Da,S=!1):p=D[p]};this.setLooping=function(c){E=c};this.getPosition=function(c){return D.indexOf(c)}}})(window,jQuery);
