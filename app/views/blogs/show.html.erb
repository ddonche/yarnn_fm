<head>
<!-- Facebook -->
  <meta property="og:title" content="<%= @blog.title %>" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="<%= request.original_url %>" />
  <% if @blog.image %>
  <meta property="og:image" content="<%= @blog.image.url %>" />
  <% end %>
  <meta property="og:description" content="<%= truncate(strip_tags(@blog.body.to_s), length: 250)%>" />
  <meta property="og:site_name" content="Yarnn.FM" />
  
  <!-- Twitter Card data -->
  <meta name="twitter:card" content="article">
  <meta name="twitter:site" content="<%= request.original_url %>">
  <meta name="twitter:title" content="<%= @blog.title %>">
  <meta name="twitter:description" content="<%= truncate(strip_tags(@blog.body.to_s), length: 250)%>">
  <meta name="twitter:creator" content="<%= @blog.user.username %>">
  <% if @blog.image %>
  <meta name="twitter:image:src" content="<%= @blog.image.url %>">
  <% end %>
</head>

<div id="other_background_nocenter" style="overflow-y: auto;">
<%= render 'shared/alert' %>

  <section>
  <div class="container">
    <div class="row">
      <div class="col-md-3 mt-2 order-2">
        <div class="blog_wrapper rounded p-3">
          <h4 class="site-blue">Posts by <%= @blog.user.username %></h4>
          <% @blogs.each do |blog| %>
            <% if blog.image? %>
            	<div class="row p-2">
          	    <div class="col-12">
                  <%= image_tag blog.image.url(:thumb), width: "100%", class: "mt-1 p-1 border" %>
          	    </div>
          	  </div>
          	 <% end %>
          	  <div class="row px-2 py-1">
        		    <div class="col-12">
            		  <h5><%= link_to truncate(blog.title, length: 50), blog_path(blog) %></h5>
                	<small class="text-secondary"><i class="fas fa-comments site-blue mr-1" title="replies"></i><%= blog.comments.count %> comments |
                		<%= time_ago_in_words(blog.created_at) %> ago 
              		</small>
            	  </div>
          	  </div>
            	<div class="lightline mx-auto"></div>
          <% end %>
          <small>
          <%= paginate @blogs %>
          </small>
        </div>
      </div>
      <div class="col-md-9 mt-2 order-1">
      
        <div class="blog_wrapper rounded p-3">
          <div class="title-box">
            <h1 class="special_title"><%= @blog.title %></h1>
          </div>
          
          <div class="blog_info">
            <div class="blog_info_user_avatar mt-2">
								<% if @blog.user.image? %>
									<%= image_tag @blog.user.image.url(:thumb), width: 60 %>
								<% else %>
									<%= image_tag('default_track.jpg', style: "width: 60px") %>
								<% end %>								
							</div>
            <div class="blog_info_user_name"><%= link_to @blog.user.name, user_path(@blog.user) %></div>
            <div class="blog_info_date">
              <%= time_ago_in_words(@blog.created_at) %> ago
              <% if @blog.user == current_user %>
                <i class="fas fa-cog site-red mr-1 ml-3"></i><%= link_to "edit", edit_blog_path(@blog) %>
              <% end %>
            </div>
            
            <ul class="nav nav-text-tiny text-uppercase">
								<li class="nav-item site-blue nav-link">
									<i class="fas fa-headphones site-blue" title="tracks"></i> Tracks (<%= @blog.user.tracks.count %>)
								</li>
								<li class="nav-item site-blue nav-link">
									<i class="fas fa-compact-disc site-blue" title="albums"></i> Albums (<%= @blog.user.albums.count %>)
								</li>
								<li class="nav-item site-blue nav-link">
									<i class="fas fa-pen-nib site-blue" title="blog posts"></i> Blog Posts (<%= @blog.user.blogs.count %>)
								</li>
							</ul>
          </div><!-- end blog info class -->
          <div class="blog_content">
            <% if @blog.image? %>
              <%= image_tag @blog.image.url, width: "100%", class: "mt-4 p-2 border" %>
            <% end %>
          </div>
          <div class="blog_content">
            <%= @blog.body %>
          </div>
        </div>
        
            <div class="blog_wrapper rounded my-3">
    		      <div class="row p-4">
    		        <div class="col-12 mb-2">
      		        <% if user_signed_in? %>
                    <%= render "comments/form" %>
                  <% else %>
                    <div class="small" style="color: #fc0000;"><em><strong>You must be logged in to comment.</strong></em></div>
                  <% end %>
                </div>
                <div class="col-12">
                  <%= render 'comments/comments', :commentable => @blog %>
                </div>
              </div>
            </div>
          
        </div>
      </div>
    </div>
  </section>
  
</div>