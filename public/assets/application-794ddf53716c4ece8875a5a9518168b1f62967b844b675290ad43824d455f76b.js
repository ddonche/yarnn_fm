!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(E,t){"use strict";function g(t,e,n){var i,r=(e=e||at).createElement("script");if(r.text=t,n)for(i in wt)n[i]&&(r[i]=n[i]);e.head.appendChild(r).parentNode.removeChild(r)}function m(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?ht[pt.call(t)]||"object":typeof t}function s(t){var e=!!t&&"length"in t&&t.length,n=m(t);return!yt(t)&&!bt(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}function c(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function e(t,n,i){return yt(n)?Tt.grep(t,function(t,e){return!!n.call(t,e,t)!==i}):n.nodeType?Tt.grep(t,function(t){return t===n!==i}):"string"!=typeof n?Tt.grep(t,function(t){return-1<dt.call(n,t)!==i}):Tt.filter(n,t,i)}function n(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function u(t){var n={};return Tt.each(t.match(It)||[],function(t,e){n[e]=!0}),n}function d(t){return t}function h(t){throw t}function l(t,e,n,i){var r;try{t&&yt(r=t.promise)?r.call(t).done(e).fail(n):t&&yt(r=t.then)?r.call(t,e,n):e.apply(undefined,[t].slice(i))}catch(t){n.apply(undefined,[t])}}function i(){at.removeEventListener("DOMContentLoaded",i),E.removeEventListener("load",i),Tt.ready()}function r(t,e){return e.toUpperCase()}function p(t){return t.replace(jt,"ms-").replace(Ft,r)}function o(){this.expando=Tt.expando+o.uid++}function a(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:qt.test(t)?JSON.parse(t):t)}function f(t,e,n){var i;if(n===undefined&&1===t.nodeType)if(i="data-"+e.replace(Wt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=a(n)}catch(r){}Ht.set(t,e,n)}else n=undefined;return n}function v(t,e,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return Tt.css(t,e,"")},l=s(),c=n&&n[3]||(Tt.cssNumber[e]?"":"px"),u=(Tt.cssNumber[e]||"px"!==c&&+l)&&zt.exec(Tt.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)Tt.style(t,e,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,Tt.style(t,e,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}function y(t){var e,n=t.ownerDocument,i=t.nodeName,r=Xt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=Tt.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),Xt[i]=r)}function b(t,e){for(var n,i,r=[],o=0,a=t.length;o<a;o++)(i=t[o]).style&&(n=i.style.display,e?("none"===n&&(r[o]=Ut.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&Kt(i)&&(r[o]=y(i))):"none"!==n&&(r[o]="none",Ut.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}function w(t,e){var n;return n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],e===undefined||e&&c(t,e)?Tt.merge([t],n):n}function x(t,e){for(var n=0,i=t.length;n<i;n++)Ut.set(t[n],"globalEval",!e||Ut.get(e[n],"globalEval"))}function T(t,e,n,i,r){for(var o,a,s,l,c,u,d=e.createDocumentFragment(),h=[],p=0,f=t.length;p<f;p++)if((o=t[p])||0===o)if("object"===m(o))Tt.merge(h,o.nodeType?[o]:o);else if(ne.test(o)){for(a=a||d.appendChild(e.createElement("div")),s=(Jt.exec(o)||["",""])[1].toLowerCase(),l=Zt[s]||Zt._default,a.innerHTML=l[1]+Tt.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;Tt.merge(h,a.childNodes),(a=d.firstChild).textContent=""}else h.push(e.createTextNode(o));for(d.textContent="",p=0;o=h[p++];)if(i&&-1<Tt.inArray(o,i))r&&r.push(o);else if(c=Tt.contains(o.ownerDocument,o),a=w(d.appendChild(o),"script"),c&&x(a),n)for(u=0;o=a[u++];)Qt.test(o.type||"")&&n.push(o);return d}function S(){return!0}function A(){return!1}function C(){try{return at.activeElement}catch(t){}}function k(t,e,n,i,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=undefined),e)k(t,s,n,i,e[s],o);return t}if(null==i&&null==r?(r=n,i=n=undefined):null==r&&("string"==typeof n?(r=i,i=undefined):(r=i,i=n,n=undefined)),!1===r)r=A;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return Tt().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=Tt.guid++)),t.each(function(){Tt.event.add(this,e,r,i,n)})}function _(t,e){return c(t,"table")&&c(11!==e.nodeType?e:e.firstChild,"tr")&&Tt(t).children("tbody")[0]||t}function R(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function D(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function L(t,e){var n,i,r,o,a,s,l,c;if(1===e.nodeType){if(Ut.hasData(t)&&(o=Ut.access(t),a=Ut.set(e,o),c=o.events))for(r in delete a.handle,a.events={},c)for(n=0,i=c[r].length;n<i;n++)Tt.event.add(e,r,c[r][n]);Ht.hasData(t)&&(s=Ht.access(t),l=Tt.extend({},s),Ht.set(e,l))}}function P(t,e){var n=e.nodeName.toLowerCase();"input"===n&&$t.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function I(n,i,r,o){i=ct.apply([],i);var t,e,a,s,l,c,u=0,d=n.length,h=d-1,p=i[0],f=yt(p);if(f||1<d&&"string"==typeof p&&!vt.checkClone&&ce.test(p))return n.each(function(t){var e=n.eq(t);f&&(i[0]=p.call(this,t,e.html())),I(e,i,r,o)});if(d&&(e=(t=T(i,n[0].ownerDocument,!1,n,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(s=(a=Tt.map(w(t,"script"),R)).length;u<d;u++)l=t,u!==h&&(l=Tt.clone(l,!0,!0),s&&Tt.merge(a,w(l,"script"))),r.call(n[u],l,u);if(s)for(c=a[a.length-1].ownerDocument,Tt.map(a,D),u=0;u<s;u++)l=a[u],Qt.test(l.type||"")&&!Ut.access(l,"globalEval")&&Tt.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?Tt._evalUrl&&Tt._evalUrl(l.src):g(l.textContent.replace(ue,""),c,l))}return n}function O(t,e,n){for(var i,r=e?Tt.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||Tt.cleanData(w(i)),i.parentNode&&(n&&Tt.contains(i.ownerDocument,i)&&x(w(i,"script")),i.parentNode.removeChild(i));return t}function N(t,e,n){var i,r,o,a,s=t.style;return(n=n||he(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||Tt.contains(t.ownerDocument,t)||(a=Tt.style(t,e)),!vt.pixelBoxStyles()&&de.test(a)&&pe.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),a!==undefined?a+"":a}function M(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function j(t){if(t in be)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ye.length;n--;)if((t=ye[n]+e)in be)return t}function F(t){var e=Tt.cssProps[t];return e||(e=Tt.cssProps[t]=j(t)||t),e}function B(t,e,n){var i=zt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function U(t,e,n,i,r,o){var a="width"===e?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=Tt.css(t,n+Vt[a],!0,r)),i?("content"===n&&(l-=Tt.css(t,"padding"+Vt[a],!0,r)),"margin"!==n&&(l-=Tt.css(t,"border"+Vt[a]+"Width",!0,r))):(l+=Tt.css(t,"padding"+Vt[a],!0,r),"padding"!==n?l+=Tt.css(t,"border"+Vt[a]+"Width",!0,r):s+=Tt.css(t,"border"+Vt[a]+"Width",!0,r));return!i&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))),l}function H(t,e,n){var i=he(t),r=N(t,e,i),o="border-box"===Tt.css(t,"boxSizing",!1,i),a=o;if(de.test(r)){if(!n)return r;r="auto"}return a=a&&(vt.boxSizingReliable()||r===t.style[e]),("auto"===r||!parseFloat(r)&&"inline"===Tt.css(t,"display",!1,i))&&(r=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(r=parseFloat(r)||0)+U(t,e,n||(o?"border":"content"),a,i,r)+"px"}function q(t,e,n,i,r){return new q.prototype.init(t,e,n,i,r)}function W(){xe&&(!1===at.hidden&&E.requestAnimationFrame?E.requestAnimationFrame(W):E.setTimeout(W,Tt.fx.interval),Tt.fx.tick())}function G(){return E.setTimeout(function(){we=undefined}),we=Date.now()}function z(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=Vt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function V(t,e,n){for(var i,r=(X.tweeners[e]||[]).concat(X.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function K(t,e,n){var i,r,o,a,s,l,c,u,d="width"in e||"height"in e,h=this,p={},f=t.style,g=t.nodeType&&Kt(t),m=Ut.get(t,"fxshow");for(i in n.queue||(null==(a=Tt._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,Tt.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[i],Ee.test(r)){if(delete e[i],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||m[i]===undefined)continue;g=!0}p[i]=m&&m[i]||Tt.style(t,i)}if((l=!Tt.isEmptyObject(e))||!Tt.isEmptyObject(p))for(i in d&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=m&&m.display)&&(c=Ut.get(t,"display")),"none"===(u=Tt.css(t,"display"))&&(c?u=c:(b([t],!0),c=t.style.display||c,u=Tt.css(t,"display"),b([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===Tt.css(t,"float")&&(l||(h.done(function(){f.display=c}),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=Ut.access(t,"fxshow",{display:c}),o&&(m.hidden=!g),g&&b([t],!0),h.done(function(){for(i in g||b([t]),Ut.remove(t,"fxshow"),p)Tt.style(t,i,p[i])})),l=V(g?m[i]:0,i,h),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}function Y(t,e){var n,i,r,o,a;for(n in t)if(r=e[i=p(n)],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(a=Tt.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}function X(o,t,e){var n,a,i=0,r=X.prefilters.length,s=Tt.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=we||G(),e=Math.max(0,c.startTime+c.duration-t),n=1-(e/c.duration||0),i=0,r=c.tweens.length;i<r;i++)c.tweens[i].run(n);return s.notifyWith(o,[c,n,e]),n<1&&r?e:(r||s.notifyWith(o,[c,1,0]),s.resolveWith(o,[c]),!1)},c=s.promise({elem:o,props:Tt.extend({},t),opts:Tt.extend(!0,{specialEasing:{},easing:Tt.easing._default},e),originalProperties:t,originalOptions:e,startTime:we||G(),duration:e.duration,tweens:[],createTween:function(t,e){var n=Tt.Tween(o,c.opts,t,e,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var e=0,n=t?c.tweens.length:0;if(a)return this;for(a=!0;e<n;e++)c.tweens[e].run(1);return t?(s.notifyWith(o,[c,1,0]),s.resolveWith(o,[c,t])):s.rejectWith(o,[c,t]),this}}),u=c.props;for(Y(u,c.opts.specialEasing);i<r;i++)if(n=X.prefilters[i].call(c,o,u,c.opts))return yt(n.stop)&&(Tt._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return Tt.map(u,V,c),yt(c.opts.start)&&c.opts.start.call(o,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),Tt.fx.timer(Tt.extend(l,{elem:o,anim:c,queue:c.opts.queue})),c}function $(t){return(t.match(It)||[]).join(" ")}function J(t){return t.getAttribute&&t.getAttribute("class")||""}function Q(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(It)||[]}function Z(n,t,i,r){var e;if(Array.isArray(t))Tt.each(t,function(t,e){i||Me.test(n)?r(n,e):Z(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,i,r)});else if(i||"object"!==m(t))r(n,t);else for(e in t)Z(n+"["+e+"]",t[e],i,r)}function tt(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,r=t.toLowerCase().match(It)||[];if(yt(e))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function et(e,r,o,a){function s(t){var i;return l[t]=!0,Tt.each(e[t]||[],function(t,e){var n=e(r,o,a);return"string"!=typeof n||c||l[n]?c?!(i=n):void 0:(r.dataTypes.unshift(n),s(n),!1)}),i}var l={},c=e===Ye;return s(r.dataTypes[0])||!l["*"]&&s("*")}function nt(t,e){var n,i,r=Tt.ajaxSettings.flatOptions||{};for(n in e)e[n]!==undefined&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&Tt.extend(!0,t,i),t}function it(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),i===undefined&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}function rt(t,e,n,i){var r,o,a,s,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}var ot=[],at=E.document,st=Object.getPrototypeOf,lt=ot.slice,ct=ot.concat,ut=ot.push,dt=ot.indexOf,ht={},pt=ht.toString,ft=ht.hasOwnProperty,gt=ft.toString,mt=gt.call(Object),vt={},yt=function yt(t){return"function"==typeof t&&"number"!=typeof t.nodeType},bt=function bt(e){return null!=e&&e===e.window},wt={type:!0,src:!0,noModule:!0},xt="3.3.1",Tt=function(t,e){return new Tt.fn.init(t,e)},St=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Tt.fn=Tt.prototype={jquery:xt,constructor:Tt,length:0,toArray:function(){return lt.call(this)},get:function(t){return null==t?lt.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=Tt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return Tt.each(this,t)},map:function(n){return this.pushStack(Tt.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(lt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ut,sort:ot.sort,splice:ot.splice},Tt.extend=Tt.fn.extend=function(t){var e,n,i,r,o,a,s=t||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[l]||{},l++),"object"==typeof s||yt(s)||(s={}),l===c&&(s=this,l--);l<c;l++)if(null!=(e=arguments[l]))for(n in e)i=s[n],s!==(r=e[n])&&(u&&r&&(Tt.isPlainObject(r)||(o=Array.isArray(r)))?(o?(o=!1,a=i&&Array.isArray(i)?i:[]):a=i&&Tt.isPlainObject(i)?i:{},s[n]=Tt.extend(u,a,r)):r!==undefined&&(s[n]=r));return s},Tt.extend({expando:"jQuery"+(xt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==pt.call(t))&&(!(e=st(t))||"function"==typeof(n=ft.call(e,"constructor")&&e.constructor)&&gt.call(n)===mt)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){g(t)},each:function(t,e){var n,i=0;if(s(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(St,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(s(Object(t))?Tt.merge(n,"string"==typeof t?[t]:t):ut.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:dt.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,a=!n;r<o;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,a=[];if(s(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&a.push(r);return ct.apply([],a)},guid:1,support:vt}),"function"==typeof Symbol&&(Tt.fn[Symbol.iterator]=ot[Symbol.iterator]),Tt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){ht["[object "+e+"]"]=e.toLowerCase()});var Et=function(n){function w(t,e,n,i){var r,o,a,s,l,c,u,d=e&&e.ownerDocument,h=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==h&&9!==h&&11!==h)return n;if(!i&&((e?e.ownerDocument||e:H)!==I&&P(e),e=e||I,N)){if(11!==h&&(l=vt.exec(t)))if(r=l[1]){if(9===h){if(!(a=e.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(d&&(a=d.getElementById(r))&&B(e,a)&&a.id===r)return n.push(a),n}else{if(l[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&T.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(r)),n}if(T.qsa&&!V[t+" "]&&(!M||!M.test(t))){if(1!==h)d=e,u=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(xt,Tt):e.setAttribute("id",s=U),o=(c=C(t)).length;o--;)c[o]="#"+s+" "+g(c[o]);u=c.join(","),d=yt.test(t)&&f(e.parentNode)||e}if(u)try{return Q.apply(n,d.querySelectorAll(u)),n}catch(p){}finally{s===U&&e.removeAttribute("id")}}}return _(t.replace(st,"$1"),e,n,i)}function t(){function n(t,e){return i.push(t+" ")>S.cacheLength&&delete n[i.shift()],n[t+" "]=e}var i=[];return n}function l(t){return t[U]=!0,t}function r(t){var e=I.createElement("fieldset");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function e(t,e){for(var n=t.split("|"),i=n.length;i--;)S.attrHandle[n[i]]=e}function c(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function i(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function o(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function a(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Et(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function s(a){return l(function(o){return o=+o,l(function(t,e){for(var n,i=a([],t.length,o),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}function f(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function u(){}function g(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function d(s,t,e){var l=t.dir,c=t.next,u=c||l,d=e&&"parentNode"===u,h=W++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||d)return s(t,e,n);return!1}:function(t,e,n){var i,r,o,a=[q,h];if(n){for(;t=t[l];)if((1===t.nodeType||d)&&s(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||d)if(r=(o=t[U]||(t[U]={}))[t.uniqueID]||(o[t.uniqueID]={}),c&&c===t.nodeName.toLowerCase())t=t[l]||t;else{if((i=r[u])&&i[0]===q&&i[1]===h)return a[2]=i[2];if((r[u]=a)[2]=s(t,e,n))return!0}return!1}}function h(r){return 1<r.length?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function y(t,e,n){for(var i=0,r=e.length;i<r;i++)w(t,e[i],n);return n}function x(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,c=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),c&&e.push(s)));return a}function b(p,f,g,m,v,t){return m&&!m[U]&&(m=b(m)),v&&!v[U]&&(v=b(v,t)),l(function(t,e,n,i){var r,o,a,s=[],l=[],c=e.length,u=t||y(f||"*",n.nodeType?[n]:n,[]),d=!p||!t&&f?u:x(u,s,p,n,i),h=g?v||(t?p:c||m)?[]:e:d;if(g&&g(d,h,n,i),m)for(r=x(h,l),m(r,[],n,i),o=r.length;o--;)(a=r[o])&&(h[l[o]]=!(d[l[o]]=a));if(t){if(v||p){if(v){for(r=[],o=h.length;o--;)(a=h[o])&&r.push(d[o]=a);v(null,h=[],r,i)}for(o=h.length;o--;)(a=h[o])&&-1<(r=v?tt(t,a):s[o])&&(t[r]=!(e[r]=a))}}else h=x(h===e?h.splice(c,h.length):h),v?v(null,e,h,i):Q.apply(e,h)})}function p(t){for(var r,e,n,i=t.length,o=S.relative[t[0].type],a=o||S.relative[" "],s=o?1:0,l=d(function(t){return t===r},a,!0),c=d(function(t){return-1<tt(r,t)},a,!0),u=[function(t,e,n){var i=!o&&(n||e!==R)||((r=e).nodeType?l(t,e,n):c(t,e,n));return r=null,i}];s<i;s++)if(e=S.relative[t[s].type])u=[d(h(u),e)];else{if((e=S.filter[t[s].type].apply(null,t[s].matches))[U]){for(n=++s;n<i&&!S.relative[t[n].type];n++);return b(1<s&&h(u),1<s&&g(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),e,s<n&&p(t.slice(s,n)),n<i&&p(t=t.slice(n)),n<i&&g(t))}u.push(e)}return h(u)}function m(m,v){var y=0<v.length,b=0<m.length,t=function(t,e,n,i,r){var o,a,s,l=0,c="0",u=t&&[],d=[],h=R,p=t||b&&S.find.TAG("*",r),f=q+=null==h?1:Math.random()||.1,g=p.length;for(r&&(R=e===I||e||r);c!==g&&null!=(o=p[c]);c++){if(b&&o){for(a=0,e||o.ownerDocument===I||(P(o),n=!N);s=m[a++];)if(s(o,e||I,n)){i.push(o);break}r&&(q=f)}y&&((o=!s&&o)&&l--,t&&u.push(o))}if(l+=c,y&&c!==l){for(a=0;s=v[a++];)s(u,d,e,n);if(t){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=$.call(i));d=x(d)}Q.apply(i,d),r&&!t&&0<d.length&&1<l+v.length&&w.uniqueSort(i)}return r&&(q=f,R=h),u};return y?l(t):t}var v,T,S,E,A,C,k,_,R,D,L,P,I,O,N,M,j,F,B,U="sizzle"+1*new Date,H=n.document,q=0,W=0,G=t(),z=t(),V=t(),K=function(t,e){return t===e&&(L=!0),0},Y={}.hasOwnProperty,X=[],$=X.pop,J=X.push,Q=X.push,Z=X.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",rt="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",ot=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ut=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),dt=new RegExp(ot),ht=new RegExp("^"+it+"$"),pt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Tt=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},St=function(){P()},Et=d(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{Q.apply(X=Z.call(H.childNodes),H.childNodes),X[H.childNodes.length].nodeType}catch(At){Q={apply:X.length?function(t,e){J.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}for(v in T=w.support={},A=w.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=w.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:H;return i!==I&&9===i.nodeType&&i.documentElement&&(O=(I=i).documentElement,N=!A(I),H!==I&&(n=I.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",St,!1):n.attachEvent&&n.attachEvent("onunload",St)),T.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),T.getElementsByTagName=r(function(t){return t.appendChild(I.createComment("")),!t.getElementsByTagName("*").length}),T.getElementsByClassName=mt.test(I.getElementsByClassName),T.getById=r(function(t){return O.appendChild(t).id=U,!I.getElementsByName||!I.getElementsByName(U).length}),T.getById?(S.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){return t.getAttribute("id")===e}},S.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&N){var n=e.getElementById(t);return n?[n]:[]}}):(S.filter.ID=function(t){var n=t.replace(bt,wt);return function(t){var e="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},S.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&N){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),S.find.TAG=T.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):T.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},S.find.CLASS=T.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&N)return e.getElementsByClassName(t)},j=[],M=[],(T.qsa=mt.test(I.querySelectorAll))&&(r(function(t){O.appendChild(t).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||M.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+U+"-]").length||M.push("~="),t.querySelectorAll(":checked").length||M.push(":checked"),t.querySelectorAll("a#"+U+"+*").length||M.push(".#.+[+~]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=I.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&M.push("name"+nt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&M.push(":enabled",":disabled"),O.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&M.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),M.push(",.*:")})),(T.matchesSelector=mt.test(F=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(t){T.disconnectedMatch=F.call(t,"*"),F.call(t,"[s!='']:x"),j.push("!=",ot)}),M=M.length&&new RegExp(M.join("|")),j=j.length&&new RegExp(j.join("|")),e=mt.test(O.compareDocumentPosition),B=e||mt.test(O.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},K=e?function(t,e){if(t===e)return L=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!T.sortDetached&&e.compareDocumentPosition(t)===n?t===I||t.ownerDocument===H&&B(H,t)?-1:e===I||e.ownerDocument===H&&B(H,e)?1:D?tt(D,t)-tt(D,e):0:4&n?-1:1)}:function(t,e){if(t===e)return L=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t===I?-1:e===I?1:r?-1:o?1:D?tt(D,t)-tt(D,e):0;if(r===o)return c(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?c(a[i],s[i]):a[i]===H?-1:s[i]===H?1:0}),I},w.matches=function(t,e){return w(t,null,null,e)},w.matchesSelector=function(t,e){if((t.ownerDocument||t)!==I&&P(t),e=e.replace(ut,"='$1']"),T.matchesSelector&&N&&!V[e+" "]&&(!j||!j.test(e))&&(!M||!M.test(e)))try{var n=F.call(t,e);if(n||T.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(At){}return 0<w(e,I,null,[t]).length},w.contains=function(t,e){return(t.ownerDocument||t)!==I&&P(t),B(t,e)},w.attr=function(t,e){(t.ownerDocument||t)!==I&&P(t);var n=S.attrHandle[e.toLowerCase()],i=n&&Y.call(S.attrHandle,e.toLowerCase())?n(t,e,!N):undefined;return i!==undefined?i:T.attributes||!N?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},w.escape=function(t){return(t+"").replace(xt,Tt)},w.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},w.uniqueSort=function(t){var e,n=[],i=0,r=0;if(L=!T.detectDuplicates,D=!T.sortStable&&t.slice(0),t.sort(K),L){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return D=null,t},E=w.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=E(e);return n},(S=w.selectors={cacheLength:50,createPseudo:l,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||w.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&w.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&dt.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=G[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&G(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(t){var e=w.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===r:"!="===i?e!==r:"^="===i?r&&0===e.indexOf(r):"*="===i?r&&-1<e.indexOf(r):"$="===i?r&&e.slice(-r.length)===r:"~="===i?-1<(" "+e.replace(at," ")+" ").indexOf(r):"|="===i&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(f,t,e,g,m){var v="nth"!==f.slice(0,3),y="last"!==f.slice(-4),b="of-type"===t;return 1===g&&0===m?function(t){return!!t.parentNode}:function(t,e,n){var i,r,o,a,s,l,c=v!==y?"nextSibling":"previousSibling",u=t.parentNode,d=b&&t.nodeName.toLowerCase(),h=!n&&!b,p=!1;if(u){if(v){for(;c;){for(a=t;a=a[c];)if(b?a.nodeName.toLowerCase()===d:1===a.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[y?u.firstChild:u.lastChild],y&&h){for(p=(s=(i=(r=(o=(a=u)[U]||(a[U]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===q&&i[1])&&i[2],a=s&&u.childNodes[s];a=++s&&a&&a[c]||(p=s=0)||l.pop();)if(1===a.nodeType&&++p&&a===t){r[f]=[q,s,p];break}}else if(h&&(p=s=(i=(r=(o=(a=t)[U]||(a[U]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===q&&i[1]),!1===p)for(;(a=++s&&a&&a[c]||(p=s=0)||l.pop())&&((b?a.nodeName.toLowerCase()!==d:1!==a.nodeType)||!++p||(h&&((r=(o=a[U]||(a[U]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]=[q,p]),a!==t)););return(p-=m)===g||p%g==0&&0<=p/g}}},PSEUDO:function(t,o){var e,a=S.pseudos[t]||S.setFilters[t.toLowerCase()]||w.error("unsupported pseudo: "+t);return a[U]?a(o):1<a.length?(e=[t,t,"",o],S.setFilters.hasOwnProperty(t.toLowerCase())?l(function(t,e){for(var n,i=a(t,o),r=i.length;r--;)t[n=tt(t,i[r])]=!(e[n]=i[r])}):function(t){return a(t,0,e)}):a}},pseudos:{not:l(function(t){var i=[],r=[],s=k(t.replace(st,"$1"));return s[U]?l(function(t,e,n,i){for(var r,o=s(t,null,i,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,e,n){return i[0]=t,s(i,null,n,r),i[0]=null,!r.pop()}}),has:l(function(e){return function(t){return 0<w(e,t).length}}),contains:l(function(e){return e=e.replace(bt,wt),function(t){return-1<(t.textContent||t.innerText||E(t)).indexOf(e)}}),lang:l(function(n){return ht.test(n||"")||w.error("unsupported lang: "+n),n=n.replace(bt,wt).toLowerCase(),function(t){var e;do{if(e=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===O},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!S.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(
e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:s(function(){return[0]}),last:s(function(t,e){return[e-1]}),eq:s(function(t,e,n){return[n<0?n+e:n]}),even:s(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:s(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:s(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:s(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=S.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[v]=i(v);for(v in{submit:!0,reset:!0})S.pseudos[v]=o(v);return u.prototype=S.filters=S.pseudos,S.setFilters=new u,C=w.tokenize=function(t,e){var n,i,r,o,a,s,l,c=z[t+" "];if(c)return e?0:c.slice(0);for(a=t,s=[],l=S.preFilter;a;){for(o in n&&!(i=lt.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(r=[])),n=!1,(i=ct.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(st," ")}),a=a.slice(n.length)),S.filter)!(i=pt[o].exec(a))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?w.error(t):z(t,s).slice(0)},k=w.compile=function(t,e){var n,i=[],r=[],o=V[t+" "];if(!o){for(e||(e=C(t)),n=e.length;n--;)(o=p(e[n]))[U]?i.push(o):r.push(o);(o=V(t,m(r,i))).selector=t}return o},_=w.select=function(t,e,n,i){var r,o,a,s,l,c="function"==typeof t&&t,u=!i&&C(t=c.selector||t);if(n=n||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===e.nodeType&&N&&S.relative[o[1].type]){if(!(e=(S.find.ID(a.matches[0].replace(bt,wt),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=pt.needsContext.test(t)?0:o.length;r--&&(a=o[r],!S.relative[s=a.type]);)if((l=S.find[s])&&(i=l(a.matches[0].replace(bt,wt),yt.test(o[0].type)&&f(e.parentNode)||e))){if(o.splice(r,1),!(t=i.length&&g(o)))return Q.apply(n,i),n;break}}return(c||k(t,u))(i,e,!N,n,!e||yt.test(t)&&f(e.parentNode)||e),n},T.sortStable=U.split("").sort(K).join("")===U,T.detectDuplicates=!!L,P(),T.sortDetached=r(function(t){return 1&t.compareDocumentPosition(I.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||e("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),T.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||e("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||e(et,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),w}(E);Tt.find=Et,Tt.expr=Et.selectors,Tt.expr[":"]=Tt.expr.pseudos,Tt.uniqueSort=Tt.unique=Et.uniqueSort,Tt.text=Et.getText,Tt.isXMLDoc=Et.isXML,Tt.contains=Et.contains,Tt.escapeSelector=Et.escape;var At=function(t,e,n){for(var i=[],r=n!==undefined;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&Tt(t).is(n))break;i.push(t)}return i},Ct=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},kt=Tt.expr.match.needsContext,_t=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Tt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?Tt.find.matchesSelector(i,t)?[i]:[]:Tt.find.matches(t,Tt.grep(e,function(t){return 1===t.nodeType}))},Tt.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(Tt(t).filter(function(){for(e=0;e<i;e++)if(Tt.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)Tt.find(t,r[e],n);return 1<i?Tt.uniqueSort(n):n},filter:function(t){return this.pushStack(e(this,t||[],!1))},not:function(t){return this.pushStack(e(this,t||[],!0))},is:function(t){return!!e(this,"string"==typeof t&&kt.test(t)?Tt(t):t||[],!1).length}});var Rt,Dt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(Tt.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||Rt,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:Dt.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof Tt?e[0]:e,Tt.merge(this,Tt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:at,!0)),_t.test(i[1])&&Tt.isPlainObject(e))for(i in e)yt(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=at.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):yt(t)?n.ready!==undefined?n.ready(t):t(Tt):Tt.makeArray(t,this)}).prototype=Tt.fn,Rt=Tt(at);var Lt=/^(?:parents|prev(?:Until|All))/,Pt={children:!0,contents:!0,next:!0,prev:!0};Tt.fn.extend({has:function(t){var e=Tt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(Tt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],a="string"!=typeof t&&Tt(t);if(!kt.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&Tt.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?Tt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?dt.call(Tt(t),this[0]):dt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Tt.uniqueSort(Tt.merge(this.get(),Tt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Tt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return At(t,"parentNode")},parentsUntil:function(t,e,n){return At(t,"parentNode",n)},next:function(t){return n(t,"nextSibling")},prev:function(t){return n(t,"previousSibling")},nextAll:function(t){return At(t,"nextSibling")},prevAll:function(t){return At(t,"previousSibling")},nextUntil:function(t,e,n){return At(t,"nextSibling",n)},prevUntil:function(t,e,n){return At(t,"previousSibling",n)},siblings:function(t){return Ct((t.parentNode||{}).firstChild,t)},children:function(t){return Ct(t.firstChild)},contents:function(t){return c(t,"iframe")?t.contentDocument:(c(t,"template")&&(t=t.content||t),Tt.merge([],t.childNodes))}},function(i,r){Tt.fn[i]=function(t,e){var n=Tt.map(this,r,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=Tt.filter(e,n)),1<this.length&&(Pt[i]||Tt.uniqueSort(n),Lt.test(i)&&n.reverse()),this.pushStack(n)}});var It=/[^\x20\t\r\n\f]+/g;Tt.Callbacks=function(i){i="string"==typeof i?u(i):Tt.extend({},i);var r,t,e,n,o=[],a=[],s=-1,l=function(){for(n=n||i.once,e=r=!0;a.length;s=-1)for(t=a.shift();++s<o.length;)!1===o[s].apply(t[0],t[1])&&i.stopOnFalse&&(s=o.length,t=!1);i.memory||(t=!1),r=!1,n&&(o=t?[]:"")},c={add:function(){return o&&(t&&!r&&(s=o.length-1,a.push(t)),function n(t){Tt.each(t,function(t,e){yt(e)?i.unique&&c.has(e)||o.push(e):e&&e.length&&"string"!==m(e)&&n(e)})}(arguments),t&&!r&&l()),this},remove:function(){return Tt.each(arguments,function(t,e){for(var n;-1<(n=Tt.inArray(e,o,n));)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?-1<Tt.inArray(t,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return n=a=[],o=t="",this},disabled:function(){return!o},lock:function(){return n=a=[],t||r||(o=t=""),this},locked:function(){return!!n},fireWith:function(t,e){return n||(e=[t,(e=e||[]).slice?e.slice():e],a.push(e),r||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!e}};return c},Tt.extend({Deferred:function(t){var o=[["notify","progress",Tt.Callbacks("memory"),Tt.Callbacks("memory"),2],["resolve","done",Tt.Callbacks("once memory"),Tt.Callbacks("once memory"),0,"resolved"],["reject","fail",Tt.Callbacks("once memory"),Tt.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(t){return a.then(null,t)},pipe:function(){var r=arguments;return Tt.Deferred(function(i){Tt.each(o,function(t,e){var n=yt(r[e[4]])&&r[e[4]];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&yt(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this,n?[t]:arguments)})}),r=null}).promise()},then:function(e,n,i){function c(o,a,s,l){return function(){var n=this,i=arguments,e=function(){var t,e;if(!(o<u)){if((t=s.apply(n,i))===a.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,yt(e)?l?e.call(t,c(u,a,d,l),c(u,a,h,l)):(u++,e.call(t,c(u,a,d,l),c(u,a,h,l),c(u,a,d,a.notifyWith))):(s!==d&&(n=undefined,i=[t]),(l||a.resolveWith)(n,i))}},r=l?e:function(){try{e()}catch(t){Tt.Deferred.exceptionHook&&Tt.Deferred.exceptionHook(t,r.stackTrace),u<=o+1&&(s!==h&&(n=undefined,i=[t]),a.rejectWith(n,i))}};o?r():(Tt.Deferred.getStackHook&&(r.stackTrace=Tt.Deferred.getStackHook()),E.setTimeout(r))}}var u=0;return Tt.Deferred(function(t){o[0][3].add(c(0,t,yt(i)?i:d,t.notifyWith)),o[1][3].add(c(0,t,yt(e)?e:d)),o[2][3].add(c(0,t,yt(n)?n:h))}).promise()},promise:function(t){return null!=t?Tt.extend(t,a):a}},s={};return Tt.each(o,function(t,e){var n=e[2],i=e[5];a[e[1]]=n.add,i&&n.add(function(){r=i},o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),n.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?undefined:this,arguments),this},s[e[0]+"With"]=n.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){var n=arguments.length,e=n,i=Array(e),r=lt.call(arguments),o=Tt.Deferred(),a=function(e){return function(t){i[e]=this,r[e]=1<arguments.length?lt.call(arguments):t,--n||o.resolveWith(i,r)}};if(n<=1&&(l(t,o.done(a(e)).resolve,o.reject,!n),"pending"===o.state()||yt(r[e]&&r[e].then)))return o.then();for(;e--;)l(r[e],a(e),o.reject);return o.promise()}});var Ot=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Tt.Deferred.exceptionHook=function(t,e){E.console&&E.console.warn&&t&&Ot.test(t.name)&&E.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},Tt.readyException=function(t){E.setTimeout(function(){throw t})};var Nt=Tt.Deferred();Tt.fn.ready=function(t){return Nt.then(t)["catch"](function(t){Tt.readyException(t)}),this},Tt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--Tt.readyWait:Tt.isReady)||(Tt.isReady=!0)!==t&&0<--Tt.readyWait||Nt.resolveWith(at,[Tt])}}),Tt.ready.then=Nt.then,"complete"===at.readyState||"loading"!==at.readyState&&!at.documentElement.doScroll?E.setTimeout(Tt.ready):(at.addEventListener("DOMContentLoaded",i),E.addEventListener("load",i));var Mt=function(t,e,n,i,r,o,a){var s=0,l=t.length,c=null==n;if("object"===m(n))for(s in r=!0,n)Mt(t,e,s,n[s],!0,o,a);else if(i!==undefined&&(r=!0,yt(i)||(a=!0),c&&(a?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(Tt(t),n)})),e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:c?e.call(t):l?e(t[0],n):o},jt=/^-ms-/,Ft=/-([a-z])/g,Bt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};o.uid=1,o.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Bt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[p(e)]=n;else for(i in e)r[p(i)]=e[i];return r},get:function(t,e){return e===undefined?this.cache(t):t[this.expando]&&t[this.expando][p(e)]},access:function(t,e,n){return e===undefined||e&&"string"==typeof e&&n===undefined?this.get(t,e):(this.set(t,e,n),n!==undefined?n:e)},remove:function(t,e){var n,i=t[this.expando];if(i!==undefined){if(e!==undefined){n=(e=Array.isArray(e)?e.map(p):(e=p(e))in i?[e]:e.match(It)||[]).length;for(;n--;)delete i[e[n]]}(e===undefined||Tt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=undefined:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return e!==undefined&&!Tt.isEmptyObject(e)}};var Ut=new o,Ht=new o,qt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Wt=/[A-Z]/g;Tt.extend({hasData:function(t){return Ht.hasData(t)||Ut.hasData(t)},data:function(t,e,n){return Ht.access(t,e,n)},removeData:function(t,e){Ht.remove(t,e)},_data:function(t,e,n){return Ut.access(t,e,n)},_removeData:function(t,e){Ut.remove(t,e)}}),Tt.fn.extend({data:function(n,t){var e,i,r,o=this[0],a=o&&o.attributes;if(n===undefined){if(this.length&&(r=Ht.get(o),1===o.nodeType&&!Ut.get(o,"hasDataAttrs"))){for(e=a.length;e--;)a[e]&&0===(i=a[e].name).indexOf("data-")&&(i=p(i.slice(5)),f(o,i,r[i]));Ut.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof n?this.each(function(){Ht.set(this,n)}):Mt(this,function(t){var e;if(o&&t===undefined)return(e=Ht.get(o,n))!==undefined?e:(e=f(o,n))!==undefined?e:void 0;this.each(function(){Ht.set(this,n,t)})},null,t,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){Ht.remove(this,t)})}}),Tt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Ut.get(t,e),n&&(!i||Array.isArray(n)?i=Ut.access(t,e,Tt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=Tt.queue(t,e),i=n.length,r=n.shift(),o=Tt._queueHooks(t,e),a=function(){Tt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Ut.get(t,n)||Ut.access(t,n,{empty:Tt.Callbacks("once memory").add(function(){Ut.remove(t,[e+"queue",n])})})}}),Tt.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?Tt.queue(this[0],e):n===undefined?this:this.each(function(){var t=Tt.queue(this,e,n);Tt._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&Tt.dequeue(this,e)})},dequeue:function(t){return this.each(function(){Tt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=Tt.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=undefined),t=t||"fx";a--;)(n=Ut.get(o[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var Gt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,zt=new RegExp("^(?:([+-])=|)("+Gt+")([a-z%]*)$","i"),Vt=["Top","Right","Bottom","Left"],Kt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&Tt.contains(t.ownerDocument,t)&&"none"===Tt.css(t,"display")},Yt=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=a[o];return r},Xt={};Tt.fn.extend({show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Kt(this)?Tt(this).show():Tt(this).hide()})}});var $t=/^(?:checkbox|radio)$/i,Jt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Qt=/^$|^module$|\/(?:java|ecma)script/i,Zt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td;var te,ee,ne=/<|&#?\w+;/;te=at.createDocumentFragment().appendChild(at.createElement("div")),(ee=at.createElement("input")).setAttribute("type","radio"),ee.setAttribute("checked","checked"),ee.setAttribute("name","t"),te.appendChild(ee),vt.checkClone=te.cloneNode(!0).cloneNode(!0).lastChild.checked,te.innerHTML="<textarea>x</textarea>",vt.noCloneChecked=!!te.cloneNode(!0).lastChild.defaultValue;var ie=at.documentElement,re=/^key/,oe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ae=/^([^.]*)(?:\.(.+)|)/;Tt.event={global:{},add:function(e,t,n,i,r){var o,a,s,l,c,u,d,h,p,f,g,m=Ut.get(e);if(m)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&Tt.find.matchesSelector(ie,r),n.guid||(n.guid=Tt.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(t){return void 0!==Tt&&Tt.event.triggered!==t.type?Tt.event.dispatch.apply(e,arguments):undefined}),c=(t=(t||"").match(It)||[""]).length;c--;)p=g=(s=ae.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p&&(d=Tt.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,d=Tt.event.special[p]||{},u=Tt.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Tt.expr.match.needsContext.test(r),namespace:f.join(".")},o),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,a)||e.addEventListener&&e.addEventListener(p,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),Tt.event.global[p]=!0)},remove:function(t,e,n,i,r){var o,a,s,l,c,u,d,h,p,f,g,m=Ut.hasData(t)&&Ut.get(t);if(m&&(l=m.events)){for(c=(e=(e||"").match(It)||[""]).length;c--;)if(p=g=(s=ae.exec(e[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(d=Tt.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)u=h[o],!r&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(t,u));a&&!h.length&&(d.teardown&&!1!==d.teardown.call(t,f,m.handle)||Tt.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)Tt.event.remove(t,p+e[c],n,i,!0);Tt.isEmptyObject(l)&&Ut.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,a,s=Tt.event.fix(t),l=new Array(arguments.length),c=(Ut.get(this,"events")||{})[s.type]||[],u=Tt.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=Tt.event.handlers.call(this,s,c),e=0;(r=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,(i=((Tt.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))!==undefined&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,i,r,o,a,s=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)a[r=(i=e[n]).selector+" "]===undefined&&(a[r]=i.needsContext?-1<Tt(r,this).index(c):Tt.find(r,this,null,[c]).length),a[r]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,l<e.length&&s.push({elem:c,handlers:e.slice(l)}),s},addProp:function(e,t){Object.defineProperty(Tt.Event.prototype,e,{enumerable:!0,configurable:!0,get:yt(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[Tt.expando]?t:new Tt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==C()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===C()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&c(this,"input"))return this.click(),!1},_default:function(t){return c(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==undefined&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},Tt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},Tt.Event=function(t,e){if(!(this instanceof Tt.Event))return new Tt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&!1===t.returnValue?S:A,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&Tt.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[Tt.expando]=!0},Tt.Event.prototype={constructor:Tt.Event,isDefaultPrevented:A,isPropagationStopped:A,isImmediatePropagationStopped:A,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=S,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=S,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=S,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},Tt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&re.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&e!==undefined&&oe.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},Tt.event.addProp),Tt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){Tt.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=this,i=t.relatedTarget,r=t.handleObj;return i&&(i===n||Tt.contains(n,i))||(t.type=r.origType,e=r.handler.apply(this,arguments),t.type=o),e}}}),Tt.fn.extend({on:function(t,e,n,i){return k(this,t,e,n,i)},one:function(t,e,n,i){return k(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,Tt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=undefined),!1===n&&(n=A),this.each(function(){Tt.event.remove(this,t,n,e)})}});var se=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,le=/<script|<style|<link/i,ce=/checked\s*(?:[^=]|=\s*.checked.)/i,ue=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Tt.extend({htmlPrefilter:function(t){return t.replace(se,"<$1></$2>")},clone:function(t,e,n){var i,r,o,a,s=t.cloneNode(!0),l=Tt.contains(t.ownerDocument,t);if(!(vt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Tt.isXMLDoc(t)))for(a=w(s),i=0,r=(o=w(t)).length;i<r;i++)P(o[i],a[i]);if(e)if(n)for(o=o||w(t),a=a||w(s),i=0,r=o.length;i<r;i++)L(o[i],a[i]);else L(t,s);return 0<(a=w(s,"script")).length&&x(a,!l&&w(t,"script")),s},cleanData:function(t){for(var e,n,i,r=Tt.event.special,o=0;(n=t[o])!==undefined;o++)if(Bt(n)){if(e=n[Ut.expando]){if(e.events)for(i in e.events)r[i]?Tt.event.remove(n,i):Tt.removeEvent(n,i,e.handle);n[Ut.expando]=undefined}n[Ht.expando]&&(n[Ht.expando]=undefined)}}}),Tt.fn.extend({detach:function(t){return O(this,t,!0)},remove:function(t){return O(this,t)},text:function(t){return Mt(this,function(t){return t===undefined?Tt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return I(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||_(this,t).appendChild(t)})},prepend:function(){return I(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=_(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return I(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return I(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Tt.cleanData(w(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return Tt.clone(this,t,e)})},html:function(t){return Mt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(t===undefined&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!le.test(t)&&!Zt[(Jt.exec(t)||["",""])[1].toLowerCase()]){t=Tt.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(Tt.cleanData(w(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return I(this,arguments,function(t){var e=this.parentNode;Tt.inArray(this,n)<0&&(Tt.cleanData(w(this)),e&&e.replaceChild(t,this))},n)}}),Tt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){Tt.fn[t]=function(t){for(var e,n=[],i=Tt(t),r=i.length-1,o=0;o<=r;o++)e=o===r?this:this.clone(!0),Tt(i[o])[a](e),ut.apply(n,e.get());return this.pushStack(n)}});var de=new RegExp("^("+Gt+")(?!px)[a-z%]+$","i"),he=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=E),e.getComputedStyle(t)},pe=new RegExp(Vt.join("|"),"i");!function(){function t(){if(l){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(s).appendChild(l);var t=E.getComputedStyle(l);n="1%"!==t.top,a=12===e(t.marginLeft),l.style.right="60%",o=36===e(t.right),i=36===e(t.width),l.style.position="absolute",r=36===l.offsetWidth||"absolute",ie.removeChild(s),l=null}}function e(t){return Math.round(parseFloat(t))}var n,i,r,o,a,s=at.createElement("div"),l=at.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",vt.clearCloneStyle="content-box"===l.style.backgroundClip,Tt.extend(vt,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),a},scrollboxSize:function(){return t(),r}}))}();var fe=/^(none|table(?!-c[ea]).+)/,ge=/^--/,me={position:"absolute",visibility:"hidden",display:"block"},ve={letterSpacing:"0",fontWeight:"400"},ye=["Webkit","Moz","ms"],be=at.createElement("div").style;Tt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=N(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=p(e),l=ge.test(e),c=t.style;if(l||(e=F(s)),a=Tt.cssHooks[e]||Tt.cssHooks[s],n===undefined)return a&&"get"in a&&(r=a.get(t,!1,i))!==undefined?r:c[e];"string"===(o=typeof n)&&(r=zt.exec(n))&&r[1]&&(n=v(t,e,r),o="number"),null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(Tt.cssNumber[s]?"":"px")),vt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&(n=a.set(t,n,i))===undefined||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var r,o,a,s=p(e);return ge.test(e)||(e=F(s)),(a=Tt.cssHooks[e]||Tt.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,n)),r===undefined&&(r=N(t,e,i)),"normal"===r&&e in ve&&(r=ve[e]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),Tt.each(["height","width"],function(t,s){Tt.cssHooks[s]={get:function(t,e,n){if(e)return!fe.test(Tt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?H(t,s,n):Yt(t,me,function(){return H(t,s,n)})},set:function(t,e,n){var i,r=he(t),o="border-box"===Tt.css(t,"boxSizing",!1,r),a=n&&U(t,s,n,o,r);return o&&vt.scrollboxSize()===r.position&&(a-=Math.ceil(t["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(r[s])-U(t,s,"border",!1,r)-.5)),a&&(i=zt.exec(e))&&"px"!==(i[3]||"px")&&(t.style[s]=e,e=Tt.css(t,s)),B(t,e,a)}}}),Tt.cssHooks.marginLeft=M(vt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(N(t,"marginLeft"))||t.getBoundingClientRect().left-Yt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),Tt.each({margin:"",padding:"",border:"Width"},function(r,o){Tt.cssHooks[r+o]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[r+Vt[e]+o]=i[e]||i[e-2]||i[0];return n}},"margin"!==r&&(Tt.cssHooks[r+o].set=B)}),Tt.fn.extend({css:function(t,e){return Mt(this,function(t,e,n){var i,r,o={},a=0;if(Array.isArray(e)){for(i=he(t),r=e.length;a<r;a++)o[e[a]]=Tt.css(t,e[a],!1,i);return o}return n!==undefined?Tt.style(t,e,n):Tt.css(t,e)},t,e,1<arguments.length)}}),(Tt.Tween=q).prototype={constructor:q,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||Tt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Tt.cssNumber[n]?"":"px")},cur:function(){var t=q.propHooks[this.prop];return t&&t.get?t.get(this):q.propHooks._default.get(this)},run:function(t){var e,n=q.propHooks[this.prop];return this.options.duration?this.pos=e=Tt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):q.propHooks._default.set(this),this}},q.prototype.init.prototype=q.prototype,q.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=Tt.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){Tt.fx.step[t.prop]?Tt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[Tt.cssProps[t.prop]]&&!Tt.cssHooks[t.prop]?t.elem[t.prop]=t.now:Tt.style(t.elem,t.prop,t.now+t.unit)}}},q.propHooks.scrollTop=q.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Tt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},Tt.fx=q.prototype.init,Tt.fx.step={};var we,xe,Te,Se,Ee=/^(?:toggle|show|hide)$/,Ae=/queueHooks$/;Tt.Animation=Tt.extend(X,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return v(n.elem,t,zt.exec(e),n),n}]},tweener:function(t,e){yt(t)?(e=t,t=["*"]):t=t.match(It);for(var n,i=0,r=t.length;i<r;i++)n=t[i],X.tweeners[n]=X.tweeners[n]||[],X.tweeners[n].unshift(e)},prefilters:[K],prefilter:function(t,e){e?X.prefilters.unshift(t):X.prefilters.push(t)}}),Tt.speed=function(t,e,n){var i=t&&"object"==typeof t?Tt.extend({},t):{complete:n||!n&&e||yt(t)&&t,duration:t,easing:n&&e||e&&!yt(e)&&e};return Tt.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in Tt.fx.speeds?i.duration=Tt.fx.speeds[i.duration]:i.duration=Tt.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){yt(i.old)&&i.old.call(this),i.queue&&Tt.dequeue(this,i.queue)},i},Tt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Kt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var r=Tt.isEmptyObject(e),o=Tt.speed(t,n,i),a=function(){var t=X(this,Tt.extend({},e),o);(r||Ut.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(r,t,o){var a=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof r&&(o=t,t=r,r=undefined),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",n=Tt.timers,i=Ut.get(this);if(e)i[e]&&i[e].stop&&a(i[e]);else for(e in i)i[e]&&i[e].stop&&Ae.test(e)&&a(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=r&&n[e].queue!==r||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||Tt.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=Ut.get(this),n=e[a+"queue"],i=e[a+"queueHooks"],r=Tt.timers,o=n?n.length:0;for(e.finish=!0,Tt.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===a&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),Tt.each(["toggle","show","hide"],function(t,i){var r=Tt.fn[i];Tt.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(z(i,!0),t,e,n)}}),Tt.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){Tt.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),Tt.timers=[],Tt.fx.tick=function(){var t,e=0,n=Tt.timers;for(we=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||Tt.fx.stop(),we=undefined},Tt.fx.timer=function(t){Tt.timers.push(t),Tt.fx.start()},Tt.fx.interval=13,Tt.fx.start=function(){xe||(xe=!0,W())},Tt.fx.stop=function(){xe=null},Tt.fx.speeds={slow:600,fast:200,_default:400},Tt.fn.delay=function(i,t){return i=Tt.fx&&Tt.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=E.setTimeout(t,i);e.stop=function(){E.clearTimeout(n)}})},Te=at.createElement("input"),Se=at.createElement("select").appendChild(
at.createElement("option")),Te.type="checkbox",vt.checkOn=""!==Te.value,vt.optSelected=Se.selected,(Te=at.createElement("input")).value="t",Te.type="radio",vt.radioValue="t"===Te.value;var Ce,ke=Tt.expr.attrHandle;Tt.fn.extend({attr:function(t,e){return Mt(this,Tt.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){Tt.removeAttr(this,t)})}}),Tt.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?Tt.prop(t,e,n):(1===o&&Tt.isXMLDoc(t)||(r=Tt.attrHooks[e.toLowerCase()]||(Tt.expr.match.bool.test(e)?Ce:undefined)),n!==undefined?null===n?void Tt.removeAttr(t,e):r&&"set"in r&&(i=r.set(t,n,e))!==undefined?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=Tt.find.attr(t,e))?undefined:i)},attrHooks:{type:{set:function(t,e){if(!vt.radioValue&&"radio"===e&&c(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(It);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),Ce={set:function(t,e,n){return!1===e?Tt.removeAttr(t,n):t.setAttribute(n,n),n}},Tt.each(Tt.expr.match.bool.source.match(/\w+/g),function(t,e){var a=ke[e]||Tt.find.attr;ke[e]=function(t,e,n){var i,r,o=e.toLowerCase();return n||(r=ke[o],ke[o]=i,i=null!=a(t,e,n)?o:null,ke[o]=r),i}});var _e=/^(?:input|select|textarea|button)$/i,Re=/^(?:a|area)$/i;Tt.fn.extend({prop:function(t,e){return Mt(this,Tt.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[Tt.propFix[t]||t]})}}),Tt.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&Tt.isXMLDoc(t)||(e=Tt.propFix[e]||e,r=Tt.propHooks[e]),n!==undefined?r&&"set"in r&&(i=r.set(t,n,e))!==undefined?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=Tt.find.attr(t,"tabindex");return e?parseInt(e,10):_e.test(t.nodeName)||Re.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),vt.optSelected||(Tt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),Tt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Tt.propFix[this.toLowerCase()]=this}),Tt.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,l=0;if(yt(e))return this.each(function(t){Tt(this).addClass(e.call(this,t,J(this)))});if((t=Q(e)).length)for(;n=this[l++];)if(r=J(n),i=1===n.nodeType&&" "+$(r)+" "){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=$(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,l=0;if(yt(e))return this.each(function(t){Tt(this).removeClass(e.call(this,t,J(this)))});if(!arguments.length)return this.attr("class","");if((t=Q(e)).length)for(;n=this[l++];)if(r=J(n),i=1===n.nodeType&&" "+$(r)+" "){for(a=0;o=t[a++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");r!==(s=$(i))&&n.setAttribute("class",s)}return this},toggleClass:function(r,e){var o=typeof r,a="string"===o||Array.isArray(r);return"boolean"==typeof e&&a?e?this.addClass(r):this.removeClass(r):yt(r)?this.each(function(t){Tt(this).toggleClass(r.call(this,t,J(this),e),e)}):this.each(function(){var t,e,n,i;if(a)for(e=0,n=Tt(this),i=Q(r);t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else r!==undefined&&"boolean"!==o||((t=J(this))&&Ut.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===r?"":Ut.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+$(J(n))+" ").indexOf(e))return!0;return!1}});var De=/\r/g;Tt.fn.extend({val:function(n){var i,t,r,e=this[0];return arguments.length?(r=yt(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?n.call(this,t,Tt(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=Tt.map(e,function(t){return null==t?"":t+""})),(i=Tt.valHooks[this.type]||Tt.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,e,"value")!==undefined||(this.value=e))})):e?(i=Tt.valHooks[e.type]||Tt.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&(t=i.get(e,"value"))!==undefined?t:"string"==typeof(t=e.value)?t.replace(De,""):null==t?"":t:void 0}}),Tt.extend({valHooks:{option:{get:function(t){var e=Tt.find.attr(t,"value");return null!=e?e:$(Tt.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:r.length;for(i=o<0?l:a?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!c(n.parentNode,"optgroup"))){if(e=Tt(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=Tt.makeArray(e),a=r.length;a--;)((i=r[a]).selected=-1<Tt.inArray(Tt.valHooks.option.get(i),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),Tt.each(["radio","checkbox"],function(){Tt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<Tt.inArray(Tt(t).val(),e)}},vt.checkOn||(Tt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),vt.focusin="onfocusin"in E;var Le=/^(?:focusinfocus|focusoutblur)$/,Pe=function(t){t.stopPropagation()};Tt.extend(Tt.event,{trigger:function(t,e,n,i){var r,o,a,s,l,c,u,d,h=[n||at],p=ft.call(t,"type")?t.type:t,f=ft.call(t,"namespace")?t.namespace.split("."):[];if(o=d=a=n=n||at,3!==n.nodeType&&8!==n.nodeType&&!Le.test(p+Tt.event.triggered)&&(-1<p.indexOf(".")&&(p=(f=p.split(".")).shift(),f.sort()),l=p.indexOf(":")<0&&"on"+p,(t=t[Tt.expando]?t:new Tt.Event(p,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=n),e=null==e?[t]:Tt.makeArray(e,[t]),u=Tt.event.special[p]||{},i||!u.trigger||!1!==u.trigger.apply(n,e))){if(!i&&!u.noBubble&&!bt(n)){for(s=u.delegateType||p,Le.test(s+p)||(o=o.parentNode);o;o=o.parentNode)h.push(o),a=o;a===(n.ownerDocument||at)&&h.push(a.defaultView||a.parentWindow||E)}for(r=0;(o=h[r++])&&!t.isPropagationStopped();)d=o,t.type=1<r?s:u.bindType||p,(c=(Ut.get(o,"events")||{})[t.type]&&Ut.get(o,"handle"))&&c.apply(o,e),(c=l&&o[l])&&c.apply&&Bt(o)&&(t.result=c.apply(o,e),!1===t.result&&t.preventDefault());return t.type=p,i||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(h.pop(),e)||!Bt(n)||l&&yt(n[p])&&!bt(n)&&((a=n[l])&&(n[l]=null),Tt.event.triggered=p,t.isPropagationStopped()&&d.addEventListener(p,Pe),n[p](),t.isPropagationStopped()&&d.removeEventListener(p,Pe),Tt.event.triggered=undefined,a&&(n[l]=a)),t.result}},simulate:function(t,e,n){var i=Tt.extend(new Tt.Event,n,{type:t,isSimulated:!0});Tt.event.trigger(i,null,e)}}),Tt.fn.extend({trigger:function(t,e){return this.each(function(){Tt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return Tt.event.trigger(t,e,n,!0)}}),vt.focusin||Tt.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(t){Tt.event.simulate(i,t.target,Tt.event.fix(t))};Tt.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=Ut.access(t,i);e||t.addEventListener(n,r,!0),Ut.access(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=Ut.access(t,i)-1;e?Ut.access(t,i,e):(t.removeEventListener(n,r,!0),Ut.remove(t,i))}}});var Ie=E.location,Oe=Date.now(),Ne=/\?/;Tt.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new E.DOMParser).parseFromString(t,"text/xml")}catch(n){e=undefined}return e&&!e.getElementsByTagName("parsererror").length||Tt.error("Invalid XML: "+t),e};var Me=/\[\]$/,je=/\r?\n/g,Fe=/^(?:submit|button|image|reset|file)$/i,Be=/^(?:input|select|textarea|keygen)/i;Tt.param=function(t,e){var n,i=[],r=function(t,e){var n=yt(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!Tt.isPlainObject(t))Tt.each(t,function(){r(this.name,this.value)});else for(n in t)Z(n,t[n],e,r);return i.join("&")},Tt.fn.extend({serialize:function(){return Tt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Tt.prop(this,"elements");return t?Tt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Tt(this).is(":disabled")&&Be.test(this.nodeName)&&!Fe.test(t)&&(this.checked||!$t.test(t))}).map(function(t,e){var n=Tt(this).val();return null==n?null:Array.isArray(n)?Tt.map(n,function(t){return{name:e.name,value:t.replace(je,"\r\n")}}):{name:e.name,value:n.replace(je,"\r\n")}}).get()}});var Ue=/%20/g,He=/#.*$/,qe=/([?&])_=[^&]*/,We=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ge=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ze=/^(?:GET|HEAD)$/,Ve=/^\/\//,Ke={},Ye={},Xe="*/".concat("*"),$e=at.createElement("a");$e.href=Ie.href,Tt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ie.href,type:"GET",isLocal:Ge.test(Ie.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Tt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?nt(nt(t,Tt.ajaxSettings),e):nt(Tt.ajaxSettings,t)},ajaxPrefilter:tt(Ke),ajaxTransport:tt(Ye),ajax:function(t,e){function n(t,e,n,i){var r,o,a,s,l,c=e;f||(f=!0,p&&E.clearTimeout(p),u=undefined,h=i||"",T.readyState=0<t?4:0,r=200<=t&&t<300||304===t,n&&(s=it(m,T,n)),s=rt(m,s,T,r),r?(m.ifModified&&((l=T.getResponseHeader("Last-Modified"))&&(Tt.lastModified[d]=l),(l=T.getResponseHeader("etag"))&&(Tt.etag[d]=l)),204===t||"HEAD"===m.type?c="nocontent":304===t?c="notmodified":(c=s.state,o=s.data,r=!(a=s.error))):(a=c,!t&&c||(c="error",t<0&&(t=0))),T.status=t,T.statusText=(e||c)+"",r?b.resolveWith(v,[o,c,T]):b.rejectWith(v,[T,c,a]),T.statusCode(x),x=undefined,g&&y.trigger(r?"ajaxSuccess":"ajaxError",[T,m,r?o:a]),w.fireWith(v,[T,c]),g&&(y.trigger("ajaxComplete",[T,m]),--Tt.active||Tt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=undefined),e=e||{};var u,d,h,i,p,r,f,g,o,a,m=Tt.ajaxSetup({},e),v=m.context||m,y=m.context&&(v.nodeType||v.jquery)?Tt(v):Tt.event,b=Tt.Deferred(),w=Tt.Callbacks("once memory"),x=m.statusCode||{},s={},l={},c="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(f){if(!i)for(i={};e=We.exec(h);)i[e[1].toLowerCase()]=e[2];e=i[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return f?h:null},setRequestHeader:function(t,e){return null==f&&(t=l[t.toLowerCase()]=l[t.toLowerCase()]||t,s[t]=e),this},overrideMimeType:function(t){return null==f&&(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(f)T.always(t[T.status]);else for(e in t)x[e]=[x[e],t[e]];return this},abort:function(t){var e=t||c;return u&&u.abort(e),n(0,e),this}};if(b.promise(T),m.url=((t||m.url||Ie.href)+"").replace(Ve,Ie.protocol+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(It)||[""],null==m.crossDomain){r=at.createElement("a");try{r.href=m.url,r.href=r.href,m.crossDomain=$e.protocol+"//"+$e.host!=r.protocol+"//"+r.host}catch(S){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=Tt.param(m.data,m.traditional)),et(Ke,m,e,T),f)return T;for(o in(g=Tt.event&&m.global)&&0==Tt.active++&&Tt.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!ze.test(m.type),d=m.url.replace(He,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Ue,"+")):(a=m.url.slice(d.length),m.data&&(m.processData||"string"==typeof m.data)&&(d+=(Ne.test(d)?"&":"?")+m.data,delete m.data),!1===m.cache&&(d=d.replace(qe,"$1"),a=(Ne.test(d)?"&":"?")+"_="+Oe+++a),m.url=d+a),m.ifModified&&(Tt.lastModified[d]&&T.setRequestHeader("If-Modified-Since",Tt.lastModified[d]),Tt.etag[d]&&T.setRequestHeader("If-None-Match",Tt.etag[d])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&T.setRequestHeader("Content-Type",m.contentType),T.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Xe+"; q=0.01":""):m.accepts["*"]),m.headers)T.setRequestHeader(o,m.headers[o]);if(m.beforeSend&&(!1===m.beforeSend.call(v,T,m)||f))return T.abort();if(c="abort",w.add(m.complete),T.done(m.success),T.fail(m.error),u=et(Ye,m,e,T)){if(T.readyState=1,g&&y.trigger("ajaxSend",[T,m]),f)return T;m.async&&0<m.timeout&&(p=E.setTimeout(function(){T.abort("timeout")},m.timeout));try{f=!1,u.send(s,n)}catch(S){if(f)throw S;n(-1,S)}}else n(-1,"No Transport");return T},getJSON:function(t,e,n){return Tt.get(t,e,n,"json")},getScript:function(t,e){return Tt.get(t,undefined,e,"script")}}),Tt.each(["get","post"],function(t,r){Tt[r]=function(t,e,n,i){return yt(e)&&(i=i||n,n=e,e=undefined),Tt.ajax(Tt.extend({url:t,type:r,dataType:i,data:e,success:n},Tt.isPlainObject(t)&&t))}}),Tt._evalUrl=function(t){return Tt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},Tt.fn.extend({wrapAll:function(t){var e;return this[0]&&(yt(t)&&(t=t.call(this[0])),e=Tt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return yt(n)?this.each(function(t){Tt(this).wrapInner(n.call(this,t))}):this.each(function(){var t=Tt(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=yt(e);return this.each(function(t){Tt(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){Tt(this).replaceWith(this.childNodes)}),this}}),Tt.expr.pseudos.hidden=function(t){return!Tt.expr.pseudos.visible(t)},Tt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},Tt.ajaxSettings.xhr=function(){try{return new E.XMLHttpRequest}catch(t){}};var Je={0:200,1223:204},Qe=Tt.ajaxSettings.xhr();vt.cors=!!Qe&&"withCredentials"in Qe,vt.ajax=Qe=!!Qe,Tt.ajaxTransport(function(o){var a,s;if(vt.cors||Qe&&!o.crossDomain)return{send:function(t,e){var n,i=o.xhr();if(i.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(n in o.xhrFields)i[n]=o.xhrFields[n];for(n in o.mimeType&&i.overrideMimeType&&i.overrideMimeType(o.mimeType),o.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)i.setRequestHeader(n,t[n]);a=function(t){return function(){a&&(a=s=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===t?i.abort():"error"===t?"number"!=typeof i.status?e(0,"error"):e(i.status,i.statusText):e(Je[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=a(),s=i.onerror=i.ontimeout=a("error"),i.onabort!==undefined?i.onabort=s:i.onreadystatechange=function(){4===i.readyState&&E.setTimeout(function(){a&&s()})},a=a("abort");try{i.send(o.hasContent&&o.data||null)}catch(r){if(a)throw r}},abort:function(){a&&a()}}}),Tt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),Tt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return Tt.globalEval(t),t}}}),Tt.ajaxPrefilter("script",function(t){t.cache===undefined&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Tt.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(t,e){i=Tt("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(t){i.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),at.head.appendChild(i[0])},abort:function(){r&&r()}}});var Ze,tn=[],en=/(=)\?(?=&|$)|\?\?/;Tt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=tn.pop()||Tt.expando+"_"+Oe++;return this[t]=!0,t}}),Tt.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,o,a=!1!==t.jsonp&&(en.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=yt(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(en,"$1"+i):!1!==t.jsonp&&(t.url+=(Ne.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||Tt.error(i+" was not called"),o[0]},t.dataTypes[0]="json",r=E[i],E[i]=function(){o=arguments},n.always(function(){r===undefined?Tt(E).removeProp(i):E[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,tn.push(i)),o&&yt(r)&&r(o[0]),o=r=undefined}),"script"}),vt.createHTMLDocument=((Ze=at.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ze.childNodes.length),Tt.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(vt.createHTMLDocument?((i=(e=at.implementation.createHTMLDocument("")).createElement("base")).href=at.location.href,e.head.appendChild(i)):e=at),o=!n&&[],(r=_t.exec(t))?[e.createElement(r[1])]:(r=T([t],e,o),o&&o.length&&Tt(o).remove(),Tt.merge([],r.childNodes)));var i,r,o},Tt.fn.load=function(t,e,n){var i,r,o,a=this,s=t.indexOf(" ");return-1<s&&(i=$(t.slice(s)),t=t.slice(0,s)),yt(e)?(n=e,e=undefined):e&&"object"==typeof e&&(r="POST"),0<a.length&&Tt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?Tt("<div>").append(Tt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},Tt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Tt.fn[e]=function(t){return this.on(e,t)}}),Tt.expr.pseudos.animated=function(e){return Tt.grep(Tt.timers,function(t){return e===t.elem}).length},Tt.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,c=Tt.css(t,"position"),u=Tt(t),d={};"static"===c&&(t.style.position="relative"),s=u.offset(),o=Tt.css(t,"top"),l=Tt.css(t,"left"),("absolute"===c||"fixed"===c)&&-1<(o+l).indexOf("auto")?(a=(i=u.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),yt(e)&&(e=e.call(t,n,Tt.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):u.css(d)}},Tt.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){Tt.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===Tt.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===Tt.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=Tt(t).offset()).top+=Tt.css(t,"borderTopWidth",!0),r.left+=Tt.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-Tt.css(i,"marginTop",!0),left:e.left-r.left-Tt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===Tt.css(t,"position");)t=t.offsetParent;return t||ie})}}),Tt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var o="pageYOffset"===r;Tt.fn[e]=function(t){return Mt(this,function(t,e,n){var i;if(bt(t)?i=t:9===t.nodeType&&(i=t.defaultView),n===undefined)return i?i[r]:t[e];i?i.scrollTo(o?i.pageXOffset:n,o?n:i.pageYOffset):t[e]=n},e,t,arguments.length)}}),Tt.each(["top","left"],function(t,n){Tt.cssHooks[n]=M(vt.pixelPosition,function(t,e){if(e)return e=N(t,n),de.test(e)?Tt(t).position()[n]+"px":e})}),Tt.each({Height:"height",Width:"width"},function(a,s){Tt.each({padding:"inner"+a,content:s,"":"outer"+a},function(i,o){Tt.fn[o]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),r=i||(!0===t||!0===e?"margin":"border");return Mt(this,function(t,e,n){var i;return bt(t)?0===o.indexOf("outer")?t["inner"+a]:t.document.documentElement["client"+a]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+a],i["scroll"+a],t.body["offset"+a],i["offset"+a],i["client"+a])):n===undefined?Tt.css(t,e,r):Tt.style(t,e,n,r)},s,n?t:undefined,n)}})}),Tt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){Tt.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),Tt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),Tt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),Tt.proxy=function(t,e){var n,i,r;return"string"==typeof e&&(n=t[e],e=t,t=n),yt(t)?(i=lt.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(lt.call(arguments)))}).guid=t.guid=t.guid||Tt.guid++,r):undefined},Tt.holdReady=function(t){t?Tt.readyWait++:Tt.ready(!0)},Tt.isArray=Array.isArray,Tt.parseJSON=JSON.parse,Tt.nodeName=c,Tt.isFunction=yt,Tt.isWindow=bt,Tt.camelCase=p,Tt.type=m,Tt.now=Date.now,Tt.isNumeric=function(t){var e=Tt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return Tt});var nn=E.jQuery,rn=E.$;return Tt.noConflict=function(t){return E.$===Tt&&(E.$=rn),t&&E.jQuery===Tt&&(E.jQuery=nn),Tt},t||(E.jQuery=E.$=Tt),Tt}),function(u,l){"use strict";var c;u.rails!==l&&u.error("jquery-ujs has already been loaded!");var t=u(document);u.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return u("meta[name=csrf-token]").attr("content")},csrfParam:function(){return u("meta[name=csrf-param]").attr("content")},CSRFProtection:function(t){var e=c.csrfToken();e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){u('form input[name="'+c.csrfParam()+'"]').val(c.csrfToken())},fire:function(t,e,n){var i=u.Event(e);return t.trigger(i,n),!1!==i.result},confirm:function(t){return confirm(t)},ajax:function(t){return u.ajax(t)},href:function(t){return t[0].href},isRemote:function(t){return t.data("remote")!==l&&!1!==t.data("remote")},handleRemote:function(i){var t,e,n,r,o,a;if(c.fire(i,"ajax:before")){if(r=i.data("with-credentials")||null,o=i.data("type")||u.ajaxSettings&&u.ajaxSettings.dataType,i.is("form")){t=i.data("ujs:submit-button-formmethod")||i.attr("method"),e=i.data("ujs:submit-button-formaction")||i.attr("action"),n=u(i[0]).serializeArray();var s=i.data("ujs:submit-button");s&&(n.push(s),i.data("ujs:submit-button",null)),i.data("ujs:submit-button-formmethod",null),i.data("ujs:submit-button-formaction",null)}else i.is(c.inputChangeSelector)?(t=i.data("method"),e=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):i.is(c.buttonClickSelector)?(t=i.data("method")||"get",e=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):(t=i.data("method"),e=c.href(i),n=i.data("params")||null);return a={type:t||"GET",data:n,dataType:o,beforeSend:function(t,e){if(e.dataType===l&&t.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),!c.fire(i,"ajax:beforeSend",[t,e]))return!1;i.trigger("ajax:send",t)},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:c.isCrossDomain(e)},r&&(a.xhrFields={withCredentials:r}),e&&(a.url=e),c.ajax(a)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(t){var e=c.href(t),n=t.data("method"),i=t.attr("target"),r=c.csrfToken(),o=c.csrfParam(),a=u('<form method="post" action="'+e+'"></form>'),s='<input name="_method" value="'+n+'" type="hidden" />';o===l||r===l||c.isCrossDomain(e)||(s+='<input name="'+o+'" value="'+r+'" type="hidden" />'),i&&a.attr("target",i),a.hide().append(s).appendTo("body"),a.submit()},formElements:function(t,e){return t.is("form")?u(t[0].elements).filter(e):t.find(e)},disableFormElements:function(t){c.formElements(t,c.disableSelector).each(function(){c.disableFormElement(u(this))})},disableFormElement:function(t){var e,n;e=t.is("button")?"html":"val",(n=t.data("disable-with"))!==l&&(t.data("ujs:enable-with",t[e]()),t[e](n)),t.prop("disabled",!0),t.data("ujs:disabled",!0)},enableFormElements:function(t){c.formElements(t,c.enableSelector).each(function(){c.enableFormElement(u(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")!==l&&(t[e](t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.prop("disabled",!1),t.removeData("ujs:disabled")},allowAction:function(t){var e,n=t.data("confirm"),i=!1;if(!n)return!0;if(c.fire(t,"confirm")){try{i=c.confirm(n)}catch(r){(console.error||console.log).call(console,r.stack||r)}e=c.fire(t,"confirm:complete",[i])}return i&&e},blankInputs:function(t,e,n){var i,r,o,a=u(),s=e||"input,textarea",l=t.find(s),c={};return l.each(function(){(i=u(this)).is("input[type=radio]")?(o=i.attr("name"),c[o]||(0===t.find('input[type=radio]:checked[name="'+o+'"]').length&&(r=t.find('input[type=radio][name="'+o+'"]'),a=a.add(r)),c[o]=o)):(i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):!!i.val())===n&&(a=a.add(i))}),!!a.length&&a},nonBlankInputs:function(t,e){return c.blankInputs(t,e,!0)},stopEverything:function(t){return u(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(t){var e=t.data("disable-with");e!==l&&(t.data("ujs:enable-with",t.html()),t.html(e)),t.bind("click.railsDisable",function(t){return c.stopEverything(t)}),t.data("ujs:disabled",!0)},enableElement:function(t){t.data("ujs:enable-with")!==l&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable"),t.removeData("ujs:disabled")}},c.fire(t,"rails:attachBindings")&&(u.ajaxPrefilter(function(t,e,n){t.crossDomain||c.CSRFProtection(n)}),u(window).on("pageshow.rails",function(){u(u.rails.enableSelector).each(function(){var t=u(this);t.data("ujs:disabled")&&u.rails.enableFormElement(t)}),u(u.rails.linkDisableSelector).each(function(){var t=u(this);t.data("ujs:disabled")&&u.rails.enableElement(t)})}),t.on("ajax:complete",c.linkDisableSelector,function(){c.enableElement(u(this))}),t.on("ajax:complete",c.buttonDisableSelector,function(){c.enableFormElement(u(this))}),t.on("click.rails",c.linkClickSelector,function(t){var e=u(this),n=e.data("method"),i=e.data("params"),r=t.metaKey||t.ctrlKey;if(!c.allowAction(e))return c.stopEverything(t);if(!r&&e.is(c.linkDisableSelector)&&c.disableElement(e),c.isRemote(e)){if(r&&(!n||"GET"===n)&&!i)return!0;var o=c.handleRemote(e);return!1===o?c.enableElement(e):o.fail(function(){c.enableElement(e)}),!1}return n?(c.handleMethod(e),!1):void 0}),t.on("click.rails",c.buttonClickSelector,function(t){var e=u(this);if(!c.allowAction(e)||!c.isRemote(e))return c.stopEverything(t);e.is(c.buttonDisableSelector)&&c.disableFormElement(e);var n=c.handleRemote(e);return!1===n?c.enableFormElement(e):n.fail(function(){c.enableFormElement(e)}),!1}),t.on("change.rails",c.inputChangeSelector,function(t){var e=u(this);return c.allowAction(e)&&c.isRemote(e)?(c.handleRemote(e),!1):c.stopEverything(t)}),t.on("submit.rails",c.formSubmitSelector,function(t){var e,n,i=u(this),r=c.isRemote(i);if(!c.allowAction(i))return c.stopEverything(t);if(i.attr("novalidate")===l)if(i.data("ujs:formnovalidate-button")===l){if((e=c.blankInputs(i,c.requiredInputSelector,!1))&&c.fire(i,"ajax:aborted:required",[e]))return c.stopEverything(t)}else i.data("ujs:formnovalidate-button",l);if(r){if(n=c.nonBlankInputs(i,c.fileInputSelector)){setTimeout(function(){c.disableFormElements(i)},13);var o=c.fire(i,"ajax:aborted:file",[n]);return o||setTimeout(function(){c.enableFormElements(i)},13),o}return c.handleRemote(i),!1}setTimeout(function(){c.disableFormElements(i)},13)}),t.on("click.rails",c.formInputClickSelector,function(t){var e=u(this);if(!c.allowAction(e))return c.stopEverything(t);var n=e.attr("name"),i=n?{name:n,value:e.val()}:null,r=e.closest("form");0===r.length&&(r=u("#"+e.attr("form"))),r.data("ujs:submit-button",i),r.data("ujs:formnovalidate-button",e.attr("formnovalidate")),r.data("ujs:submit-button-formaction",e.attr("formaction")),r.data("ujs:submit-button-formmethod",e.attr("formmethod"))}),t.on("ajax:send.rails",c.formSubmitSelector,function(t){this===t.target&&c.disableFormElements(u(this))}),t.on("ajax:complete.rails",c.formSubmitSelector,function(t){this===t.target&&c.enableFormElements(u(this))}),u(function(){c.refreshCSRFTokens()}))}(jQuery),function(){this.Turbolinks={supported:null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener,visit:function(t,e){return Turbolinks.controller.visit(t,e)},clearCache:function(){return Turbolinks.controller.clearCache()},setProgressBarDelay:function(t){return Turbolinks.controller.setProgressBarDelay(t)}}}.call(this),function(){var n,i,l,t,e,r,o,a,s,c=[].slice;Turbolinks.copyObject=function(t){var e,n,i;for(e in n={},t)i=t[e],n[e]=i;return n},Turbolinks.closest=function(t,e){return n.call(t,e)},n=null!=(s=document.documentElement.closest)?s:function(t){var e;for(e=this;e;){if(e.nodeType===Node.ELEMENT_NODE&&i.call(e,t))return e;e=e.parentNode}},Turbolinks.defer=function(t){return setTimeout(t,1)},Turbolinks.throttle=function(n){var i;return i=null,function(){var t,e;return t=1<=arguments.length?c.call(arguments,0):[],null!=i?i:i=requestAnimationFrame((e=this,function(){return i=null,n.apply(e,t)}))}},Turbolinks.dispatch=function(t,e){var n,i,r,o,a,s;return s=(a=null!=e?e:{}).target,n=a.cancelable,i=a.data,(r=document.createEvent("Events")).initEvent(t,!0,!0===n),r.data=null!=i?i:{},r.cancelable&&!l&&(o=r.preventDefault,r.preventDefault=function(){return this.defaultPrevented||Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),o.call(this)}),(null!=s?s:document).dispatchEvent(r),r},(a=document.createEvent("Events")).initEvent("test",!0,!0),a.preventDefault(),l=a.defaultPrevented,Turbolinks.match=function(t,e){return i.call(t,e)},i=null!=(e=null!=(r=null!=(o=(t=document.documentElement).matchesSelector)?o:t.webkitMatchesSelector)?r:t.msMatchesSelector)?e:t.mozMatchesSelector,Turbolinks.uuid=function(){var t,e,n;for(n="",t=e=1;e<=36;t=++e)n+=9===t||14===t||19===t||24===t?"-":15===t?"4":20===t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return n}}.call(this),function(){Turbolinks.Location=function(){function t(t){var e,n;null==t&&(t=""),(n=document.createElement("a")).href=t.toString(),this.absoluteURL=n.href,(e=n.hash.length
)<2?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-e),this.anchor=n.hash.slice(1))}var e,n,i,r;return t.wrap=function(t){return t instanceof this?t:new this(t)},t.prototype.getOrigin=function(){return this.absoluteURL.split("/",3).join("/")},t.prototype.getPath=function(){var t,e;return null!=(t=null!=(e=this.requestURL.match(/\/\/[^\/]*(\/[^?;]*)/))?e[1]:void 0)?t:"/"},t.prototype.getPathComponents=function(){return this.getPath().split("/").slice(1)},t.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},t.prototype.getExtension=function(){var t,e;return null!=(t=null!=(e=this.getLastPathComponent().match(/\.[^.]*$/))?e[0]:void 0)?t:""},t.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)},t.prototype.isPrefixedBy=function(t){var e;return e=n(t),this.isEqualTo(t)||r(this.absoluteURL,e)},t.prototype.isEqualTo=function(t){return this.absoluteURL===(null!=t?t.absoluteURL:void 0)},t.prototype.toCacheKey=function(){return this.requestURL},t.prototype.toJSON=function(){return this.absoluteURL},t.prototype.toString=function(){return this.absoluteURL},t.prototype.valueOf=function(){return this.absoluteURL},n=function(t){return e(t.getOrigin()+t.getPath())},e=function(t){return i(t,"/")?t:t+"/"},r=function(t,e){return t.slice(0,e.length)===e},i=function(t,e){return t.slice(-e.length)===e},t}()}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.HttpRequest=function(){function t(t,e,n){this.delegate=t,this.requestCanceled=i(this.requestCanceled,this),this.requestTimedOut=i(this.requestTimedOut,this),this.requestFailed=i(this.requestFailed,this),this.requestLoaded=i(this.requestLoaded,this),this.requestProgressed=i(this.requestProgressed,this),this.url=Turbolinks.Location.wrap(e).requestURL,this.referrer=Turbolinks.Location.wrap(n).absoluteURL,this.createXHR()}return t.NETWORK_FAILURE=0,t.TIMEOUT_FAILURE=-1,t.timeout=60,t.prototype.send=function(){var t;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,"function"==typeof(t=this.delegate).requestStarted?t.requestStarted():void 0):void 0},t.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},t.prototype.requestProgressed=function(t){return t.lengthComputable?this.setProgress(t.loaded/t.total):void 0},t.prototype.requestLoaded=function(){return this.endRequest((e=this,function(){var t;return 200<=(t=e.xhr.status)&&t<300?e.delegate.requestCompletedWithResponse(e.xhr.responseText,e.xhr.getResponseHeader("Turbolinks-Location")):(e.failed=!0,e.delegate.requestFailedWithStatusCode(e.xhr.status,e.xhr.responseText))}));var e},t.prototype.requestFailed=function(){return this.endRequest((t=this,function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.NETWORK_FAILURE)}));var t},t.prototype.requestTimedOut=function(){return this.endRequest((t=this,function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.TIMEOUT_FAILURE)}));var t},t.prototype.requestCanceled=function(){return this.endRequest()},t.prototype.notifyApplicationBeforeRequestStart=function(){return Turbolinks.dispatch("turbolinks:request-start",{data:{url:this.url,xhr:this.xhr}})},t.prototype.notifyApplicationAfterRequestEnd=function(){return Turbolinks.dispatch("turbolinks:request-end",{data:{url:this.url,xhr:this.xhr}})},t.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open("GET",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader("Accept","text/html, application/xhtml+xml"),this.xhr.setRequestHeader("Turbolinks-Referrer",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},t.prototype.endRequest=function(t){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=t&&t.call(this),this.destroy()):void 0},t.prototype.setProgress=function(t){var e;return this.progress=t,"function"==typeof(e=this.delegate).requestProgressed?e.requestProgressed(this.progress):void 0},t.prototype.destroy=function(){var t;return this.setProgress(1),"function"==typeof(t=this.delegate).requestFinished&&t.requestFinished(),this.delegate=null,this.xhr=null},t}()}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.ProgressBar=function(){function t(){this.trickle=n(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var e;return e=300,t.defaultCSS=".turbolinks-progress-bar {\n  position: fixed;\n  display: block;\n  top: 0;\n  left: 0;\n  height: 3px;\n  background: #0076ff;\n  z-index: 9999;\n  transition: width "+e+"ms ease-out, opacity "+e/2+"ms "+e/2+"ms ease-in;\n  transform: translate3d(0, 0, 0);\n}",t.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},t.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement((t=this,function(){return t.uninstallProgressElement(),t.stopTrickling(),t.visible=!1,t.hiding=!1}))):void 0;var t},t.prototype.setValue=function(t){return this.value=t,this.refresh()},t.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},t.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},t.prototype.fadeProgressElement=function(t){return this.progressElement.style.opacity=0,setTimeout(t,1.5*e)},t.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},t.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,e)},t.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},t.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},t.prototype.refresh=function(){return requestAnimationFrame((t=this,function(){return t.progressElement.style.width=10+90*t.value+"%"}));var t},t.prototype.createStylesheetElement=function(){var t;return(t=document.createElement("style")).type="text/css",t.textContent=this.constructor.defaultCSS,t},t.prototype.createProgressElement=function(){var t;return(t=document.createElement("div")).className="turbolinks-progress-bar",t},t}()}.call(this),function(){var r=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.BrowserAdapter=function(){function t(t){this.controller=t,this.showProgressBar=r(this.showProgressBar,this),this.progressBar=new Turbolinks.ProgressBar}var n,i,e;return e=Turbolinks.HttpRequest,n=e.NETWORK_FAILURE,i=e.TIMEOUT_FAILURE,t.prototype.visitProposedToLocationWithAction=function(t,e){return this.controller.startVisitToLocationWithAction(t,e)},t.prototype.visitStarted=function(t){return t.issueRequest(),t.changeHistory(),t.loadCachedSnapshot()},t.prototype.visitRequestStarted=function(t){return this.progressBar.setValue(0),t.hasCachedSnapshot()||"restore"!==t.action?this.showProgressBarAfterDelay():this.showProgressBar()},t.prototype.visitRequestProgressed=function(t){return this.progressBar.setValue(t.progress)},t.prototype.visitRequestCompleted=function(t){return t.loadResponse()},t.prototype.visitRequestFailedWithStatusCode=function(t,e){switch(e){case n:case i:return this.reload();default:return t.loadResponse()}},t.prototype.visitRequestFinished=function(){return this.hideProgressBar()},t.prototype.visitCompleted=function(t){return t.followRedirect()},t.prototype.pageInvalidated=function(){return this.reload()},t.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,this.controller.progressBarDelay)},t.prototype.showProgressBar=function(){return this.progressBar.show()},t.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},t.prototype.reload=function(){return window.location.reload()},t}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.History=function(){function t(t){this.delegate=t,this.onPageLoad=e(this.onPageLoad,this),this.onPopState=e(this.onPopState,this)}return t.prototype.start=function(){return this.started?void 0:(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0)},t.prototype.stop=function(){return this.started?(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1):void 0},t.prototype.push=function(t,e){return t=Turbolinks.Location.wrap(t),this.update("push",t,e)},t.prototype.replace=function(t,e){return t=Turbolinks.Location.wrap(t),this.update("replace",t,e)},t.prototype.onPopState=function(t){var e,n,i,r;return this.shouldHandlePopState()&&(r=null!=(n=t.state)?n.turbolinks:void 0)?(e=Turbolinks.Location.wrap(window.location),i=r.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(e,i)):void 0},t.prototype.onPageLoad=function(){return Turbolinks.defer((t=this,function(){return t.pageLoaded=!0}));var t},t.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},t.prototype.pageIsLoaded=function(){return this.pageLoaded||"complete"===document.readyState},t.prototype.update=function(t,e,n){var i;return i={turbolinks:{restorationIdentifier:n}},history[t+"State"](i,null,e)},t}()}.call(this),function(){Turbolinks.Snapshot=function(){function t(t){var e,n;n=t.head,e=t.body,this.head=null!=n?n:document.createElement("head"),this.body=null!=e?e:document.createElement("body")}return t.wrap=function(t){return t instanceof this?t:this.fromHTML(t)},t.fromHTML=function(t){var e;return(e=document.createElement("html")).innerHTML=t,this.fromElement(e)},t.fromElement=function(t){return new this({head:t.querySelector("head"),body:t.querySelector("body")})},t.prototype.clone=function(){return new t({head:this.head.cloneNode(!0),body:this.body.cloneNode(!0)})},t.prototype.getRootLocation=function(){var t,e;return e=null!=(t=this.getSetting("root"))?t:"/",new Turbolinks.Location(e)},t.prototype.getCacheControlValue=function(){return this.getSetting("cache-control")},t.prototype.getElementForAnchor=function(t){try{return this.body.querySelector("[id='"+t+"'], a[name='"+t+"']")}catch(e){}},t.prototype.hasAnchor=function(t){return null!=this.getElementForAnchor(t)},t.prototype.isPreviewable=function(){return"no-preview"!==this.getCacheControlValue()},t.prototype.isCacheable=function(){return"no-cache"!==this.getCacheControlValue()},t.prototype.isVisitable=function(){return"reload"!==this.getSetting("visit-control")},t.prototype.getSetting=function(t){var e,n;return null!=(e=(n=this.head.querySelectorAll("meta[name='turbolinks-"+t+"']"))[n.length-1])?e.getAttribute("content"):void 0},t}()}.call(this),function(){var o=[].slice;Turbolinks.Renderer=function(){function t(){}var n;return t.render=function(t,e){var n,i,r;return i=t,n=e,(r=function(t,e,n){n.prototype=t.prototype;var i=new n,r=t.apply(i,e);return Object(r)===r?r:i}(this,3<=arguments.length?o.call(arguments,2):[],function(){})).delegate=i,r.render(n),r},t.prototype.renderView=function(t){return this.delegate.viewWillRender(this.newBody),t(),this.delegate.viewRendered(this.newBody)},t.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},t.prototype.createScriptElement=function(t){var e;return"false"===t.getAttribute("data-turbolinks-eval")?t:((e=document.createElement("script")).textContent=t.textContent,e.async=!1,n(e,t),e)},n=function(t,e){var n,i,r,o,a,s,l;for(s=[],n=0,i=(o=e.attributes).length;n<i;n++)r=(a=o[n]).name,l=a.value,s.push(t.setAttribute(r,l));return s},t}()}.call(this),function(){Turbolinks.HeadDetails=function(){function t(t){var e,n,i,r,o,a;for(this.element=t,this.elements={},i=0,o=(a=this.element.childNodes).length;i<o;i++)(n=a[i]).nodeType===Node.ELEMENT_NODE&&(r=n.outerHTML,(null!=(e=this.elements)[r]?e[r]:e[r]={type:l(n),tracked:s(n),elements:[]}).elements.push(n))}var e,n,s,l;return t.prototype.hasElementWithKey=function(t){return t in this.elements},t.prototype.getTrackedElementSignature=function(){var n;return function(){var t,e;for(n in e=[],t=this.elements)t[n].tracked&&e.push(n);return e}.call(this).join("")},t.prototype.getScriptElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails("script",t)},t.prototype.getStylesheetElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails("stylesheet",t)},t.prototype.getElementsMatchingTypeNotInDetails=function(t,e){var n,i,r,o,a,s;for(i in a=[],r=this.elements)s=(o=r[i]).type,n=o.elements,s!==t||e.hasElementWithKey(i)||a.push(n[0]);return a},t.prototype.getProvisionalElements=function(){var t,e,n,i,r,o,a;for(e in n=[],i=this.elements)a=(r=i[e]).type,o=r.tracked,t=r.elements,null!=a||o?1<t.length&&n.push.apply(n,t.slice(1)):n.push.apply(n,t);return n},l=function(t){return e(t)?"script":n(t)?"stylesheet":void 0},s=function(t){return"reload"===t.getAttribute("data-turbolinks-track")},e=function(t){return"script"===t.tagName.toLowerCase()},n=function(t){var e;return"style"===(e=t.tagName.toLowerCase())||"link"===e&&"stylesheet"===t.getAttribute("rel")},t}()}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;Turbolinks.SnapshotRenderer=function(t){function e(t,e,n){this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=n,this.currentHeadDetails=new Turbolinks.HeadDetails(this.currentSnapshot.head),this.newHeadDetails=new Turbolinks.HeadDetails(this.newSnapshot.head),this.newBody=this.newSnapshot.body}return n(e,t),e.prototype.render=function(t){return this.shouldRender()?(this.mergeHead(),this.renderView((e=this,function(){return e.replaceBody(),e.isPreview||e.focusFirstAutofocusableElement(),t()}))):this.invalidateView();var e},e.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},e.prototype.replaceBody=function(){return this.activateBodyScriptElements(),this.importBodyPermanentElements(),this.assignNewBody()},e.prototype.shouldRender=function(){return this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()},e.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},e.prototype.copyNewHeadStylesheetElements=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getNewHeadStylesheetElements()).length;e<n;e++)t=i[e],r.push(document.head.appendChild(t));return r},e.prototype.copyNewHeadScriptElements=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getNewHeadScriptElements()).length;e<n;e++)t=i[e],r.push(document.head.appendChild(this.createScriptElement(t)));return r},e.prototype.removeCurrentHeadProvisionalElements=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getCurrentHeadProvisionalElements()).length;e<n;e++)t=i[e],r.push(document.head.removeChild(t));return r},e.prototype.copyNewHeadProvisionalElements=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getNewHeadProvisionalElements()).length;e<n;e++)t=i[e],r.push(document.head.appendChild(t));return r},e.prototype.importBodyPermanentElements=function(){var t,e,n,i,r,o;for(o=[],e=0,n=(i=this.getNewBodyPermanentElements()).length;e<n;e++)r=i[e],(t=this.findCurrentBodyPermanentElement(r))?o.push(r.parentNode.replaceChild(t,r)):o.push(void 0);return o},e.prototype.activateBodyScriptElements=function(){var t,e,n,i,r,o;for(o=[],e=0,n=(i=this.getNewBodyScriptElements()).length;e<n;e++)r=i[e],t=this.createScriptElement(r),o.push(r.parentNode.replaceChild(t,r));return o},e.prototype.assignNewBody=function(){return document.body=this.newBody},e.prototype.focusFirstAutofocusableElement=function(){var t;return null!=(t=this.findFirstAutofocusableElement())?t.focus():void 0},e.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},e.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},e.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},e.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},e.prototype.getNewBodyPermanentElements=function(){return this.newBody.querySelectorAll("[id][data-turbolinks-permanent]")},e.prototype.findCurrentBodyPermanentElement=function(t){return document.body.querySelector("#"+t.id+"[data-turbolinks-permanent]")},e.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll("script")},e.prototype.findFirstAutofocusableElement=function(){return document.body.querySelector("[autofocus]")},e}(Turbolinks.Renderer)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;Turbolinks.ErrorRenderer=function(t){function e(t){this.html=t}return n(e,t),e.prototype.render=function(t){return this.renderView((e=this,function(){return e.replaceDocumentHTML(),e.activateBodyScriptElements(),t()}));var e},e.prototype.replaceDocumentHTML=function(){return document.documentElement.innerHTML=this.html},e.prototype.activateBodyScriptElements=function(){var t,e,n,i,r,o;for(o=[],e=0,n=(i=this.getScriptElements()).length;e<n;e++)r=i[e],t=this.createScriptElement(r),o.push(r.parentNode.replaceChild(t,r));return o},e.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll("script")},e}(Turbolinks.Renderer)}.call(this),function(){Turbolinks.View=function(){function t(t){this.delegate=t,this.element=document.documentElement}return t.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},t.prototype.getElementForAnchor=function(t){return this.getSnapshot().getElementForAnchor(t)},t.prototype.getSnapshot=function(){return Turbolinks.Snapshot.fromElement(this.element)},t.prototype.render=function(t,e){var n,i,r;return r=t.snapshot,n=t.error,i=t.isPreview,this.markAsPreview(i),null!=r?this.renderSnapshot(r,i,e):this.renderError(n,e)},t.prototype.markAsPreview=function(t){return t?this.element.setAttribute("data-turbolinks-preview",""):this.element.removeAttribute("data-turbolinks-preview")},t.prototype.renderSnapshot=function(t,e,n){return Turbolinks.SnapshotRenderer.render(this.delegate,n,this.getSnapshot(),Turbolinks.Snapshot.wrap(t),e)},t.prototype.renderError=function(t,e){return Turbolinks.ErrorRenderer.render(this.delegate,e,t)},t}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.ScrollManager=function(){function t(t){this.delegate=t,this.onScroll=e(this.onScroll,this),this.onScroll=Turbolinks.throttle(this.onScroll)}return t.prototype.start=function(){return this.started?void 0:(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)},t.prototype.stop=function(){return this.started?(removeEventListener("scroll",this.onScroll,!1),this.started=!1):void 0},t.prototype.scrollToElement=function(t){return t.scrollIntoView()},t.prototype.scrollToPosition=function(t){var e,n;return e=t.x,n=t.y,window.scrollTo(e,n)},t.prototype.onScroll=function(){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},t.prototype.updatePosition=function(t){var e;return this.position=t,null!=(e=this.delegate)?e.scrollPositionChanged(this.position):void 0},t}()}.call(this),function(){Turbolinks.SnapshotCache=function(){function t(t){this.size=t,this.keys=[],this.snapshots={}}var i;return t.prototype.has=function(t){return i(t)in this.snapshots},t.prototype.get=function(t){var e;if(this.has(t))return e=this.read(t),this.touch(t),e},t.prototype.put=function(t,e){return this.write(t,e),this.touch(t),e},t.prototype.read=function(t){var e;return e=i(t),this.snapshots[e]},t.prototype.write=function(t,e){var n;return n=i(t),this.snapshots[n]=e},t.prototype.touch=function(t){var e,n;return n=i(t),-1<(e=this.keys.indexOf(n))&&this.keys.splice(e,1),this.keys.unshift(n),this.trim()},t.prototype.trim=function(){var t,e,n,i,r;for(r=[],t=0,n=(i=this.keys.splice(this.size)).length;t<n;t++)e=i[t],r.push(delete this.snapshots[e]);return r},i=function(t){return Turbolinks.Location.wrap(t).toCacheKey()},t}()}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.Visit=function(){function t(t,e,n){this.controller=t,this.action=n,this.performScroll=i(this.performScroll,this),this.identifier=Turbolinks.uuid(),this.location=Turbolinks.Location.wrap(e),this.adapter=this.controller.adapter,this.state="initialized",this.timingMetrics={}}var n;return t.prototype.start=function(){return"initialized"===this.state?(this.recordTimingMetric("visitStart"),this.state="started",this.adapter.visitStarted(this)):void 0},t.prototype.cancel=function(){var t;return"started"===this.state?(null!=(t=this.request)&&t.cancel(),this.cancelRender(),this.state="canceled"):void 0},t.prototype.complete=function(){var t;return"started"===this.state?(this.recordTimingMetric("visitEnd"),this.state="completed","function"==typeof(t=this.adapter).visitCompleted&&t.visitCompleted(this),this.controller.visitCompleted(this)):void 0},t.prototype.fail=function(){var t;return"started"===this.state?(this.state="failed","function"==typeof(t=this.adapter).visitFailed?t.visitFailed(this):void 0):void 0},t.prototype.changeHistory=function(){var t,e;return this.historyChanged?void 0:(t=this.location.isEqualTo(this.referrer)?"replace":this.action,e=n(t),this.controller[e](this.location,this.restorationIdentifier),this.historyChanged=!0)},t.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new Turbolinks.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},t.prototype.getCachedSnapshot=function(){var t;return!(t=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!t.hasAnchor(this.location.anchor)||"restore"!==this.action&&!t.isPreviewable()?void 0:t},t.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},t.prototype.loadCachedSnapshot=function(){var e,n;return(n=this.getCachedSnapshot())?(e=this.shouldIssueRequest(),this.render(function(){var t;return this.cacheSnapshot(),this.controller.render({snapshot:n,isPreview:e},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),e?void 0:this.complete()})):void 0},t.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var t,e;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),"function"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.complete())}):void 0},t.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},t.prototype.requestStarted=function(){var t;return this.recordTimingMetric("requestStart"),"function"==typeof(t=this.adapter).visitRequestStarted?t.visitRequestStarted(this):void 0},t.prototype.requestProgressed=function(t){var e;return this.progress=t,"function"==typeof(e=this.adapter).visitRequestProgressed?e.visitRequestProgressed(this):void 0},t.prototype.requestCompletedWithResponse=function(t,e){return this.response=t,null!=e&&(this.redirectedToLocation=Turbolinks.Location.wrap(e)),this.adapter.visitRequestCompleted(this)},t.prototype.requestFailedWithStatusCode=function(t,e){return this.response=e,this.adapter.visitRequestFailedWithStatusCode(this,t)},t.prototype.requestFinished=function(){var t;return this.recordTimingMetric("requestEnd"),"function"==typeof(t=this.adapter).visitRequestFinished?t.visitRequestFinished(this):void 0},t.prototype.performScroll=function(){return this.scrolled?void 0:("restore"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},t.prototype.scrollToRestoredPosition=function(){var t,e;return null!=(t=null!=(e=this.restorationData)?e.scrollPosition:void 0)?(this.controller.scrollToPosition(t),!0):void 0},t.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},t.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},t.prototype.recordTimingMetric=function(t){var e;return null!=(e=this.timingMetrics)[t]?e[t]:e[t]=(new Date).getTime()},t.prototype.getTimingMetrics=function(){return Turbolinks.copyObject(this.timingMetrics)},n=function(t){switch(t){case"replace":return"replaceHistoryWithLocationAndRestorationIdentifier";case"advance":case"restore":return"pushHistoryWithLocationAndRestorationIdentifier"}},t.prototype.shouldIssueRequest=function(){return"restore"!==this.action||!this.hasCachedSnapshot()},t.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},t.prototype.render=function(t){return this.cancelRender(),this.frame=requestAnimationFrame((e=this,function(){return e.frame=null,t.call(e)}));var e},t.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},t}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};Turbolinks.Controller=function(){function t(){this.clickBubbled=e(this.clickBubbled,this),this.clickCaptured=e(this.clickCaptured,this),this.pageLoaded=e(this.pageLoaded,this),this.history=new Turbolinks.History(this),this.view=new Turbolinks.View(this),this.scrollManager=new Turbolinks.ScrollManager(this),this.restorationData={},this.clearCache(),this.setProgressBarDelay(500)}return t.prototype.start=function(){return Turbolinks.supported&&!this.started?(addEventListener("click",this.clickCaptured,!0),addEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.stop=function(){return this.started?(removeEventListener("click",this.clickCaptured,!0),removeEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},t.prototype.clearCache=function(){return this.cache=new Turbolinks.SnapshotCache(10)},t.prototype.visit=function(t,e){var n,i;return null==e&&(e={}),t=Turbolinks.Location.wrap(t),this.applicationAllowsVisitingLocation(t)?this.locationIsVisitable(t)?(n=null!=(i=e.action)?i:"advance",this.adapter.visitProposedToLocationWithAction(t,n)):window.location=t:void 0},t.prototype.startVisitToLocationWithAction=function(t,e,n){var i;return Turbolinks.supported?(i=this.getRestorationDataForIdentifier(n),this.startVisit(t,e,{restorationData:i})):window.location=t},t.prototype.setProgressBarDelay=function(t){return this.progressBarDelay=t},t.prototype.startHistory=function(){return this.location=Turbolinks.Location.wrap(window.location),this.restorationIdentifier=Turbolinks.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},t.prototype.stopHistory=function(){return this.history.stop()},t.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(t,e){return this.restorationIdentifier=e,this.location=Turbolinks.Location.wrap(t),this.history.push(this.location,this.restorationIdentifier)},t.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(t,e){return this.restorationIdentifier=e,this.location=Turbolinks.Location.wrap(t),this.history.replace(this.location,this.restorationIdentifier)},t.prototype.historyPoppedToLocationWithRestorationIdentifier=function(t,e){var n;return this.restorationIdentifier=e,this.enabled?(n=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(t,"restore",{restorationIdentifier:this.restorationIdentifier,restorationData:n,historyChanged:!0}),this.location=Turbolinks.Location.wrap(t)):this.adapter.pageInvalidated()},t.prototype.getCachedSnapshotForLocation=function(t){var e;return(e=this.cache.get(t))?e.clone():void 0},t.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable()},t.prototype.cacheSnapshot=function(){var t;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),t=this.view.getSnapshot(),this.cache.put(this.lastRenderedLocation,t.clone())):void 0},t.prototype.scrollToAnchor=function(t){var e;return(e=this.view.getElementForAnchor(t))?this.scrollToElement(e):this.scrollToPosition({x:0,y:0})},t.prototype.scrollToElement=function(t){return this.scrollManager.scrollToElement(t)},t.prototype.scrollToPosition=function(t){return this.scrollManager.scrollToPosition(t)},t.prototype.scrollPositionChanged=function(t){return this.getCurrentRestorationData().scrollPosition=t},t.prototype.render=function(t,e){return this.view.render(t,e)},t.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},t.prototype.viewWillRender=function(t){return this.notifyApplicationBeforeRender(t)},t.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},t.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},t.prototype.clickCaptured=function(){return removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},t.prototype.clickBubbled=function(t){var e,n,i;return this.enabled&&this.clickEventIsSignificant(t)&&(n=this.getVisitableLinkForNode(t.target))&&(i=this.getVisitableLocationForLink(n))&&this.applicationAllowsFollowingLinkToLocation(n,i)?(t.preventDefault(),e=this.getActionForLink(n),this.visit(i,{action:e})):void 0},t.prototype.applicationAllowsFollowingLinkToLocation=function(t,e){return!this.notifyApplicationAfterClickingLinkToLocation(t,e).defaultPrevented},t.prototype.applicationAllowsVisitingLocation=function(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented},t.prototype.notifyApplicationAfterClickingLinkToLocation=function(t,e){return Turbolinks.dispatch("turbolinks:click",{target:t,data:{url:e.absoluteURL},cancelable:!0})},t.prototype.notifyApplicationBeforeVisitingLocation=function(t){return Turbolinks.dispatch("turbolinks:before-visit",{data:{url:t.absoluteURL},cancelable:!0})},t.prototype.notifyApplicationAfterVisitingLocation=function(t){return Turbolinks.dispatch("turbolinks:visit",{data:{url:t.absoluteURL}})},t.prototype.notifyApplicationBeforeCachingSnapshot=function(){return Turbolinks.dispatch("turbolinks:before-cache")},t.prototype.notifyApplicationBeforeRender=function(t){return Turbolinks.dispatch("turbolinks:before-render",{data:{newBody:t}})},t.prototype.notifyApplicationAfterRender=function(){return Turbolinks.dispatch("turbolinks:render")},t.prototype.notifyApplicationAfterPageLoad=function(t){return null==t&&(t={}),Turbolinks.dispatch("turbolinks:load",{data:{url:this.location.absoluteURL,timing:t}})},t.prototype.startVisit=function(t,e,n){var i;return null!=(i=this.currentVisit)&&i.cancel(),this.currentVisit=this.createVisit(t,e,n),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(t)},t.prototype.createVisit=function(t,e,n){var i,r,o,a,s;return a=(r=null!=n?n:{}).restorationIdentifier,o=r.restorationData,i=r.historyChanged,(s=new Turbolinks.Visit(this,t,e)).restorationIdentifier=null!=a?a:Turbolinks.uuid(),s.restorationData=Turbolinks.copyObject(o),s.historyChanged=i,s.referrer=this.location,s},
t.prototype.visitCompleted=function(t){return this.notifyApplicationAfterPageLoad(t.getTimingMetrics())},t.prototype.clickEventIsSignificant=function(t){return!(t.defaultPrevented||t.target.isContentEditable||1<t.which||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)},t.prototype.getVisitableLinkForNode=function(t){return this.nodeIsVisitable(t)?Turbolinks.closest(t,"a[href]:not([target]):not([download])"):void 0},t.prototype.getVisitableLocationForLink=function(t){var e;return e=new Turbolinks.Location(t.getAttribute("href")),this.locationIsVisitable(e)?e:void 0},t.prototype.getActionForLink=function(t){var e;return null!=(e=t.getAttribute("data-turbolinks-action"))?e:"advance"},t.prototype.nodeIsVisitable=function(t){var e;return!(e=Turbolinks.closest(t,"[data-turbolinks]"))||"false"!==e.getAttribute("data-turbolinks")},t.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&t.isHTML()},t.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},t.prototype.getRestorationDataForIdentifier=function(t){var e;return null!=(e=this.restorationData)[t]?e[t]:e[t]={}},t}()}.call(this),function(){!function(){var t,e;if((t=e=document.currentScript)&&!e.hasAttribute("data-turbolinks-suppress-warning"))for(;t=t.parentNode;)if(t===document.body)return console.warn("You are loading Turbolinks from a <script> element inside the <body> element. This is probably not what you meant to do!\n\nLoad your application\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\nFor more information, see: https://github.com/turbolinks/turbolinks#working-with-script-elements\n\n\u2014\u2014\nSuppress this warning by adding a `data-turbolinks-suppress-warning` attribute to: %s",e.outerHTML)}()}.call(this),function(){var t,e,n;Turbolinks.start=function(){return e()?(null==Turbolinks.controller&&(Turbolinks.controller=t()),Turbolinks.controller.start()):void 0},e=function(){return null==window.Turbolinks&&(window.Turbolinks=Turbolinks),n()},t=function(){var t;return(t=new Turbolinks.Controller).adapter=new Turbolinks.BrowserAdapter(t),t},(n=function(){return window.Turbolinks===Turbolinks})()&&Turbolinks.start()}.call(this),function(){}.call(this),function(){null==window.Set&&(window.Set=function(){function t(){this.clear()}return t.prototype.clear=function(){return this.values=[]},t.prototype.has=function(t){return-1!==this.values.indexOf(t)},t.prototype.add=function(t){return this.has(t)||this.values.push(t),this},t.prototype["delete"]=function(t){var e;return-1!==(e=this.values.indexOf(t))&&(this.values.splice(e,1),!0)},t.prototype.forEach=function(){var t;return(t=this.values).forEach.apply(t,arguments)},t}())}.call(this),function(t){function i(){}function r(t,e){return function(){t.apply(e,arguments)}}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(t,this)}function a(n,i){for(;3===n._state;)n=n._value;return 0===n._state?void n._deferreds.push(i):(n._handled=!0,void h(function(){var t=1===n._state?i.onFulfilled:i.onRejected;if(null!==t){var e;try{e=t(n._value)}catch(a){return void l(i.promise,a)}s(i.promise,e)}else(1===n._state?s:l)(i.promise,n._value)}))}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void d(r(n,e),t)}t._state=1,t._value=e,c(t)}catch(s){l(t,s)}}function l(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&setTimeout(function(){t._handled||p(t._value)},1);for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function u(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,l(e,t))})}catch(o){if(n)return;n=!0,l(e,o)}}var e=setTimeout,h="function"==typeof setImmediate&&setImmediate||function(t){e(t,1)},p=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};o.prototype["catch"]=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new o(i);return a(this,new u(t,e,n)),n},o.all=function(t){var s=Array.prototype.slice.call(t);return new o(function(i,r){function o(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){o(e,t)},r)}s[e]=t,0==--a&&i(s)}catch(u){r(u)}}if(0===s.length)return i([]);for(var a=s.length,t=0;t<s.length;t++)o(t,s[t])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(r){return new o(function(t,e){for(var n=0,i=r.length;n<i;n++)r[n].then(t,e)})},o._setImmediateFn=function(t){h=t},o._setUnhandledRejectionFn=function(t){p=t},"undefined"!=typeof module&&module.exports?module.exports=o:t.Promise||(t.Promise=o)}(this),"undefined"==typeof WeakMap&&function(){var i=Object.defineProperty,t=Date.now()%1e9,e=function(){this.name="__st"+(1e9*Math.random()>>>0)+t+++"__"};e.prototype={set:function(t,e){var n=t[this.name];return n&&n[0]===t?n[1]=e:i(t,this.name,{value:[t,e],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},"delete":function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=void 0,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=e}(),function(t){function r(t){T.push(t),x||(x=!0,g(e))}function o(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function e(){x=!1;var t=T;T=[],t.sort(function(t,e){return t.uid_-e.uid_});var n=!1;t.forEach(function(t){var e=t.takeRecords();i(t),e.length&&(t.callback_(e,t),n=!0)}),n&&e()}function i(n){n.nodes_.forEach(function(t){var e=m.get(t);e&&e.forEach(function(t){t.observer===n&&t.removeTransientObservers()})})}function d(t,e){for(var n=t;n;n=n.parentNode){var i=m.get(n);if(i)for(var r=0;r<i.length;r++){var o=i[r],a=o.options;if(n===t||a.subtree){var s=e(a);s&&o.enqueue(s)}}}}function n(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++S}function a(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function s(t){var e=new a(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}function h(t,e){return b=new a(t,e)}function p(t){return w||((w=s(b)).oldValue=t,w)}function f(){b=w=void 0}function l(t){return t===w||t===b}function c(t,e){return t===e?t:w&&l(t)?w:null}function u(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var g,m=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))g=setTimeout;else if(window.setImmediate)g=window.setImmediate;else{var v=[],y=String(Math.random());window.addEventListener("message",function(t){if(t.data===y){var e=v;v=[],e.forEach(function(t){t()})}}),g=function(t){v.push(t),window.postMessage(y,"*")}}var b,w,x=!1,T=[],S=0;n.prototype={observe:function(t,e){if(t=o(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=m.get(t);n||m.set(t,n=[]);for(var i,r=0;r<n.length;r++)if(n[r].observer===this){(i=n[r]).removeListeners(),i.options=e;break}i||(i=new u(this,t,e),n.push(i),this.nodes_.push(t)),i.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=m.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}},u.prototype={enqueue:function(t){var e=this.observer.records_,n=e.length;if(0<e.length){var i=c(e[n-1],t);if(i)return void(e[n-1]=i)}else r(this.observer);e[n]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=m.get(t);e||m.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=m.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,n=t.relatedNode.namespaceURI,i=t.target;(o=new h("attributes",i)).attributeName=e,o.attributeNamespace=n;var r=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;d(i,function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(n)?void 0:t.attributeOldValue?p(r):o});break;case"DOMCharacterDataModified":var o=h("characterData",i=t.target);r=t.prevValue;d(i,function(t){return t.characterData?t.characterDataOldValue?p(r):o:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var a,s,l=t.target;"DOMNodeInserted"===t.type?(a=[l],s=[]):(a=[],s=[l]);var c=l.previousSibling,u=l.nextSibling;(o=h("childList",t.target.parentNode)).addedNodes=a,o.removedNodes=s,o.previousSibling=c,o.nextSibling=u,d(t.relatedNode,function(t){return t.childList?o:void 0})}f()}},t.JsMutationObserver=n,t.MutationObserver||((t.MutationObserver=n)._isPolyfilled=!0)}}(self),function(){"use strict";if(!window.performance){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}var e,n;if(window.requestAnimationFrame||(window.requestAnimationFrame=(e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)?function(t){return e(function(){t(performance.now())})}:function(t){return window.setTimeout(t,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}),!((n=document.createEvent("Event")).initEvent("foo",!0,!0),n.preventDefault(),n.defaultPrevented)){var i=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(i.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var r=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||r&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,Boolean(e.bubbles),Boolean(e.cancelable),e.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||r&&"function"!=typeof window.Event){var o=window.Event;window.Event=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n},window.Event.prototype=o.prototype}}(window.WebComponents),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,n=[],i=function(t){n.push(t)},r=function(){n.forEach(function(t){t(e)})};e.addModule=i,e.initializeModules=r,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(t){function i(t,e){r(t,function(t){return!!e(t)||void n(t,e)}),n(t,e)}function r(t,e,n){var i=t.firstElementChild;if(!i)for(i=t.firstChild;i&&i.nodeType!==Node.ELEMENT_NODE;)i=i.nextSibling;for(;i;)!0!==e(i,n)&&r(i,e,n),i=i.nextElementSibling;return null}function n(t,e){for(var n=t.shadowRoot;n;)i(n,e),n=n.olderShadowRoot}function e(t,e){s(t,e,[])}function s(t,e,n){if(t=window.wrap(t),!(0<=n.indexOf(t))){n.push(t);for(var i,r=t.querySelectorAll("link[rel="+l+"]"),o=0,a=r.length;o<a&&(i=r[o]);o++)i["import"]&&s(i["import"],e,n);e(t)}}var l=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";t.forDocumentTree=e,t.forSubtree=i}),window.CustomElements.addModule(function(n){function a(t,e){return i(t,e)||r(t,e)}function i(t,e){return!!n.upgrade(t,e)||void(e&&s(t))}function r(t,e){b(t,function(t){return!!i(t,e)||void 0})}function e(t){S.push(t),T||(T=!0,setTimeout(o))}function o(){T=!1;for(var t,e=S,n=0,i=e.length;n<i&&(t=e[n]);n++)t();S=[]}function s(t){x?e(function(){l(t)}):l(t)}function l(t){t.__upgraded__&&!t.__attached&&(t.__attached=!0,t.attachedCallback&&t.attachedCallback())}function c(t){u(t),b(t,function(t){u(t)})}function u(t){x?e(function(){d(t)}):d(t)}function d(t){t.__upgraded__&&t.__attached&&(t.__attached=!1,t.detachedCallback&&t.detachedCallback())}function h(t){for(var e=t,n=window.wrap(document);e;){if(e==n)return!0;e=e.parentNode||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host}}function t(t){if(t.shadowRoot&&!t.shadowRoot.__watched){y.dom&&console.log("watching shadow-root for: ",t.localName);for(var e=t.shadowRoot;e;)g(e),e=e.olderShadowRoot}}function p(t,e){if(y.dom){var n=e[0];if(n&&"childList"===n.type&&n.addedNodes&&n.addedNodes){for(var i=n.addedNodes[0];i&&i!==document&&!i.host;)i=i.parentNode;var r=i&&(i.URL||i._URL||i.host&&i.host.localName)||"";r=r.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",e.length,r||"")}var o=h(t);e.forEach(function(t){"childList"===t.type&&(E(t.addedNodes,function(t){t.localName&&a(t,o)}),E(t.removedNodes,function(t){t.localName&&c(t)}))}),y.dom&&console.groupEnd()}function f(t){for((t=window.wrap(t))||(t=window.wrap(document));t.parentNode;)t=t.parentNode;var e=t.__observer;e&&(p(t,e.takeRecords()),o())}function g(t){if(!t.__observer){var e=new MutationObserver(p.bind(this,t));e.observe(t,{childList:!0,subtree:!0}),t.__observer=e}}function m(t){t=window.wrap(t),y.dom&&console.group("upgradeDocument: ",t.baseURI.split("/").pop()),a(t,t===window.wrap(document)),g(t),y.dom&&console.groupEnd()}function v(t){w(t,m)}var y=n.flags,b=n.forSubtree,w=n.forDocumentTree,x=window.MutationObserver._isPolyfilled&&y["throttle-attached"];n.hasPolyfillMutations=x,n.hasThrottledAttached=x;var T=!1,S=[],E=Array.prototype.forEach.call.bind(Array.prototype.forEach),A=Element.prototype.createShadowRoot;A&&(Element.prototype.createShadowRoot=function(){var t=A.call(this);return window.CustomElements.watchShadow(this),t}),n.watchShadow=t,n.upgradeDocumentTree=v,n.upgradeDocument=m,n.upgradeSubtree=r,n.upgradeAll=a,n.attached=s,n.takeRecords=f}),window.CustomElements.addModule(function(r){function t(t,e){if("template"===t.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var n=t.getAttribute("is"),i=r.getRegisteredDefinition(t.localName)||r.getRegisteredDefinition(n);if(i&&(n&&i.tag==t.localName||!n&&!i["extends"]))return o(t,i,e)}}function o(t,e,n){return s.upgrade&&console.group("upgrade:",t.localName),e.is&&t.setAttribute("is",e.is),i(t,e),t.__upgraded__=!0,a(t),n&&r.attached(t),r.upgradeSubtree(t,n),s.upgrade&&console.groupEnd(),t}function i(t,e){Object.__proto__||n(t,e.prototype,e["native"]),t.__proto__=e.prototype}function n(t,e,n){for(var i={},r=e;r!==n&&r!==HTMLElement.prototype;){for(var o,a=Object.getOwnPropertyNames(r),s=0;o=a[s];s++)i[o]||(Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o)),i[o]=1);r=Object.getPrototypeOf(r)}}function a(t){t.createdCallback&&t.createdCallback()}var s=r.flags;r.upgrade=t,r.upgradeWithDefinition=o,r.implementPrototype=i}),window.CustomElements.addModule(function(i){function t(t,e){var n=e||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(a(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(u(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return n.prototype||(n.prototype=Object.create(HTMLElement.prototype)),n.__name=t.toLowerCase(),n["extends"]&&(n["extends"]=n["extends"].toLowerCase()),n.lifecycle=n.lifecycle||{},n.ancestry=s(n["extends"]),l(n),c(n),r(n.prototype),d(n.__name,n),n.ctor=h(n),n.ctor.prototype=n.prototype,n.prototype.constructor=n.ctor,i.ready&&m(document),n.ctor}function r(t){if(!t.setAttribute._polyfilled){var n=t.setAttribute;t.setAttribute=function(t,e){o.call(this,t,e,n)};var e=t.removeAttribute;t.removeAttribute=function(t){o.call(this,t,null,e)},t.setAttribute._polyfilled=!0}}function o(t,e,n){t=t.toLowerCase();var i=this.getAttribute(t);n.apply(this,arguments);var r=this.getAttribute(t);this.attributeChangedCallback&&r!==i&&this.attributeChangedCallback(t,i,r)}function a(t){for(var e=0;e<x.length;e++)if(t===x[e])return!0}function s(t){var e=u(t);return e?s(e["extends"]).concat([e]):[]}function l(t){for(var e,n=t["extends"],i=0;e=t.ancestry[i];i++)n=e.is&&e.tag;t.tag=n||t.__name,n&&(t.is=t.__name)}function c(t){if(!Object.__proto__){var e=HTMLElement.prototype;if(t.is){var n=document.createElement(t.tag);e=Object.getPrototypeOf(n)}for(var i,r=t.prototype,o=!1;r;)r==e&&(o=!0),(i=Object.getPrototypeOf(r))&&(r.__proto__=i),r=i;o||console.warn(t.tag+" prototype not found in prototype chain for "+t.is),t["native"]=e}}function e(t){return y(E(t.tag),t)}function u(t){return t?T[t.toLowerCase()]:void 0}function d(t,e){T[t]=e}function h(t){return function(){return e(t)}}function n(t,e,n){return t===S?p(e,n):A(t,e)}function p(t,e){t&&(t=t.toLowerCase()),e&&(e=e.toLowerCase());var n,i=u(e||t);if(i){if(t==i.tag&&e==i.is)return new i.ctor;if(!e&&!i.is)return new i.ctor}return e?(n=p(t)).setAttribute("is",e):(n=E(t),0<=t.indexOf("-")&&b(n,HTMLElement)),n}function f(t,e){var n=t[e];t[e]=function(){var t=n.apply(this,arguments);return v(t),t}}var g,m=(i.isIE,i.upgradeDocumentTree),v=i.upgradeAll,y=i.upgradeWithDefinition,b=i.implementPrototype,w=i.useNative,x=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],T={},S="http://www.w3.org/1999/xhtml",E=document.createElement.bind(document),A=document.createElementNS.bind(document);g=Object.__proto__||w?function(t,e){return t instanceof e}:function(t,e){if(t instanceof e)return!0;for(var n=t;n;){if(n===e.prototype)return!0;n=n.__proto__}return!1},f(Node.prototype,"cloneNode"),f(document,"importNode"),document.registerElement=t,document.createElement=p,document.createElementNS=n,i.registry=T,i["instanceof"]=g,i.reservedTagList=x,i.getRegisteredDefinition=u,document.register=document.registerElement}),function(t){function e(){o(window.wrap(document)),window.CustomElements.ready=!0,(window.requestAnimationFrame||function(t){setTimeout(t,16)})(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=t.useNative,i=t.initializeModules;if(t.isIE,n){var r=function(){};t.watchShadow=r,t.upgrade=r,t.upgradeAll=r,t.upgradeDocumentTree=r,t.upgradeSubtree=r,t.takeRecords=r,t["instanceof"]=function(t,e){return t instanceof e}}else i();var o=t.upgradeDocumentTree,a=t.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(t){return t}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(t){t["import"]&&a(wrap(t["import"]))}),"complete"===document.readyState||t.flags.eager)e();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,e)}else e()}(window.CustomElements),function(){}.call(this),function(){var t=this;(function(){(function(){this.Trix={VERSION:"0.11.1",ZERO_WIDTH_SPACE:"\ufeff",NON_BREAKING_SPACE:"\xa0",OBJECT_REPLACEMENT_CHARACTER:"\ufffc",config:{}}}).call(this)}).call(t);var R=t.Trix;(function(){(function(){R.BasicObject=function(){function t(){}var a,s,i;return t.proxyMethod=function(t){var n,i,e,r,o;return e=s(t),n=e.name,r=e.toMethod,o=e.toProperty,i=e.optional,this.prototype[n]=function(){var t,e;return t=null!=r?i?"function"==typeof this[r]?this[r]():void 0:this[r]():null!=o?this[o]:void 0,i?null!=(e=null!=t?t[n]:void 0)?a.call(e,t,arguments):void 0:(e=t[n],a.call(e,t,arguments))}},s=function(t){var e,n;if(!(n=t.match(i)))throw new Error("can't parse @proxyMethod expression: "+t);return e={name:n[4]},null!=n[2]?e.toMethod=n[1]:e.toProperty=n[1],null!=n[3]&&(e.optional=!0),e},a=Function.prototype.apply,i=/^(.+?)(\(\))?(\?)?\.(.+?)$/,t}()}).call(this),function(){var i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Object=function(t){function e(){this.id=++n}var n;return i(e,t),n=0,e.fromJSONString=function(t){return this.fromJSON(JSON.parse(t))},e.prototype.hasSameConstructorAs=function(t){return this.constructor===(null!=t?t.constructor:void 0)},e.prototype.isEqualTo=function(t){return this===t},e.prototype.inspect=function(){var t,i,r;return t=function(){var t,e,n;for(i in n=[],e=null!=(t=this.contentsForInspection())?t:{})r=e[i],n.push(i+"="+r);return n}.call(this),"#<"+this.constructor.name+":"+this.id+(t.length?" "+t.join(", "):"")+">"},e.prototype.contentsForInspection=function(){},e.prototype.toJSONString=function(){return JSON.stringify(this)},e.prototype.toUTF16String=function(){return R.UTF16String.box(this)},e.prototype.getCacheKey=function(){return this.id.toString()},e}(R.BasicObject)}.call(this),function(){R.extend=function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this}}.call(this),function(){R.extend({defer:function(t){return setTimeout(t,1)}})}.call(this),function(){var s,a;R.extend({normalizeSpaces:function(t){return t.replace(RegExp(""+R.ZERO_WIDTH_SPACE,"g"),"").replace(RegExp(""+R.NON_BREAKING_SPACE,"g")," ")},normalizeNewlines:function(t){return t.replace(/\r\n/g,"\n")},breakableWhitespacePattern:RegExp("[^\\S"+R.NON_BREAKING_SPACE+"]"),squishBreakableWhitespace:function(t){return t.replace(RegExp(""+R.breakableWhitespacePattern.source,"g")," ").replace(/\ {2,}/g," ")},summarizeStringChange:function(t,e){var n,i,r,o;return t=R.UTF16String.box(t),(e=R.UTF16String.box(e)).length<t.length?(o=(i=a(t,e))[0],n=i[1]):(n=(r=a(e,t))[0],o=r[1]),{added:n,removed:o}}}),a=function(t,e){var n,i,r,o,a;return t.isEqualTo(e)?["",""]:(r=(o=(i=s(t,e)).utf16String.length)?(a=i.offset,n=t.codepoints.slice(0,a).concat(t.codepoints.slice(a+o)),s(e,R.UTF16String.fromCodepoints(n))):s(e,t),[i.utf16String.toString(),r.utf16String.toString()])},s=function(t,e){var n,i,r;for(n=0,i=t.length,r=e.length;n<i&&t.charAt(n).isEqualTo(e.charAt(n));)n++;for(;n+1<i&&t.charAt(i-1).isEqualTo(e.charAt(r-1));)i--,r--;return{utf16String:t.slice(n,i),offset:n}}}.call(this),function(){R.extend({copyObject:function(t){var e,n,i;for(e in null==t&&(t={}),n={},t)i=t[e],n[e]=i;return n},objectsAreEqual:function(t,e){var n;if(null==t&&(t={}),null==e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(n in t)if(t[n]!==e[n])return!1;return!0}})}.call(this),function(){var r=[].slice;R.extend({arraysAreEqual:function(t,e){var n,i,r;if(null==t&&(t=[]),null==e&&(e=[]),t.length!==e.length)return!1;for(i=n=0,r=t.length;n<r;i=++n)if(t[i]!==e[i])return!1;return!0},arrayStartsWith:function(t,e){return null==t&&(t=[]),null==e&&(e=[]),R.arraysAreEqual(t.slice(0,e.length),e)},spliceArray:function(t){var e,n,i;return n=t,e=2<=arguments.length?r.call(arguments,1):[],(i=n.slice(0)).splice.apply(i,e),i},summarizeArrayChange:function(t,e){var n,i,r,o,a,s,l,c,u,d,h;for(null==t&&(t=[]),null==e&&(e=[]),n=[],d=[],r=new Set,o=0,l=t.length;o<l;o++)h=t[o],r.add(h);for(i=new Set,a=0,c=e.length;a<c;a++)h=e[a],i.add(h),r.has(h)||n.push(h);for(s=0,u=t.length;s<u;s++)h=t[s],i.has(h)||d.push(h);return{added:n,removed:d}}})}.call(this),function(){var t,e,r,n;r=n=e=t=null,R.extend({getAllAttributeNames:function(){return null!=t?t:t=R.getTextAttributeNames().concat(R.getBlockAttributeNames())},getBlockConfig:function(t){return R.config.blockAttributes[t]},getBlockAttributeNames:function(){return null!=e?e:e=Object.keys(R.config.blockAttributes)},getTextConfig:function(t){return R.config.textAttributes[t]},getTextAttributeNames:function(){return null!=n?n:n=Object.keys(R.config.textAttributes)},getListAttributeNames:function(){var n,i;return null!=r?r:r=function(){var t,e;for(n in e=[],t=R.config.blockAttributes)null!=(i=t[n].listAttribute)&&e.push(i);return e}()}})}.call(this),function(){var p,n,t,e,i,r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};p=document.documentElement,n=null!=(t=null!=(e=null!=(i=p.matchesSelector)?i:p.webkitMatchesSelector)?e:p.msMatchesSelector)?t:p.mozMatchesSelector,R.extend({handleEvent:function(t,e){var n,i,r,o,a,s,l,c,u,d,h;return a=(l=null!=e?e:{}).onElement,o=l.matchingSelector,h=l.withCallback,r=l.inPhase,s=l.preventDefault,u=l.times,n=null!=a?a:p,c=o,h,d="capturing"===r,(i=function(t){var e;return null!=u&&0==--u&&i.destroy(),null!=(e=R.findClosestElementFromNode(t.target,{matchingSelector:c}))&&(null!=h&&h.call(e,t,e),s)?t.preventDefault():void 0}).destroy=function(){return n.removeEventListener(t,i,d)},n.addEventListener(t,i,d),i},handleEventOnce:function(t,e){return null==e&&(e={}),e.times=1,R.handleEvent(t,e)},triggerEvent:function(t,e){var n,i,r,o,a,s,l;return s=(l=null!=e?e:{}).onElement,i=l.bubbles,r=l.cancelable,n=l.attributes,o=null!=s?s:p,i=!1!==i,r=!1!==r,(a=document.createEvent("Events")).initEvent(t,i,r),null!=n&&R.extend.call(a,n),o.dispatchEvent(a)},elementMatchesSelector:function(t,e){return 1===(null!=t?t.nodeType:void 0)?n.call(t,e):void 0},findClosestElementFromNode:function(t,e){var n,i,r;for(n=(i=null!=e?e:{}).matchingSelector,r=i.untilNode;null!=t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;if(null!=t){if(null==n)return t;if(t.closest&&null==r)return t.closest(n);for(;t&&t!==r;){if(R.elementMatchesSelector(t,n))return t;t=t.parentNode}}},findInnerElement:function(t){for(;null!=t?t.firstElementChild:void 0;)t=t.firstElementChild;return t},innerElementIsActive:function(t){return document.activeElement!==t&&R.elementContainsNode(t,document.activeElement)},elementContainsNode:function(t,e){if(t&&e)for(;e;){if(e===t)return!0;e=e.parentNode}},findNodeFromContainerAndOffset:function(t,e){var n;if(t)return t.nodeType===Node.TEXT_NODE?t:0===e?null!=(n=t.firstChild)?n:t:t.childNodes.item(e-1)},findElementFromContainerAndOffset:function(t,e){var n;return n=R.findNodeFromContainerAndOffset(t,e),R.findClosestElementFromNode(n)},findChildIndexOfNode:function(t){var e;if(null!=t?t.parentNode:void 0){for(e=0;t=t.previousSibling;)e++;return e}},walkTree:function(t,e){var n,i,r,o,a;return i=(r=null!=e?e:{}).onlyNodesOfType,o=r.usingFilter,n=r.expandEntityReferences,a=function(){switch(i){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}}(),document.createTreeWalker(t,a,null!=o?o:null,!0===n)},tagName:function(t){var e;return null!=t&&null!=(e=t.tagName)?e.toLowerCase():void 0},makeElement:function(t,e){var n,i,r,o,a,s,l,c,u,d;if(null==e&&(e={}),"object"==typeof t?t=(e=t).tagName:e={attributes:e},i=document.createElement(t),null!=e.editable&&(null==e.attributes&&(e.attributes={}),e.attributes.contenteditable=e.editable),e.attributes)for(o in s=e.attributes)d=s[o],i.setAttribute(o,d);if(e.style)for(o in l=e.style)d=l[o],i.style[o]=d;if(e.data)for(o in c=e.data)d=c[o],i.dataset[o]=d;if(e.className)for(r=0,a=(u=e.className.split(" ")).length;r<a;r++)n=u[r],i.classList.add(n);return e.textContent&&(i.textContent=e.textContent),i},getBlockTagNames:function(){var n,i;return null!=R.blockTagNames?R.blockTagNames:R.blockTagNames=function(){var t,e;for(n in e=[],t=R.config.blockAttributes)i=t[n],e.push(i.tagName);return e}()},nodeIsBlockContainer:function(t){return R.nodeIsBlockStartComment(null!=t?t.firstChild:void 0)},nodeProbablyIsBlockContainer:function(t){var e,n;return e=R.tagName(t),0<=r.call(R.getBlockTagNames(),e)&&(n=R.tagName(t.firstChild),r.call(R.getBlockTagNames(),n)<0)},nodeIsBlockStart:function(t,e){return(null!=e?e:{strict:!0}).strict?R.nodeIsBlockStartComment(t):R.nodeIsBlockStartComment(t)||!R.nodeIsBlockStartComment(t.firstChild)&&R.nodeProbablyIsBlockContainer(t)},nodeIsBlockStartComment:function(t){return R.nodeIsCommentNode(t)&&"block"===(null!=t?t.data:void 0)},nodeIsCommentNode:function(t){return(null!=t?t.nodeType:void 0)===Node.COMMENT_NODE},nodeIsCursorTarget:function(t){return t?R.nodeIsTextNode(t)?t.data===R.ZERO_WIDTH_SPACE:R.nodeIsCursorTarget(t.firstChild):void 0},nodeIsAttachmentElement:function(t){return R.elementMatchesSelector(t,R.AttachmentView.attachmentSelector)},nodeIsEmptyTextNode:function(t){return R.nodeIsTextNode(t)&&""===(null!=t?t.data:void 0)},nodeIsTextNode:function(t){return(null!=t?t.nodeType:void 0)===Node.TEXT_NODE}})}.call(this),function(){var e,n,l,i,c;e=R.copyObject,i=R.objectsAreEqual,R.extend({normalizeRange:l=function(t){var e;if(null!=t)return Array.isArray(t)||(t=[t,t]),[n(t[0]),n(null!=(e=t[1])?e:t[0])]},rangeIsCollapsed:function(t){var e,n,i;if(null!=t)return i=(n=l(t))[0],e=n[1],c(i,e)},rangesAreEqual:function(t,e){var n,i,r,o,a,s;if(null!=t&&null!=e)return i=(r=l(t))[0],n=r[1],s=(o=l(e))[0],a=o[1],c(i,s)&&c(n,a)}}),n=function(t){return"number"==typeof t?t:e(t)},c=function(t,e){return"number"==typeof t?t===e:i(t,e)}}.call(this),function(){var c,n,u,d;c={extendsTagName:"div",css:"%t { display: block; }"},R.registerElement=function(t,e){var n,i,r,o,a,s,l;return null==e&&(e={}),t=t.toLowerCase(),o=null!=(l=(a=d(e)).extendsTagName)?l:c.extendsTagName,delete a.extendsTagName,i=a.defaultCSS,delete a.defaultCSS,null!=i&&o===c.extendsTagName?i+="\n"+c.css:i=c.css,u(i,t),(r=Object.getPrototypeOf(document.createElement(o))).__super__=r,s=Object.create(r,a),n=document.registerElement(t,{prototype:s}),Object.defineProperty(s,"constructor",{value:n}),n},u=function(t,e){return n(e).textContent=t.replace(/%t/g,e)},n=function(t){var e;return(e=document.createElement("style")).setAttribute("type","text/css"),e.setAttribute("data-tag-name",t.toLowerCase()),document.head.insertBefore(e,document.head.firstChild),e},d=function(t){var e,n,i;for(e in n={},t)i=t[e],n[e]="function"==typeof i?{value:i}:i;return n}}.call(this),function(){var n,e;R.extend({getDOMSelection:function(){var t;return 0<(t=window.getSelection()).rangeCount?t:void 0},getDOMRange:function(){var t,e;return(t=null!=(e=R.getDOMSelection())?e.getRangeAt(0):void 0)&&!n(t)?t:void 0},setDOMRange:function(t){var e;return(e=window.getSelection()).removeAllRanges(),e.addRange(t),R.selectionChangeObserver.update()}}),n=function(t){return e(t.startContainer)||e(t.endContainer)},e=function(t){return!Object.getPrototypeOf(t)}}.call(this),function(){}.call(this),function(){var a,l=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,
t.__super__=e.prototype,t},r={}.hasOwnProperty;a=R.arraysAreEqual,R.Hash=function(t){function e(t){null==t&&(t={}),this.values=o(t),e.__super__.constructor.apply(this,arguments)}var s,o,n,i,r;return l(e,t),e.fromCommonAttributesOfObjects=function(t){var e,n,i,r,o,a;if(null==t&&(t=[]),!t.length)return new this;for(i=(e=s(t[0])).getKeys(),n=0,r=(a=t.slice(1)).length;n<r;n++)o=a[n],i=e.getKeysCommonToHash(s(o)),e=e.slice(i);return e},e.box=function(t){return s(t)},e.prototype.add=function(t,e){return this.merge(i(t,e))},e.prototype.remove=function(t){return new R.Hash(o(this.values,t))},e.prototype.get=function(t){return this.values[t]},e.prototype.has=function(t){return t in this.values},e.prototype.merge=function(t){return new R.Hash(n(this.values,r(t)))},e.prototype.slice=function(t){var e,n,i,r;for(r={},e=0,i=t.length;e<i;e++)n=t[e],this.has(n)&&(r[n]=this.values[n]);return new R.Hash(r)},e.prototype.getKeys=function(){return Object.keys(this.values)},e.prototype.getKeysCommonToHash=function(t){var e,n,i,r,o;for(t=s(t),o=[],e=0,i=(r=this.getKeys()).length;e<i;e++)n=r[e],this.values[n]===t.values[n]&&o.push(n);return o},e.prototype.isEqualTo=function(t){return a(this.toArray(),s(t).toArray())},e.prototype.isEmpty=function(){return 0===this.getKeys().length},e.prototype.toArray=function(){var e,n,i;return(null!=this.array?this.array:this.array=function(){var t;for(e in n=[],t=this.values)i=t[e],n.push(e,i);return n}.call(this)).slice(0)},e.prototype.toObject=function(){return o(this.values)},e.prototype.toJSON=function(){return this.toObject()},e.prototype.contentsForInspection=function(){return{values:JSON.stringify(this.values)}},i=function(t,e){var n;return(n={})[t]=e,n},n=function(t,e){var n,i,r;for(n in i=o(t),e)r=e[n],i[n]=r;return i},o=function(t,e){var n,i,r,o,a;for(o={},n=0,r=(a=Object.keys(t).sort()).length;n<r;n++)(i=a[n])!==e&&(o[i]=t[i]);return o},s=function(t){return t instanceof R.Hash?t:new R.Hash(t)},r=function(t){return t instanceof R.Hash?t.values:t},e}(R.Object)}.call(this),function(){R.ObjectGroup=function(){function t(t,e){var n,i;this.objects=null!=t?t:[],i=e.depth,(n=e.asTree)&&(this.depth=i,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}return t.groupObjects=function(t,e){var n,i,r,o,a,s,l,c,u;for(null==t&&(t=[]),r=(u=null!=e?e:{}).depth,(n=u.asTree)&&null==r&&(r=0),c=[],a=0,s=t.length;a<s;a++){if(l=t[a],o){if(("function"==typeof l.canBeGrouped?l.canBeGrouped(r):void 0)&&("function"==typeof(i=o[o.length-1]).canBeGroupedWith?i.canBeGroupedWith(l,r):void 0)){o.push(l);continue}c.push(new this(o,{depth:r,asTree:n})),o=null}("function"==typeof l.canBeGrouped?l.canBeGrouped(r):void 0)?o=[l]:c.push(l)}return o&&c.push(new this(o,{depth:r,asTree:n})),c},t.prototype.getObjects=function(){return this.objects},t.prototype.getDepth=function(){return this.depth},t.prototype.getCacheKey=function(){var t,e,n,i,r;for(e=["objectGroup"],t=0,n=(r=this.getObjects()).length;t<n;t++)i=r[t],e.push(i.getCacheKey());return e.join("/")},t}()}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.ObjectMap=function(t){function e(t){var e,n,i,r,o;for(null==t&&(t=[]),this.objects={},i=0,r=t.length;i<r;i++)o=t[i],n=JSON.stringify(o),null==(e=this.objects)[n]&&(e[n]=o)}return n(e,t),e.prototype.find=function(t){var e;return e=JSON.stringify(t),this.objects[e]},e}(R.BasicObject)}.call(this),function(){R.ElementStore=function(){function t(t){this.reset(t)}var i;return t.prototype.add=function(t){var e;return e=i(t),this.elements[e]=t},t.prototype.remove=function(t){var e,n;return e=i(t),(n=this.elements[e])?(delete this.elements[e],n):void 0},t.prototype.reset=function(t){var e,n,i;for(null==t&&(t=[]),this.elements={},n=0,i=t.length;n<i;n++)e=t[n],this.add(e);return t},i=function(t){return t.dataset.trixStoreKey},t}()}.call(this),function(){}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Operation=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.isPerforming=function(){return!0===this.performing},e.prototype.hasPerformed=function(){return!0===this.performed},e.prototype.hasSucceeded=function(){return this.performed&&this.succeeded},e.prototype.hasFailed=function(){return this.performed&&!this.succeeded},e.prototype.getPromise=function(){return null!=this.promise?this.promise:this.promise=new Promise((r=this,function(n,i){return r.performing=!0,r.perform(function(t,e){return r.succeeded=t,r.performing=!1,r.performed=!0,r.succeeded?n(e):i(e)})}));var r},e.prototype.perform=function(t){return t(!1)},e.prototype.release=function(){var t;return null!=(t=this.promise)&&"function"==typeof t.cancel&&t.cancel(),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null},e.proxyMethod("getPromise().then"),e.proxyMethod("getPromise().catch"),e}(R.BasicObject)}.call(this),function(){var t,e,n,i,r,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;R.UTF16String=function(t){function e(t,e){this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}return o(e,t),e.box=function(t){return null==t&&(t=""),t instanceof this?t:this.fromUCS2String(null!=t?t.toString():void 0)},e.fromUCS2String=function(t){return new this(t,i(t))},e.fromCodepoints=function(t){return new this(r(t),t)},e.prototype.offsetToUCS2Offset=function(t){return r(this.codepoints.slice(0,Math.max(0,t))).length},e.prototype.offsetFromUCS2Offset=function(t){return i(this.ucs2String.slice(0,Math.max(0,t))).length},e.prototype.slice=function(){var t;return this.constructor.fromCodepoints((t=this.codepoints).slice.apply(t,arguments))},e.prototype.charAt=function(t){return this.slice(t,t+1)},e.prototype.isEqualTo=function(t){return this.constructor.box(t).ucs2String===this.ucs2String},e.prototype.toJSON=function(){return this.ucs2String},e.prototype.getCacheKey=function(){return this.ucs2String},e.prototype.toString=function(){return this.ucs2String},e}(R.BasicObject),t=1===("function"==typeof Array.from?Array.from("\ud83d\udc7c").length:void 0),e=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),n=" \ud83d\udc7c"===("function"==typeof String.fromCodePoint?String.fromCodePoint(32,128124):void 0),i=t&&e?function(t){return Array.from(t).map(function(t){return t.codePointAt(0)})}:function(t){var e,n,i,r,o;for(r=[],e=0,i=t.length;e<i;)55296<=(o=t.charCodeAt(e++))&&o<=56319&&e<i&&(56320==(64512&(n=t.charCodeAt(e++)))?o=((1023&o)<<10)+(1023&n)+65536:e--),r.push(o);return r},r=n?function(t){return String.fromCodePoint.apply(String,t)}:function(i){var r,o;return function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],r="",65535<o&&(o-=65536,r+=String.fromCharCode(o>>>10&1023|55296),o=56320|1023&o),n.push(r+String.fromCharCode(o));return n}().join("")}}.call(this),function(){}.call(this),function(){}.call(this),function(){R.config.lang={bold:"Bold",bullets:"Bullets","byte":"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"}}.call(this),function(){R.config.css={attachment:"attachment",attachmentProgress:"attachment__progress",attachmentName:"attachment__name",attachmentSize:"attachment__size",attachmentRemove:"attachment__remove",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor"}}.call(this),function(){var e;R.config.blockAttributes=e={"default":{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test:function(t){return R.tagName(t.parentNode)===e[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test:function(t){return R.tagName(t.parentNode)===e[this.listAttribute].tagName}}}}.call(this),function(){var i,r;i=R.config.lang,r=[i.bytes,i.KB,i.MB,i.GB,i.TB,i.PB],R.config.fileSize={prefix:"IEC",precision:2,formatter:function(t){var e,n;switch(t){case 0:return"0 "+i.bytes;case 1:return"1 "+i["byte"];default:return e=function(){switch(this.prefix){case"SI":return 1e3;case"IEC":return 1024}}.call(this),n=Math.floor(Math.log(t)/Math.log(e)),(t/Math.pow(e,n)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"")+" "+r[n]}}}}.call(this),function(){R.config.textAttributes={bold:{tagName:"strong",inheritable:!0,parser:function(t){var e;return"bold"===(e=window.getComputedStyle(t)).fontWeight||600<=e.fontWeight}},italic:{tagName:"em",inheritable:!0,parser:function(t){return"italic"===window.getComputedStyle(t).fontStyle}},href:{groupTagName:"a",parser:function(t){var e,n;return n="a:not("+R.AttachmentView.attachmentSelector+")",(e=R.findClosestElementFromNode(t,{matchingSelector:n}))?e.getAttribute("href"):void 0}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}}}.call(this),function(){var b,w,x,T,S;S="[data-trix-serialize=false]",T=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],x="["+(w="data-trix-serialized-attributes")+"]",b=new RegExp("<!--block-->","g"),R.extend({serializers:{"application/json":function(t){var e;if(t instanceof R.Document)e=t;else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");e=R.Document.fromHTML(t.innerHTML)}return e.toSerializableDocument().toJSONString()},"text/html":function(t){var e,n,i,r,o,a,s,l,c,u,d,h,p,f,g,m,v;if(t instanceof R.Document)r=R.DocumentView.render(t);else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");r=t.cloneNode(!0)}for(o=0,c=(f=r.querySelectorAll(S)).length;o<c;o++)(i=f[o]).parentNode.removeChild(i);for(a=0,u=T.length;a<u;a++)for(e=T[a],s=0,d=(g=r.querySelectorAll("["+e+"]")).length;s<d;s++)(i=g[s]).removeAttribute(e);for(l=0,h=(m=r.querySelectorAll(x)).length;l<h;l++){i=m[l];try{for(p in n=JSON.parse(i.getAttribute(w)),i.removeAttribute(w),n)v=n[p],i.setAttribute(p,v)}catch(y){}}return r.innerHTML.replace(b,"")}},deserializers:{"application/json":function(t){return R.Document.fromJSONString(t)},"text/html":function(t){return R.Document.fromHTML(t)}},serializeToContentType:function(t,e){var n;if(n=R.serializers[e])return n(t);throw new Error("unknown content type: "+e)},deserializeFromContentType:function(t,e){var n;if(n=R.deserializers[e])return n(t);throw new Error("unknown content type: "+e)}})}.call(this),function(){var t;t=R.config.lang,R.config.toolbar={getDefaultHTML:function(){return'<div class="trix-button-row">\n  <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="'+t.bold+'" tabindex="-1">'+t.bold+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="'+t.italic+'" tabindex="-1">'+t.italic+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="'+t.strike+'" tabindex="-1">'+t.strike+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="'+t.link+'" tabindex="-1">'+t.link+'</button>\n  </span>\n\n  <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="'+t.heading1+'" tabindex="-1">'+t.heading1+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="'+t.quote+'" tabindex="-1">'+t.quote+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="'+t.code+'" tabindex="-1">'+t.code+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="'+t.bullets+'" tabindex="-1">'+t.bullets+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="'+t.numbers+'" tabindex="-1">'+t.numbers+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="'+t.outdent+'" tabindex="-1">'+t.outdent+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="'+t.indent+'" tabindex="-1">'+t.indent+'</button>\n  </span>\n\n  <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="'+t.undo+'" tabindex="-1">'+t.undo+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="'+t.redo+'" tabindex="-1">'+t.redo+'</button>\n  </span>\n</div>\n\n<div class="trix-dialogs" data-trix-dialogs>\n  <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">\n    <div class="trix-dialog__link-fields">\n      <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="'+t.urlPlaceholder+'" required data-trix-input>\n      <div class="trix-button-group">\n        <input type="button" class="trix-button trix-button--dialog" value="'+t.link+'" data-trix-method="setAttribute">\n        <input type="button" class="trix-button trix-button--dialog" value="'+t.unlink+'" data-trix-method="removeAttribute">\n      </div>\n    </div>\n  </div>\n</div>'}}}.call(this),function(){R.config.undoInterval=5e3}.call(this),function(){R.config.attachments={preview:{caption:{name:!0,size:!0}},file:{caption:{size:!0}}}}.call(this),function(){}.call(this),function(){R.registerElement("trix-toolbar",{defaultCSS:"%t {\n  white-space: nowrap;\n}\n\n%t [data-trix-dialog] {\n  display: none;\n}\n\n%t [data-trix-dialog][data-trix-active] {\n  display: block;\n}\n\n%t [data-trix-dialog] [data-trix-validate]:invalid {\n  background-color: #ffdddd;\n}",createdCallback:function(){return""===this.innerHTML?this.innerHTML=R.config.toolbar.getDefaultHTML():void 0}})}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};R.ObjectView=function(t){function e(t,e){this.object=t,this.options=null!=e?e:{},this.childViews=[],this.rootView=this}return n(e,t),e.prototype.getNodes=function(){var t,e,n,i,r;for(null==this.nodes&&(this.nodes=this.createNodes()),r=[],t=0,e=(i=this.nodes).length;t<e;t++)n=i[t],r.push(n.cloneNode(!0));return r},e.prototype.invalidate=function(){var t;return(this.nodes=null)!=(t=this.parentView)?t.invalidate():void 0},e.prototype.invalidateViewForObject=function(t){var e;return null!=(e=this.findViewForObject(t))?e.invalidate():void 0},e.prototype.findOrCreateCachedChildView=function(t,e){var n;return(n=this.getCachedViewForObject(e))?this.recordChildView(n):(n=this.createChildView.apply(this,arguments),this.cacheViewForObject(n,e)),n},e.prototype.createChildView=function(t,e,n){var i;return null==n&&(n={}),e instanceof R.ObjectGroup&&(n.viewClass=t,t=R.ObjectGroupView),i=new t(e,n),this.recordChildView(i)},e.prototype.recordChildView=function(t){return t.parentView=this,t.rootView=this.rootView,a.call(this.childViews,t)<0&&this.childViews.push(t),t},e.prototype.getAllChildViews=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.childViews).length;e<n;e++)t=i[e],r.push(t),r=r.concat(t.getAllChildViews());return r},e.prototype.findElement=function(){return this.findElementForObject(this.object)},e.prototype.findElementForObject=function(t){var e;return(e=null!=t?t.id:void 0)?this.rootView.element.querySelector("[data-trix-id='"+e+"']"):void 0},e.prototype.findViewForObject=function(t){var e,n,i,r;for(e=0,n=(i=this.getAllChildViews()).length;e<n;e++)if((r=i[e]).object===t)return r},e.prototype.getViewCache=function(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?null!=this.viewCache?this.viewCache:this.viewCache={}:void 0},e.prototype.isViewCachingEnabled=function(){return!1!==this.shouldCacheViews},e.prototype.enableViewCaching=function(){return this.shouldCacheViews=!0},e.prototype.disableViewCaching=function(){return this.shouldCacheViews=!1},e.prototype.getCachedViewForObject=function(t){var e;return null!=(e=this.getViewCache())?e[t.getCacheKey()]:void 0},e.prototype.cacheViewForObject=function(t,e){var n;return null!=(n=this.getViewCache())?n[e.getCacheKey()]=t:void 0},e.prototype.garbageCollectCachedViews=function(){var t,e,n,i,r,o;if(t=this.getViewCache()){for(e in o=this.getAllChildViews().concat(this),n=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)r=o[t],n.push(r.object.getCacheKey());return n}(),i=[],t)a.call(n,e)<0&&i.push(delete t[e]);return i}},e}(R.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.ObjectGroupView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}return n(e,t),e.prototype.getChildViews=function(){var t,e,n,i;if(!this.childViews.length)for(t=0,e=(i=this.objectGroup.getObjects()).length;t<e;t++)n=i[t],this.findOrCreateCachedChildView(this.viewClass,n,this.options);return this.childViews},e.prototype.createNodes=function(){var t,e,n,i,r,o,a,s;for(t=this.createContainerElement(),e=0,i=(a=this.getChildViews()).length;e<i;e++)for(n=0,r=(s=a[e].getNodes()).length;n<r;n++)o=s[n],t.appendChild(o);return[t]},e.prototype.createContainerElement=function(t){return null==t&&(t=this.objectGroup.getDepth()),this.getChildViews()[0].createContainerElement(t)},e}(R.ObjectView)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Controller=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(R.BasicObject)}.call(this),function(){var o,d,a,h,l,s,c=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,f=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};o=R.findClosestElementFromNode,a=R.nodeIsEmptyTextNode,d=R.nodeIsBlockStartComment,h=R.normalizeSpaces,l=R.summarizeStringChange,s=R.tagName,R.MutationObserver=function(t){function e(t){this.element=t,this.didMutate=c(this.didMutate,this),this.observer=new window.MutationObserver(this.didMutate),this.start()}var u,n,i,r;return p(e,t),i="["+(n="data-trix-mutable")+"]",r={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},e.prototype.start=function(){return this.reset(),this.observer.observe(this.element,r)},e.prototype.stop=function(){return this.observer.disconnect()},e.prototype.didMutate=function(t){var e,n;return(e=this.mutations).push.apply(e,this.findSignificantMutations(t)),this.mutations.length?(null!=(n=this.delegate)&&"function"==typeof n.elementDidMutate&&n.elementDidMutate(this.getMutationSummary()),this.reset()):void 0},e.prototype.reset=function(){return this.mutations=[]},e.prototype.findSignificantMutations=function(t){var e,n,i,r;for(r=[],e=0,n=t.length;e<n;e++)i=t[e],this.mutationIsSignificant(i)&&r.push(i);return r},e.prototype.mutationIsSignificant=function(t){var e,n,i,r;for(e=0,n=(r=this.nodesModifiedByMutation(t)).length;e<n;e++)if(i=r[e],this.nodeIsSignificant(i))return!0;return!1},e.prototype.nodeIsSignificant=function(t){return t!==this.element&&!this.nodeIsMutable(t)&&!a(t)},e.prototype.nodeIsMutable=function(t){return o(t,{matchingSelector:i})},e.prototype.nodesModifiedByMutation=function(t){var e;switch(e=[],t.type){case"attributes":t.attributeName!==n&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push.apply(e,t.addedNodes),e.push.apply(e,t.removedNodes)}return e},e.prototype.getMutationSummary=function(){return this.getTextMutationSummary()},e.prototype.getTextMutationSummary=function(){var t,e,n,i,r,o,a,s,l,c,u;for(n=(s=this.getTextChangesFromCharacterData()).additions,r=s.deletions,o=0,a=(l=(u=this.getTextChangesFromChildList()).additions).length;o<a;o++)e=l[o],f.call(n,e)<0&&n.push(e);return r.push.apply(r,u.deletions),c={},(t=n.join(""))&&(c.textAdded=t),(i=r.join(""))&&(c.textDeleted=i),c},e.prototype.getMutationsByType=function(t){var e,n,i,r,o;for(o=[],e=0,n=(r=this.mutations).length;e<n;e++)(i=r[e]).type===t&&o.push(i);return o},e.prototype.getTextChangesFromChildList=function(){var t,e,i,n,r,o,a,s,l,c;for(t=[],a=[],e=0,n=(o=this.getMutationsByType("childList")).length;e<n;e++)r=o[e],t.push.apply(t,r.addedNodes),a.push.apply(a,r.removedNodes);return 0===t.length&&1===a.length&&d(a[0])?(l=[],c=["\n"]):(l=u(t),c=u(a)),{additions:function(){var t,e,n;for(n=[],i=t=0,e=l.length;t<e;i=++t)(s=l[i])!==c[i]&&n.push(h(s));return n}(),deletions:function(){var t,e,n;for(n=[],i=t=0,e=c.length;t<e;i=++t)(s=c[i])!==l[i]&&n.push(h(s));return n}()}},e.prototype.getTextChangesFromCharacterData=function(){var t,e,n,i,r,o,a,s;return(e=this.getMutationsByType("characterData")).length&&(s=e[0],n=e[e.length-1],r=h(s.oldValue),i=h(n.target.data),t=(o=l(r,i)).added,a=o.removed),{additions:t?[t]:[],deletions:a?[a]:[]}},u=function(t){var e,n,i,r;for(null==t&&(t=[]),r=[],e=0,n=t.length;e<n;e++)switch(i=t[e],i.nodeType){case Node.TEXT_NODE:r.push(i.data);break;case Node.ELEMENT_NODE:"br"===s(i)?r.push("\n"):r.push.apply(r,u(i.childNodes))}return r},e}(R.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.FileVerificationOperation=function(t){function e(t){this.file=t}return n(e,t),e.prototype.perform=function(e){var n,i;return(n=new FileReader).onerror=function(){return e(!1)},n.onload=(i=this,function(){n.onerror=null;try{n.abort()}catch(t){}return e(!0,i.file)}),n.readAsArrayBuffer(this.file)},e}(R.Operation)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.CompositionInput=function(t){function e(t){var e;this.inputController=t,e=this.inputController,this.responder=e.responder,this.delegate=e.delegate,this.inputSummary=e.inputSummary,this.data={}}return n(e,t),e.prototype.start=function(t){var e,n;return this.data.start=t,"keypress"===this.inputSummary.eventName&&this.inputSummary.textAdded&&null!=(e=this.responder)&&e.deleteInDirection("left"),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=null!=(n=this.responder)?n.getSelectedRange():void 0},e.prototype.update=function(t){var e;return this.data.update=t,(e=this.selectPlaceholder())?(this.forgetPlaceholder(),this.range=e):void 0},e.prototype.end=function(t){var e,n,i,r;return this.data.end=t,this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0}),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.setSelectedRange(this.range),null!=(i=this.responder)&&i.insertString(this.data.end),null!=(r=this.responder)?r.setSelectedRange(this.range[0]+this.data.end.length):void 0):null!=this.data.start||null!=this.data.update?(this.requestReparse(),this.inputController.reset()):void 0},e.prototype.getEndData=function(){return this.data.end},e.prototype.isEnded=function(){return null!=this.getEndData()},e.prototype.canApplyToDocument=function(){var t,e;return 0===(null!=(t=this.data.start)?t.length:void 0)&&0<(null!=(e=this.data.end)?e.length:void 0)&&null!=this.range},e.proxyMethod("inputController.setInputSummary"),e.proxyMethod("inputController.requestRender"),e.proxyMethod("inputController.requestReparse"),e.proxyMethod("responder?.selectionIsExpanded"),e.proxyMethod("responder?.insertPlaceholder"),e.proxyMethod("responder?.selectPlaceholder"),e.proxyMethod("responder?.forgetPlaceholder"),e}(R.BasicObject)}.call(this),function(){var A,i,C,n,r,o,u,a,s,l,c,k,d,h,p=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty,_=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};n=R.handleEvent,l=R.makeElement,o=R.innerElementIsActive,c=R.objectsAreEqual,R.tagName,R.InputController=function(t){function e(t){var e;for(e in this.element=t,this.resetInputSummary(),this.mutationObserver=new R.MutationObserver(this.element),(this.mutationObserver.delegate=this).events)n(e,{onElement:this.element,withCallback:this.handlerFor(e),inPhase:"capturing"})}var E;return p(e,t),E=0,e.keyNames={8:"backspace",9:"tab",13:"return",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},e.prototype.handlerFor=function(e){return n=this,function(t){return n.handleInput(function(){return o(this.element)?void 0:(this.eventName=e,this.events[e].call(this,t))})};var n},e.prototype.setInputSummary=function(t){var e,n;for(e in null==t&&(t={}),this.inputSummary.eventName=this.eventName,t)n=t[e],this.inputSummary[e]=n;return this.inputSummary},e.prototype.resetInputSummary=function(){return this.inputSummary={}},e.prototype.reset=function(){return this.resetInputSummary(),R.selectionChangeObserver.reset()},e.prototype.editorWillSyncDocumentView=function(){return this.mutationObserver.stop()},e.prototype.editorDidSyncDocumentView=function(){return this.mutationObserver.start()},e.prototype.requestRender=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestRender?t.inputControllerDidRequestRender():void 0},e.prototype.requestReparse=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestReparse&&t.inputControllerDidRequestReparse(),this.requestRender()},e.prototype.elementDidMutate=function(t){var e;return this.isComposing()?null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidAllowUnhandledInput?e.inputControllerDidAllowUnhandledInput():void 0:this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})},e.prototype.mutationIsExpected=function(t){var e,n,i,r,o,a,s,l,c;return a=t.textAdded,s=t.textDeleted,!!this.inputSummary.preferDocument||(e=null!=a?a===this.inputSummary.textAdded:!this.inputSummary.textAdded,n=null!=s?this.inputSummary.didDelete:!this.inputSummary.didDelete,c="\n"===s&&!n,!!(((l=("\n"===a||" \n"===a)&&!e)&&!c||c&&!l)&&(r=this.getSelectedRange())&&(i=l?a.replace(/\n$/,"").length||-1:(null!=a?a.length:void 0)||1,null!=(o=this.responder)?o.positionIsBlockBreak(r[1]+i):void 0))||e&&n)},e.prototype.mutationIsSignificant=function(t){var e,n,i;return i=0<Object.keys(t).length,e=""===(null!=(n=this.compositionInput)?n.getEndData():void 0),i||!e},e.prototype.attachFiles=function(i){var r,t,e;return t=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(new R.FileVerificationOperation(r));return n}(),Promise.all(t).then((e=this,function(n){return e.handleInput(function(){var t,e;return null!=(t=this.delegate)&&t.inputControllerWillAttachFiles(),null!=(e=this.responder)&&e.insertFiles(n),this.requestRender()})}))},e.prototype.events={keydown:function(r){var t,e,n,i,o,a,s,l,c;if(this.isComposing()||this.resetInputSummary(),i=this.constructor.keyNames[r.keyCode]){for(e=this.keys,n=0,a=(l=["ctrl","alt","shift","meta"]).length;n<a;n++)s=l[n],r[s+"Key"]&&("ctrl"===s&&(s="control"),e=null!=e?e[s]:void 0);null!=(null!=e?e[i]:void 0)&&(this.setInputSummary({keyName:i}),R.selectionChangeObserver.reset(),e[i].call(this,r))}return u(r)&&(t=String.fromCharCode(r.keyCode).toLowerCase())&&((o=function(){var t,e,n,i;for(i=[],t=0,e=(n=["alt","shift"]).length;t<e;t++)s=n[t],r[s+"Key"]&&i.push(s);return i}()).push(t),null!=(c=this.delegate)?c.inputControllerDidReceiveKeyboardCommand(o):void 0)?r.preventDefault():void 0},keypress:function(t){var e,n,i;if(null==this.inputSummary.eventName&&(!t.metaKey&&!t.ctrlKey||t.altKey)&&!s(t)&&!a(t))return(i=d(t))?(null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString(i),this.setInputSummary({textAdded:i,didDelete:this.selectionIsExpanded()})):void 0},textInput:function(t){var e,n,i,r;return e=t.data,(r=this.inputSummary.textAdded)&&r!==e&&r.toUpperCase()===e?(n=this.getSelectedRange(),this.setSelectedRange([n[0],n[1]+r.length]),null!=(i=this.responder)&&i.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(n)):void 0},dragenter:function(t){return t.preventDefault()},dragstart:function(t){var e;return t.target,this.serializeSelectionToDataTransfer(t.dataTransfer),this.draggedRange=this.getSelectedRange(),null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidStartDrag?e.inputControllerDidStartDrag():void 0},dragover:function(t){var e,n;return!this.draggedRange&&!this.canAcceptDataTransfer(t.dataTransfer)||(t.preventDefault(),e={x:t.clientX,y:t.clientY},c(e,this.draggingPoint))?void 0:(this.draggingPoint=e,null!=(n=this.delegate)&&"function"==typeof n.inputControllerDidReceiveDragOverPoint?n.inputControllerDidReceiveDragOverPoint(this.draggingPoint):void 0)},dragend:function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidCancelDrag&&t.inputControllerDidCancelDrag(),this.draggedRange=null,this.draggingPoint=null},drop:function(t){var e,n,i,r,o,a,s,l,c;return t.preventDefault(),i=null!=(o=t.dataTransfer)?o.files:void 0,r={x:t.clientX,y:t.clientY},null!=(a=this.responder)&&a.setLocationRangeFromPointRange(r),(null!=i?i.length:void 0)?this.attachFiles(i):this.draggedRange?(null!=(s=this.delegate)&&s.inputControllerWillMoveText(),null!=(l=this.responder)&&l.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()):(n=t.dataTransfer.getData("application/x-trix-document"))&&(e=R.Document.fromJSONString(n),null!=(c=this.responder)&&c.insertDocument(e),this.requestRender()),this.draggedRange=null,this.draggingPoint=null},cut:function(t){var e,n;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&(this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault(),null!=(n=this.delegate)&&n.inputControllerWillCutText(),this.deleteInDirection("backward"),t.defaultPrevented)?this.requestRender():void 0},copy:function(t){var e;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&this.serializeSelectionToDataTransfer(t.clipboardData)?t.preventDefault():void 0},paste:function(t){var e,n,i,r,o,a,s,l,c,u,d,h,p,f,g,m,v,y,b,w,x,T,S;return e=null!=(l=t.clipboardData)?l:t.testClipboardData,s={clipboard:e},null==e||k(t)?void this.getPastedHTMLUsingHiddenElement((S=this,function(t){var e,n,i
;return s.type="text/html",s.html=t,null!=(e=S.delegate)&&e.inputControllerWillPaste(s),null!=(n=S.responder)&&n.insertHTML(s.html),S.requestRender(),null!=(i=S.delegate)?i.inputControllerDidPaste(s):void 0})):((r=e.getData("URL"))?(s.type="URL",s.href=r,s.string=(a=e.getData("public.url-name"))?R.squishBreakableWhitespace(a).trim():r,null!=(c=this.delegate)&&c.inputControllerWillPaste(s),this.setInputSummary({textAdded:s.string,didDelete:this.selectionIsExpanded()}),null!=(g=this.responder)&&g.insertText(R.Text.textForStringWithAttributes(s.string,{href:s.href})),this.requestRender(),null!=(m=this.delegate)&&m.inputControllerDidPaste(s)):A(e)?(s.type="text/plain",s.string=e.getData("text/plain"),null!=(v=this.delegate)&&v.inputControllerWillPaste(s),this.setInputSummary({textAdded:s.string,didDelete:this.selectionIsExpanded()}),null!=(y=this.responder)&&y.insertString(s.string),this.requestRender(),null!=(b=this.delegate)&&b.inputControllerDidPaste(s)):(o=e.getData("text/html"))?(s.type="text/html",s.html=o,null!=(w=this.delegate)&&w.inputControllerWillPaste(s),null!=(x=this.responder)&&x.insertHTML(s.html),this.requestRender(),null!=(T=this.delegate)&&T.inputControllerDidPaste(s)):0<=_.call(e.types,"Files")&&(i=null!=(u=e.items)&&null!=(d=u[0])&&"function"==typeof d.getAsFile?d.getAsFile():void 0)&&(!i.name&&(n=C(i))&&(i.name="pasted-file-"+ ++E+"."+n),s.type="File",s.file=i,null!=(h=this.delegate)&&h.inputControllerWillAttachFiles(),null!=(p=this.responder)&&p.insertFile(s.file),this.requestRender(),null!=(f=this.delegate)&&f.inputControllerDidPaste(s)),t.preventDefault())},compositionstart:function(t){return this.getCompositionInput().start(t.data)},compositionupdate:function(t){return this.getCompositionInput().update(t.data)},compositionend:function(t){return this.getCompositionInput().end(t.data)},input:function(t){return t.stopPropagation()}},e.prototype.keys={backspace:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},"delete":function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},"return":function(){var t,e;return this.setInputSummary({preferDocument:!0}),null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),null!=(e=this.responder)?e.insertLineBreak():void 0},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canIncreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.increaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},right:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},control:{d:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},h:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},o:function(t){var e,n;return t.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n",{updatePosition:!1}),this.requestRender()}},shift:{"return":function(t){var e,n;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n"),this.requestRender(),t.preventDefault()},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canDecreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.decreaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("backward")):void 0},right:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("forward")):void 0}},alt:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}},meta:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}}},e.prototype.handleInput=function(t){var e,n;try{return null!=(e=this.delegate)&&e.inputControllerWillHandleInput(),t.call(this)}finally{null!=(n=this.delegate)&&n.inputControllerDidHandleInput()}},e.prototype.getCompositionInput=function(){return this.isComposing()?this.compositionInput:this.compositionInput=new R.CompositionInput(this)},e.prototype.isComposing=function(){return null!=this.compositionInput&&!this.compositionInput.isEnded()},e.prototype.deleteInDirection=function(t,e){var n;return!1!==(null!=(n=this.responder)?n.deleteInDirection(t):void 0)?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0},e.prototype.serializeSelectionToDataTransfer=function(t){var e,n;if(i(t))return e=null!=(n=this.responder)?n.getSelectedDocument().toSerializableDocument():void 0,t.setData("application/x-trix-document",JSON.stringify(e)),t.setData("text/html",R.DocumentView.render(e).innerHTML),t.setData("text/plain",e.toString().replace(/\n$/,"")),!0},e.prototype.canAcceptDataTransfer=function(t){var e,n,i,r,o;for(o={},e=0,n=(r=null!=(i=null!=t?t.types:void 0)?i:[]).length;e<n;e++)o[r[e]]=!0;return o.Files||o["application/x-trix-document"]||o["text/html"]||o["text/plain"]},e.prototype.getPastedHTMLUsingHiddenElement=function(e){var n,i,t,r;return i=this.getSelectedRange(),t={position:"absolute",left:window.pageXOffset+"px",top:window.pageYOffset+"px",opacity:0},n=l({style:t,tagName:"div",editable:!0}),document.body.appendChild(n),n.focus(),requestAnimationFrame((r=this,function(){var t;return t=n.innerHTML,document.body.removeChild(n),r.setSelectedRange(i),e(t)}))},e.proxyMethod("responder?.getSelectedRange"),e.proxyMethod("responder?.setSelectedRange"),e.proxyMethod("responder?.expandSelectionInDirection"),e.proxyMethod("responder?.selectionIsInCursorTarget"),e.proxyMethod("responder?.selectionIsExpanded"),e}(R.BasicObject),C=function(t){var e,n;return null!=(e=t.type)&&null!=(n=e.match(/\/(\w+)$/))?n[1]:void 0},r=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),d=function(t){var e;return t.key&&r&&t.key.codePointAt(0)===t.keyCode?t.key:(null===t.which?e=t.keyCode:0!==t.which&&0!==t.charCode&&(e=t.charCode),null!=e?R.UTF16String.fromCodepoints([e]).toString():void 0)},s=function(t){return t.metaKey&&t.altKey&&!t.shiftKey&&94===t.keyCode},a=function(t){return t.metaKey&&t.altKey&&t.shiftKey&&9674===t.keyCode},u=function(t){return/Mac|^iP/.test(navigator.platform)?t.metaKey:t.ctrlKey},k=function(t){var e,n,i,r,o,a,s,l,c;if(s=t.clipboardData){if(0<=_.call(s.types,"text/html")){for(i=0,a=(l=s.types).length;i<a;i++)if(c=l[i],e=/^CorePasteboardFlavorType/.test(c),n=/^dyn\./.test(c)&&s.getData(c),e||n)return!0;return!1}return r=0<=_.call(s.types,"com.apple.webarchive"),o=0<=_.call(s.types,"com.apple.flat-rtfd"),r||o}},A=function(t){var e,n,i;return i=t.getData("text/plain"),n=t.getData("text/html"),i&&n?((e=l("div")).innerHTML=n,e.textContent===i?!e.querySelector(":not(meta)"):void 0):null!=i?i.length:void 0},h={"application/x-trix-feature-detection":"test"},i=function(t){var e,n;if(null!=(null!=t?t.setData:void 0)){for(e in h)if(n=h[e],!function(){try{return t.setData(e,n),t.getData(e)===n}catch(C){}}())return;return!0}}}.call(this),function(){var o,a,i,s,l,t,r,c=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;a=R.handleEvent,l=R.makeElement,r=R.tagName,i=R.InputController.keyNames,t=R.config,s=t.lang,o=t.css,R.AttachmentEditorController=function(t){function e(t,e,n){this.attachmentPiece=t,this.element=e,this.container=n,this.didBlurCaption=c(this.didBlurCaption,this),this.didChangeCaption=c(this.didChangeCaption,this),this.didInputCaption=c(this.didInputCaption,this),this.didKeyDownCaption=c(this.didKeyDownCaption,this),this.didClickCaption=c(this.didClickCaption,this),this.didClickRemoveButton=c(this.didClickRemoveButton,this),this.attachment=this.attachmentPiece.attachment,"a"===r(this.element)&&(this.element=this.element.firstChild),this.install()}var n;return u(e,t),n=function(e){return function(){var t;return(t=e.apply(this,arguments))["do"](),null==this.undos&&(this.undos=[]),this.undos.push(t.undo)}},e.prototype.install=function(){return this.makeElementMutable(),this.attachment.isPreviewable()&&this.makeCaptionEditable(),this.addRemoveButton()},e.prototype.uninstall=function(){var t,e;for(this.savePendingCaption();e=this.undos.pop();)e();return null!=(t=this.delegate)?t.didUninstallAttachmentEditor(this):void 0},e.prototype.savePendingCaption=function(){var t,e,n;return null!=this.pendingCaption?(t=this.pendingCaption,this.pendingCaption=null,t?null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestUpdatingAttributesForAttachment?e.attachmentEditorDidRequestUpdatingAttributesForAttachment({caption:t},this.attachment):void 0:null!=(n=this.delegate)&&"function"==typeof n.attachmentEditorDidRequestRemovingAttributeForAttachment?n.attachmentEditorDidRequestRemovingAttributeForAttachment("caption",this.attachment):void 0):void 0},e.prototype.makeElementMutable=n(function(){return{"do":(e=this,function(){return e.element.dataset.trixMutable=!0}),undo:(t=this,function(){return delete t.element.dataset.trixMutable})};var t,e}),e.prototype.makeCaptionEditable=n(function(){var t,e,n;return t=this.element.querySelector("figcaption"),e=null,{"do":(n=this,function(){return e=a("click",{onElement:t,withCallback:n.didClickCaption,inPhase:"capturing"})}),undo:function(){return e.destroy()}}}),e.prototype.addRemoveButton=n(function(){var t,e,n;return t=l({tagName:"button",textContent:s.remove,className:o.attachmentRemove+" "+o.attachmentRemove+"--icon",attributes:{type:"button",title:s.remove},data:{trixMutable:!0}}),a("click",{onElement:t,withCallback:this.didClickRemoveButton}),{"do":(n=this,function(){return n.element.appendChild(t)}),undo:(e=this,function(){return e.element.removeChild(t)})}}),e.prototype.editCaption=n(function(){var t,e,n,i,r;return(i=l({tagName:"textarea",className:o.attachmentCaptionEditor,attributes:{placeholder:s.captionPlaceholder}})).value=this.attachmentPiece.getCaption(),(r=i.cloneNode()).classList.add("trix-autoresize-clone"),t=function(){return r.value=i.value,i.style.height=r.scrollHeight+"px"},a("keydown",{onElement:i,withCallback:this.didKeyDownCaption}),a("input",{onElement:i,withCallback:this.didInputCaption}),a("change",{onElement:i,withCallback:this.didChangeCaption}),a("blur",{onElement:i,withCallback:this.didBlurCaption}),n=this.element.querySelector("figcaption"),e=n.cloneNode(),{"do":function(){return n.style.display="none",e.appendChild(i),e.appendChild(r),e.classList.add(o.attachmentCaption+"--editing"),n.parentElement.insertBefore(e,n),t(),i.focus()},undo:function(){return e.parentNode.removeChild(e),n.style.display=null}}}),e.prototype.didClickRemoveButton=function(t){var e;return t.preventDefault(),t.stopPropagation(),null!=(e=this.delegate)?e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment):void 0},e.prototype.didClickCaption=function(t){return t.preventDefault(),this.editCaption()},e.prototype.didKeyDownCaption=function(t){var e;return"return"===i[t.keyCode]?(t.preventDefault(),this.savePendingCaption(),null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestDeselectingAttachment?e.attachmentEditorDidRequestDeselectingAttachment(this.attachment):void 0):void 0},e.prototype.didInputCaption=function(t){return this.pendingCaption=t.target.value.replace(/\s/g," ").trim()},e.prototype.didChangeCaption=function(){return this.savePendingCaption()},e.prototype.didBlurCaption=function(){return this.savePendingCaption()},e}(R.BasicObject)}.call(this),function(){var h,n,p,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;p=R.makeElement,h=R.config.css,R.AttachmentView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.attachment=this.object,(this.attachment.uploadProgressDelegate=this).attachmentPiece=this.options.piece}var d;return i(e,t),e.attachmentSelector="[data-trix-attachment]",e.prototype.createContentNodes=function(){return[]},e.prototype.createNodes=function(){var t,e,n,i,r,o,a,s,l,c,u;if(i=p({tagName:"figure",className:this.getClassName()}),this.attachment.hasContent())i.innerHTML=this.attachment.getContent();else for(o=0,s=(c=this.createContentNodes()).length;o<s;o++)l=c[o],i.appendChild(l);for(a in i.appendChild(this.createCaptionElement()),e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},(t=this.attachmentPiece.getAttributesForAttachment()).isEmpty()||(e.trixAttributes=JSON.stringify(t)),this.attachment.isPending()&&(this.progressElement=p({tagName:"progress",attributes:{"class":h.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),i.appendChild(this.progressElement),e.trixSerialize=!1),(r=this.getHref())?(n=p("a",{href:r,tabindex:-1})).appendChild(i):n=i,e)u=e[a],n.dataset[a]=u;return n.setAttribute("contenteditable",!1),[d("left"),n,d("right")]},e.prototype.createCaptionElement=function(){var t,e,n,i,r,o,a;return n=p({tagName:"figcaption",className:h.attachmentCaption}),(t=this.attachmentPiece.getCaption())?(n.classList.add(h.attachmentCaption+"--edited"),n.textContent=t):((e=this.getCaptionConfig()).name&&(i=this.attachment.getFilename()),e.size&&(o=this.attachment.getFormattedFilesize()),i&&(r=p({tagName:"span",className:h.attachmentName,textContent:i}),n.appendChild(r)),o&&(i&&n.appendChild(document.createTextNode(" ")),a=p({tagName:"span",className:h.attachmentSize,textContent:o}),n.appendChild(a))),n},e.prototype.getClassName=function(){var t,e;return e=[h.attachment,h.attachment+"--"+this.attachment.getType()],(t=this.attachment.getExtension())&&e.push(h.attachment+"--"+t),e.join(" ")},e.prototype.getHref=function(){return n(this.attachment.getContent(),"a")?void 0:this.attachment.getHref()},e.prototype.getCaptionConfig=function(){var t,e,n;return n=this.attachment.getType(),t=R.copyObject(null!=(e=R.config.attachments[n])?e.caption:void 0),"file"===n&&(t.name=!0),t},e.prototype.findProgressElement=function(){var t;return null!=(t=this.findElement())?t.querySelector("progress"):void 0},d=function(t){return p({tagName:"span",textContent:R.ZERO_WIDTH_SPACE,data:{trixCursorTarget:t,trixSerialize:!1}})},e.prototype.attachmentDidChangeUploadProgress=function(){var t,e;return e=this.attachment.getUploadProgress(),null!=(t=this.findProgressElement())?t.value=e:void 0},e}(R.ObjectView),n=function(t,e){var n;return(n=p("div")).innerHTML=null!=t?t:"",n.querySelector(e)}}.call(this),function(){var n,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;n=R.makeElement,R.PreviewableAttachmentView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.attachment.previewDelegate=this}return i(e,t),e.prototype.createContentNodes=function(){return this.image=n({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]},e.prototype.createCaptionElement=function(){var t;return(t=e.__super__.createCaptionElement.apply(this,arguments)).textContent||t.setAttribute("data-trix-placeholder",R.config.lang.captionPlaceholder),t},e.prototype.refresh=function(t){var e;return null==t&&(t=null!=(e=this.findElement())?e.querySelector("img"):void 0),t?this.updateAttributesForImage(t):void 0},e.prototype.updateAttributesForImage=function(t){var e,n,i,r,o,a;return o=this.attachment.getURL(),n=this.attachment.getPreviewURL(),t.src=n||o,n===o?t.removeAttribute("data-trix-serialized-attributes"):(i=JSON.stringify({src:o}),t.setAttribute("data-trix-serialized-attributes",i)),a=this.attachment.getWidth(),e=this.attachment.getHeight(),null!=a&&(t.width=a),null!=e&&(t.height=e),r=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/"),t.dataset.trixStoreKey=r},e.prototype.attachmentDidChangeAttributes=function(){return this.refresh(this.image),this.refresh()},e}(R.AttachmentView)}.call(this),function(){var a,c,u,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;u=R.makeElement,a=R.findInnerElement,c=R.getTextConfig,R.PieceView=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),t=this.options,this.textConfig=t.textConfig,this.context=t.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}var n;return i(e,t),e.prototype.createNodes=function(){var t,e,n,i,r,o;if(o=this.attachment?this.createAttachmentNodes():this.createStringNodes(),t=this.createElement()){for(n=a(t),e=0,i=o.length;e<i;e++)r=o[e],n.appendChild(r);o=[t]}return o},e.prototype.createAttachmentNodes=function(){var t;return t=this.attachment.isPreviewable()?R.PreviewableAttachmentView:R.AttachmentView,this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()},e.prototype.createStringNodes=function(){var t,e,n,i,r,o,a,s,l;if(null!=(a=this.textConfig)?a.plaintext:void 0)return[document.createTextNode(this.string)];for(o=[],n=e=0,i=(s=this.string.split("\n")).length;e<i;n=++e)l=s[n],0<n&&(t=u("br"),o.push(t)),l.length&&(r=document.createTextNode(this.preserveSpaces(l)),o.push(r));return o},e.prototype.createElement=function(){var t,e,n,i,r,o,a,s,l;for(i in s={},o=this.attributes)if(l=o[i],(t=c(i))&&(t.tagName&&(r=u(t.tagName),n?(n.appendChild(r),n=r):e=n=r),t.styleProperty&&(s[t.styleProperty]=l),t.style))for(i in a=t.style)l=a[i],s[i]=l;if(Object.keys(s).length)for(i in null==e&&(e=u("span")),s)l=s[i],e.style[i]=l;return e},e.prototype.createContainerElement=function(){var t,e,n,i,r;for(n in i=this.attributes)if(r=i[n],(e=c(n))&&e.groupTagName)return(t={})[n]=r,u(e.groupTagName,t)},n=R.NON_BREAKING_SPACE,e.prototype.preserveSpaces=function(t){return this.context.isLast&&(t=t.replace(/\ $/,n)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 "+n+" $2").replace(/\ {2}/g,n+" ").replace(/\ {2}/g," "+n),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,n)),t},e}(R.ObjectView)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.TextView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.text=this.object,this.textConfig=this.options.textConfig}var u;return n(e,t),e.prototype.createNodes=function(){var t,e,n,i,r,o,a,s,l,c;for(o=[],i=(s=R.ObjectGroup.groupObjects(this.getPieces())).length-1,n=e=0,r=s.length;e<r;n=++e)a=s[n],t={},0===n&&(t.isFirst=!0),n===i&&(t.isLast=!0),u(l)&&(t.followsWhitespace=!0),c=this.findOrCreateCachedChildView(R.PieceView,a,{textConfig:this.textConfig,context:t}),o.push.apply(o,c.getNodes()),l=a;return o},e.prototype.getPieces=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.text.getPieces()).length;t<e;t++)(n=i[t]).hasAttribute("blockBreak")||r.push(n);return r},u=function(t){return/\s$/.test(null!=t?t.toString():void 0)},e}(R.ObjectView)}.call(this),function(){var l,c,n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;c=R.makeElement,l=R.getBlockConfig,R.BlockView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.block=this.object,this.attributes=this.block.getAttributes()}return n(e,t),e.prototype.createNodes=function(){var t,e,n,i,r,o,a,s;if(r=[document.createComment("block")],this.block.isEmpty()?r.push(c("br")):(a=null!=(o=l(this.block.getLastAttribute()))?o.text:void 0,s=this.findOrCreateCachedChildView(R.TextView,this.block.text,{textConfig:a}),r.push.apply(r,s.getNodes()),this.shouldAddExtraNewlineElement()&&r.push(c("br"))),this.attributes.length)return r;for(t=c(R.config.blockAttributes["default"].tagName),e=0,n=r.length;e<n;e++)i=r[e],t.appendChild(i);return[t]},e.prototype.createContainerElement=function(t){var e,n;return e=this.attributes[t],n=l(e),c(n.tagName)},e.prototype.shouldAddExtraNewlineElement=function(){return/\n\n$/.test(this.block.toString())},e}(R.ObjectView)}.call(this),function(){var r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=R.defer,s=R.makeElement,R.DocumentView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.element=this.options.element,this.elementStore=new R.ElementStore,this.setDocument(this.object)}var n,u,i;return o(e,t),e.render=function(t){var e,n;return(n=new this(t,{element:e=s("div")})).render(),n.sync(),e},e.prototype.setDocument=function(t){return t.isEqualTo(this.document)?void 0:this.document=this.object=t},e.prototype.render=function(){var t,e,r,n,i,o,a;if(this.childViews=[],this.shadowElement=s("div"),!this.document.isEmpty()){for(o=[],t=0,e=(i=R.ObjectGroup.groupObjects(this.document.getBlocks(),{asTree:!0})).length;t<e;t++)n=i[t],a=this.findOrCreateCachedChildView(R.BlockView,n),o.push(function(){var t,e,n,i;for(i=[],t=0,e=(n=a.getNodes()).length;t<e;t++)r=n[t],i.push(this.shadowElement.appendChild(r));return i}.call(this));return o}},e.prototype.isSynced=function(){return n(this.shadowElement,this.element)},e.prototype.sync=function(){var t;for(t=this.createDocumentFragmentForSync();this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()},e.prototype.didSync=function(){return this.elementStore.reset(u(this.element)),r((t=this,function(){return t.garbageCollectCachedViews()}));var t},e.prototype.createDocumentFragmentForSync=function(){var t,e,n,i,r,o,a,s,l,c;for(e=document.createDocumentFragment(),n=0,r=(s=this.shadowElement.childNodes).length;n<r;n++)a=s[n],e.appendChild(a.cloneNode(!0));for(i=0,o=(l=u(e)).length;i<o;i++)t=l[i],(c=this.elementStore.remove(t))&&t.parentNode.replaceChild(c,t);return e},u=function(t){return t.querySelectorAll("[data-trix-store-key]")},n=function(t,e){return i(t.innerHTML)===i(e.innerHTML)},i=function(t){return t.replace(/&nbsp;/g," ")},e}(R.ObjectView)}.call(this),function(){var n,i,r,o,a=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;r=R.handleEvent,o=R.innerElementIsActive,i=R.defer,n=R.AttachmentView.attachmentSelector,R.CompositionController=function(t){function e(t,e){this.element=t,this.composition=e,this.didClickAttachment=a(this.didClickAttachment,this),this.didBlur=a(this.didBlur,this),this.didFocus=a(this.didFocus,this),this.documentView=new R.DocumentView(this.composition.document,{element:this.element}),r("focus",{onElement:this.element,withCallback:this.didFocus}),r("blur",{onElement:this.element,withCallback:this.didBlur}),r("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),r("mousedown",{onElement:this.element,matchingSelector:n,withCallback:this.didClickAttachment}),r("click",{onElement:this.element,matchingSelector:"a"+n,preventDefault:!0})}return s(e,t),e.prototype.didFocus=function(){var t,e,n,i;return t=function(){var t;return i.focused?void 0:(i.focused=!0,null!=(t=i.delegate)&&"function"==typeof t.compositionControllerDidFocus?t.compositionControllerDidFocus():void 0)},null!=(e=null!=(n=(i=this).blurPromise)?n.then(t):void 0)?e:t()},e.prototype.didBlur=function(){return this.blurPromise=new Promise((n=this,function(e){return i(function(){var t;return o(n.element)||(n.focused=null)!=(t=n.delegate)&&"function"==typeof t.compositionControllerDidBlur&&t.compositionControllerDidBlur(),n.blurPromise=null,e()})}));var n},e.prototype.didClickAttachment=function(t,e){var n,i;return n=this.findAttachmentForElement(e),null!=(i=this.delegate)&&"function"==typeof i.compositionControllerDidSelectAttachment?i.compositionControllerDidSelectAttachment(n):void 0},e.prototype.getSerializableElement=function(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element},e.prototype.render=function(){var t,e,n;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&(null!=(t=this.delegate)&&"function"==typeof t.compositionControllerWillSyncDocumentView&&t.compositionControllerWillSyncDocumentView(),this.documentView.sync(),null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidSyncDocumentView&&e.compositionControllerDidSyncDocumentView()),null!=(n=this.delegate)&&"function"==typeof n.compositionControllerDidRender?n.compositionControllerDidRender():void 0},e.prototype.rerenderViewForObject=function(t){return this.invalidateViewForObject(t),this.render()},e.prototype.invalidateViewForObject=function(t){return this.documentView.invalidateViewForObject(t)},e.prototype.isViewCachingEnabled=function(){return this.documentView.isViewCachingEnabled()},e.prototype.enableViewCaching=function(){return this.documentView.enableViewCaching()},e.prototype.disableViewCaching=function(){return this.documentView.disableViewCaching()},e.prototype.refreshViewCache=function(){return this.documentView.garbageCollectCachedViews()},e.prototype.isEditingAttachment=function(){return null!=this.attachmentEditor},e.prototype.installAttachmentEditorForAttachment=function(t){var e,n,i;if((null!=(i=this.attachmentEditor)?i.attachment:void 0)!==t&&(n=this.documentView.findElementForObject(t)))return this.uninstallAttachmentEditor(),e=this.composition.document.getAttachmentPieceForAttachment(t),this.attachmentEditor=new R.AttachmentEditorController(e,n,this.element),this.attachmentEditor.delegate=this},e.prototype.uninstallAttachmentEditor=function(){var t;return null!=(t=this.attachmentEditor)?t.uninstall():void 0},e.prototype.editAttachmentCaption=function(){var t;return null!=(t=this.attachmentEditor)?t.editCaption():void 0},e.prototype.didUninstallAttachmentEditor=function(){return this.attachmentEditor=null,this.render()},e.prototype.attachmentEditorDidRequestUpdatingAttributesForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.updateAttributesForAttachment(t,e)},e.prototype.attachmentEditorDidRequestRemovingAttributeForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.removeAttributeForAttachment(t,e)},e.prototype.attachmentEditorDidRequestRemovalOfAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestRemovalOfAttachment?e.compositionControllerDidRequestRemovalOfAttachment(t):void 0},e.prototype.attachmentEditorDidRequestDeselectingAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestDeselectingAttachment?e.compositionControllerDidRequestDeselectingAttachment(t):void 0},e.prototype.canSyncDocumentView=function(){return!this.isEditingAttachment()},e.prototype.findAttachmentForElement=function(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))},e}(R.BasicObject)}.call(this),function(){var p,f,g,m=function(t,e){return function(){return t.apply(e,arguments)}},v=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;f=R.handleEvent,g=R.triggerEvent,p=R.findClosestElementFromNode,R.ToolbarController=function(t){function e(t){this.element=t,this.didKeyDownDialogInput=m(this.didKeyDownDialogInput,this),this.didClickDialogButton=m(this.didClickDialogButton,this),this.didClickAttributeButton=m(this.didClickAttributeButton,this),this.didClickActionButton=m(this.didClickActionButton,this),this.attributes={},this.actions={},this.resetDialogInputs(),f("mousedown",{onElement:this.element,matchingSelector:a,withCallback:this.didClickActionButton}),f("mousedown",{onElement:this.element,matchingSelector:s,withCallback:this.didClickAttributeButton}),f("click",{onElement:this.element,matchingSelector:h,preventDefault:!0}),f("click",{onElement:this.element,matchingSelector:i,withCallback:this.didClickDialogButton}),f("keydown",{onElement:this.element,matchingSelector:o,withCallback:this.didKeyDownDialogInput})}var a,n,s,i,o,r,l,u,c,d,h;return v(e,t),h=(s="[data-trix-attribute]")+", "+(a="[data-trix-action]"),n=(r="[data-trix-dialog]")+"[data-trix-active]",i=r+" [data-trix-method]",o=r+" [data-trix-input]",e.prototype.didClickActionButton=function(t,e){var n,i,r;return null!=(i=this.delegate)&&i.toolbarDidClickButton(),t.preventDefault(),n=l(e),this.getDialog(n)?this.toggleDialog(n):null!=(r=this.delegate)?r.toolbarDidInvokeAction(n):void 0},e.prototype.didClickAttributeButton=function(t,e){var n,i,r;return null!=(i=this.delegate)&&i.toolbarDidClickButton(),t.preventDefault(),n=u(e),this.getDialog(n)?this.toggleDialog(n):null!=(r=this.delegate)&&r.toolbarDidToggleAttribute(n),this.refreshAttributeButtons()},e.prototype.didClickDialogButton=function(t,e){var n;return n=p(e,{matchingSelector:r}),this[e.getAttribute("data-trix-method")].call(this,n)},e.prototype.didKeyDownDialogInput=function(t,e){var n,i;return 13===t.keyCode&&(t.preventDefault(),n=e.getAttribute("name"),i=this.getDialog(n),this.setAttribute(i)),27===t.keyCode?(t.preventDefault(),this.hideDialog()):void 0},e.prototype.updateActions=function(t){return this.actions=t,this.refreshActionButtons()},e.prototype.refreshActionButtons=function(){return this.eachActionButton((n=this,function(t,e){return t.disabled=!1===n.actions[e]}));var n},e.prototype.eachActionButton=function(t){var e,n,i,r,o;for(o=[],n=0,i=(r=this.element.querySelectorAll(a)).length;n<i;n++)e=r[n],o.push(t(e,l(e)));return o},e.prototype.updateAttributes=function(t){return this.attributes=t,this.refreshAttributeButtons()},e.prototype.refreshAttributeButtons=function(){return this.eachAttributeButton((n=this,function(t,e){return t.disabled=!1===n.attributes[e],n.attributes[e]||n.dialogIsVisible(e)?(t.setAttribute("data-trix-active",""),t.classList.add("trix-active")):(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"))}));var n},e.prototype.eachAttributeButton=function(t){var e,n,i,r,o;for(o=[],n=0,i=(r=this.element.querySelectorAll(s)).length;n<i;n++)e=r[n],o.push(t(e,u(e)));return o},e.prototype.applyKeyboardCommand=function(t){var e,n,i,r,o,a;for(r=JSON.stringify(t.sort()),i=0,o=(a=this.element.querySelectorAll("[data-trix-key]")).length;i<o;i++)if(n=(e=a[i]).getAttribute("data-trix-key").split("+"),JSON.stringify(n.sort())===r)return g("mousedown",{onElement:e}),!0;return!1},e.prototype.dialogIsVisible=function(t){var e;return(e=this.getDialog(t))?e.hasAttribute("data-trix-active"):void 0},e.prototype.toggleDialog=function(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)},e.prototype.showDialog=function(t){var e,n,i,r,o,a,s,l,c;for(this.hideDialog(),null!=(a=this.delegate)&&a.toolbarWillShowDialog(),(n=this.getDialog(t)).setAttribute("data-trix-active",""),n.classList.add("trix-active"),i=0,o=(s=n.querySelectorAll("input[disabled]")).length;i<o;i++)s[i].removeAttribute("disabled");return(e=u(n))&&(r=d(n,t))&&(r.value=null!=(l=this.attributes[e])?l:"",r.select()),null!=(c=this.delegate)?c.toolbarDidShowDialog(t):void 0},e.prototype.setAttribute=function(t){var e,n,i;return e=u(t),(n=d(t,e)).willValidate&&!n.checkValidity()?(n.setAttribute(
"data-trix-validate",""),n.classList.add("trix-validate"),n.focus()):(null!=(i=this.delegate)&&i.toolbarDidUpdateAttribute(e,n.value),this.hideDialog())},e.prototype.removeAttribute=function(t){var e,n;return e=u(t),null!=(n=this.delegate)&&n.toolbarDidRemoveAttribute(e),this.hideDialog()},e.prototype.hideDialog=function(){var t,e;return(t=this.element.querySelector(n))?(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),null!=(e=this.delegate)?e.toolbarDidHideDialog(c(t)):void 0):void 0},e.prototype.resetDialogInputs=function(){var t,e,n,i,r;for(r=[],t=0,n=(i=this.element.querySelectorAll(o)).length;t<n;t++)(e=i[t]).setAttribute("disabled","disabled"),e.removeAttribute("data-trix-validate"),r.push(e.classList.remove("trix-validate"));return r},e.prototype.getDialog=function(t){return this.element.querySelector("[data-trix-dialog="+t+"]")},d=function(t,e){return null==e&&(e=u(t)),t.querySelector("[data-trix-input][name='"+e+"']")},l=function(t){return t.getAttribute("data-trix-action")},u=function(t){var e;return null!=(e=t.getAttribute("data-trix-attribute"))?e:t.getAttribute("data-trix-dialog-attribute")},c=function(t){return t.getAttribute("data-trix-dialog")},e}(R.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.ImagePreloadOperation=function(t){function e(t){this.url=t}return n(e,t),e.prototype.perform=function(t){var e,n;return(e=new Image).onload=(n=this,function(){return e.width=n.width=e.naturalWidth,e.height=n.height=e.naturalHeight,t(!0,e)}),e.onerror=function(){return t(!1)},e.src=this.url},e}(R.Operation)}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Attachment=function(t){function e(t){null==t&&(t={}),this.releaseFile=n(this.releaseFile,this),e.__super__.constructor.apply(this,arguments),this.attributes=R.Hash.box(t),this.didChangeAttributes()}return i(e,t),e.previewablePattern=/^image(\/(gif|png|jpe?g)|$)/,e.attachmentForFile=function(t){var e;return(e=new this(this.attributesForFile(t))).setFile(t),e},e.attributesForFile=function(t){return new R.Hash({filename:t.name,filesize:t.size,contentType:t.type})},e.fromJSON=function(t){return new this(t)},e.prototype.getAttribute=function(t){return this.attributes.get(t)},e.prototype.hasAttribute=function(t){return this.attributes.has(t)},e.prototype.getAttributes=function(){return this.attributes.toObject()},e.prototype.setAttributes=function(t){var e,n,i;return null==t&&(t={}),e=this.attributes.merge(t),this.attributes.isEqualTo(e)?void 0:(this.attributes=e,this.didChangeAttributes(),null!=(n=this.previewDelegate)&&"function"==typeof n.attachmentDidChangeAttributes&&n.attachmentDidChangeAttributes(this),null!=(i=this.delegate)&&"function"==typeof i.attachmentDidChangeAttributes?i.attachmentDidChangeAttributes(this):void 0)},e.prototype.didChangeAttributes=function(){return this.isPreviewable()?this.preloadURL():void 0},e.prototype.isPending=function(){return null!=this.file&&!(this.getURL()||this.getHref())},e.prototype.isPreviewable=function(){return this.attributes.has("previewable")?this.attributes.get("previewable"):this.constructor.previewablePattern.test(this.getContentType())},e.prototype.getType=function(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"},e.prototype.getURL=function(){return this.attributes.get("url")},e.prototype.getHref=function(){return this.attributes.get("href")},e.prototype.getFilename=function(){var t;return null!=(t=this.attributes.get("filename"))?t:""},e.prototype.getFilesize=function(){return this.attributes.get("filesize")},e.prototype.getFormattedFilesize=function(){var t;return"number"==typeof(t=this.attributes.get("filesize"))?R.config.fileSize.formatter(t):""},e.prototype.getExtension=function(){var t;return null!=(t=this.getFilename().match(/\.(\w+)$/))?t[1].toLowerCase():void 0},e.prototype.getContentType=function(){return this.attributes.get("contentType")},e.prototype.hasContent=function(){return this.attributes.has("content")},e.prototype.getContent=function(){return this.attributes.get("content")},e.prototype.getWidth=function(){return this.attributes.get("width")},e.prototype.getHeight=function(){return this.attributes.get("height")},e.prototype.getFile=function(){return this.file},e.prototype.setFile=function(t){return this.file=t,this.isPreviewable()?this.preloadFile():void 0},e.prototype.releaseFile=function(){return this.releasePreloadedFile(),this.file=null},e.prototype.getUploadProgress=function(){var t;return null!=(t=this.uploadProgress)?t:0},e.prototype.setUploadProgress=function(t){var e;return this.uploadProgress!==t?(this.uploadProgress=t,null!=(e=this.uploadProgressDelegate)&&"function"==typeof e.attachmentDidChangeUploadProgress?e.attachmentDidChangeUploadProgress(this):void 0):void 0},e.prototype.toJSON=function(){return this.getAttributes()},e.prototype.getCacheKey=function(){return[e.__super__.getCacheKey.apply(this,arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")},e.prototype.getPreviewURL=function(){return this.previewURL||this.preloadingURL},e.prototype.setPreviewURL=function(t){var e,n;return t!==this.getPreviewURL()?(this.previewURL=t,null!=(e=this.previewDelegate)&&"function"==typeof e.attachmentDidChangeAttributes&&e.attachmentDidChangeAttributes(this),null!=(n=this.delegate)&&"function"==typeof n.attachmentDidChangePreviewURL?n.attachmentDidChangePreviewURL(this):void 0):void 0},e.prototype.preloadURL=function(){return this.preload(this.getURL(),this.releaseFile)},e.prototype.preloadFile=function(){return this.file?(this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)):void 0},e.prototype.releasePreloadedFile=function(){return this.fileObjectURL?(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null):void 0},e.prototype.preload=function(i,r){var o;return i&&i!==this.getPreviewURL()?(this.preloadingURL=i,new R.ImagePreloadOperation(i).then((o=this,function(t){var e,n;return n=t.width,e=t.height,o.setAttributes({width:n,height:e}),o.preloadingURL=null,o.setPreviewURL(i),"function"==typeof r?r():void 0}))):void 0},e}(R.Object)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Piece=function(t){function n(t,e){null==e&&(e={}),n.__super__.constructor.apply(this,arguments),this.attributes=R.Hash.box(e)}return e(n,t),n.types={},n.registerType=function(t,e){return e.type=t,this.types[t]=e},n.fromJSON=function(t){var e;return(e=this.types[t.type])?e.fromJSON(t):void 0},n.prototype.copyWithAttributes=function(t){return new this.constructor(this.getValue(),t)},n.prototype.copyWithAdditionalAttributes=function(t){return this.copyWithAttributes(this.attributes.merge(t))},n.prototype.copyWithoutAttribute=function(t){return this.copyWithAttributes(this.attributes.remove(t))},n.prototype.copy=function(){return this.copyWithAttributes(this.attributes)},n.prototype.getAttribute=function(t){return this.attributes.get(t)},n.prototype.getAttributesHash=function(){return this.attributes},n.prototype.getAttributes=function(){return this.attributes.toObject()},n.prototype.getCommonAttributes=function(){var e,n,t;return(t=pieceList.getPieceAtIndex(0))?(e=t.attributes,n=e.getKeys(),pieceList.eachPiece(function(t){return n=e.getKeysCommonToHash(t.attributes),e=e.slice(n)}),e.toObject()):{}},n.prototype.hasAttribute=function(t){return this.attributes.has(t)},n.prototype.hasSameStringValueAsPiece=function(t){return null!=t&&this.toString()===t.toString()},n.prototype.hasSameAttributesAsPiece=function(t){return null!=t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))},n.prototype.isBlockBreak=function(){return!1},n.prototype.isEqualTo=function(t){return n.__super__.isEqualTo.apply(this,arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)},n.prototype.isEmpty=function(){return 0===this.length},n.prototype.isSerializable=function(){return!0},n.prototype.toJSON=function(){return{type:this.constructor.type,attributes:this.getAttributes()}},n.prototype.contentsForInspection=function(){return{type:this.constructor.type,attributes:this.attributes.inspect()}},n.prototype.canBeGrouped=function(){return this.hasAttribute("href")},n.prototype.canBeGroupedWith=function(t){return this.getAttribute("href")===t.getAttribute("href")},n.prototype.getLength=function(){return this.length},n.prototype.canBeConsolidatedWith=function(){return!1},n}(R.Object)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Piece.registerType("attachment",R.AttachmentPiece=function(t){function n(t){this.attachment=t,n.__super__.constructor.apply(this,arguments),this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href")}return e(n,t),n.fromJSON=function(t){return new this(R.Attachment.fromJSON(t.attachment),t.attributes)},n.prototype.ensureAttachmentExclusivelyHasAttribute=function(t){return this.hasAttribute(t)&&this.attachment.hasAttribute(t)?this.attributes=this.attributes.remove(t):void 0},n.prototype.getValue=function(){return this.attachment},n.prototype.isSerializable=function(){return!this.attachment.isPending()},n.prototype.getCaption=function(){var t;return null!=(t=this.attributes.get("caption"))?t:""},n.prototype.getAttributesForAttachment=function(){return this.attributes.slice(["caption"])},n.prototype.canBeGrouped=function(){return n.__super__.canBeGrouped.apply(this,arguments)&&!this.attachment.hasAttribute("href")},n.prototype.isEqualTo=function(t){var e;return n.__super__.isEqualTo.apply(this,arguments)&&this.attachment.id===(null!=t&&null!=(e=t.attachment)?e.id:void 0)},n.prototype.toString=function(){return R.OBJECT_REPLACEMENT_CHARACTER},n.prototype.toJSON=function(){var t;return(t=n.__super__.toJSON.apply(this,arguments)).attachment=this.attachment,t},n.prototype.getCacheKey=function(){return[n.__super__.getCacheKey.apply(this,arguments),this.attachment.getCacheKey()].join("/")},n.prototype.toConsole=function(){return JSON.stringify(this.toString())},n}(R.Piece))}.call(this),function(){var n,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;n=R.normalizeNewlines,R.Piece.registerType("string",R.StringPiece=function(t){function e(t){e.__super__.constructor.apply(this,arguments),this.string=n(t),this.length=this.string.length}return i(e,t),e.fromJSON=function(t){return new this(t.string,t.attributes)},e.prototype.getValue=function(){return this.string},e.prototype.toString=function(){return this.string.toString()},e.prototype.isBlockBreak=function(){return"\n"===this.toString()&&!0===this.getAttribute("blockBreak")},e.prototype.toJSON=function(){var t;return(t=e.__super__.toJSON.apply(this,arguments)).string=this.string,t},e.prototype.canBeConsolidatedWith=function(t){return null!=t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)},e.prototype.consolidateWith=function(t){return new this.constructor(this.toString()+t.toString(),this.attributes)},e.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.length?(e=this,n=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),n=new this.constructor(this.string.slice(t),this.attributes)),[e,n]},e.prototype.toConsole=function(){var t;return 15<(t=this.string).length&&(t=t.slice(0,14)+"\u2026"),JSON.stringify(t.toString())},e}(R.Piece))}.call(this),function(){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,l=[].slice;i=R.spliceArray,R.SplittableList=function(t){function e(t){null==t&&(t=[]),e.__super__.constructor.apply(this,arguments),this.objects=t.slice(0),this.length=this.objects.length}var a,n,s;return r(e,t),e.box=function(t){return t instanceof this?t:new this(t)},e.prototype.indexOf=function(t){return this.objects.indexOf(t)},e.prototype.splice=function(){var t;return t=1<=arguments.length?l.call(arguments,0):[],new this.constructor(i.apply(null,[this.objects].concat(l.call(t))))},e.prototype.eachObject=function(t){var e,n,i,r,o,a;for(a=[],n=e=0,i=(o=this.objects).length;e<i;n=++e)r=o[n],a.push(t(r,n));return a},e.prototype.insertObjectAtIndex=function(t,e){return this.splice(e,0,t)},e.prototype.insertSplittableListAtIndex=function(t,e){return this.splice.apply(this,[e,0].concat(l.call(t.objects)))},e.prototype.insertSplittableListAtPosition=function(t,e){var n,i,r;return i=(r=this.splitObjectAtPosition(e))[0],n=r[1],new this.constructor(i).insertSplittableListAtIndex(t,n)},e.prototype.editObjectAtIndex=function(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)},e.prototype.replaceObjectAtIndex=function(t,e){return this.splice(e,1,t)},e.prototype.removeObjectAtIndex=function(t){return this.splice(t,1)},e.prototype.getObjectAtIndex=function(t){return this.objects[t]},e.prototype.getSplittableListInRange=function(t){var e,n,i,r;return n=(i=this.splitObjectsAtRange(t))[0],e=i[1],r=i[2],new this.constructor(n.slice(e,r+1))},e.prototype.selectSplittableList=function(r){var o,t;return t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.objects).length;t<e;t++)o=n[t],r(o)&&i.push(o);return i}.call(this),new this.constructor(t)},e.prototype.removeObjectsInRange=function(t){var e,n,i,r;return n=(i=this.splitObjectsAtRange(t))[0],e=i[1],r=i[2],new this.constructor(n).splice(e,r-e+1)},e.prototype.transformObjectsInRange=function(t,i){var r,o,a,s,e,l,n;return e=this.splitObjectsAtRange(t),s=e[0],o=e[1],l=e[2],n=function(){var t,e,n;for(n=[],r=t=0,e=s.length;t<e;r=++t)a=s[r],n.push(o<=r&&r<=l?i(a):a);return n}(),new this.constructor(n)},e.prototype.splitObjectsAtRange=function(t){var e,n,i,r,o;return n=(r=this.splitObjectAtPosition(s(t)))[0],e=r[1],i=r[2],[n=(o=new this.constructor(n).splitObjectAtPosition(a(t)+i))[0],e,o[1]-1]},e.prototype.getObjectAtPosition=function(t){var e,n;return e=(n=this.findIndexAndOffsetAtPosition(t)).index,n.offset,this.objects[e]},e.prototype.splitObjectAtPosition=function(t){var e,n,i,r,o,a,s,l,c;return e=(o=this.findIndexAndOffsetAtPosition(t)).index,r=o.offset,i=this.objects.slice(0),null!=e?0===r?(l=e,c=0):(n=(a=this.getObjectAtIndex(e).splitAtOffset(r))[0],s=a[1],i.splice(e,1,n,s),l=e+1,c=n.getLength()-r):(l=i.length,c=0),[i,l,c]},e.prototype.consolidate=function(){var t,e,n,i,r,o;for(i=[],r=this.objects[0],t=0,e=(o=this.objects.slice(1)).length;t<e;t++)n=o[t],("function"==typeof r.canBeConsolidatedWith?r.canBeConsolidatedWith(n):void 0)?r=r.consolidateWith(n):(i.push(r),r=n);return null!=r&&i.push(r),new this.constructor(i)},e.prototype.consolidateFromIndexToIndex=function(t,e){var n,i;return i=this.objects.slice(0).slice(t,e+1),n=new this.constructor(i).consolidate().toArray(),this.splice.apply(this,[t,i.length].concat(l.call(n)))},e.prototype.findIndexAndOffsetAtPosition=function(t){var e,n,i,r,o,a;for(i=n=e=0,r=(a=this.objects).length;n<r;i=++n){if(o=e+a[i].getLength(),e<=t&&t<o)return{index:i,offset:t-e};e=o}return{index:null,offset:null}},e.prototype.findPositionAtIndexAndOffset=function(t,e){var n,i,r,o,a,s;for(n=i=a=0,r=(s=this.objects).length;i<r;n=++i)if(o=s[n],n<t)a+=o.getLength();else if(n===t){a+=e;break}return a},e.prototype.getEndPosition=function(){var i,r;return null!=this.endPosition?this.endPosition:this.endPosition=function(){var t,e,n;for(t=r=0,e=(n=this.objects).length;t<e;t++)i=n[t],r+=i.getLength();return r}.call(this)},e.prototype.toString=function(){return this.objects.join("")},e.prototype.toArray=function(){return this.objects.slice(0)},e.prototype.toJSON=function(){return this.toArray()},e.prototype.isEqualTo=function(t){return e.__super__.isEqualTo.apply(this,arguments)||n(this.objects,null!=t?t.objects:void 0)},n=function(t,e){var n,i,r,o,a;if(null==e&&(e=[]),t.length!==e.length)return!1;for(a=!0,i=n=0,r=t.length;n<r;i=++n)o=t[i],a&&!o.isEqualTo(e[i])&&(a=!1);return a},e.prototype.contentsForInspection=function(){var r;return{objects:"["+function(){var t,e,n,i;for(i=[],t=0,e=(n=this.objects).length;t<e;t++)r=n[t],i.push(r.inspect());return i}.call(this).join(", ")+"]"}},s=function(t){return t[0]},a=function(t){return t[1]},e}(R.Object)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.Text=function(t){function n(i){var r;null==i&&(i=[]),n.__super__.constructor.apply(this,arguments),this.pieceList=new R.SplittableList(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)(r=i[t]).isEmpty()||n.push(r);return n}())}return e(n,t),n.textForAttachmentWithAttributes=function(t,e){return new this([new R.AttachmentPiece(t,e)])},n.textForStringWithAttributes=function(t,e){return new this([new R.StringPiece(t,e)])},n.fromJSON=function(i){var r;return new this(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(R.Piece.fromJSON(r));return n}())},n.prototype.copy=function(){return this.copyWithPieceList(this.pieceList)},n.prototype.copyWithPieceList=function(t){return new this.constructor(t.consolidate().toArray())},n.prototype.copyUsingObjectMap=function(o){var a,t;return t=function(){var t,e,n,i,r;for(r=[],t=0,e=(n=this.getPieces()).length;t<e;t++)a=n[t],r.push(null!=(i=o.find(a))?i:a);return r}.call(this),new this.constructor(t)},n.prototype.appendText=function(t){return this.insertTextAtPosition(t,this.getLength())},n.prototype.insertTextAtPosition=function(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))},n.prototype.removeTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))},n.prototype.replaceTextAtRange=function(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])},n.prototype.moveTextFromRangeToPosition=function(t,e){var n,i;if(!(t[0]<=e&&e<=t[1]))return n=(i=this.getTextAtRange(t)).getLength(),t[0]<e&&(e-=n),this.removeTextAtRange(t).insertTextAtPosition(i,e)},n.prototype.addAttributeAtRange=function(t,e,n){var i;return(i={})[t]=e,this.addAttributesAtRange(i,n)},n.prototype.addAttributesAtRange=function(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,function(t){return t.copyWithAdditionalAttributes(e)}))},n.prototype.removeAttributeAtRange=function(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,function(t){return t.copyWithoutAttribute(e)}))},n.prototype.setAttributesAtRange=function(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,function(t){return t.copyWithAttributes(e)}))},n.prototype.getAttributesAtPosition=function(t){var e,n;return null!=(e=null!=(n=this.pieceList.getObjectAtPosition(t))?n.getAttributes():void 0)?e:{}},n.prototype.getCommonAttributes=function(){var t,r;return t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.pieceList.toArray()).length;t<e;t++)r=n[t],i.push(r.getAttributes());return i}.call(this),R.Hash.fromCommonAttributesOfObjects(t).toObject()},n.prototype.getCommonAttributesAtRange=function(t){var e;return null!=(e=this.getTextAtRange(t).getCommonAttributes())?e:{}},n.prototype.getExpandedRangeForAttributeAtOffset=function(t,e){var n,i,r;for(n=r=e,i=this.getLength();0<n&&this.getCommonAttributesAtRange([n-1,r])[t];)n--;for(;r<i&&this.getCommonAttributesAtRange([e,r+1])[t];)r++;return[n,r]},n.prototype.getTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))},n.prototype.getStringAtRange=function(t){return this.pieceList.getSplittableListInRange(t).toString()},n.prototype.getStringAtPosition=function(t){return this.getStringAtRange([t,t+1])},n.prototype.startsWithString=function(t){return this.getStringAtRange([0,t.length])===t},n.prototype.endsWithString=function(t){var e;return e=this.getLength(),this.getStringAtRange([e-t.length,e])===t},n.prototype.getAttachmentPieces=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.pieceList.toArray()).length;t<e;t++)null!=(n=i[t]).attachment&&r.push(n);return r},n.prototype.getAttachments=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.getAttachmentPieces()).length;t<e;t++)n=i[t],r.push(n.attachment);return r},n.prototype.getAttachmentAndPositionById=function(t){var e,n,i,r,o,a;for(e=r=0,n=(o=this.pieceList.toArray()).length;e<n;e++){if((null!=(a=(i=o[e]).attachment)?a.id:void 0)===t)return{attachment:i.attachment,position:r};r+=i.length}return{attachment:null,position:null}},n.prototype.getAttachmentById=function(t){var e,n;return e=(n=this.getAttachmentAndPositionById(t)).attachment,n.position,e},n.prototype.getRangeOfAttachment=function(t){var e,n;return t=(n=this.getAttachmentAndPositionById(t.id)).attachment,e=n.position,null!=t?[e,e+1]:void 0},n.prototype.updateAttributesForAttachment=function(t,e){var n;return(n=this.getRangeOfAttachment(e))?this.addAttributesAtRange(t,n):this},n.prototype.getLength=function(){return this.pieceList.getEndPosition()},n.prototype.isEmpty=function(){return 0===this.getLength()},n.prototype.isEqualTo=function(t){var e;return n.__super__.isEqualTo.apply(this,arguments)||(null!=t&&null!=(e=t.pieceList)?e.isEqualTo(this.pieceList):void 0)},n.prototype.isBlockBreak=function(){return 1===this.getLength()&&this.pieceList.getObjectAtIndex(0).isBlockBreak()},n.prototype.eachPiece=function(t){return this.pieceList.eachObject(t)},n.prototype.getPieces=function(){return this.pieceList.toArray()},n.prototype.getPieceAtPosition=function(t){return this.pieceList.getObjectAtPosition(t)},n.prototype.contentsForInspection=function(){return{pieceList:this.pieceList.inspect()}},n.prototype.toSerializableText=function(){var t;return t=this.pieceList.selectSplittableList(function(t){return t.isSerializable()}),this.copyWithPieceList(t)},n.prototype.toString=function(){return this.pieceList.toString()},n.prototype.toJSON=function(){return this.pieceList.toJSON()},n.prototype.toConsole=function(){var r;return JSON.stringify(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.pieceList.toArray()).length;t<e;t++)r=n[t],i.push(JSON.parse(r.toConsole()));return i}.call(this))},n}(R.Object)}.call(this),function(){var d,h,p,f,g=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,m=[].slice,v=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};d=R.arraysAreEqual,f=R.spliceArray,h=R.getBlockConfig,R.getBlockAttributeNames,p=R.getListAttributeNames,R.Block=function(t){function n(t,e){null==t&&(t=new R.Text),null==e&&(e=[]),n.__super__.constructor.apply(this,arguments),this.text=i(t),this.attributes=e}var e,i,r,o,a,s,l,c,u;return g(n,t),n.fromJSON=function(t){return new this(R.Text.fromJSON(t.text),t.attributes)},n.prototype.isEmpty=function(){return this.text.isBlockBreak()},n.prototype.isEqualTo=function(t){return n.__super__.isEqualTo.apply(this,arguments)||this.text.isEqualTo(null!=t?t.text:void 0)&&d(this.attributes,null!=t?t.attributes:void 0)},n.prototype.copyWithText=function(t){return new this.constructor(t,this.attributes)},n.prototype.copyWithoutText=function(){return this.copyWithText(null)},n.prototype.copyWithAttributes=function(t){return new this.constructor(this.text,t)},n.prototype.copyUsingObjectMap=function(t){var e;return this.copyWithText((e=t.find(this.text))?e:this.text.copyUsingObjectMap(t))},n.prototype.addAttribute=function(t){var e;return e=this.attributes.concat(o(t)),this.copyWithAttributes(e)},n.prototype.removeAttribute=function(t){var e,n;return n=h(t).listAttribute,e=s(s(this.attributes,t),n),this.copyWithAttributes(e)},n.prototype.removeLastAttribute=function(){return this.removeAttribute(this.getLastAttribute())},n.prototype.getLastAttribute=function(){return a(this.attributes)},n.prototype.getAttributes=function(){return this.attributes.slice(0)},n.prototype.getAttributeLevel=function(){return this.attributes.length},n.prototype.getAttributeAtLevel=function(t){return this.attributes[t-1]},n.prototype.hasAttributes=function(){return 0<this.getAttributeLevel()},n.prototype.getLastNestableAttribute=function(){return a(this.getNestableAttributes())},n.prototype.getNestableAttributes=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.attributes).length;e<n;e++)t=i[e],h(t).nestable&&r.push(t);return r},n.prototype.getNestingLevel=function(){return this.getNestableAttributes().length},n.prototype.decreaseNestingLevel=function(){var t;return(t=this.getLastNestableAttribute())?this.removeAttribute(t):this},n.prototype.increaseNestingLevel=function(){var t,e,n;return(t=this.getLastNestableAttribute())?(n=this.attributes.lastIndexOf(t),e=f.apply(null,[this.attributes,n+1,0].concat(m.call(o(t)))),this.copyWithAttributes(e)):this},n.prototype.getListItemAttributes=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.attributes).length;e<n;e++)t=i[e],h(t).listAttribute&&r.push(t);return r},n.prototype.isListItem=function(){var t;return null!=(t=h(this.getLastAttribute()))?t.listAttribute:void 0},n.prototype.isTerminalBlock=function(){var t;return null!=(t=h(this.getLastAttribute()))?t.terminal:void 0},n.prototype.breaksOnReturn=function(){var t;return null!=(t=h(this.getLastAttribute()))?t.breakOnReturn:void 0},n.prototype.findLineBreakInDirectionFromPosition=function(t,e){var n,i;return i=this.toString(),-1!==(n=function(){switch(t){case"forward":return i.indexOf("\n",e);case"backward":return i.slice(0,e).lastIndexOf("\n")}}())?n:void 0},n.prototype.contentsForInspection=function(){return{text:this.text.inspect(),attributes:this.attributes}},n.prototype.toString=function(){return this.text.toString()},n.prototype.toJSON=function(){return{text:this.text,attributes:this.attributes}},n.prototype.getLength=function(){return this.text.getLength()},n.prototype.canBeConsolidatedWith=function(t){return!this.hasAttributes()&&!t.hasAttributes()},n.prototype.consolidateWith=function(t){var e,n;return e=R.Text.textForStringWithAttributes("\n"),n=this.getTextWithoutBlockBreak().appendText(e),this.copyWithText(n.appendText(t.text))},n.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.getLength()?(e=this,n=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),n=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,n]},n.prototype.getBlockBreakPosition=function(){return this.text.getLength()-1},n.prototype.getTextWithoutBlockBreak=function(){return l(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()},n.prototype.canBeGrouped=function(t){return this.attributes[t]},n.prototype.canBeGroupedWith=function(t,e){var n,i,r,o;return i=(r=t.getAttributes())[e],(n=this.attributes[e])===i&&!(!1===h(n).group&&(o=r[e+1],v.call(p(),o)<0))},i=function(t){return t=u(t),e(t)},u=function(t){var e,i,n,r,o,a;return r=!1,a=t.getPieces(),i=2<=a.length?m.call(a,0,e=a.length-1):(e=0,[]),null==(n=a[e++])?t:(i=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)(o=i[t]).isBlockBreak()?(r=!0,n.push(c(o))):n.push(o);return n}(),r?new R.Text(m.call(i).concat([n])):t)},r=R.Text.textForStringWithAttributes("\n",{blockBreak:!0}),e=function(t){return l(t)?t:t.appendText(r)},l=function(t){var e;return 0!==(e=t.getLength())&&t.getTextAtRange([e-1,e]).isBlockBreak()},c=function(t){return t.copyWithoutAttribute("blockBreak")},o=function(t){var e;return null!=(e=h(t).listAttribute)?[e,t]:[t]},a=function(t){return t.slice(-1)[0]},s=function(t,e){var n;return-1===(n=t.lastIndexOf(e))?t:f(t,n,1)},n}(R.Object)}.call(this),function(){var r,a,s,l=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,c=[].slice,u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};a=R.tagName,s=R.walkTree,r=R.nodeIsAttachmentElement,R.HTMLSanitizer=function(t){function e(t,e){this.allowedAttributes=(null!=e?e:{}).allowedAttributes,null==this.allowedAttributes&&(this.allowedAttributes=n),this.body=i(t)}var n,i,o;return l(e,t),n="style href src width height class".split(" "),e.sanitize=function(t,e){var n;return(n=new this(t,e)).sanitize(),n},e.prototype.sanitize=function(){return this.sanitizeElements()},e.prototype.getHTML=function(){return this.body.innerHTML},e.prototype.getBody=function(){return this.body},e.prototype.sanitizeElements=function(){var t,e,n,i,r;for(r=s(this.body),i=[];r.nextNode();)switch(n=r.currentNode,n.nodeType){case Node.ELEMENT_NODE:o(n)?i.push(n):this.sanitizeElement(n);break;case Node.COMMENT_NODE:i.push(n)}for(t=0,e=i.length;t<e;t++)(n=i[t]).parentNode.removeChild(n);return this.body},e.prototype.sanitizeElement=function(t){var e,n,i,r;for(e=0,n=(r=c.call(t.attributes)).length;e<n;e++)i=r[e].name,0<=u.call(this.allowedAttributes,i)||0===i.indexOf("data-trix")||t.removeAttribute(i);return t},o=function(t){return(null!=t?t.nodeType:void 0)!==Node.ELEMENT_NODE||r(t)?void 0:"script"===a(t)||"false"===t.getAttribute("data-trix-serialize")},i=function(t){var e,n,i,r,o;for(null==t&&(t=""),t=t.replace(/<\/html[^>]*>[^]*$/i,"</html>"),(e=document.implementation.createHTMLDocument("")).documentElement.innerHTML=t,i=0,r=(o=e.head.querySelectorAll("style")).length;i<r;i++)n=o[i],e.body.appendChild(n);return e.body},e}(R.BasicObject)}.call(this),function(){var f,g,m,v,y,b,w,x,T,S,E,A=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,C=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};f=R.arraysAreEqual,b=R.makeElement,S=R.tagName,y=R.getBlockTagNames,E=R.walkTree,v=R.findClosestElementFromNode,m=R.elementContainsNode,w=R.nodeIsAttachmentElement,x=R.normalizeSpaces,g=R.breakableWhitespacePattern,T=R.squishBreakableWhitespace,R.HTMLParser=function(t){function e(t,e){this.html=t,this.referenceElement=(null!=e?e:{}).referenceElement,this.blocks=[],this.blockElements=[],this.processedElements=[]}var i,r,a,o,s,l,c,n,u,d,h,p;return A(e,t),e.parse=function(t,e){var n;return(n=new this(t,e)).parse(),n},e.prototype.getDocument=function(){return R.Document.fromJSON(this.blocks)},e.prototype.parse=function(){var t,e;try{for(this.createHiddenContainer(),t=R.HTMLSanitizer.sanitize(this.html).getHTML(),this.containerElement.innerHTML=t,e=E(this.containerElement,{usingFilter:n});e.nextNode();)this.processNode(e.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}},e.prototype.createHiddenContainer=function(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=b({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))},e.prototype.removeHiddenContainer=function(){return this.containerElement.parentNode.removeChild(this.containerElement)},n=function(t){return"style"===S(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},e.prototype.processNode=function(t){switch(t.nodeType){case Node.TEXT_NODE:return this.processTextNode(t);case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}},e.prototype.appendBlockForElement=function(t){var e,n,i,r;if(i=this.isBlockElement(t),n=m(this.currentBlockElement,t),i&&!this.isBlockElement(t.firstChild)){if(!(this.isInsignificantTextNode(t.firstChild)&&this.isBlockElement(t.firstElementChild)||(e=this.getBlockAttributes(t),n&&f(e,this.currentBlock.attributes))))return this.currentBlock=this.appendBlockForAttributesWithElement(e,t),this.currentBlockElement=t}else if(this.currentBlockElement&&!n&&!i)return(
r=this.findParentBlockElement(t))?this.appendBlockForElement(r):(this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null)},e.prototype.findParentBlockElement=function(t){var e;for(e=t.parentElement;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&0<=C.call(this.blockElements,e))return e;e=e.parentElement}return null},e.prototype.processTextNode=function(t){var e,n;return this.isInsignificantTextNode(t)?void 0:(n=t.data,r(t.parentNode)||(n=T(n),h(null!=(e=t.previousSibling)?e.textContent:void 0)&&(n=l(n))),this.appendStringWithAttributes(n,this.getTextAttributes(t.parentNode)))},e.prototype.processElement=function(t){var e,n,i,r,o;if(w(t))return e=a(t),Object.keys(e).length&&(r=this.getTextAttributes(t),this.appendAttachmentWithAttributes(e,r),t.innerHTML=""),this.processedElements.push(t);switch(S(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes("\n",this.getTextAttributes(t)),this.processedElements.push(t);case"img":for(n in e={url:t.getAttribute("src"),contentType:"image"},i=s(t))o=i[n],e[n]=o;return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes("\n");break;case"td":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes(" | ")}},e.prototype.appendBlockForAttributesWithElement=function(t,e){var n;return this.blockElements.push(e),n=i(t),this.blocks.push(n),n},e.prototype.appendEmptyBlock=function(){return this.appendBlockForAttributesWithElement([],null)},e.prototype.appendStringWithAttributes=function(t,e){return this.appendPiece(d(t,e))},e.prototype.appendAttachmentWithAttributes=function(t,e){return this.appendPiece(u(t,e))},e.prototype.appendPiece=function(t){return 0===this.blocks.length&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)},e.prototype.appendStringToTextAtIndex=function(t,e){var n,i;return"string"===(null!=(n=(i=this.blocks[e].text)[i.length-1])?n.type:void 0)?n.string+=t:i.push(d(t))},e.prototype.prependStringToTextAtIndex=function(t,e){var n,i;return"string"===(null!=(n=(i=this.blocks[e].text)[0])?n.type:void 0)?n.string=t+n.string:i.unshift(d(t))},d=function(t,e){var n;return null==e&&(e={}),n="string",{string:t=x(t),attributes:e,type:n}},u=function(t,e){return null==e&&(e={}),{attachment:t,attributes:e,type:"attachment"}},i=function(t){return null==t&&(t={}),{text:[],attributes:t}},e.prototype.getTextAttributes=function(t){var e,n,i,r,o,a,s,l,c,u,d,h,p;for(e in i={},u=R.config.textAttributes)if((o=u[e]).tagName&&v(t,{matchingSelector:o.tagName,untilNode:this.containerElement}))i[e]=!0;else if(o.parser){if(p=o.parser(t)){for(n=!1,a=0,c=(d=this.findBlockElementAncestors(t)).length;a<c;a++)if(r=d[a],o.parser(r)===p){n=!0;break}n||(i[e]=p)}}else o.styleProperty&&(p=t.style[o.styleProperty])&&(i[e]=p);if(w(t)&&(s=t.getAttribute("data-trix-attributes")))for(l in h=JSON.parse(s))p=h[l],i[l]=p;return i},e.prototype.getBlockAttributes=function(t){var e,n,i,r;for(n=[];t&&t!==this.containerElement;){for(e in r=R.config.blockAttributes)!1!==(i=r[e]).parse&&S(t)===i.tagName&&(("function"==typeof i.test?i.test(t):void 0)||!i.test)&&(n.push(e),i.listAttribute&&n.push(i.listAttribute));t=t.parentNode}return n.reverse()},e.prototype.findBlockElementAncestors=function(t){var e,n;for(e=[];t&&t!==this.containerElement;)n=S(t),0<=C.call(y(),n)&&e.push(t),t=t.parentNode;return e},a=function(t){return JSON.parse(t.getAttribute("data-trix-attachment"))},s=function(t){var e,n,i;return i=t.getAttribute("width"),n=t.getAttribute("height"),e={},i&&(e.width=parseInt(i,10)),n&&(e.height=parseInt(n,10)),e},e.prototype.isBlockElement=function(t){var e;if((null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE&&!v(t,{matchingSelector:"td",untilNode:this.containerElement}))return e=S(t),0<=C.call(y(),e)||"block"===window.getComputedStyle(t).display},e.prototype.isInsignificantTextNode=function(t){var e,n,i;if((null!=t?t.nodeType:void 0)===Node.TEXT_NODE&&p(t.data)&&(n=t.parentNode,i=t.previousSibling,e=t.nextSibling,(!c(n.previousSibling)||this.isBlockElement(n.previousSibling))&&!r(n)))return!i||this.isBlockElement(i)||!e||this.isBlockElement(e)},e.prototype.isExtraBR=function(t){return"br"===S(t)&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t},r=function(t){var e;return"pre"===(e=window.getComputedStyle(t).whiteSpace)||"pre-wrap"===e||"pre-line"===e},c=function(t){return t&&!h(t.textContent)},e.prototype.translateBlockElementMarginsToNewlines=function(){var t,e,n,i,r,o,a;for(t=this.getMarginOfDefaultBlockElement(),a=[],n=e=0,i=(o=this.blocks).length;e<i;n=++e)o[n],(r=this.getMarginOfBlockElementAtIndex(n))&&(r.top>2*t.top&&this.prependStringToTextAtIndex("\n",n),a.push(r.bottom>2*t.bottom?this.appendStringToTextAtIndex("\n",n):void 0));return a},e.prototype.getMarginOfBlockElementAtIndex=function(t){var e,n;return!(e=this.blockElements[t])||!e.textContent||(n=S(e),0<=C.call(y(),n)||0<=C.call(this.processedElements,e))?void 0:o(e)},e.prototype.getMarginOfDefaultBlockElement=function(){var t;return t=b(R.config.blockAttributes["default"].tagName),this.containerElement.appendChild(t),o(t)},o=function(t){var e;return"block"===(e=window.getComputedStyle(t)).display?{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}:void 0},l=function(t){return t.replace(RegExp("^"+g.source+"+"),"")},p=function(t){return RegExp("^"+g.source+"*$").test(t)},h=function(t){return/\s$/.test(t)},e}(R.BasicObject)}.call(this),function(){var f,s,b,w,n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,h=[].slice,p=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};f=R.arraysAreEqual,b=R.normalizeRange,w=R.rangeIsCollapsed,s=R.getBlockConfig,R.Document=function(t){function e(t){null==t&&(t=[]),e.__super__.constructor.apply(this,arguments),0===t.length&&(t=[new R.Block]),this.blockList=R.SplittableList.box(t)}var d;return n(e,t),e.fromJSON=function(i){var r;return new this(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(R.Block.fromJSON(r));return n}())},e.fromHTML=function(t,e){return R.HTMLParser.parse(t,e).getDocument()},e.fromString=function(t,e){var n;return n=R.Text.textForStringWithAttributes(t,e),new this([new R.Block(n)])},e.prototype.isEmpty=function(){var t;return 1===this.blockList.length&&((t=this.getBlockAtIndex(0)).isEmpty()&&!t.hasAttributes())},e.prototype.copy=function(t){var e;return null==t&&(t={}),e=t.consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray(),new this.constructor(e)},e.prototype.copyUsingObjectsFromDocument=function(t){var e;return e=new R.ObjectMap(t.getObjects()),this.copyUsingObjectMap(e)},e.prototype.copyUsingObjectMap=function(r){var o,t,a;return t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getBlocks()).length;t<e;t++)o=n[t],i.push((a=r.find(o))?a:o.copyUsingObjectMap(r));return i}.call(this),new this.constructor(t)},e.prototype.copyWithBaseBlockAttributes=function(r){var o,a,t;return null==r&&(r=[]),t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getBlocks()).length;t<e;t++)a=n[t],o=r.concat(a.getAttributes()),i.push(a.copyWithAttributes(o));return i}.call(this),new this.constructor(t)},e.prototype.replaceBlock=function(t,e){var n;return-1===(n=this.blockList.indexOf(t))?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,n))},e.prototype.insertDocumentAtRange=function(t,e){var n,i,r,o,a,s,l;return i=t.blockList,a=(e=b(e))[0],r=(s=this.locationFromPosition(a)).index,o=s.offset,n=(l=this).getBlockAtPosition(a),w(e)&&n.isEmpty()&&!n.hasAttributes()?l=new this.constructor(l.blockList.removeObjectAtIndex(r)):n.getBlockBreakPosition()===o&&a++,l=l.removeTextAtRange(e),new this.constructor(l.blockList.insertSplittableListAtPosition(i,a))},e.prototype.mergeDocumentAtRange=function(t,e){var n,i,r,o,a,s,l,c,u,d,h,p;return h=(e=b(e))[0],d=this.locationFromPosition(h),i=this.getBlockAtIndex(d.index).getAttributes(),n=t.getBaseBlockAttributes(),p=i.slice(-n.length),f(n,p)?(l=i.slice(0,-n.length),s=t.copyWithBaseBlockAttributes(l)):s=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(i),r=s.getBlockCount(),o=s.getBlockAtIndex(0),f(i,o.getAttributes())?(a=o.getTextWithoutBlockBreak(),u=this.insertTextAtRange(a,e),1<r&&(s=new this.constructor(s.getBlocks().slice(1)),c=h+a.getLength(),u=u.insertDocumentAtRange(s,c))):u=this.insertDocumentAtRange(s,e),u},e.prototype.insertTextAtRange=function(e,t){var n,i,r,o,a;return a=(t=b(t))[0],i=(o=this.locationFromPosition(a)).index,r=o.offset,n=this.removeTextAtRange(t),new this.constructor(n.blockList.editObjectAtIndex(i,function(t){return t.copyWithText(t.text.insertTextAtPosition(e,r))}))},e.prototype.removeTextAtRange=function(t){var e,n,i,r,o,a,s,l,c,u,d,h,p,f,g,m,v,y;return l=(u=t=b(t))[0],m=u[1],w(t)?this:(a=(d=this.locationRangeFromRange(t))[0],f=d[1],o=a.index,s=a.offset,r=this.getBlockAtIndex(o),p=f.index,g=f.offset,h=this.getBlockAtIndex(p),m-l==1&&r.getBlockBreakPosition()===s&&h.getBlockBreakPosition()!==g&&"\n"===h.text.getStringAtPosition(g)?i=this.blockList.editObjectAtIndex(p,function(t){return t.copyWithText(t.text.removeTextAtRange([g,g+1]))}):(c=r.text.getTextAtRange([0,s]),v=h.text.getTextAtRange([g,h.getLength()]),y=c.appendText(v),n=o!==p&&0===s&&r.getAttributeLevel()>=h.getAttributeLevel()?h.copyWithText(y):r.copyWithText(y),e=p+1-o,i=this.blockList.splice(o,e,n)),new this.constructor(i))},e.prototype.moveTextFromRangeToPosition=function(t,e){var n,i,r,o,a,s,l,c,u,d;if(u=(s=t=b(t))[0],r=s[1],u<=e&&e<=r)return this;if(i=this.getDocumentAtRange(t),c=this.removeTextAtRange(t),(a=u<e)&&(e-=i.getLength()),!c.firstBlockInRangeIsEntirelySelected(t)){if(o=(l=i.getBlocks())[0],0===(n=2<=l.length?h.call(l,1):[]).length?(d=o.getTextWithoutBlockBreak(),a&&(e+=1)):d=o.text,c=c.insertTextAtRange(d,e),0===n.length)return c;i=new this.constructor(n),e+=d.getLength()}return c.insertDocumentAtRange(i,e)},e.prototype.addAttributeAtRange=function(i,r,t){var o;return o=this.blockList,this.eachBlockAtRange(t,function(t,e,n){return o=o.editObjectAtIndex(n,function(){return s(i)?t.addAttribute(i,r):e[0]===e[1]?t:t.copyWithText(t.text.addAttributeAtRange(i,r,e))})}),new this.constructor(o)},e.prototype.addAttribute=function(n,i){var r;return r=this.blockList,this.eachBlock(function(t,e){return r=r.editObjectAtIndex(e,function(){return t.addAttribute(n,i)})}),new this.constructor(r)},e.prototype.removeAttributeAtRange=function(i,t){var r;return r=this.blockList,this.eachBlockAtRange(t,function(t,e,n){return s(i)?r=r.editObjectAtIndex(n,function(){return t.removeAttribute(i)}):e[0]!==e[1]?r=r.editObjectAtIndex(n,function(){return t.copyWithText(t.text.removeAttributeAtRange(i,e))}):void 0}),new this.constructor(r)},e.prototype.updateAttributesForAttachment=function(e,n){var t,i,r;return i=this.getRangeOfAttachment(n)[0],t=this.locationFromPosition(i).index,r=this.getTextAtIndex(t),new this.constructor(this.blockList.editObjectAtIndex(t,function(t){return t.copyWithText(r.updateAttributesForAttachment(e,n))}))},e.prototype.removeAttributeForAttachment=function(t,e){var n;return n=this.getRangeOfAttachment(e),this.removeAttributeAtRange(t,n)},e.prototype.insertBlockBreakAtRange=function(t){var e,n,i,r;return r=(t=b(t))[0],i=this.locationFromPosition(r).offset,n=this.removeTextAtRange(t),0===i&&(e=[new R.Block]),new this.constructor(n.blockList.insertSplittableListAtPosition(new R.SplittableList(e),r))},e.prototype.applyBlockAttributeAtRange=function(t,e,n){var i,r,o,a;return r=(o=this.expandRangeToLineBreaksAndSplitBlocks(n)).document,n=o.range,(i=s(t)).listAttribute?(r=(a=(r=r.removeLastListAttributeAtRange(n,{exceptAttributeName:t})).convertLineBreaksToBlockBreaksInRange(n)).document,n=a.range):r=i.terminal?r.removeLastTerminalAttributeAtRange(n):r.consolidateBlocksAtRange(n),r.addAttributeAtRange(t,e,n)},e.prototype.removeLastListAttributeAtRange=function(t,r){var o;return null==r&&(r={}),o=this.blockList,this.eachBlockAtRange(t,function(t,e,n){var i;if((i=t.getLastAttribute())&&s(i).listAttribute&&i!==r.exceptAttributeName)return o=o.editObjectAtIndex(n,function(){return t.removeAttribute(i)})}),new this.constructor(o)},e.prototype.removeLastTerminalAttributeAtRange=function(t){var r;return r=this.blockList,this.eachBlockAtRange(t,function(t,e,n){var i;if((i=t.getLastAttribute())&&s(i).terminal)return r=r.editObjectAtIndex(n,function(){return t.removeAttribute(i)})}),new this.constructor(r)},e.prototype.firstBlockInRangeIsEntirelySelected=function(t){var e,n,i,r,o,a;return a=(r=t=b(t))[0],e=r[1],n=this.locationFromPosition(a),o=this.locationFromPosition(e),0===n.offset&&n.index<o.index||n.index===o.index&&(i=this.getBlockAtIndex(n.index).getLength(),0===n.offset&&o.offset===i)},e.prototype.expandRangeToLineBreaksAndSplitBlocks=function(t){var e,n,i,r,o,a,s,l,c;return c=(a=t=b(t))[0],r=a[1],l=this.locationFromPosition(c),i=this.locationFromPosition(r),s=(e=this).getBlockAtIndex(l.index),null!=(l.offset=s.findLineBreakInDirectionFromPosition("backward",l.offset))&&(o=e.positionFromLocation(l),e=e.insertBlockBreakAtRange([o,o+1]),i.index+=1,i.offset-=e.getBlockAtIndex(l.index).getLength(),l.index+=1),(l.offset=0)===i.offset&&i.index>l.index?(i.index-=1,i.offset=e.getBlockAtIndex(i.index).getBlockBreakPosition()):("\n"===(n=e.getBlockAtIndex(i.index)).text.getStringAtRange([i.offset-1,i.offset])?i.offset-=1:i.offset=n.findLineBreakInDirectionFromPosition("forward",i.offset),i.offset!==n.getBlockBreakPosition()&&(o=e.positionFromLocation(i),e=e.insertBlockBreakAtRange([o,o+1]))),c=e.positionFromLocation(l),r=e.positionFromLocation(i),{document:e,range:t=b([c,r])}},e.prototype.convertLineBreaksToBlockBreaksInRange=function(t){var e,n,i;return n=(t=b(t))[0],i=this.getStringAtRange(t).slice(0,-1),e=this,i.replace(/.*?\n/g,function(t){return n+=t.length,e=e.insertBlockBreakAtRange([n-1,n])}),{document:e,range:t}},e.prototype.consolidateBlocksAtRange=function(t){var e,n,i,r,o;return o=(i=t=b(t))[0],n=i[1],r=this.locationFromPosition(o).index,e=this.locationFromPosition(n).index,new this.constructor(this.blockList.consolidateFromIndexToIndex(r,e))},e.prototype.getDocumentAtRange=function(t){var e;return t=b(t),e=this.blockList.getSplittableListInRange(t).toArray(),new this.constructor(e)},e.prototype.getStringAtRange=function(t){var e,n;return(n=t=b(t))[n.length-1]!==this.getLength()&&(e=-1),this.getDocumentAtRange(t).toString().slice(0,e)},e.prototype.getBlockAtIndex=function(t){return this.blockList.getObjectAtIndex(t)},e.prototype.getBlockAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getBlockAtIndex(e)},e.prototype.getTextAtIndex=function(t){var e;return null!=(e=this.getBlockAtIndex(t))?e.text:void 0},e.prototype.getTextAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getTextAtIndex(e)},e.prototype.getPieceAtPosition=function(t){var e,n,i;return e=(i=this.locationFromPosition(t)).index,n=i.offset,this.getTextAtIndex(e).getPieceAtPosition(n)},e.prototype.getCharacterAtPosition=function(t){var e,n,i;return e=(i=this.locationFromPosition(t)).index,n=i.offset,this.getTextAtIndex(e).getStringAtRange([n,n+1])},e.prototype.getLength=function(){return this.blockList.getEndPosition()},e.prototype.getBlocks=function(){return this.blockList.toArray()},e.prototype.getBlockCount=function(){return this.blockList.length},e.prototype.getEditCount=function(){return this.editCount},e.prototype.eachBlock=function(t){return this.blockList.eachObject(t)},e.prototype.eachBlockAtRange=function(t,e){var n,i,r,o,a,s,l,c,u,d,h,p;if(h=(s=t=b(t))[0],r=s[1],d=this.locationFromPosition(h),i=this.locationFromPosition(r),d.index===i.index)return n=this.getBlockAtIndex(d.index),p=[d.offset,i.offset],e(n,p,d.index);for(u=[],a=o=l=d.index,c=i.index;l<=c?o<=c:c<=o;a=l<=c?++o:--o)(n=this.getBlockAtIndex(a))?(p=function(){switch(a){case d.index:return[d.offset,n.text.getLength()];case i.index:return[0,i.offset];default:return[0,n.text.getLength()]}}(),u.push(e(n,p,a))):u.push(void 0);return u},e.prototype.getCommonAttributesAtRange=function(t){var n,e,i;return e=(t=b(t))[0],w(t)?this.getCommonAttributesAtPosition(e):(i=[],n=[],this.eachBlockAtRange(t,function(t,e){return e[0]!==e[1]?(i.push(t.text.getCommonAttributesAtRange(e)),n.push(d(t))):void 0}),R.Hash.fromCommonAttributesOfObjects(i).merge(R.Hash.fromCommonAttributesOfObjects(n)).toObject())},e.prototype.getCommonAttributesAtPosition=function(t){var e,n,i,r,o,a,s,l,c,u;if(o=(c=this.locationFromPosition(t)).index,l=c.offset,!(i=this.getBlockAtIndex(o)))return{};for(s in r=d(i),e=i.text.getAttributesAtPosition(l),n=i.text.getAttributesAtPosition(l-1),a=function(){var t,e;for(s in e=[],t=R.config.textAttributes)(u=t[s]).inheritable&&e.push(s);return e}(),n)((u=n[s])===e[s]||0<=p.call(a,s))&&(r[s]=u);return r},e.prototype.getRangeOfCommonAttributeAtPosition=function(t,e){var n,i,r,o,a,s,l,c;return r=(a=this.locationFromPosition(e)).index,o=a.offset,c=(s=this.getTextAtIndex(r).getExpandedRangeForAttributeAtOffset(t,o))[0],i=s[1],l=this.positionFromLocation({index:r,offset:c}),n=this.positionFromLocation({index:r,offset:i}),b([l,n])},e.prototype.getBaseBlockAttributes=function(){var i,r,t,e,o,a,n;for(i=this.getBlockAtIndex(0).getAttributes(),t=e=1,n=this.getBlockCount();1<=n?e<n:n<e;t=1<=n?++e:--e)r=this.getBlockAtIndex(t).getAttributes(),a=Math.min(i.length,r.length),i=function(){var t,e,n;for(n=[],o=t=0,e=a;(0<=e?t<e:e<t)&&r[o]===i[o];o=0<=e?++t:--t)n.push(r[o]);return n}();return i},d=function(t){var e,n;return n={},(e=t.getLastAttribute())&&(n[e]=!0),n},e.prototype.getAttachmentById=function(t){var e,n,i,r;for(n=0,i=(r=this.getAttachments()).length;n<i;n++)if((e=r[n]).id===t)return e},e.prototype.getAttachmentPieces=function(){var n;return n=[],this.blockList.eachObject(function(t){var e;return e=t.text,n=n.concat(e.getAttachmentPieces())}),n},e.prototype.getAttachments=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.getAttachmentPieces()).length;t<e;t++)n=i[t],r.push(n.attachment);return r},e.prototype.getRangeOfAttachment=function(t){var e,n,i,r,o,a,s;for(n=e=r=0,i=(o=this.blockList.toArray()).length;e<i;n=++e){if(s=(a=o[n].text).getRangeOfAttachment(t))return b([r+s[0],r+s[1]]);r+=a.getLength()}},e.prototype.getLocationRangeOfAttachment=function(t){var e;return e=this.getRangeOfAttachment(t),this.locationRangeFromRange(e)},e.prototype.getAttachmentPieceForAttachment=function(t){var e,n,i,r;for(e=0,n=(r=this.getAttachmentPieces()).length;e<n;e++)if((i=r[e]).attachment===t)return i},e.prototype.findRangesForTextAttribute=function(e,t){var n,i,r,o,a,s,l,c,u,d;for(d=(null!=t?t:{}).withValue,l=[],c=[],o=function(t){return null!=d?t.getAttribute(e)===d:t.hasAttribute(e)},n=s=0,i=(u=this.getPieces()).length;n<i;n++)r=(a=u[n]).getLength(),o(a)&&(l[1]===s?l[1]=s+r:c.push(l=[s,s+r])),s+=r;return c},e.prototype.locationFromPosition=function(t){var e,n;return null!=(n=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t))).index?n:{index:(e=this.getBlocks()).length-1,offset:e[e.length-1].getLength()}},e.prototype.positionFromLocation=function(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)},e.prototype.locationRangeFromPosition=function(t){return b(this.locationFromPosition(t))},e.prototype.locationRangeFromRange=function(t){var e,n,i,r;if(t=b(t))return r=t[0],n=t[1],i=this.locationFromPosition(r),e=this.locationFromPosition(n),b([i,e])},e.prototype.rangeFromLocationRange=function(t){var e,n;return t=b(t),e=this.positionFromLocation(t[0]),w(t)||(n=this.positionFromLocation(t[1])),b([e,n])},e.prototype.isEqualTo=function(t){return this.blockList.isEqualTo(null!=t?t.blockList:void 0)},e.prototype.getTexts=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getBlocks()).length;e<n;e++)t=i[e],r.push(t.text);return r},e.prototype.getPieces=function(){var t,e,n,i,r;for(n=[],t=0,e=(i=this.getTexts()).length;t<e;t++)r=i[t],n.push.apply(n,r.getPieces());return n},e.prototype.getObjects=function(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())},e.prototype.toSerializableDocument=function(){var e;return e=[],this.blockList.eachObject(function(t){return e.push(t.copyWithText(t.text.toSerializableText()))}),new this.constructor(e)},e.prototype.toString=function(){return this.blockList.toString()},e.prototype.toJSON=function(){return this.blockList.toJSON()},e.prototype.toConsole=function(){var r;return JSON.stringify(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.blockList.toArray()).length;t<e;t++)r=n[t],i.push(JSON.parse(r.text.toConsole()));return i}.call(this))},e}(R.Object)}.call(this),function(){R.LineBreakInsertion=function(){function t(t){var e;this.composition=t,this.document=this.composition.document,e=this.composition.getSelectedRange(),this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}return t.prototype.shouldInsertBlockBreak=function(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?0!==this.startLocation.offset:this.breaksOnReturn&&"\n"!==this.nextCharacter},t.prototype.shouldBreakFormattedBlock=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&"\n"===this.nextCharacter||"\n"===this.previousCharacter)},t.prototype.shouldDecreaseListLevel=function(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()},t.prototype.shouldPrependListItem=function(){return this.block.isListItem()&&0===this.startLocation.offset&&!this.block.isEmpty()},t.prototype.shouldRemoveLastBlockAttribute=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()},t}()}.call(this),function(){var i,r,a,o,s,l,c,u,d,h,p=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;l=R.normalizeRange,d=R.rangesAreEqual,u=R.rangeIsCollapsed,c=R.objectsAreEqual,i=R.arrayStartsWith,h=R.summarizeArrayChange,a=R.getAllAttributeNames,o=R.getBlockConfig,s=R.getTextConfig,r=R.extend,R.Composition=function(t){function e(){this.document=new R.Document,this.attachments=[],this.currentAttributes={},this.revision=0}var n;return p(e,t),e.prototype.setDocument=function(t){var e;return t.isEqualTo(this.document)?void 0:(this.document=t,this.refreshAttachments(),this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeDocument?e.compositionDidChangeDocument(t):void 0)},e.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.getSelectedRange()}},e.prototype.loadSnapshot=function(t){var e,n,i,r;return e=t.document,r=t.selectedRange,null!=(n=this.delegate)&&"function"==typeof n.compositionWillLoadSnapshot&&n.compositionWillLoadSnapshot(),this.setDocument(null!=e?e:new R.Document),this.setSelection(null!=r?r:[0,0]),null!=(i=this.delegate)&&"function"==typeof i.compositionDidLoadSnapshot?i.compositionDidLoadSnapshot():void 0},e.prototype.insertText=function(t,e){var n,i,r,o;return o=(null!=e?e:{updatePosition:!0}).updatePosition,i=this.getSelectedRange(),this.setDocument(this.document.insertTextAtRange(t,i)),n=(r=i[0])+t.getLength(),o&&this.setSelection(n),this.notifyDelegateOfInsertionAtRange([r,n])},e.prototype.insertBlock=function(t){var e;return null==t&&(t=new R.Block),e=new R.Document([t]),this.insertDocument(e)},e.prototype.insertDocument=function(t){var e,n,i;return null==t&&(t=new R.Document),n=this.getSelectedRange(),this.setDocument(this.document.insertDocumentAtRange(t,n)),e=(i=n[0])+t.getLength(),this.setSelection(e),this.notifyDelegateOfInsertionAtRange([i,e])},e.prototype.insertString=function(t,e){var n,i;return n=this.getCurrentTextAttributes(),i=R.Text.textForStringWithAttributes(t,n),this.insertText(i,e)},e.prototype.insertBlockBreak=function(){var t,e,n;return e=this.getSelectedRange(),this.setDocument(this.document.insertBlockBreakAtRange(e)),t=(n=e[0])+1,this.setSelection(t),this.notifyDelegateOfInsertionAtRange([n,t])},e.prototype.insertLineBreak=function(){var t,e;return(e=new R.LineBreakInsertion(this)).shouldDecreaseListLevel()?(this.decreaseListLevel(),this.setSelection(e.startPosition)):e.shouldPrependListItem()?(t=new R.Document([e.block.copyWithoutText()]),this.insertDocument(t)):e.shouldInsertBlockBreak()?this.insertBlockBreak():e.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():e.shouldBreakFormattedBlock()?this.breakFormattedBlock(e):this.insertString("\n")},e.prototype.insertHTML=function(t){var e,n,i,r;return e=R.Document.fromHTML(t),i=this.getSelectedRange(),this.setDocument(this.document.mergeDocumentAtRange(e,i)),n=(r=i[0])+e.getLength()-1,this.setSelection(n),this.notifyDelegateOfInsertionAtRange([r,n])},e.prototype.replaceHTML=function(t){var e,n,i;return e=R.Document.fromHTML(t).copyUsingObjectsFromDocument(this.document),n=this.getLocationRange({strict:!1}),i=this.document.rangeFromLocationRange(n),this.setDocument(e),this.setSelection(i)},e.prototype.insertFile=function(t){var e,n;return(null!=(n=this.delegate)?n.compositionShouldAcceptFile(t):void 0)?(e=R.Attachment.attachmentForFile(t),this.insertAttachment(e)):void 0},e.prototype.insertFiles=function(t){var e,n,i,r,o,a,s;for(s=new R.Text,r=0,o=t.length;r<o;r++)i=t[r],(null!=(a=this.delegate)?a.compositionShouldAcceptFile(i):void 0)&&(e=R.Attachment.attachmentForFile(i),n=R.Text.textForAttachmentWithAttributes(e,this.currentAttributes),s=s.appendText(n));return this.insertText(s)},e.prototype.insertAttachment=function(t){var e;return e=R.Text.textForAttachmentWithAttributes(t,this.currentAttributes),this.insertText(e)},e.prototype.deleteInDirection=function(t){var e,n,i,r,o,a,s;return r=this.getLocationRange(),o=this.getSelectedRange(),(a=u(o))?i="backward"===t&&0===r[0].offset:s=r[0].index!==r[1].index,!(i&&this.canDecreaseBlockAttributeLevel()&&((n=this.getBlock()).isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(o[0]),n.isEmpty()))&&(a&&(o=this.getExpandedRangeInDirection(t),"backward"===t&&(e=this.getAttachmentAtRange(o))),e?(this.editAttachment(e),!1):(this.setDocument(this.document.removeTextAtRange(o)),this.setSelection(o[0]),!i&&!s&&void 0))},e.prototype.moveTextFromRange=function(t){var e;return e=this.getSelectedRange()[0],this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)},e.prototype.removeAttachment=function(t){var e;return(e=this.document.getRangeOfAttachment(t))?(this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])):void 0},e.prototype.removeLastBlockAttribute=function(){var t,e,n,i;return i=(n=this.getSelectedRange())[0],e=n[1],t=this.document.getBlockAtPosition(e),this.removeCurrentAttribute(t.getLastAttribute()),this.setSelection(i)},n=" ",e.prototype.insertPlaceholder=function(){return this.placeholderPosition=this.getPosition(),this.insertString(n)},e.prototype.selectPlaceholder=function(){return null!=this.placeholderPosition?(this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+n.length]),this.getSelectedRange()):void 0},e.prototype.forgetPlaceholder=function(){return this.placeholderPosition=null},e.prototype.hasCurrentAttribute=function(t){var e;return null!=(e=this.currentAttributes[t])&&!1!==e},e.prototype.toggleCurrentAttribute=function(t){var e;return(e=!this.currentAttributes[t])?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)},e.prototype.canSetCurrentAttribute=function(t){return o(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)},e.prototype.canSetCurrentTextAttribute=function(t){switch(t){case"href":return!this.selectionContainsAttachmentWithAttribute(t);default:return!0}},e.prototype.canSetCurrentBlockAttribute=function(){var t;if(t=this.getBlock())return!t.isTerminalBlock()},e.prototype.setCurrentAttribute=function(t,e){return o(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())},e.prototype.setTextAttribute=function(t,e){var n,i;if(n=this.getSelectedRange())return n[0]!==n[1]?this.setDocument(this.document.addAttributeAtRange(t,e,n)):"href"===t?(i=R.Text.textForStringWithAttributes(e,{href:e}),this.insertText(i)):void 0},e.prototype.setBlockAttribute=function(t,e){var n;if(n=this.getSelectedRange())return this.canSetCurrentAttribute(t)?(this.getBlock(),this.setDocument(this.document.applyBlockAttributeAtRange(t,e,n)),this.setSelection(n)):void 0},e.prototype.removeCurrentAttribute=function(t){return o(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())},e.prototype.removeTextAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},e.prototype.removeBlockAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},e.prototype.canDecreaseNestingLevel=function(){var t;return 0<(null!=(t=this.getBlock())?t.getNestingLevel():void 0)},e.prototype.canIncreaseNestingLevel=function(){var t,e,n;if(t=this.getBlock())return null!=(n=o(t.getLastNestableAttribute()))&&n.listAttribute?(e=this.getPreviousBlock())?i(e.getListItemAttributes(),t.getListItemAttributes()):void 0:0<t.getNestingLevel()},e.prototype.decreaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))},e.prototype.increaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))},e.prototype.canDecreaseBlockAttributeLevel=function(){var t;return 0<(null!=(t=this.getBlock())?t.getAttributeLevel():void 0)},e.prototype.decreaseBlockAttributeLevel=function(){var t,e;return(t=null!=(e=this.getBlock())?e.getLastAttribute():void 0)?this.removeCurrentAttribute(t):void 0},e.prototype.decreaseListLevel=function(){var t,e,n,i,r,o;for(o=this.getSelectedRange()[0],n=r=this.document.locationFromPosition(o).index,t=this.getBlock().getAttributeLevel();(e=this.document.getBlockAtIndex(n+1))&&e.isListItem()&&e.getAttributeLevel()>t;)n++;return o=this.document.positionFromLocation({index:r,offset:0}),i=this.document.positionFromLocation({index:n,offset:0}),this.setDocument(this.document.removeLastListAttributeAtRange([o,i]))},e.prototype.updateCurrentAttributes=function(){var t,e,n,i,r,o;if(o=this.getSelectedRange({ignoreLock:!0})){for(e=this.document.getCommonAttributesAtRange(o),n=0,i=(r=a()).length;n<i;n++)e[t=r[n]]||this.canSetCurrentAttribute(t)||(e[t]=!1);if(!c(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}},e.prototype.getCurrentAttributes=function(){return r.call({},this.currentAttributes)},e.prototype.getCurrentTextAttributes=function(){var t,e,n,i;for(e in t={},n=this.currentAttributes)i=n[e],s(e)&&(t[e]=i);return t},e.prototype.freezeSelection=function(){return this.setCurrentAttribute("frozen",!0)},e.prototype.thawSelection=function(){return this.removeCurrentAttribute("frozen")},e.prototype.hasFrozenSelection=function(){return this.hasCurrentAttribute("frozen")},e.proxyMethod("getSelectionManager().getPointRange"),e.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),e.proxyMethod("getSelectionManager().locationIsCursorTarget"),e.proxyMethod("getSelectionManager().selectionIsExpanded"),e.proxyMethod("delegate?.getSelectionManager"),e.prototype.setSelection=function(t){var e,n;return e=this.document.locationRangeFromRange(t),null!=(n=this.delegate)?n.compositionDidRequestChangingSelectionToLocationRange(e):void 0},e.prototype.getSelectedRange=function(){var t;return(t=this.getLocationRange())?this.document.rangeFromLocationRange(t):void 0},e.prototype.setSelectedRange=function(t){var e;return e=this.document.locationRangeFromRange(t),this.getSelectionManager().setLocationRange(e)},e.prototype.getPosition=function(){var t;return(t=this.getLocationRange())?this.document.positionFromLocation(t[0]):void 0},
e.prototype.getLocationRange=function(t){var e;return null!=(e=this.getSelectionManager().getLocationRange(t))?e:l({index:0,offset:0})},e.prototype.getExpandedRangeInDirection=function(t){var e,n,i;return i=(n=this.getSelectedRange())[0],e=n[1],"backward"===t?i=this.translateUTF16PositionFromOffset(i,-1):e=this.translateUTF16PositionFromOffset(e,1),l([i,e])},e.prototype.moveCursorInDirection=function(t){var e,n,i,r;return this.editingAttachment?i=this.document.getRangeOfAttachment(this.editingAttachment):(r=this.getSelectedRange(),i=this.getExpandedRangeInDirection(t),n=!d(r,i)),this.setSelectedRange("backward"===t?i[0]:i[1]),n&&(e=this.getAttachmentAtRange(i))?this.editAttachment(e):void 0},e.prototype.expandSelectionInDirection=function(t){var e;return e=this.getExpandedRangeInDirection(t),this.setSelectedRange(e)},e.prototype.expandSelectionForEditing=function(){return this.hasCurrentAttribute("href")?this.expandSelectionAroundCommonAttribute("href"):void 0},e.prototype.expandSelectionAroundCommonAttribute=function(t){var e,n;return e=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(t,e),this.setSelectedRange(n)},e.prototype.selectionContainsAttachmentWithAttribute=function(t){var e,n,i,r;if(r=this.getSelectedRange()){for(e=0,n=(i=this.document.getDocumentAtRange(r).getAttachments()).length;e<n;e++)if(i[e].hasAttribute(t))return!0;return!1}},e.prototype.selectionIsInCursorTarget=function(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())},e.prototype.positionIsCursorTarget=function(t){var e;return(e=this.document.locationFromPosition(t))?this.locationIsCursorTarget(e):void 0},e.prototype.positionIsBlockBreak=function(t){var e;return null!=(e=this.document.getPieceAtPosition(t))?e.isBlockBreak():void 0},e.prototype.getSelectedDocument=function(){var t;return(t=this.getSelectedRange())?this.document.getDocumentAtRange(t):void 0},e.prototype.getAttachments=function(){return this.attachments.slice(0)},e.prototype.refreshAttachments=function(){var t,e,n,i,r,o,a,s,l,c,u,d;for(n=this.document.getAttachments(),t=(s=h(this.attachments,n)).added,u=s.removed,this.attachments=n,i=0,o=u.length;i<o;i++)((e=u[i]).delegate=null)!=(l=this.delegate)&&"function"==typeof l.compositionDidRemoveAttachment&&l.compositionDidRemoveAttachment(e);for(d=[],r=0,a=t.length;r<a;r++)(e=t[r]).delegate=this,d.push(null!=(c=this.delegate)&&"function"==typeof c.compositionDidAddAttachment?c.compositionDidAddAttachment(e):void 0);return d},e.prototype.attachmentDidChangeAttributes=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidEditAttachment?e.compositionDidEditAttachment(t):void 0},e.prototype.attachmentDidChangePreviewURL=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeAttachmentPreviewURL?e.compositionDidChangeAttachmentPreviewURL(t):void 0},e.prototype.editAttachment=function(t){var e;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,null!=(e=this.delegate)&&"function"==typeof e.compositionDidStartEditingAttachment?e.compositionDidStartEditingAttachment(this.editingAttachment):void 0},e.prototype.stopEditingAttachment=function(){var t;if(this.editingAttachment)return null!=(t=this.delegate)&&"function"==typeof t.compositionDidStopEditingAttachment&&t.compositionDidStopEditingAttachment(this.editingAttachment),this.editingAttachment=null},e.prototype.canEditAttachmentCaption=function(){var t;return null!=(t=this.editingAttachment)?t.isPreviewable():void 0},e.prototype.updateAttributesForAttachment=function(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))},e.prototype.removeAttributeForAttachment=function(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))},e.prototype.breakFormattedBlock=function(t){var e,n,i,r,o;return n=t.document,e=t.block,o=[(r=t.startPosition)-1,r],e.getBlockBreakPosition()===t.startLocation.offset?(e.breaksOnReturn()&&"\n"===t.nextCharacter?r+=1:n=n.removeTextAtRange(o),o=[r,r]):"\n"===t.nextCharacter?"\n"===t.previousCharacter?o=[r-1,r+1]:(o=[r,r+1],r+=1):t.startLocation.offset-1!=0&&(r+=1),i=new R.Document([e.removeLastAttribute().copyWithoutText()]),this.setDocument(n.insertDocumentAtRange(i,o)),this.setSelection(r)},e.prototype.getPreviousBlock=function(){var t,e;return(e=this.getLocationRange())&&0<(t=e[0].index)?this.document.getBlockAtIndex(t-1):void 0},e.prototype.getBlock=function(){var t;return(t=this.getLocationRange())?this.document.getBlockAtIndex(t[0].index):void 0},e.prototype.getAttachmentAtRange=function(t){var e;return(e=this.document.getDocumentAtRange(t)).toString()===R.OBJECT_REPLACEMENT_CHARACTER+"\n"?e.getAttachments()[0]:void 0},e.prototype.notifyDelegateOfCurrentAttributesChange=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.compositionDidChangeCurrentAttributes?t.compositionDidChangeCurrentAttributes(this.currentAttributes):void 0},e.prototype.notifyDelegateOfInsertionAtRange=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionDidPerformInsertionAtRange?e.compositionDidPerformInsertionAtRange(t):void 0},e.prototype.translateUTF16PositionFromOffset=function(t,e){var n,i;return n=(i=this.document.toUTF16String()).offsetFromUCS2Offset(t),i.offsetToUCS2Offset(n+e)},e}(R.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.UndoManager=function(t){function e(t){this.composition=t,this.undoEntries=[],this.redoEntries=[]}var s;return n(e,t),e.prototype.recordUndoEntry=function(t,e){var n,i,r,o,a;return i=(o=null!=e?e:{}).context,n=o.consolidatable,r=this.undoEntries.slice(-1)[0],n&&s(r,t,i)?void 0:(a=this.createEntry({description:t,context:i}),this.undoEntries.push(a),this.redoEntries=[])},e.prototype.undo=function(){var t,e;return(e=this.undoEntries.pop())?(t=this.createEntry(e),this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)):void 0},e.prototype.redo=function(){var t,e;return(t=this.redoEntries.pop())?(e=this.createEntry(t),this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)):void 0},e.prototype.canUndo=function(){return 0<this.undoEntries.length},e.prototype.canRedo=function(){return 0<this.redoEntries.length},e.prototype.createEntry=function(t){var e,n,i;return n=(i=null!=t?t:{}).description,e=i.context,{description:null!=n?n.toString():void 0,context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}},s=function(t,e,n){return(null!=t?t.description:void 0)===(null!=e?e.toString():void 0)&&(null!=t?t.context:void 0)===JSON.stringify(n)},e}(R.BasicObject)}.call(this),function(){R.Editor=function(){function t(t,e,n){this.composition=t,this.selectionManager=e,this.element=n,this.undoManager=new R.UndoManager(this.composition)}return t.prototype.loadDocument=function(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})},t.prototype.loadHTML=function(t){return null==t&&(t=""),this.loadDocument(R.Document.fromHTML(t,{referenceElement:this.element}))},t.prototype.loadJSON=function(t){var e,n;return e=t.document,n=t.selectedRange,e=R.Document.fromJSON(e),this.loadSnapshot({document:e,selectedRange:n})},t.prototype.loadSnapshot=function(t){return this.undoManager=new R.UndoManager(this.composition),this.composition.loadSnapshot(t)},t.prototype.getDocument=function(){return this.composition.document},t.prototype.getSelectedDocument=function(){return this.composition.getSelectedDocument()},t.prototype.getSnapshot=function(){return this.composition.getSnapshot()},t.prototype.toJSON=function(){return this.getSnapshot()},t.prototype.deleteInDirection=function(t){return this.composition.deleteInDirection(t)},t.prototype.insertAttachment=function(t){return this.composition.insertAttachment(t)},t.prototype.insertDocument=function(t){return this.composition.insertDocument(t)},t.prototype.insertFile=function(t){return this.composition.insertFile(t)},t.prototype.insertHTML=function(t){return this.composition.insertHTML(t)},t.prototype.insertString=function(t){return this.composition.insertString(t)},t.prototype.insertText=function(t){return this.composition.insertText(t)},t.prototype.insertLineBreak=function(){return this.composition.insertLineBreak()},t.prototype.getSelectedRange=function(){return this.composition.getSelectedRange()},t.prototype.getPosition=function(){return this.composition.getPosition()},t.prototype.getClientRectAtPosition=function(t){var e;return e=this.getDocument().locationRangeFromRange([t,t+1]),this.selectionManager.getClientRectAtLocationRange(e)},t.prototype.expandSelectionInDirection=function(t){return this.composition.expandSelectionInDirection(t)},t.prototype.moveCursorInDirection=function(t){return this.composition.moveCursorInDirection(t)},t.prototype.setSelectedRange=function(t){return this.composition.setSelectedRange(t)},t.prototype.activateAttribute=function(t,e){return null==e&&(e=!0),this.composition.setCurrentAttribute(t,e)},t.prototype.attributeIsActive=function(t){return this.composition.hasCurrentAttribute(t)},t.prototype.canActivateAttribute=function(t){return this.composition.canSetCurrentAttribute(t)},t.prototype.deactivateAttribute=function(t){return this.composition.removeCurrentAttribute(t)},t.prototype.canDecreaseNestingLevel=function(){return this.composition.canDecreaseNestingLevel()},t.prototype.canIncreaseNestingLevel=function(){return this.composition.canIncreaseNestingLevel()},t.prototype.decreaseNestingLevel=function(){return this.canDecreaseNestingLevel()?this.composition.decreaseNestingLevel():void 0},t.prototype.increaseNestingLevel=function(){return this.canIncreaseNestingLevel()?this.composition.increaseNestingLevel():void 0},t.prototype.canDecreaseIndentationLevel=function(){return this.canDecreaseNestingLevel()},t.prototype.canIncreaseIndentationLevel=function(){return this.canIncreaseNestingLevel()},t.prototype.decreaseIndentationLevel=function(){return this.decreaseNestingLevel()},t.prototype.increaseIndentationLevel=function(){return this.increaseNestingLevel()},t.prototype.canRedo=function(){return this.undoManager.canRedo()},t.prototype.canUndo=function(){return this.undoManager.canUndo()},t.prototype.recordUndoEntry=function(t,e){var n,i,r;return i=(r=null!=e?e:{}).context,n=r.consolidatable,this.undoManager.recordUndoEntry(t,{context:i,consolidatable:n})},t.prototype.redo=function(){return this.canRedo()?this.undoManager.redo():void 0},t.prototype.undo=function(){return this.canUndo()?this.undoManager.undo():void 0},t}()}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.ManagedAttachment=function(t){function e(t,e){var n;this.attachmentManager=t,this.attachment=e,n=this.attachment,this.id=n.id,this.file=n.file}return n(e,t),e.prototype.remove=function(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)},e.proxyMethod("attachment.getAttribute"),e.proxyMethod("attachment.hasAttribute"),e.proxyMethod("attachment.setAttribute"),e.proxyMethod("attachment.getAttributes"),e.proxyMethod("attachment.setAttributes"),e.proxyMethod("attachment.isPending"),e.proxyMethod("attachment.isPreviewable"),e.proxyMethod("attachment.getURL"),e.proxyMethod("attachment.getHref"),e.proxyMethod("attachment.getFilename"),e.proxyMethod("attachment.getFilesize"),e.proxyMethod("attachment.getFormattedFilesize"),e.proxyMethod("attachment.getExtension"),e.proxyMethod("attachment.getContentType"),e.proxyMethod("attachment.getFile"),e.proxyMethod("attachment.setFile"),e.proxyMethod("attachment.releaseFile"),e.proxyMethod("attachment.getUploadProgress"),e.proxyMethod("attachment.setUploadProgress"),e}(R.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;R.AttachmentManager=function(t){function e(t){var e,n,i;for(null==t&&(t=[]),this.managedAttachments={},n=0,i=t.length;n<i;n++)e=t[n],this.manageAttachment(e)}return n(e,t),e.prototype.getAttachments=function(){var t,e,n,i;for(e in i=[],n=this.managedAttachments)t=n[e],i.push(t);return i},e.prototype.manageAttachment=function(t){var e,n;return null!=(e=this.managedAttachments)[n=t.id]?e[n]:e[n]=new R.ManagedAttachment(this,t)},e.prototype.attachmentIsManaged=function(t){return t.id in this.managedAttachments},e.prototype.requestRemovalOfAttachment=function(t){var e;return this.attachmentIsManaged(t)&&null!=(e=this.delegate)&&"function"==typeof e.attachmentManagerDidRequestRemovalOfAttachment?e.attachmentManagerDidRequestRemovalOfAttachment(t):void 0},e.prototype.unmanageAttachment=function(t){var e;return e=this.managedAttachments[t.id],delete this.managedAttachments[t.id],e},e}(R.BasicObject)}.call(this),function(){var h,p,n,s,f,l,g,i,m,r,v;h=R.elementContainsNode,p=R.findChildIndexOfNode,f=R.nodeIsBlockStart,l=R.nodeIsBlockStartComment,s=R.nodeIsBlockContainer,g=R.nodeIsCursorTarget,i=R.nodeIsEmptyTextNode,m=R.nodeIsTextNode,n=R.nodeIsAttachmentElement,r=R.tagName,v=R.walkTree,R.LocationMapper=function(){function t(t){this.element=t}var a,u,d,e;return t.prototype.findLocationFromContainerAndOffset=function(t,e,n){var i,r,o,a,s,l,c;for(l=(null!=n?n:{strict:!0}).strict,o=!1,a={index:r=0,offset:0},(i=this.findAttachmentElementParentForNode(t))&&(t=i.parentNode,e=p(i)),c=v(this.element,{usingFilter:d});c.nextNode();){if((s=c.currentNode)===t&&m(t)){g(s)||(a.offset+=e);break}if(s.parentNode===t){if(r++===e)break}else if(!h(t,s)&&0<r)break;f(s,{strict:l})?(o&&a.index++,o=!(a.offset=0)):a.offset+=u(s)}return a},t.prototype.findContainerAndOffsetFromLocation=function(t){var e,n,i,r,o;if(0===t.index&&0===t.offset){for(e=this.element,r=0;e.firstChild;)if(e=e.firstChild,s(e)){r=1;break}return[e,r]}if(n=(o=this.findNodeAndOffsetFromLocation(t))[0],i=o[1],n){if(m(n))(e=n).textContent,r=t.offset-i;else{if(e=n.parentNode,!f(n.previousSibling)&&!s(e))for(;n===e.lastChild&&(e=(n=e).parentNode,!s(e)););r=p(n),0!==t.offset&&r++}return[e,r]}},t.prototype.findNodeAndOffsetFromLocation=function(t){var e,n,i,r,o,a,s,l;for(n=s=0,i=(l=this.getSignificantNodesForIndex(t.index)).length;n<i;n++){if(e=l[n],r=u(e),t.offset<=s+r)if(m(e)){if(o=e,a=s,t.offset===a&&g(o))break}else o||(o=e,a=s);if((s+=r)>t.offset)break}return[o,a]},t.prototype.findAttachmentElementParentForNode=function(t){for(;t&&t!==this.element;){if(n(t))return t;t=t.parentNode}},t.prototype.getSignificantNodesForIndex=function(t){var e,n,i,r,o;for(i=[],o=v(this.element,{usingFilter:a}),r=!1;o.nextNode();)if(n=o.currentNode,l(n)){if(null!=e?e++:e=0,e===t)r=!0;else if(r)break}else r&&i.push(n);return i},u=function(t){return t.nodeType===Node.TEXT_NODE?g(t)?0:t.textContent.length:"br"===r(t)||n(t)?1:0},a=function(t){return e(t)===NodeFilter.FILTER_ACCEPT?d(t):NodeFilter.FILTER_REJECT},e=function(t){return i(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},d=function(t){return n(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},t}()}.call(this),function(){var u,d,n=[].slice;u=R.getDOMRange,d=R.setDOMRange,R.PointMapper=function(){function t(){}return t.prototype.createDOMRangeFromPoint=function(t){var e,n,i,r,o,a,s,l;if(s=t.x,l=t.y,document.caretPositionFromPoint)return i=(o=document.caretPositionFromPoint(s,l)).offsetNode,n=o.offset,(e=document.createRange()).setStart(i,n),e;if(document.caretRangeFromPoint)return document.caretRangeFromPoint(s,l);if(document.body.createTextRange){r=u();try{(a=document.body.createTextRange()).moveToPoint(s,l),a.select()}catch(c){}return e=u(),d(r),e}},t.prototype.getClientRectsForDOMRange=function(t){var e;return[(e=n.call(t.getClientRects()))[0],e[e.length-1]]},t}()}.call(this),function(){var i,r=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=R.getDOMRange,R.SelectionChangeObserver=function(t){function e(){this.run=r(this.run,this),this.update=r(this.update,this),this.selectionManagers=[]}var n;return o(e,t),e.prototype.start=function(){return this.started?void 0:(this.started=!0,"onselectionchange"in document?document.addEventListener("selectionchange",this.update,!0):this.run())},e.prototype.stop=function(){return this.started?(this.started=!1,document.removeEventListener("selectionchange",this.update,!0)):void 0},e.prototype.registerSelectionManager=function(t){return s.call(this.selectionManagers,t)<0?(this.selectionManagers.push(t),this.start()):void 0},e.prototype.unregisterSelectionManager=function(r){var o;return this.selectionManagers=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.selectionManagers).length;t<e;t++)(o=n[t])!==r&&i.push(o);return i}.call(this),0===this.selectionManagers.length?this.stop():void 0},e.prototype.notifySelectionManagersOfSelectionChange=function(){var t,e,n,i,r;for(i=[],t=0,e=(n=this.selectionManagers).length;t<e;t++)r=n[t],i.push(r.selectionDidChange());return i},e.prototype.update=function(){var t;return t=i(),n(t,this.domRange)?void 0:(this.domRange=t,this.notifySelectionManagersOfSelectionChange())},e.prototype.reset=function(){return this.domRange=null,this.update()},e.prototype.run=function(){return this.started?(this.update(),requestAnimationFrame(this.run)):void 0},n=function(t,e){return(null!=t?t.startContainer:void 0)===(null!=e?e.startContainer:void 0)&&(null!=t?t.startOffset:void 0)===(null!=e?e.startOffset:void 0)&&(null!=t?t.endContainer:void 0)===(null!=e?e.endContainer:void 0)&&(null!=t?t.endOffset:void 0)===(null!=e?e.endOffset:void 0)},e}(R.BasicObject),null==R.selectionChangeObserver&&(R.selectionChangeObserver=new R.SelectionChangeObserver)}.call(this),function(){var s,n,i,l,r,o,a,c,u,d,h=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;i=R.getDOMSelection,n=R.getDOMRange,d=R.setDOMRange,s=R.elementContainsNode,o=R.nodeIsCursorTarget,r=R.innerElementIsActive,l=R.handleEvent,a=R.normalizeRange,c=R.rangeIsCollapsed,u=R.rangesAreEqual,R.SelectionManager=function(t){function e(t){this.element=t,this.selectionDidChange=h(this.selectionDidChange,this),this.didMouseDown=h(this.didMouseDown,this),this.locationMapper=new R.LocationMapper(this.element),this.pointMapper=new R.PointMapper,this.lockCount=0,l("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}return p(e,t),e.prototype.getLocationRange=function(t){var e;return null==t&&(t={}),!1===t.strict?this.createLocationRangeFromDOMRange(n(),{strict:!1}):t.ignoreLock?this.currentLocationRange:null!=(e=this.lockedLocationRange)?e:this.currentLocationRange},e.prototype.setLocationRange=function(t){var e;if(!this.lockedLocationRange)return t=a(t),(e=this.createDOMRangeFromLocationRange(t))?(d(e),this.updateCurrentLocationRange(t)):void 0},e.prototype.setLocationRangeFromPointRange=function(t){var e,n;return t=a(t),n=this.getLocationAtPoint(t[0]),e=this.getLocationAtPoint(t[1]),this.setLocationRange([n,e])},e.prototype.getClientRectAtLocationRange=function(t){var e;return(e=this.createDOMRangeFromLocationRange(t))?this.getClientRectsForDOMRange(e)[1]:void 0},e.prototype.locationIsCursorTarget=function(t){var e,n;return e=(n=this.findNodeAndOffsetFromLocation(t))[0],n[1],o(e)},e.prototype.lock=function(){return 0==this.lockCount++?(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange()):void 0},e.prototype.unlock=function(){var t;return 0==--this.lockCount&&(t=this.lockedLocationRange,(this.lockedLocationRange=null)!=t)?this.setLocationRange(t):void 0},e.prototype.clearSelection=function(){var t;return null!=(t=i())?t.removeAllRanges():void 0},e.prototype.selectionIsCollapsed=function(){var t;return!0===(null!=(t=n())?t.collapsed:void 0)},e.prototype.selectionIsExpanded=function(){return!this.selectionIsCollapsed()},e.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),e.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),e.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),e.proxyMethod("pointMapper.createDOMRangeFromPoint"),e.proxyMethod("pointMapper.getClientRectsForDOMRange"),e.prototype.didMouseDown=function(){return this.pauseTemporarily()},e.prototype.pauseTemporarily=function(){var r,o,n,i,a;return this.paused=!0,a=this,o=function(){var t,e;for(a.paused=!1,clearTimeout(i),t=0,e=n.length;t<e;t++)n[t].destroy();return s(document,a.element)?a.selectionDidChange():void 0},i=setTimeout(o,200),n=function(){var t,e,n,i;for(i=[],t=0,e=(n=["mousemove","keydown"]).length;t<e;t++)r=n[t],i.push(l(r,{onElement:document,withCallback:o}));return i}()},e.prototype.selectionDidChange=function(){return this.paused||r(this.element)?void 0:this.updateCurrentLocationRange()},e.prototype.updateCurrentLocationRange=function(t){var e;return(null!=t?t:t=this.createLocationRangeFromDOMRange(n()))&&!u(t,this.currentLocationRange)?(this.currentLocationRange=t,null!=(e=this.delegate)&&"function"==typeof e.locationRangeDidChange?e.locationRangeDidChange(this.currentLocationRange.slice(0)):void 0):void 0},e.prototype.createDOMRangeFromLocationRange=function(t){var e,n,i,r;return i=this.findContainerAndOffsetFromLocation(t[0]),n=c(t)?i:null!=(r=this.findContainerAndOffsetFromLocation(t[1]))?r:i,null!=i&&null!=n?((e=document.createRange()).setStart.apply(e,i),e.setEnd.apply(e,n),e):void 0},e.prototype.createLocationRangeFromDOMRange=function(t,e){var n,i;if(null!=t&&this.domRangeWithinElement(t)&&(i=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e)))return t.collapsed||(n=this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e)),a([i,n])},e.prototype.getLocationAtPoint=function(t){var e,n;return(e=this.createDOMRangeFromPoint(t))&&null!=(n=this.createLocationRangeFromDOMRange(e))?n[0]:void 0},e.prototype.domRangeWithinElement=function(t){return t.collapsed?s(this.element,t.startContainer):s(this.element,t.startContainer)&&s(this.element,t.endContainer)},e}(R.BasicObject)}.call(this),function(){var n,i,r,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,s=[].slice;i=R.rangeIsCollapsed,r=R.rangesAreEqual,n=R.objectsAreEqual,R.EditorController=function(t){function e(t){var e,n;this.editorElement=t.editorElement,e=t.document,n=t.html,this.selectionManager=new R.SelectionManager(this.editorElement),(this.selectionManager.delegate=this).composition=new R.Composition,(this.composition.delegate=this).attachmentManager=new R.AttachmentManager(this.composition.getAttachments()),(this.attachmentManager.delegate=this).inputController=new R.InputController(this.editorElement),(this.inputController.delegate=this).inputController.responder=this.composition,this.compositionController=new R.CompositionController(this.editorElement,this.composition),(this.compositionController.delegate=this).toolbarController=new R.ToolbarController(this.editorElement.toolbarElement),(this.toolbarController.delegate=this).editor=new R.Editor(this.composition,this.selectionManager,this.editorElement),null!=e?this.editor.loadDocument(e):this.editor.loadHTML(n)}return o(e,t),e.prototype.registerSelectionManager=function(){return R.selectionChangeObserver.registerSelectionManager(this.selectionManager)},e.prototype.unregisterSelectionManager=function(){return R.selectionChangeObserver.unregisterSelectionManager(this.selectionManager)},e.prototype.compositionDidChangeDocument=function(){return this.notifyEditorElement("document-change"),this.handlingInput?void 0:this.render()},e.prototype.compositionDidChangeCurrentAttributes=function(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})},e.prototype.compositionDidPerformInsertionAtRange=function(t){return this.pasting?this.pastedRange=t:void 0},e.prototype.compositionShouldAcceptFile=function(t){return this.notifyEditorElement("file-accept",{file:t})},e.prototype.compositionDidAddAttachment=function(t){var e;return e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-add",{attachment:e})},e.prototype.compositionDidEditAttachment=function(t){var e;return this.compositionController.rerenderViewForObject(t),e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-edit",{attachment:e}),this.notifyEditorElement("change")},e.prototype.compositionDidChangeAttachmentPreviewURL=function(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")},e.prototype.compositionDidRemoveAttachment=function(t){var e;return e=this.attachmentManager.unmanageAttachment(t),this.notifyEditorElement("attachment-remove",{attachment:e})},e.prototype.compositionDidStartEditingAttachment=function(t){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t),this.selectionManager.setLocationRange(this.attachmentLocationRange)},e.prototype.compositionDidStopEditingAttachment=function(){return this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null},e.prototype.compositionDidRequestChangingSelectionToLocationRange=function(t){return!this.loadingSnapshot||this.isFocused()?(this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()):void 0},e.prototype.compositionWillLoadSnapshot=function(){return this.loadingSnapshot=!0},e.prototype.compositionDidLoadSnapshot=function(){return this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1},e.prototype.getSelectionManager=function(){return this.selectionManager},e.proxyMethod("getSelectionManager().setLocationRange"),e.proxyMethod("getSelectionManager().getLocationRange"),e.prototype.attachmentManagerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},e.prototype.compositionControllerWillSyncDocumentView=function(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()},e.prototype.compositionControllerDidSyncDocumentView=function(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")},e.prototype.compositionControllerDidRender=function(){return null!=this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision},e.prototype.compositionControllerDidFocus=function(){return this.toolbarController.hideDialog(),this.notifyEditorElement("focus")},e.prototype.compositionControllerDidBlur=function(){return this.notifyEditorElement("blur")},e.prototype.compositionControllerDidSelectAttachment=function(t){return this.composition.editAttachment(t)},e.prototype.compositionControllerDidRequestDeselectingAttachment=function(t){var e,n;return e=null!=(n=this.attachmentLocationRange)?n:this.composition.document.getLocationRangeOfAttachment(t),this.selectionManager.setLocationRange(e[1])},e.prototype.compositionControllerWillUpdateAttachment=function(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})},e.prototype.compositionControllerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},e.prototype.inputControllerWillHandleInput=function(){return this.handlingInput=!0,this.requestedRender=!1},e.prototype.inputControllerDidRequestRender=function(){return this.requestedRender=!0},e.prototype.inputControllerDidHandleInput=function(){return this.handlingInput=!1,this.requestedRender?(this.requestedRender=!1,this.render()):void 0},e.prototype.inputControllerDidAllowUnhandledInput=function(){return this.notifyEditorElement("change")},e.prototype.inputControllerDidRequestReparse=function(){return this.reparse()},e.prototype.inputControllerWillPerformTyping=function(){return this.recordTypingUndoEntry()},e.prototype.inputControllerWillCutText=function(){return this.editor.recordUndoEntry("Cut")},e.prototype.inputControllerWillPaste=function(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})},e.prototype.inputControllerDidPaste=function(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})},e.prototype.inputControllerWillMoveText=function(){return this.editor.recordUndoEntry("Move")},e.prototype.inputControllerWillAttachFiles=function(){return this.editor.recordUndoEntry("Drop Files")},e.prototype.inputControllerDidReceiveKeyboardCommand=function(t){return this.toolbarController.applyKeyboardCommand(t)},e.prototype.inputControllerDidStartDrag=function(){return this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()},e.prototype.inputControllerDidReceiveDragOverPoint=function(t){return this.selectionManager.setLocationRangeFromPointRange(t)},e.prototype.inputControllerDidCancelDrag=function(){return this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null},e.prototype.locationRangeDidChange=function(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!r(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")},e.prototype.toolbarDidClickButton=function(){return this.getLocationRange()?void 0:this.setLocationRange({index:0,offset:0})},e.prototype.toolbarDidInvokeAction=function(t){return this.invokeAction(t)},e.prototype.toolbarDidToggleAttribute=function(t){return this.recordFormattingUndoEntry(),this.composition.toggleCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},e.prototype.toolbarDidUpdateAttribute=function(t,e){return this.recordFormattingUndoEntry(),this.composition.setCurrentAttribute(t,e),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},e.prototype.toolbarDidRemoveAttribute=function(t){return this.recordFormattingUndoEntry(),this.composition.removeCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},e.prototype.toolbarWillShowDialog=function(){return this.composition.expandSelectionForEditing(),this.freezeSelection()},e.prototype.toolbarDidShowDialog=function(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})},e.prototype.toolbarDidHideDialog=function(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})},e.prototype.freezeSelection=function(){return this.selectionFrozen?void 0:(this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render())},e.prototype.thawSelection=function(){return this.selectionFrozen?(this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()):void 0},e.prototype.actions={undo:{test:function(){return this.editor.canUndo()},perform:function(){return this.editor.undo()}},redo:{test:function(){return this.editor.canRedo()},perform:function(){return this.editor.redo()}},link:{test:function(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}
},increaseBlockLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseBlockLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}}},e.prototype.canInvokeAction=function(t){var e,n;return!!this.actionIsExternal(t)||!!(null!=(e=this.actions[t])&&null!=(n=e.test)?n.call(this):void 0)},e.prototype.invokeAction=function(t){var e,n;return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t}):null!=(e=this.actions[t])&&null!=(n=e.perform)?n.call(this):void 0},e.prototype.actionIsExternal=function(t){return/^x-./.test(t)},e.prototype.getCurrentActions=function(){var t,e;for(t in e={},this.actions)e[t]=this.canInvokeAction(t);return e},e.prototype.updateCurrentActions=function(){var t;return t=this.getCurrentActions(),n(t,this.currentActions)?void 0:(this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions}))},e.prototype.reparse=function(){return this.composition.replaceHTML(this.editorElement.innerHTML)},e.prototype.render=function(){return this.compositionController.render()},e.prototype.updateInputElement=function(){var t,e;return t=this.compositionController.getSerializableElement(),e=R.serializeToContentType(t,"text/html"),this.editorElement.setInputElementValue(e)},e.prototype.notifyEditorElement=function(t,e){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,e)},e.prototype.removeAttachment=function(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()},e.prototype.recordFormattingUndoEntry=function(){var t;return t=this.selectionManager.getLocationRange(),i(t)?void 0:this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})},e.prototype.recordTypingUndoEntry=function(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})},e.prototype.getUndoContext=function(){var t;return t=1<=arguments.length?s.call(arguments,0):[],[this.getLocationContext(),this.getTimeContext()].concat(s.call(t))},e.prototype.getLocationContext=function(){var t;return t=this.selectionManager.getLocationRange(),i(t)?t[0].index:t},e.prototype.getTimeContext=function(){return 0<R.config.undoInterval?Math.floor((new Date).getTime()/R.config.undoInterval):0},e.prototype.isFocused=function(){var t;return this.editorElement===(null!=(t=this.editorElement.ownerDocument)?t.activeElement:void 0)},e}(R.Controller)}.call(this),function(){var t,e,n,i,r,o,a,s,l,c,u,d,h;i=R.makeElement,r=R.triggerEvent,e=R.handleEvent,n=R.handleEventOnce,t=R.AttachmentView.attachmentSelector,R.registerElement("trix-editor",(u=0,o=function(t){return!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t?t.focus():void 0},d=function(t){return t.hasAttribute("contenteditable")?void 0:(t.setAttribute("contenteditable",""),n("focus",{onElement:t,withCallback:function(){return s(t)}}))},s=function(t){return c(t),h(t)},c=function(t){return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("enableObjectResizing"):void 0)?(document.execCommand("enableObjectResizing",!1,!1),e("mscontrolselect",{onElement:t,preventDefault:!0})):void 0},h=function(){var t;return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("DefaultParagraphSeparator"):void 0)&&("div"===(t=R.config.blockAttributes["default"].tagName)||"p"===t)?document.execCommand("DefaultParagraphSeparator",!1,t):void 0},a=/Trident.*rv:11/.test(navigator.userAgent),{defaultCSS:"%t:empty:not(:focus)::before {\n  content: attr(placeholder);\n  color: graytext;\n}\n\n%t a[contenteditable=false] {\n  cursor: text;\n}\n\n%t img {\n  max-width: 100%;\n  height: auto;\n}\n\n%t "+t+" figcaption textarea {\n  resize: none;\n}\n\n%t "+t+" figcaption textarea.trix-autoresize-clone {\n  position: absolute;\n  left: -9999px;\n  max-height: 0px;\n}\n\n%t "+t+" figcaption[data-trix-placeholder]:empty::before {\n  content: attr(data-trix-placeholder);\n  color: graytext;\n}\n\n%t [data-trix-cursor-target] {\n  display: "+(l=a?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"}).display+" !important;\n  width: "+l.width+" !important;\n  padding: 0 !important;\n  margin: 0 !important;\n  border: none !important;\n}\n\n%t [data-trix-cursor-target=left] {\n  vertical-align: top !important;\n  margin-left: -1px !important;\n}\n\n%t [data-trix-cursor-target=right] {\n  vertical-align: bottom !important;\n  margin-right: -1px !important;\n}",trixId:{get:function(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++u),this.trixId)}},toolbarElement:{get:function(){var t,e,n;return this.hasAttribute("toolbar")?null!=(e=this.ownerDocument)?e.getElementById(this.getAttribute("toolbar")):void 0:this.parentNode?(n="trix-toolbar-"+this.trixId,this.setAttribute("toolbar",n),t=i("trix-toolbar",{id:n}),this.parentNode.insertBefore(t,this),t):void 0}},inputElement:{get:function(){var t,e,n;return this.hasAttribute("input")?null!=(n=this.ownerDocument)?n.getElementById(this.getAttribute("input")):void 0:this.parentNode?(e="trix-input-"+this.trixId,this.setAttribute("input",e),t=i("input",{type:"hidden",id:e}),this.parentNode.insertBefore(t,this.nextElementSibling),t):void 0}},editor:{get:function(){var t;return null!=(t=this.editorController)?t.editor:void 0}},name:{get:function(){var t;return null!=(t=this.inputElement)?t.name:void 0}},value:{get:function(){var t;return null!=(t=this.inputElement)?t.value:void 0},set:function(t){var e;return this.defaultValue=t,null!=(e=this.editor)?e.loadHTML(this.defaultValue):void 0}},notify:function(t,e){return this.editorController?r("trix-"+t,{onElement:this,attributes:e}):void 0},setInputElementValue:function(t){var e;return null!=(e=this.inputElement)?e.value=t:void 0},createdCallback:function(){return d(this)},attachedCallback:function(){return this.hasAttribute("data-trix-internal")?void 0:(null==this.editorController&&(this.editorController=new R.EditorController({editorElement:this,html:this.defaultValue=this.value})),this.editorController.registerSelectionManager(),this.registerResetListener(),o(this),requestAnimationFrame((t=this,function(){return t.notify("initialize")})));var t},detachedCallback:function(){var t;return null!=(t=this.editorController)&&t.unregisterSelectionManager(),this.unregisterResetListener()},registerResetListener:function(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)},unregisterResetListener:function(){return window.removeEventListener("reset",this.resetListener,!1)},resetBubbled:function(t){var e;return t.target!==(null!=(e=this.inputElement)?e.form:void 0)||t.defaultPrevented?void 0:this.reset()},reset:function(){return this.value=this.defaultValue}}))}.call(this),function(){}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=R:"function"==typeof define&&define.amd&&define(R)}.call(this);var card=function(n){function i(t){if(r[t])return r[t].exports;var e=r[t]={exports:{},id:t,loaded:!1};return n[t].call(e.exports,e,e.exports,i),e.loaded=!0,e.exports}var r={};return i.m=n,i.c=r,i.p="",i(0)}([function(n,t,r){(function(t){var e,m,l,i=function(t,e){return function(){return t.apply(e,arguments)}};r(1),m=r(5),r(6),l=r(7),e=function(){function t(t){var e;this.maskCardNumber=i(this.maskCardNumber,this),this.options=l(!0,this.defaults,t),this.options.form?(this.$el=m(this.options.form),this.options.container?(this.$container=m(this.options.container),(e=m.isDOMElement(this.$container)?this.$container:this.$container[0]).getAttribute(this.initializedDataAttr)||(e.setAttribute(this.initializedDataAttr,!0),this.render(),this.attachHandlers(),this.handleInitialPlaceholders())):console.log("Please provide a container")):console.log("Please provide a form")}var n;return t.prototype.initializedDataAttr="data-jp-card-initialized",t.prototype.cardTemplate='<div class="jp-card-container"><div class="jp-card"><div class="jp-card-front"><div class="jp-card-logo jp-card-elo"><div class="e">e</div><div class="l">l</div><div class="o">o</div></div><div class="jp-card-logo jp-card-visa">Visa</div><div class="jp-card-logo jp-card-visaelectron">Visa<div class="elec">Electron</div></div><div class="jp-card-logo jp-card-mastercard">Mastercard</div><div class="jp-card-logo jp-card-maestro">Maestro</div><div class="jp-card-logo jp-card-amex"></div><div class="jp-card-logo jp-card-discover">discover</div><div class="jp-card-logo jp-card-dinersclub"></div><div class="jp-card-logo jp-card-dankort"><div class="dk"><div class="d"></div><div class="k"></div></div></div><div class="jp-card-logo jp-card-jcb"><div class="j">J</div><div class="c">C</div><div class="b">B</div></div><div class="jp-card-lower"><div class="jp-card-shiny"></div><div class="jp-card-cvc jp-card-display">{{cvc}}</div><div class="jp-card-number jp-card-display">{{number}}</div><div class="jp-card-name jp-card-display">{{name}}</div><div class="jp-card-expiry jp-card-display" data-before="{{monthYear}}" data-after="{{validDate}}">{{expiry}}</div></div></div><div class="jp-card-back"><div class="jp-card-bar"></div><div class="jp-card-cvc jp-card-display">{{cvc}}</div><div class="jp-card-shiny"></div></div></div></div>',t.prototype.template=function(t,n){return t.replace(/\{\{(.*?)\}\}/g,function(t,e){return n[e]})},t.prototype.cardTypes=["jp-card-amex","jp-card-dankort","jp-card-dinersclub","jp-card-discover","jp-card-jcb","jp-card-laser","jp-card-maestro","jp-card-mastercard","jp-card-unionpay","jp-card-visa","jp-card-visaelectron","jp-card-elo"],t.prototype.defaults={formatting:!0,formSelectors:{numberInput:'input[name="number"]',expiryInput:'input[name="expiry"]',cvcInput:'input[name="cvc"]',nameInput:'input[name="name"]'},cardSelectors:{cardContainer:".jp-card-container",card:".jp-card",numberDisplay:".jp-card-number",expiryDisplay:".jp-card-expiry",cvcDisplay:".jp-card-cvc",nameDisplay:".jp-card-name"},messages:{validDate:"valid\nthru",monthYear:"month/year"},placeholders:{number:"&bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull;",cvc:"&bull;&bull;&bull;",expiry:"&bull;&bull;/&bull;&bull;",name:"Full Name"},masks:{cardNumber:!1},classes:{valid:"jp-card-valid",invalid:"jp-card-invalid"},debug:!1},t.prototype.render=function(){var t,e,n,i,r,o,a,s;for(n in m.append(this.$container,this.template(this.cardTemplate,l({},this.options.messages,this.options.placeholders))),r=this.options.cardSelectors)a=r[n],this["$"+n]=m.find(this.$container,a);for(n in o=this.options.formSelectors)a=o[n],a=this.options[n]?this.options[n]:a,!(i=m.find(this.$el,a)).length&&this.options.debug&&console.error("Card can't find a "+n+" in your form."),this["$"+n]=i;if(this.options.formatting&&(Payment.formatCardNumber(this.$numberInput),Payment.formatCardCVC(this.$cvcInput),Payment.formatCardExpiry(this.$expiryInput)),this.options.width&&(t=m(this.options.cardSelectors.cardContainer)[0],e=parseInt(t.clientWidth||window.getComputedStyle(t).width),t.style.transform="scale("+this.options.width/e+")"),("undefined"!=typeof navigator&&null!==navigator?navigator.userAgent:void 0)&&-1!==(s=navigator.userAgent.toLowerCase()).indexOf("safari")&&-1===s.indexOf("chrome")&&m.addClass(this.$card,"jp-card-safari"),/MSIE 10\./i.test(navigator.userAgent)&&m.addClass(this.$card,"jp-card-ie-10"),/rv:11.0/i.test(navigator.userAgent))return m.addClass(this.$card,"jp-card-ie-11")},t.prototype.attachHandlers=function(){var t,e;return e=[this.validToggler("cardNumber")],this.options.masks.cardNumber&&e.push(this.maskCardNumber),n(this.$numberInput,this.$numberDisplay,{fill:!1,filters:e}),m.on(this.$numberInput,"payment.cardType",this.handle("setCardType")),(t=[function(t){return t.replace(/(\s+)/g,"")}]).push(this.validToggler("cardExpiry")),n(this.$expiryInput,this.$expiryDisplay,{join:function(t){return 2===t[0].length||t[1]?"/":""},filters:t}),n(this.$cvcInput,this.$cvcDisplay,{filters:this.validToggler("cardCVC")}),m.on(this.$cvcInput,"focus",this.handle("flipCard")),m.on(this.$cvcInput,"blur",this.handle("unflipCard")),n(this.$nameInput,this.$nameDisplay,{fill:!1,filters:this.validToggler("cardHolderName"),join:" "})},t.prototype.handleInitialPlaceholders=function(){var t,e,n,i;for(e in i=[],n=this.options.formSelectors)n[e],t=this["$"+e],m.val(t)?(m.trigger(t,"paste"),i.push(setTimeout(function(){return m.trigger(t,"keyup")}))):i.push(void 0);return i},t.prototype.handle=function(n){return i=this,function(t){var e;return(e=Array.prototype.slice.call(arguments)).unshift(t.target),i.handlers[n].apply(i,e)};var i},t.prototype.validToggler=function(t){var r,e,o;return"cardExpiry"===t?r=function(t){var e;return e=Payment.fns.cardExpiryVal(t),Payment.fns.validateCardExpiry(e.month,e.year)}:"cardCVC"===t?(e=this,r=function(t){return Payment.fns.validateCardCVC(t,e.cardType)}):"cardNumber"===t?r=function(t){return Payment.fns.validateCardNumber(t)}:"cardHolderName"===t&&(r=function(t){return""!==t}),o=this,function(t,e,n){var i;return i=r(t),o.toggleValidClass(e,i),o.toggleValidClass(n,i),t}},t.prototype.toggleValidClass=function(t,e){return m.toggleClass(t,this.options.classes.valid,e),m.toggleClass(t,this.options.classes.invalid,!e)},t.prototype.maskCardNumber=function(t){var n,i;return n=this.options.masks.cardNumber,3<=(i=t.split(" ")).length?(i.forEach(function(t,e){if(e!==i.length-1)return i[e]=i[e].replace(/\d/g,n)}),i.join(" ")):t.replace(/\d/g,n)},t.prototype.handlers={setCardType:function(t,e){var n;if(n=e.data,!m.hasClass(this.$card,n))return m.removeClass(this.$card,"jp-card-unknown"),m.removeClass(this.$card,this.cardTypes.join(" ")),m.addClass(this.$card,"jp-card-"+n),m.toggleClass(this.$card,"jp-card-identified","unknown"!==n),this.cardType=n},flipCard:function(){return m.addClass(this.$card,"jp-card-flipped")},unflipCard:function(){return m.removeClass(this.$card,"jp-card-flipped")}},n=function(h,p,f){var t,i,g;return null==f&&(f={}),f.fill=f.fill||!1,f.filters=f.filters||[],f.filters instanceof Array||(f.filters=[f.filters]),f.join=f.join||"","function"!=typeof f.join&&(t=f.join,f.join=function(){return t}),g=function(){var t,e,n;for(n=[],t=0,e=p.length;t<e;t++)i=p[t],n.push(i.textContent);return n}(),m.on(h,"focus",function(){return m.addClass(p,"jp-card-focused")}),m.on(h,"blur",function(){return m.removeClass(p,"jp-card-focused")}),m.on(h,"keyup change paste",function(){var i,t,e,n,r,o,a,s,l,c,u,d;for(d=function(){var t,e,n;for(n=[],t=0,e=h.length;t<e;t++)i=h[t],n.push(m.val(i));return n}(),n=f.join(d),(d=d.join(n))===n&&(d=""),e=0,o=(c=f.filters).length;e<o;e++)d=(0,c[e])(d,h,p);for(u=[],t=r=0,a=p.length;r<a;t=++r)s=p[t],l=f.fill?d+g[t].substring(d.length):d||g[t],u.push(s.textContent=l);return u}),h},t}(),n.exports=e,t.Card=e}).call(t,function(){return this}())},function(t,e,n){var i=n(2);"string"==typeof i&&(i=[[t.id,i,""]]);n(4)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(3)()).push([t.id,
'.jp-card.jp-card-safari.jp-card-identified .jp-card-front:before, .jp-card.jp-card-safari.jp-card-identified .jp-card-back:before {\n  background-image: repeating-linear-gradient(45deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.05) 1px, rgba(255, 255, 255, 0) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.03) 4px), repeating-linear-gradient(90deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-linear-gradient(210deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), -webkit-linear-gradient(-245deg, rgba(255, 255, 255, 0) 50%, rgba(255, 255, 255, 0.2) 70%, rgba(255, 255, 255, 0) 90%);\n  background-image: repeating-linear-gradient(45deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.05) 1px, rgba(255, 255, 255, 0) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.03) 4px), repeating-linear-gradient(90deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-linear-gradient(210deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), linear-gradient(-25deg, rgba(255, 255, 255, 0) 50%, rgba(255, 255, 255, 0.2) 70%, rgba(255, 255, 255, 0) 90%); }\n\n.jp-card.jp-card-ie-10.jp-card-flipped, .jp-card.jp-card-ie-11.jp-card-flipped {\n  -webkit-transform: 0deg;\n  -moz-transform: 0deg;\n  -ms-transform: 0deg;\n  -o-transform: 0deg;\n  transform: 0deg; }\n  .jp-card.jp-card-ie-10.jp-card-flipped .jp-card-front, .jp-card.jp-card-ie-11.jp-card-flipped .jp-card-front {\n    -webkit-transform: rotateY(0deg);\n    -moz-transform: rotateY(0deg);\n    -ms-transform: rotateY(0deg);\n    -o-transform: rotateY(0deg);\n    transform: rotateY(0deg); }\n  .jp-card.jp-card-ie-10.jp-card-flipped .jp-card-back, .jp-card.jp-card-ie-11.jp-card-flipped .jp-card-back {\n    -webkit-transform: rotateY(0deg);\n    -moz-transform: rotateY(0deg);\n    -ms-transform: rotateY(0deg);\n    -o-transform: rotateY(0deg);\n    transform: rotateY(0deg); }\n    .jp-card.jp-card-ie-10.jp-card-flipped .jp-card-back:after, .jp-card.jp-card-ie-11.jp-card-flipped .jp-card-back:after {\n      left: 18%; }\n    .jp-card.jp-card-ie-10.jp-card-flipped .jp-card-back .jp-card-cvc, .jp-card.jp-card-ie-11.jp-card-flipped .jp-card-back .jp-card-cvc {\n      -webkit-transform: rotateY(180deg);\n      -moz-transform: rotateY(180deg);\n      -ms-transform: rotateY(180deg);\n      -o-transform: rotateY(180deg);\n      transform: rotateY(180deg);\n      left: 5%; }\n    .jp-card.jp-card-ie-10.jp-card-flipped .jp-card-back .jp-card-shiny, .jp-card.jp-card-ie-11.jp-card-flipped .jp-card-back .jp-card-shiny {\n      left: 84%; }\n      .jp-card.jp-card-ie-10.jp-card-flipped .jp-card-back .jp-card-shiny:after, .jp-card.jp-card-ie-11.jp-card-flipped .jp-card-back .jp-card-shiny:after {\n        left: -480%;\n        -webkit-transform: rotateY(180deg);\n        -moz-transform: rotateY(180deg);\n        -ms-transform: rotateY(180deg);\n        -o-transform: rotateY(180deg);\n        transform: rotateY(180deg); }\n\n.jp-card.jp-card-ie-10.jp-card-amex .jp-card-back, .jp-card.jp-card-ie-11.jp-card-amex .jp-card-back {\n  display: none; }\n\n.jp-card-logo {\n  height: 36px;\n  width: 60px;\n  font-style: italic; }\n  .jp-card-logo, .jp-card-logo:before, .jp-card-logo:after {\n    box-sizing: border-box; }\n\n.jp-card-logo.jp-card-amex {\n  text-transform: uppercase;\n  font-size: 4px;\n  font-weight: bold;\n  color: white;\n  background-image: repeating-radial-gradient(circle at center, #FFF 1px, #999 2px);\n  background-image: repeating-radial-gradient(circle at center, #FFF 1px, #999 2px);\n  border: 1px solid #EEE; }\n  .jp-card-logo.jp-card-amex:before, .jp-card-logo.jp-card-amex:after {\n    width: 28px;\n    display: block;\n    position: absolute;\n    left: 16px; }\n  .jp-card-logo.jp-card-amex:before {\n    height: 28px;\n    content: "american";\n    top: 3px;\n    text-align: left;\n    padding-left: 2px;\n    padding-top: 11px;\n    background: #267AC3; }\n  .jp-card-logo.jp-card-amex:after {\n    content: "express";\n    bottom: 11px;\n    text-align: right;\n    padding-right: 2px; }\n\n.jp-card.jp-card-amex.jp-card-flipped {\n  -webkit-transform: none;\n  -moz-transform: none;\n  -ms-transform: none;\n  -o-transform: none;\n  transform: none; }\n\n.jp-card.jp-card-amex.jp-card-identified .jp-card-front:before, .jp-card.jp-card-amex.jp-card-identified .jp-card-back:before {\n  background-color: #108168; }\n\n.jp-card.jp-card-amex.jp-card-identified .jp-card-front .jp-card-logo.jp-card-amex {\n  opacity: 1; }\n\n.jp-card.jp-card-amex.jp-card-identified .jp-card-front .jp-card-cvc {\n  visibility: visible; }\n\n.jp-card.jp-card-amex.jp-card-identified .jp-card-front:after {\n  opacity: 1; }\n\n.jp-card-logo.jp-card-discover {\n  background: #FF6600;\n  color: #111;\n  text-transform: uppercase;\n  font-style: normal;\n  font-weight: bold;\n  font-size: 10px;\n  text-align: center;\n  overflow: hidden;\n  z-index: 1;\n  padding-top: 9px;\n  letter-spacing: .03em;\n  border: 1px solid #EEE; }\n  .jp-card-logo.jp-card-discover:before, .jp-card-logo.jp-card-discover:after {\n    content: " ";\n    display: block;\n    position: absolute; }\n  .jp-card-logo.jp-card-discover:before {\n    background: white;\n    width: 200px;\n    height: 200px;\n    border-radius: 200px;\n    bottom: -5%;\n    right: -80%;\n    z-index: -1; }\n  .jp-card-logo.jp-card-discover:after {\n    width: 8px;\n    height: 8px;\n    border-radius: 4px;\n    top: 10px;\n    left: 27px;\n    background-color: #FF6600;\n    background-image: -webkit-radial-gradient(#FF6600, #fff);\n    background-image: radial-gradient(  #FF6600, #fff);\n    content: "network";\n    font-size: 4px;\n    line-height: 24px;\n    text-indent: -7px; }\n\n.jp-card .jp-card-front .jp-card-logo.jp-card-discover {\n  right: 12%;\n  top: 18%; }\n\n.jp-card.jp-card-discover.jp-card-identified .jp-card-front:before, .jp-card.jp-card-discover.jp-card-identified .jp-card-back:before {\n  background-color: #86B8CF; }\n\n.jp-card.jp-card-discover.jp-card-identified .jp-card-logo.jp-card-discover {\n  opacity: 1; }\n\n.jp-card.jp-card-discover.jp-card-identified .jp-card-front:after {\n  -webkit-transition: 400ms;\n  -moz-transition: 400ms;\n  transition: 400ms;\n  content: " ";\n  display: block;\n  background-color: #FF6600;\n  background-image: -webkit-linear-gradient(#FF6600, #ffa366, #FF6600);\n  background-image: linear-gradient(#FF6600, #ffa366, #FF6600);\n  height: 50px;\n  width: 50px;\n  border-radius: 25px;\n  position: absolute;\n  left: 100%;\n  top: 15%;\n  margin-left: -25px;\n  box-shadow: inset 1px 1px 3px 1px rgba(0, 0, 0, 0.5); }\n\n.jp-card-logo.jp-card-visa {\n  text-transform: uppercase;\n  color: white;\n  text-align: center;\n  font-weight: bold;\n  font-size: 24px;\n  line-height: 18px;\n  margin-top: 5px; }\n  .jp-card-logo.jp-card-visa:before, .jp-card-logo.jp-card-visa:after {\n    content: " ";\n    display: block;\n    width: 100%;\n    height: 25%; }\n  .jp-card-logo.jp-card-visa:before {\n    position: absolute;\n    left: -4px;\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 0 12px 6px 0;\n    border-color: transparent #ffffff transparent transparent; }\n\n.jp-card.jp-card-visa.jp-card-identified .jp-card-front:before, .jp-card.jp-card-visa.jp-card-identified .jp-card-back:before {\n  background-color: #191278; }\n\n.jp-card.jp-card-visa.jp-card-identified .jp-card-logo.jp-card-visa {\n  opacity: 1;\n  box-shadow: none; }\n\n.jp-card-logo.jp-card-visaelectron {\n  background: white;\n  text-transform: uppercase;\n  color: #1A1876;\n  text-align: center;\n  font-weight: bold;\n  font-size: 15px;\n  line-height: 18px; }\n  .jp-card-logo.jp-card-visaelectron:before, .jp-card-logo.jp-card-visaelectron:after {\n    content: " ";\n    display: block;\n    width: 100%;\n    height: 25%; }\n  .jp-card-logo.jp-card-visaelectron:before {\n    background: #1A1876; }\n  .jp-card-logo.jp-card-visaelectron:after {\n    background: #E79800; }\n  .jp-card-logo.jp-card-visaelectron .elec {\n    float: right;\n    font-family: arial;\n    font-size: 9px;\n    margin-right: 1px;\n    margin-top: -5px;\n    text-transform: none; }\n\n.jp-card.jp-card-visaelectron.jp-card-identified .jp-card-front:before, .jp-card.jp-card-visaelectron.jp-card-identified .jp-card-back:before {\n  background-color: #191278; }\n\n.jp-card.jp-card-visaelectron.jp-card-identified .jp-card-logo.jp-card-visaelectron {\n  opacity: 1; }\n\n.jp-card-logo.jp-card-mastercard {\n  color: white;\n  font-style: normal;\n  text-transform: lowercase;\n  font-weight: bold;\n  text-align: center;\n  font-size: 9px;\n  line-height: 84px;\n  z-index: 1;\n  text-shadow: 1px 1px rgba(0, 0, 0, 0.6); }\n  .jp-card-logo.jp-card-mastercard:before, .jp-card-logo.jp-card-mastercard:after {\n    content: " ";\n    display: block;\n    width: 36px;\n    top: 0;\n    position: absolute;\n    height: 36px;\n    border-radius: 18px; }\n  .jp-card-logo.jp-card-mastercard:before {\n    left: 0;\n    background: #EB001B;\n    z-index: -1;\n    opacity: 0.9; }\n  .jp-card-logo.jp-card-mastercard:after {\n    right: 0;\n    background: #FF5F00;\n    z-index: -2; }\n\n.jp-card.jp-card-mastercard.jp-card-identified .jp-card-front .jp-card-logo.jp-card-mastercard, .jp-card.jp-card-mastercard.jp-card-identified .jp-card-back .jp-card-logo.jp-card-mastercard {\n  box-shadow: none; }\n\n.jp-card.jp-card-mastercard.jp-card-identified .jp-card-front:before, .jp-card.jp-card-mastercard.jp-card-identified .jp-card-back:before {\n  background-color: #0061A8; }\n\n.jp-card.jp-card-mastercard.jp-card-identified .jp-card-logo.jp-card-mastercard {\n  opacity: 1; }\n\n.jp-card-logo.jp-card-maestro {\n  color: white;\n  font-style: normal;\n  text-transform: lowercase;\n  font-weight: bold;\n  text-align: center;\n  font-size: 14px;\n  line-height: 84px;\n  z-index: 1;\n  text-shadow: 1px 1px rgba(0, 0, 0, 0.6); }\n  .jp-card-logo.jp-card-maestro:before, .jp-card-logo.jp-card-maestro:after {\n    content: " ";\n    display: block;\n    width: 36px;\n    top: 0;\n    position: absolute;\n    height: 36px;\n    border-radius: 18px; }\n  .jp-card-logo.jp-card-maestro:before {\n    left: 0;\n    background: #EB001B;\n    z-index: -2; }\n  .jp-card-logo.jp-card-maestro:after {\n    right: 0;\n    background: #00A2E5;\n    z-index: -1;\n    opacity: 0.8; }\n\n.jp-card.jp-card-maestro.jp-card-identified .jp-card-front .jp-card-logo.jp-card-maestro, .jp-card.jp-card-maestro.jp-card-identified .jp-card-back .jp-card-logo.jp-card-maestro {\n  box-shadow: none; }\n\n.jp-card.jp-card-maestro.jp-card-identified .jp-card-front:before, .jp-card.jp-card-maestro.jp-card-identified .jp-card-back:before {\n  background-color: #0B2C5F; }\n\n.jp-card.jp-card-maestro.jp-card-identified .jp-card-logo.jp-card-maestro {\n  opacity: 1; }\n\n.jp-card-logo.jp-card-dankort {\n  width: 60px;\n  height: 36px;\n  padding: 3px;\n  border-radius: 8px;\n  border: #000000 1px solid;\n  background-color: #FFFFFF; }\n  .jp-card-logo.jp-card-dankort .dk {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow: hidden; }\n    .jp-card-logo.jp-card-dankort .dk:before {\n      background-color: #ED1C24;\n      content: \'\';\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      display: block;\n      border-radius: 6px; }\n    .jp-card-logo.jp-card-dankort .dk:after {\n      content: \'\';\n      position: absolute;\n      top: 50%;\n      margin-top: -7.7px;\n      right: 0;\n      width: 0;\n      height: 0;\n      border-style: solid;\n      border-width: 7px 7px 10px 0;\n      border-color: transparent #ED1C24 transparent transparent;\n      z-index: 1; }\n  .jp-card-logo.jp-card-dankort .d, .jp-card-logo.jp-card-dankort .k {\n    position: absolute;\n    top: 50%;\n    width: 50%;\n    display: block;\n    height: 15.4px;\n    margin-top: -7.7px;\n    background: white; }\n  .jp-card-logo.jp-card-dankort .d {\n    left: 0;\n    border-radius: 0 8px 10px 0; }\n    .jp-card-logo.jp-card-dankort .d:before {\n      content: \'\';\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      display: block;\n      background: #ED1C24;\n      border-radius: 2px 4px 6px 0px;\n      height: 5px;\n      width: 7px;\n      margin: -3px 0 0 -4px; }\n  .jp-card-logo.jp-card-dankort .k {\n    right: 0; }\n    .jp-card-logo.jp-card-dankort .k:before, .jp-card-logo.jp-card-dankort .k:after {\n      content: \'\';\n      position: absolute;\n      right: 50%;\n      width: 0;\n      height: 0;\n      border-style: solid;\n      margin-right: -1px; }\n    .jp-card-logo.jp-card-dankort .k:before {\n      top: 0;\n      border-width: 8px 5px 0 0;\n      border-color: #ED1C24 transparent transparent transparent; }\n    .jp-card-logo.jp-card-dankort .k:after {\n      bottom: 0;\n      border-width: 0 5px 8px 0;\n      border-color: transparent transparent #ED1C24 transparent; }\n\n.jp-card.jp-card-dankort.jp-card-identified .jp-card-front:before, .jp-card.jp-card-dankort.jp-card-identified .jp-card-back:before {\n  background-color: #0055C7; }\n\n.jp-card.jp-card-dankort.jp-card-identified .jp-card-logo.jp-card-dankort {\n  opacity: 1; }\n\n.jp-card-logo.jp-card-elo {\n  height: 50px;\n  width: 50px;\n  border-radius: 100%;\n  background: black;\n  color: white;\n  text-align: center;\n  text-transform: lowercase;\n  font-size: 21px;\n  font-style: normal;\n  letter-spacing: 1px;\n  font-weight: bold;\n  padding-top: 13px; }\n  .jp-card-logo.jp-card-elo .e, .jp-card-logo.jp-card-elo .l, .jp-card-logo.jp-card-elo .o {\n    display: inline-block;\n    position: relative; }\n  .jp-card-logo.jp-card-elo .e {\n    -webkit-transform: rotate(-15deg);\n    -moz-transform: rotate(-15deg);\n    -ms-transform: rotate(-15deg);\n    -o-transform: rotate(-15deg);\n    transform: rotate(-15deg); }\n  .jp-card-logo.jp-card-elo .o {\n    position: relative;\n    display: inline-block;\n    width: 12px;\n    height: 12px;\n    right: 0;\n    top: 7px;\n    border-radius: 100%;\n    background-image: -webkit-linear-gradient( yellow 50%, red 50%);\n    background-image: linear-gradient( yellow 50%, red 50%);\n    -webkit-transform: rotate(40deg);\n    -moz-transform: rotate(40deg);\n    -ms-transform: rotate(40deg);\n    -o-transform: rotate(40deg);\n    transform: rotate(40deg);\n    text-indent: -9999px; }\n    .jp-card-logo.jp-card-elo .o:before {\n      content: "";\n      position: absolute;\n      width: 49%;\n      height: 49%;\n      background: black;\n      border-radius: 100%;\n      text-indent: -99999px;\n      top: 25%;\n      left: 25%; }\n\n.jp-card.jp-card-elo.jp-card-identified .jp-card-front:before, .jp-card.jp-card-elo.jp-card-identified .jp-card-back:before {\n  background-color: #6F6969; }\n\n.jp-card.jp-card-elo.jp-card-identified .jp-card-logo.jp-card-elo {\n  opacity: 1; }\n\n.jp-card-logo.jp-card-jcb {\n  border-radius: 5px 0px 5px 0px;\n  -moz-border-radius: 5px 0px 5px 0px;\n  -webkit-border-radius: 5px 0px 5px 0px;\n  background-color: white;\n  font-style: normal;\n  color: white;\n  width: 50px;\n  padding: 2px 0 0 2px; }\n  .jp-card-logo.jp-card-jcb > div {\n    width: 15px;\n    margin-right: 1px;\n    display: inline-block;\n    text-align: center;\n    text-shadow: 1px 1px rgba(0, 0, 0, 0.6);\n    border-radius: 5px 0px 5px 0px;\n    -moz-border-radius: 5px 0px 5px 0px;\n    -webkit-border-radius: 5px 0px 5px 0px; }\n    .jp-card-logo.jp-card-jcb > div:before, .jp-card-logo.jp-card-jcb > div:after {\n      content: " ";\n      display: block;\n      height: 8px; }\n    .jp-card-logo.jp-card-jcb > div.j {\n      background-color: #000063;\n      background-image: -webkit-linear-gradient(left, #000063, #008cff);\n      background-image: linear-gradient(to right,#000063, #008cff); }\n    .jp-card-logo.jp-card-jcb > div.c {\n      background-color: #630000;\n      background-image: -webkit-linear-gradient(left, #630000, #ff008d);\n      background-image: linear-gradient(to right,#630000, #ff008d); }\n    .jp-card-logo.jp-card-jcb > div.b {\n      background-color: #006300;\n      background-image: -webkit-linear-gradient(left, #006300, #00ff00);\n      background-image: linear-gradient(to right,#006300, #00ff00); }\n\n.jp-card.jp-card-jcb.jp-card-identified .jp-card-front:before, .jp-card.jp-card-jcb.jp-card-identified .jp-card-back:before {\n  background-color: #CB8000; }\n\n.jp-card.jp-card-jcb.jp-card-identified .jp-card-logo.jp-card-jcb {\n  opacity: 1;\n  box-shadow: none; }\n\n.jp-card-logo.jp-card-dinersclub {\n  font-family: serif;\n  height: 40px;\n  width: 100px;\n  color: white;\n  font-size: 17px;\n  font-style: normal;\n  letter-spacing: 1px; }\n  .jp-card-logo.jp-card-dinersclub::before, .jp-card-logo.jp-card-dinersclub::after {\n    display: block;\n    position: relative; }\n  .jp-card-logo.jp-card-dinersclub::before {\n    content: \'Diners Club\'; }\n  .jp-card-logo.jp-card-dinersclub::after {\n    content: \'International\';\n    text-transform: uppercase;\n    font-size: 0.6em; }\n\n.jp-card.jp-card-dinersclub .jp-card-front .jp-card-logo {\n  box-shadow: none !important; }\n\n.jp-card.jp-card-dinersclub.jp-card-identified .jp-card-front:before, .jp-card.jp-card-dinersclub.jp-card-identified .jp-card-back:before {\n  background-color: #999; }\n\n.jp-card.jp-card-dinersclub.jp-card-identified .jp-card-logo.jp-card-dinersclub {\n  opacity: 1; }\n\n.jp-card-container {\n  -webkit-perspective: 1000px;\n  -moz-perspective: 1000px;\n  perspective: 1000px;\n  width: 350px;\n  max-width: 100%;\n  height: 200px;\n  margin: auto;\n  z-index: 1;\n  position: relative; }\n\n.jp-card {\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  line-height: 1;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-width: 315px;\n  border-radius: 10px;\n  -webkit-transform-style: preserve-3d;\n  -moz-transform-style: preserve-3d;\n  -ms-transform-style: preserve-3d;\n  -o-transform-style: preserve-3d;\n  transform-style: preserve-3d;\n  -webkit-transition: all 400ms linear;\n  -moz-transition: all 400ms linear;\n  transition: all 400ms linear; }\n  .jp-card > *, .jp-card > *:before, .jp-card > *:after {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    font-family: inherit; }\n  .jp-card.jp-card-flipped {\n    -webkit-transform: rotateY(180deg);\n    -moz-transform: rotateY(180deg);\n    -ms-transform: rotateY(180deg);\n    -o-transform: rotateY(180deg);\n    transform: rotateY(180deg); }\n  .jp-card .jp-card-front, .jp-card .jp-card-back {\n    -webkit-backface-visibility: hidden;\n    backface-visibility: hidden;\n    -webkit-transform-style: preserve-3d;\n    -moz-transform-style: preserve-3d;\n    -ms-transform-style: preserve-3d;\n    -o-transform-style: preserve-3d;\n    transform-style: preserve-3d;\n    -webkit-transition: all 400ms linear;\n    -moz-transition: all 400ms linear;\n    transition: all 400ms linear;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    overflow: hidden;\n    border-radius: 10px;\n    background: #DDD; }\n    .jp-card .jp-card-front:before, .jp-card .jp-card-back:before {\n      content: " ";\n      display: block;\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      opacity: 0;\n      border-radius: 10px;\n      -webkit-transition: all 400ms ease;\n      -moz-transition: all 400ms ease;\n      transition: all 400ms ease; }\n    .jp-card .jp-card-front:after, .jp-card .jp-card-back:after {\n      content: " ";\n      display: block; }\n    .jp-card .jp-card-front .jp-card-display, .jp-card .jp-card-back .jp-card-display {\n      color: white;\n      font-weight: normal;\n      opacity: 0.5;\n      -webkit-transition: opacity 400ms linear;\n      -moz-transition: opacity 400ms linear;\n      transition: opacity 400ms linear; }\n      .jp-card .jp-card-front .jp-card-display.jp-card-focused, .jp-card .jp-card-back .jp-card-display.jp-card-focused {\n        opacity: 1;\n        font-weight: 700; }\n    .jp-card .jp-card-front .jp-card-cvc, .jp-card .jp-card-back .jp-card-cvc {\n      font-family: "Bitstream Vera Sans Mono", Consolas, Courier, monospace;\n      font-size: 14px; }\n    .jp-card .jp-card-front .jp-card-shiny, .jp-card .jp-card-back .jp-card-shiny {\n      width: 50px;\n      height: 35px;\n      border-radius: 5px;\n      background: #CCC;\n      position: relative; }\n      .jp-card .jp-card-front .jp-card-shiny:before, .jp-card .jp-card-back .jp-card-shiny:before {\n        content: " ";\n        display: block;\n        width: 70%;\n        height: 60%;\n        border-top-right-radius: 5px;\n        border-bottom-right-radius: 5px;\n        background: #d9d9d9;\n        position: absolute;\n        top: 20%; }\n  .jp-card .jp-card-front .jp-card-logo {\n    position: absolute;\n    opacity: 0;\n    right: 5%;\n    top: 8%;\n    -webkit-transition: 400ms;\n    -moz-transition: 400ms;\n    transition: 400ms; }\n  .jp-card .jp-card-front .jp-card-lower {\n    width: 80%;\n    position: absolute;\n    left: 10%;\n    bottom: 30px; }\n    @media only screen and (max-width: 480px) {\n      .jp-card .jp-card-front .jp-card-lower {\n        width: 90%;\n        left: 5%; } }\n    .jp-card .jp-card-front .jp-card-lower .jp-card-cvc {\n      visibility: hidden;\n      float: right;\n      position: relative;\n      bottom: 5px; }\n    .jp-card .jp-card-front .jp-card-lower .jp-card-number {\n      font-family: "Bitstream Vera Sans Mono", Consolas, Courier, monospace;\n      font-size: 24px;\n      clear: both;\n      margin-bottom: 30px; }\n    .jp-card .jp-card-front .jp-card-lower .jp-card-expiry {\n      font-family: "Bitstream Vera Sans Mono", Consolas, Courier, monospace;\n      letter-spacing: 0em;\n      position: relative;\n      float: right;\n      width: 25%; }\n      .jp-card .jp-card-front .jp-card-lower .jp-card-expiry:before, .jp-card .jp-card-front .jp-card-lower .jp-card-expiry:after {\n        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n        font-weight: bold;\n        font-size: 7px;\n        white-space: pre;\n        display: block;\n        opacity: .5; }\n      .jp-card .jp-card-front .jp-card-lower .jp-card-expiry:before {\n        content: attr(data-before);\n        margin-bottom: 2px;\n        font-size: 7px;\n        text-transform: uppercase; }\n      .jp-card .jp-card-front .jp-card-lower .jp-card-expiry:after {\n        position: absolute;\n        content: attr(data-after);\n        text-align: right;\n        right: 100%;\n        margin-right: 5px;\n        margin-top: 2px;\n        bottom: 0; }\n    .jp-card .jp-card-front .jp-card-lower .jp-card-name {\n      text-transform: uppercase;\n      font-family: "Bitstream Vera Sans Mono", Consolas, Courier, monospace;\n      font-size: 20px;\n      max-height: 45px;\n      position: absolute;\n      bottom: 0;\n      width: 190px;\n      display: -webkit-box;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: horizontal;\n      overflow: hidden;\n      text-overflow: ellipsis; }\n  .jp-card .jp-card-back {\n    -webkit-transform: rotateY(180deg);\n    -moz-transform: rotateY(180deg);\n    -ms-transform: rotateY(180deg);\n    -o-transform: rotateY(180deg);\n    transform: rotateY(180deg); }\n    .jp-card .jp-card-back .jp-card-bar {\n      background-color: #444;\n      background-image: -webkit-linear-gradient(#444, #333);\n      background-image: linear-gradient(#444, #333);\n      width: 100%;\n      height: 20%;\n      position: absolute;\n      top: 10%; }\n    .jp-card .jp-card-back:after {\n      content: " ";\n      display: block;\n      background-color: #FFF;\n      background-image: -webkit-linear-gradient(#FFF, #FFF);\n      background-image: linear-gradient(#FFF, #FFF);\n      width: 80%;\n      height: 16%;\n      position: absolute;\n      top: 40%;\n      left: 2%; }\n    .jp-card .jp-card-back .jp-card-cvc {\n      position: absolute;\n      top: 40%;\n      left: 85%;\n      -webkit-transition-delay: 600ms;\n      -moz-transition-delay: 600ms;\n      transition-delay: 600ms; }\n    .jp-card .jp-card-back .jp-card-shiny {\n      position: absolute;\n      top: 66%;\n      left: 2%; }\n      .jp-card .jp-card-back .jp-card-shiny:after {\n        content: "This card has been issued by Jesse Pollak and is licensed for anyone to use anywhere for free. It comes with no warranty. For support issues, please visit: github.com/jessepollak/card.";\n        position: absolute;\n        left: 120%;\n        top: 5%;\n        color: white;\n        font-size: 7px;\n        width: 230px;\n        opacity: .5; }\n  .jp-card.jp-card-identified {\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.3); }\n    .jp-card.jp-card-identified .jp-card-front, .jp-card.jp-card-identified .jp-card-back {\n      background-color: #000;\n      background-color: rgba(0, 0, 0, 0.5); }\n      .jp-card.jp-card-identified .jp-card-front:before, .jp-card.jp-card-identified .jp-card-back:before {\n        -webkit-transition: all 400ms ease;\n        -moz-transition: all 400ms ease;\n        transition: all 400ms ease;\n        background-image: repeating-linear-gradient(45deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.05) 1px, rgba(255, 255, 255, 0) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.03) 4px), repeating-linear-gradient(90deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-linear-gradient(210deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-radial-gradient(circle at 70% 70%, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-radial-gradient(circle at 90% 20%, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-radial-gradient(circle at 15% 80%, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), -webkit-linear-gradient(-245deg, rgba(255, 255, 255, 0) 50%, rgba(255, 255, 255, 0.2) 70%, rgba(255, 255, 255, 0) 90%);\n        background-image: repeating-linear-gradient(45deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.05) 1px, rgba(255, 255, 255, 0) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.03) 4px), repeating-linear-gradient(90deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-linear-gradient(210deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-radial-gradient(circle at 70% 70%, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-radial-gradient(circle at 90% 20%, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-radial-gradient(circle at 15% 80%, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), linear-gradient(-25deg, rgba(255, 255, 255, 0) 50%, rgba(255, 255, 255, 0.2) 70%, rgba(255, 255, 255, 0) 90%);\n        opacity: 1; }\n      .jp-card.jp-card-identified .jp-card-front .jp-card-logo, .jp-card.jp-card-identified .jp-card-back .jp-card-logo {\n        box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3); }\n    .jp-card.jp-card-identified.no-radial-gradient .jp-card-front:before, .jp-card.jp-card-identified.no-radial-gradient .jp-card-back:before {\n      background-image: repeating-linear-gradient(45deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.05) 1px, rgba(255, 255, 255, 0) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.03) 4px), repeating-linear-gradient(90deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-linear-gradient(210deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), -webkit-linear-gradient(-245deg, rgba(255, 255, 255, 0) 50%, rgba(255, 255, 255, 0.2) 70%, rgba(255, 255, 255, 0) 90%);\n      background-image: repeating-linear-gradient(45deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.05) 1px, rgba(255, 255, 255, 0) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.03) 4px), repeating-linear-gradient(90deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), repeating-linear-gradient(210deg, rgba(255, 255, 255, 0) 1px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.04) 3px, rgba(255, 255, 255, 0.05) 4px), linear-gradient(-25deg, rgba(255, 255, 255, 0) 50%, rgba(255, 255, 255, 0.2) 70%, rgba(255, 255, 255, 0) 90%); }\n',""])},function(t){t.exports=function(){var a=[];return a.toString=function t(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},a.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&n[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),a.push(o))}},a}},function(t){function l(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=m[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(h(i.parts[o],e))}else{var a=[];for(o=0;o<i.parts.length;o++)a.push(h(i.parts[o],e));m[i.id]={id:i.id,refs:1,parts:a}}}}function c(t){for(var e=[],n={},i=0;i<t.length;i++){var r=t[i],o=r[0],a={css:r[1],media:r[2],sourceMap:r[3]};n[o]?n[o].parts.push(a):e.push(n[o]={id:o,parts:[a]})}return e}function n(t,e){var n=r(),i=o[o.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),o.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function s(t){t.parentNode.removeChild(t);var e=o.indexOf(t);0<=e&&o.splice(e,1)}function u(t){var e=document.createElement("style");return e.type="text/css",n(t,e),e}function d(t){var e=document.createElement("link");return e.rel="stylesheet",n(t,e),e}function h(e,t){var n,i,r;if(t.singleton){var o=y++;n=v||(v=u(t)),i=p.bind(null,n,o,!1),r=p.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=d(t),i=g.bind(null,n),r=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=u(t),i=f.bind(null,n),r=function(){s(n)});return i(e),function a(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function p(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=b(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function f(t,e){var n=e.css,i=e.media;if(
i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function g(t,e){var n=e.css,i=e.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var m={},e=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},i=e(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),r=e(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,y=0,o=[];t.exports=function(t,a){"undefined"==typeof(a=a||{}).singleton&&(a.singleton=i()),"undefined"==typeof a.insertAt&&(a.insertAt="bottom");var s=c(t);return l(s,a),function e(t){for(var e=[],n=0;n<s.length;n++){var i=s[n];(r=m[i.id]).refs--,e.push(r)}t&&l(c(t),a);for(n=0;n<e.length;n++){var r;if(0===(r=e[n]).refs){for(var o=0;o<r.parts.length;o++)r.parts[o]();delete m[r.id]}}}};var a,b=(a=[],function(t,e){return a[t]=e,a.filter(Boolean).join("\n")})},function(t){(function(){var d,i,e;(d=function(t){return d.isDOMElement(t)?t:document.querySelectorAll(t)}).isDOMElement=function(t){return t&&null!=t.nodeName},e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,d.trim=function(t){return null===t?"":(t+"").replace(e,"")},i=/\r/g,d.val=function(t,e){var n;return 1<arguments.length?t.value=e:"string"==typeof(n=t.value)?n.replace(i,""):null===n?"":n},d.preventDefault=function(t){if("function"!=typeof t.preventDefault)return t.returnValue=!1;t.preventDefault()},d.normalizeEvent=function(t){var e;return null==(t={which:null!=(e=t).which?e.which:void 0,target:e.target||e.srcElement,preventDefault:function(){return d.preventDefault(e)},originalEvent:e,data:e.data||e.detail}).which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t},d.on=function(t,e,n){var i,r,o,a,s,l,c,u;if(t.length)for(r=0,a=t.length;r<a;r++)i=t[r],d.on(i,e,n);else{if(!e.match(" "))return c=n,n=function(t){return t=d.normalizeEvent(t),c(t)},t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?(e="on"+e,t.attachEvent(e,n)):void(t["on"+e]=n);for(o=0,s=(u=e.split(" ")).length;o<s;o++)l=u[o],d.on(t,l,n)}},d.addClass=function(i,r){var o;return i.length?function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(d.addClass(o,r));return n}():i.classList?i.classList.add(r):i.className+=" "+r},d.hasClass=function(t,e){var n,i,r,o;if(t.length){for(i=!0,r=0,o=t.length;r<o;r++)n=t[r],i=i&&d.hasClass(n,e);return i}return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},d.removeClass=function(i,r){var t,o,e,n,a,s;if(i.length)return function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(d.removeClass(o,r));return n}();if(i.classList){for(s=[],e=0,n=(a=r.split(" ")).length;e<n;e++)t=a[e],s.push(i.classList.remove(t));return s}return i.className=i.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," ")},d.toggleClass=function(i,r,o){var a;return i.length?function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)a=i[t],n.push(d.toggleClass(a,r,o));return n}():o?d.hasClass(i,r)?void 0:d.addClass(i,r):d.removeClass(i,r)},d.append=function(i,r){var o;return i.length?function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(d.append(o,r));return n}():i.insertAdjacentHTML("beforeend",r)},d.find=function(t,e){return(t instanceof NodeList||t instanceof Array)&&(t=t[0]),t.querySelectorAll(e)},d.trigger=function(t,e,n){var i,r;try{r=new CustomEvent(e,{detail:n})}catch(i){i,(r=document.createEvent("CustomEvent")).initCustomEvent?r.initCustomEvent(e,!0,!0,n):r.initEvent(e,!0,!0,n)}return t.dispatchEvent(r)},t.exports=d}).call(this)},function(C,t,k){(function(A){(function(){var a,h,p,r,s,t,n,i,o,l,c,u,d,f,g,m,e,v,y,b,w,x,T,S,E=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};h=k(5),s=[{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[4],luhn:!0},{type:"dankort",pattern:/^5019/,format:t=/(\d{1,4})/g,length:[16],cvcLength:[3],luhn:!0},{type:"hipercard",pattern:/^(384100|384140|384160|606282|637095|637568|60(?!11))/,format:t,length:[14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:t,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(5018|5020|5038|6304|6703|6708|6759|676[1-3])/,format:t,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^(5[1-5]|677189)|^(222[1-9]|2[3-6]\d{2}|27[0-1]\d|2720)/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:t,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"elo",pattern:/^(4011(78|79)|43(1274|8935)|45(1416|7393|763(1|2))|50(4175|6699|67[0-7][0-9]|9000)|627780|63(6297|6368)|650(03([^4])|04([0-9])|05(0|1)|4(0[5-9]|3[0-9]|8[5-9]|9[0-9])|5([0-2][0-9]|3[0-8])|9([2-6][0-9]|7[0-8])|541|700|720|901)|651652|655000|655021)/,format:t,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:t,length:[13,16,19],cvcLength:[3],luhn:!0}],p=function(t){var e,n,i;for(t=(t+"").replace(/\D/g,""),n=0,i=s.length;n<i;n++)if((e=s[n]).pattern.test(t))return e},r=function(t){var e,n,i;for(n=0,i=s.length;n<i;n++)if((e=s[n]).type===t)return e},g=function(t){var e,n,i,r,o,a;for(o=!0,i=a=0,r=(n=(t+"").split("").reverse()).length;i<r;i++)e=n[i],e=parseInt(e,10),(o=!o)&&(e*=2),9<e&&(e-=9),a+=e;return a%10==0},f=function(t){var e,n;try{if(null!=t.selectionStart&&t.selectionStart!==t.selectionEnd)return!0;if(null!=("undefined"!=typeof document&&null!==document&&null!=(n=document.selection)?n.createRange:void 0)&&document.selection.createRange().text)return!0}catch(e){e}return!1},m=function(n){return setTimeout(function(){var t,e;return t=n.target,e=h.val(t),e=a.fns.formatCardNumber(e),h.val(t,e),h.trigger(t,"change")})},o=function(d){return function(t){var e,n,i,r,o,a,s,l,c,u;if(n=String.fromCharCode(t.which),/^\d+$/.test(n)){for(s=t.target,u=h.val(s),e=p(u+n),a=(u.replace(/\D/g,"")+n).length,c=[16],e&&(c=e.length),d&&(c=c.filter(function(t){return t<=d})),i=r=0,o=c.length;r<o;i=++r)if(!((l=c[i])<=a&&c[i+1])&&l<=a)return;if(!f(s))return(e&&"amex"===e.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(u)?(t.preventDefault(),h.val(s,u+" "+n),h.trigger(s,"change")):void 0}}},n=function(t){var e,n;if(e=t.target,n=h.val(e),!t.meta&&8===t.which&&!f(e))return/\d\s$/.test(n)?(t.preventDefault(),h.val(e,n.replace(/\d\s$/,"")),h.trigger(e,"change")):/\s\d?$/.test(n)?(t.preventDefault(),h.val(e,n.replace(/\s\d?$/,"")),h.trigger(e,"change")):void 0},l=function(t){var e,n,i;if(e=String.fromCharCode(t.which),/^\d+$/.test(e))return n=t.target,i=h.val(n)+e,/^\d$/.test(i)&&"0"!==i&&"1"!==i?(t.preventDefault(),h.val(n,"0"+i+" / "),h.trigger(n,"change")):/^\d\d$/.test(i)?(t.preventDefault(),h.val(n,i+" / "),h.trigger(n,"change")):void 0},d=function(t){var e,n,i;if(e=String.fromCharCode(t.which),/^\d+$/.test(e))return n=t.target,i=h.val(n)+e,/^\d$/.test(i)&&"0"!==i&&"1"!==i?(t.preventDefault(),h.val(n,"0"+i),h.trigger(n,"change")):/^\d\d$/.test(i)?(t.preventDefault(),h.val(n,""+i),h.trigger(n,"change")):void 0},c=function(t){var e,n,i;if(e=String.fromCharCode(t.which),/^\d+$/.test(e))return n=t.target,i=h.val(n),/^\d\d$/.test(i)?(h.val(n,i+" / "),h.trigger(n,"change")):void 0},u=function(t){var e,n;if("/"===String.fromCharCode(t.which))return e=t.target,n=h.val(e),/^\d$/.test(n)&&"0"!==n?(h.val(e,"0"+n+" / "),h.trigger(e,"change")):void 0},i=function(t){var e,n;if(!t.metaKey&&(e=t.target,n=h.val(e),8===t.which&&!f(e)))return/\d(\s|\/)+$/.test(n)?(t.preventDefault(),h.val(e,n.replace(/\d(\s|\/)*$/,"")),h.trigger(e,"change")):/\s\/\s?\d?$/.test(n)?(t.preventDefault(),h.val(e,n.replace(/\s\/\s?\d?$/,"")),h.trigger(e,"change")):void 0},x=function(t){var e;return!(!t.metaKey&&!t.ctrlKey)||(32===t.which?t.preventDefault():0===t.which||(t.which<33||(e=String.fromCharCode(t.which),/[\d\s]/.test(e)?void 0:t.preventDefault())))},v=function(a){return function(t){var e,n,i,r,o;if(r=t.target,n=String.fromCharCode(t.which),/^\d+$/.test(n)&&!f(r))return o=(h.val(r)+n).replace(/\D/g,""),i=16,(e=p(o))&&(i=e.length[e.length.length-1]),a&&(i=Math.min(i,a)),o.length<=i?void 0:t.preventDefault()}},b=function(t,e){var n,i;if(i=t.target,n=String.fromCharCode(t.which),/^\d+$/.test(n)&&!f(i))return(h.val(i)+n).replace(/\D/g,"").length>e?t.preventDefault():void 0},y=function(t){return b(t,6)},w=function(t){return b(t,2)},T=function(t){return b(t,4)},e=function(t){var e,n;if(n=t.target,e=String.fromCharCode(t.which),/^\d+$/.test(e)&&!f(n))return(h.val(n)+e).length<=4?void 0:t.preventDefault()},S=function(t){var e,i,n,r,o;if(r=t.target,o=h.val(r),n=a.fns.cardType(o)||"unknown",!h.hasClass(r,n))return e=function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)i=s[t],n.push(i.type);return n}(),h.removeClass(r,"unknown"),h.removeClass(r,e.join(" ")),h.addClass(r,n),h.toggleClass(r,"identified","unknown"!==n),h.trigger(r,"payment.cardType",n)},a=function(){function a(){}return a.fns={cardExpiryVal:function(t){var e,n,i;return e=(n=(t=t.replace(/\s/g,"")).split("/",2))[0],2===(null!=(i=n[1])?i.length:void 0)&&/^\d+$/.test(i)&&(i=(new Date).getFullYear().toString().slice(0,2)+i),{month:e=parseInt(e,10),year:i=parseInt(i,10)}},validateCardNumber:function(t){var e,n;return t=(t+"").replace(/\s+|-/g,""),!!/^\d+$/.test(t)&&(!!(e=p(t))&&(n=t.length,0<=E.call(e.length,n)&&(!1===e.luhn||g(t))))},validateCardExpiry:function(t,e){var n,i,r,o;return"object"==typeof t&&"month"in t?(t=(r=t).month,e=r.year):"string"==typeof t&&0<=E.call(t,"/")&&(t=(o=a.fns.cardExpiryVal(t)).month,e=o.year),!(!t||!e)&&(t=h.trim(t),e=h.trim(e),!!/^\d+$/.test(t)&&(!!/^\d+$/.test(e)&&(!!((t=parseInt(t,10))&&t<=12)&&(2===e.length&&(e=(new Date).getFullYear().toString().slice(0,2)+e),i=new Date(e,t),n=new Date,i.setMonth(i.getMonth()-1),i.setMonth(i.getMonth()+1,1),n<i))))},validateCardCVC:function(t,e){var n,i;return t=h.trim(t),!!/^\d+$/.test(t)&&(e&&r(e)?(n=t.length,0<=E.call(null!=(i=r(e))?i.cvcLength:void 0,n)):3<=t.length&&t.length<=4)},cardType:function(t){var e;return t&&(null!=(e=p(t))?e.type:void 0)||null},formatCardNumber:function(t){var e,n,i,r;return(e=p(t))?(r=e.length[e.length.length-1],t=(t=t.replace(/\D/g,"")).slice(0,r),e.format.global?null!=(i=t.match(e.format))?i.join(" "):void 0:null!=(n=e.format.exec(t))?(n.shift(),(n=n.filter(function(t){return t})).join(" ")):void 0):t}},a.restrictNumeric=function(t){return h.on(t,"keypress",x)},a.cardExpiryVal=function(t){return a.fns.cardExpiryVal(h.val(t))},a.formatCardCVC=function(t){return a.restrictNumeric(t),h.on(t,"keypress",e),t},a.formatCardExpiry=function(t){var e,n;return a.restrictNumeric(t),t.length&&2===t.length?(e=t[0],n=t[1],this.formatCardExpiryMultiple(e,n)):(h.on(t,"keypress",y),h.on(t,"keypress",l),h.on(t,"keypress",u),h.on(t,"keypress",c),h.on(t,"keydown",i)),t},a.formatCardExpiryMultiple=function(t,e){return h.on(t,"keypress",w),h.on(t,"keypress",d),h.on(e,"keypress",T)},a.formatCardNumber=function(t,e){return a.restrictNumeric(t),h.on(t,"keypress",v(e)),h.on(t,"keypress",o(e)),h.on(t,"keydown",n),h.on(t,"keyup blur",S),h.on(t,"paste",m),h.on(t,"input",m),t},a.getCardArray=function(){return s},a.setCardArray=function(t){return s=t,!0},a.addToCardArray=function(t){return s.push(t)},a.removeFromCardArray=function(t){var e;for(e in s)s[e].type===t&&s.splice(e,1);return!0},a}(),C.exports=a,A.Payment=a}).call(this)}).call(t,function(){return this}())},function(t,e,n){"use strict";t.exports=n(8)},function(t,e,n){"use strict";var h,p=n(9);(h=function h(t,e){var n,i,r,o,a,s,l=t||{},c=1,u=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=e||{},c=2),"object"==typeof l||p.fn(l)||(l={});c<u;c++)if(null!=(n=arguments[c]))for(i in"string"==typeof n&&(n=n.split("")),n)r=l[i],l!==(o=n[i])&&(d&&o&&(p.hash(o)||(a=p.array(o)))?(a?(a=!1,s=r&&p.array(r)?r:[]):s=r&&p.hash(r)?r:{},l[i]=h(d,s,o)):void 0!==o&&(l[i]=o));return l}).version="1.1.3",t.exports=h},function(t){"use strict";var e,n=Object.prototype,i=n.hasOwnProperty,r=n.toString;"function"==typeof Symbol&&(e=Symbol.prototype.valueOf);var o=function(t){return t!=t},a={"boolean":1,number:1,string:1,undefined:1},s=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/,l=/^[A-Fa-f0-9]+$/,c={};c.a=c.type=function(t,e){return typeof t===e},c.defined=function(t){return void 0!==t},c.empty=function(t){var e,n=r.call(t);if("[object Array]"===n||"[object Arguments]"===n||"[object String]"===n)return 0===t.length;if("[object Object]"===n){for(e in t)if(i.call(t,e))return!1;return!0}return!t},c.equal=function u(t,e){if(t===e)return!0;var n,i=r.call(t);if(i!==r.call(e))return!1;if("[object Object]"===i){for(n in t)if(!(c.equal(t[n],e[n])&&n in e))return!1;for(n in e)if(!(c.equal(t[n],e[n])&&n in t))return!1;return!0}if("[object Array]"===i){if((n=t.length)!==e.length)return!1;for(;n--;)if(!c.equal(t[n],e[n]))return!1;return!0}return"[object Function]"===i?t.prototype===e.prototype:"[object Date]"===i&&t.getTime()===e.getTime()},c.hosted=function(t,e){var n=typeof e[t];return"object"===n?!!e[t]:!a[n]},c.instance=c["instanceof"]=function(t,e){return t instanceof e},c.nil=c["null"]=function(t){return null===t},c.undef=c.undefined=function(t){return void 0===t},c.args=c.arguments=function(t){var e="[object Arguments]"===r.call(t),n=!c.array(t)&&c.arraylike(t)&&c.object(t)&&c.fn(t.callee);return e||n},c.array=Array.isArray||function(t){return"[object Array]"===r.call(t)},c.args.empty=function(t){return c.args(t)&&0===t.length},c.array.empty=function(t){return c.array(t)&&0===t.length},c.arraylike=function(t){return!!t&&!c.bool(t)&&i.call(t,"length")&&isFinite(t.length)&&c.number(t.length)&&0<=t.length},c.bool=c["boolean"]=function(t){return"[object Boolean]"===r.call(t)},c["false"]=function(t){return c.bool(t)&&!1===Boolean(Number(t))},c["true"]=function(t){return c.bool(t)&&!0===Boolean(Number(t))},c.date=function(t){return"[object Date]"===r.call(t)},c.date.valid=function(t){return c.date(t)&&!isNaN(Number(t))},c.element=function(t){return t!==undefined&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},c.error=function(t){return"[object Error]"===r.call(t)},c.fn=c["function"]=function(t){if("undefined"!=typeof window&&t===window.alert)return!0;var e=r.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e||"[object AsyncFunction]"===e},c.number=function(t){return"[object Number]"===r.call(t)},c.infinite=function(t){return t===Infinity||t===-Infinity},c.decimal=function(t){return c.number(t)&&!o(t)&&!c.infinite(t)&&t%1!=0},c.divisibleBy=function(t,e){var n=c.infinite(t),i=c.infinite(e),r=c.number(t)&&!o(t)&&c.number(e)&&!o(e)&&0!==e;return n||i||r&&t%e==0},c.integer=c["int"]=function(t){return c.number(t)&&!o(t)&&t%1==0},c.maximum=function(t,e){if(o(t))throw new TypeError("NaN is not a valid value");if(!c.arraylike(e))throw new TypeError("second argument must be array-like");for(var n=e.length;0<=--n;)if(t<e[n])return!1;return!0},c.minimum=function(t,e){if(o(t))throw new TypeError("NaN is not a valid value");if(!c.arraylike(e))throw new TypeError("second argument must be array-like");for(var n=e.length;0<=--n;)if(t>e[n])return!1;return!0},c.nan=function(t){return!c.number(t)||t!=t},c.even=function(t){return c.infinite(t)||c.number(t)&&t==t&&t%2==0},c.odd=function(t){return c.infinite(t)||c.number(t)&&t==t&&t%2!=0},c.ge=function(t,e){if(o(t)||o(e))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(e)&&e<=t},c.gt=function(t,e){if(o(t)||o(e))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(e)&&e<t},c.le=function(t,e){if(o(t)||o(e))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(e)&&t<=e},c.lt=function(t,e){if(o(t)||o(e))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(e)&&t<e},c.within=function(t,e,n){if(o(t)||o(e)||o(n))throw new TypeError("NaN is not a valid value");if(!c.number(t)||!c.number(e)||!c.number(n))throw new TypeError("all arguments must be numbers");return c.infinite(t)||c.infinite(e)||c.infinite(n)||e<=t&&t<=n},c.object=function(t){return"[object Object]"===r.call(t)},c.primitive=function d(t){return!t||!("object"==typeof t||c.object(t)||c.fn(t)||c.array(t))},c.hash=function(t){return c.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},c.regexp=function(t){return"[object RegExp]"===r.call(t)},c.string=function(t){return"[object String]"===r.call(t)},c.base64=function(t){return c.string(t)&&(!t.length||s.test(t))},c.hex=function(t){return c.string(t)&&(!t.length||l.test(t))},c.symbol=function(t){return"function"==typeof Symbol&&"[object Symbol]"===r.call(t)&&"symbol"==typeof e.call(t)},t.exports=c}]);(function(){(function(){(function(){var e=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},createConsumer:function(t){var e;return null==t&&(t=null!=(e=this.getConfig("url"))?e:this.INTERNAL.default_mount_path),new l.Consumer(this.createWebSocketURL(t))},getConfig:function(t){var e;return null!=(e=document.head.querySelector("meta[name='action-cable-"+t+"']"))?e.getAttribute("content"):void 0},createWebSocketURL:function(t){var e;return t&&!/^wss?:/i.test(t)?((e=document.createElement("a")).href=t,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href):t},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var t;if(t=1<=arguments.length?e.call(arguments,0):[],this.debugging)return t.push(Date.now()),console.log.apply(console,["[ActionCable]"].concat(e.call(t)))}}}).call(this)}).call(this);var l=this.ActionCable;(function(){(function(){var i=function(t,e){return function(){return t.apply(e,arguments)}};l.ConnectionMonitor=function(){function t(t){this.connection=t,this.visibilityDidChange=i(this.visibilityDidChange,this),this.reconnectAttempts=0}var r,e,n;return t.pollInterval={min:3,max:30},t.staleThreshold=6,t.prototype.start=function(){if(!this.isRunning())return this.startedAt=e(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),l.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},t.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=e(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),l.log("ConnectionMonitor stopped")},t.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},t.prototype.recordPing=function(){return this.pingedAt=e()},t.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,l.log("ConnectionMonitor recorded connect")},t.prototype.recordDisconnect=function(){return this.disconnectedAt=e(),l.log("ConnectionMonitor recorded disconnect")},t.prototype.startPolling=function(){return this.stopPolling(),this.poll()},t.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},t.prototype.poll=function(){return this.pollTimeout=setTimeout((t=this,function(){return t.reconnectIfStale(),t.poll()}),this.getPollInterval());var t},t.prototype.getPollInterval=function(){var t,e,n,i;return n=(i=this.constructor.pollInterval).min,e=i.max,t=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*r(t,n,e))},t.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return l.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+n(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?l.log("ConnectionMonitor skipping reopening recent disconnect"):(l.log("ConnectionMonitor reopening"),this.connection.reopen())},t.prototype.connectionIsStale=function(){var t;return n(null!=(t=this.pingedAt)?t:this.startedAt)>this.constructor.staleThreshold},t.prototype.disconnectedRecently=function(){return this.disconnectedAt&&n(this.disconnectedAt)<this.constructor.staleThreshold},t.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout((t=this,function(){if(t.connectionIsStale()||!t.connection.isOpen())return l.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),t.connection.reopen()}),200);var t},e=function(){return(new Date).getTime()},n=function(t){return(e()-t)/1e3},r=function(t,e,n){return Math.max(e,Math.min(n,t))},t}()}).call(this),function(){var t,r,e,n,i,o=[].slice,a=function(t,e){return function(){return t.apply(e,arguments)}},s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};n=l.INTERNAL,r=n.message_types,e=n.protocols,i=2<=e.length?o.call(e,0,t=e.length-1):(t=0,[]),e[t++],l.Connection=function(){function t(t){this.consumer=t,this.open=a(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new l.ConnectionMonitor(this),this.disconnected=!0}return t.reopenDelay=500,t.prototype.send=function(t){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(t)),!0)},t.prototype.open=function(){if(this.isActive())throw l.log("Attempted to open WebSocket, but existing socket is "+this.getState()),new Error("Existing connection must be closed before opening");return l.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+e),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0},t.prototype.close=function(t){var e;if((null!=t?t:{allowReconnect:!0}).allowReconnect||this.monitor.stop(),this.isActive())return null!=(e=this.webSocket)?e.close():void 0},t.prototype.reopen=function(){var t;if(l.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(e){return t=e,l.log("Failed to reopen WebSocket",t)}finally{l.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},t.prototype.getProtocol=function(){var t;return null!=(t=this.webSocket)?t.protocol:void 0},t.prototype.isOpen=function(){return this.isState("open")},t.prototype.isActive=function(){return this.isState("open","connecting")},t.prototype.isProtocolSupported=function(){var t;return t=this.getProtocol(),0<=s.call(i,t)},t.prototype.isState=function(){var t,e;return e=1<=arguments.length?o.call(arguments,0):[],t=this.getState(),0<=s.call(e,t)},t.prototype.getState=function(){var t,e;for(e in WebSocket)if(WebSocket[e]===(null!=(t=this.webSocket)?t.readyState:void 0))return e.toLowerCase();return null},t.prototype.installEventHandlers=function(){var t,e;for(t in this.events)e=this.events[t].bind(this),this.webSocket["on"+t]=e},t.prototype.uninstallEventHandlers=function(){var t;for(t in this.events)this.webSocket["on"+t]=function(){}},t.prototype.events={message:function(t){var e,n,i;if(this.isProtocolSupported())switch(e=(i=JSON.parse(t.data)).identifier,n=i.message,i.type){case r.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case r.ping:return this.monitor.recordPing();case r.confirmation:return this.subscriptions.notify(e,"connected");case r.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",n)}},open:function(){if(l.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return l.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(){if(l.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return l.log("WebSocket onerror event")}},t}()}.call(this),function(){var c=[].slice;l.Subscriptions=function(){function t(t){this.consumer=t,this.subscriptions=[]}return t.prototype.create=function(t,e){var n,i,r;return i="object"==typeof(n=t)?n:{channel:n},r=new l.Subscription(this.consumer,i,e),this.add(r)},t.prototype.add=function(t){return this.subscriptions.push(t),this.consumer.ensureActiveConnection(),this.notify(t,"initialized"),this.sendCommand(t,"subscribe"),t},t.prototype.remove=function(t){return this.forget(t),this.findAll(t.identifier).length||this.sendCommand(t,"unsubscribe"),t},t.prototype.reject=function(t){var e,n,i,r,o;for(r=[],e=0,n=(i=this.findAll(t)).length;e<n;e++)o=i[e],this.forget(o),this.notify(o,"rejected"),r.push(o);return r},t.prototype.forget=function(r){var o;return this.subscriptions=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.subscriptions).length;t<e;t++)(o=n[t])!==r&&i.push(o);return i}.call(this),r},t.prototype.findAll=function(t){var e,n,i,r,o;for(r=[],e=0,n=(i=this.subscriptions).length;e<n;e++)(o=i[e]).identifier===t&&r.push(o);return r},t.prototype.reload=function(){var t,e,n,i,r;for(i=[],t=0,e=(n=this.subscriptions).length;t<e;t++)r=n[t],i.push(this.sendCommand(r,"subscribe"));return i},t.prototype.notifyAll=function(t){var e,n,i,r,o,a,s;for(n=t,e=2<=arguments.length?c.call(arguments,1):[],a=[],i=0,r=(o=this.subscriptions).length;i<r;i++)s=o[i],a.push(this.notify.apply(this,[s,n].concat(c.call(e))));return a},t.prototype.notify=function(t,e){var n,i,r,o,a,s,l;for(s=t,i=e,n=3<=arguments.length?c.call(arguments,2):[],a=[],r=0,o=(l="string"==typeof s?this.findAll(s):[s]).length;r<o;r++)s=l[r],a.push("function"==typeof s[i]?s[i].apply(s,n):void 0);return a},t.prototype.sendCommand=function(t,e){var n;return n=t.identifier,this.consumer.send({command:e,identifier:n})},t}()}.call(this),function(){l.Subscription=function(){function t(t,e,n){this.consumer=t,null==e&&(e={}),this.identifier=JSON.stringify(e),i(this,n)}var i;return t.prototype.perform=function(t,e){return null==e&&(e={}),e.action=t,this.send(e)},t.prototype.send=function(t){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(t)})},t.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},i=function(t,e){var n,i;if(null!=e)for(n in e)i=e[n],t[n]=i;return t},t}()}.call(this),function(){l.Consumer=function(){function t(t){this.url=t,this.subscriptions=new l.Subscriptions(this),this.connection=new l.Connection(this)}return t.prototype.send=function(t){return this.connection.send(t)},t.prototype.connect=function(){return this.connection.open()},t.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},t.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},t}()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=l:"function"==typeof define&&define.amd&&define(l)}).call(this),function(){this.App||(this.App={}),App.cable=ActionCable.createConsumer()}.call(this),function(){}.call(this),function(s){"use strict";var l={init:function(t){return this.each(function(){this.self=s(this),l.destroy.call(this.self),this.opt=s.extend(!0,{},s.fn.raty.defaults,t,this.self.data()),l._adjustCallback.call(this),l._adjustNumber.call(this),l._adjustHints.call(this),this.opt.score=l._adjustedScore.call(this,this.opt.score),"img"!==this.opt.starType&&l._adjustStarType.call(this),l._adjustPath.call(this),l._createStars.call(this),this.opt.cancel&&l._createCancel.call(this),this.opt.precision&&l._adjustPrecision.call(this),l._createScore.call(this),l._apply.call(this,this.opt.score),l._setTitle.call(this,this.opt.score),l._target.call(this,this.opt.score),this.opt.readOnly?l._lock.call(this):(this.style.cursor="pointer",l._binds.call(this))})},_adjustCallback:function(){for(var t=["number","readOnly","score","scoreName","target","path"],e=0;e<t.length;e++)"function"==typeof this.opt[t[e]]&&(this.opt[t[e]]=this.opt[t[e]].call(this))},_adjustedScore:function(t){return t?l._between(t,0,this.opt.number):t},_adjustHints:function(){if(this.opt.hints||(this.opt.hints=[]),this.opt.halfShow||this.opt.half)for(var t=this.opt.precision?10:2,e=0;e<this.opt.number;e++){var n=this.opt.hints[e];"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),this.opt.hints[e]=[];for(var i=0;i<t;i++){var r=n[i],o=n[n.length-1];o===undefined&&(o=null),this.opt.hints[e][i]=r===undefined?o:r}}},_adjustNumber:function(){this.opt.number=l._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-1)&&(this.opt.path+="/")},_adjustPrecision:function(){this.opt.half=!0},_adjustStarType:function(){var t=["cancelOff","cancelOn","starHalf","starOff","starOn"];this.opt.path="";for(var e=0;e<t.length;e++)this.opt[t[e]]=this.opt[t[e]].replace(".","-")},_apply:function(t){l._fill.call(this,t),t&&(0<t&&this.score.val(t),l._roundStars.call(this,t))},_between:function(t,e,n){return Math.min(Math.max(parseFloat(t),e),n)},_binds:function(){this.cancel&&(l._bindOverCancel.call(this),l._bindClickCancel.call(this),l._bindOutCancel.call(this)),l._bindOver.call(this),l._bindClick.call(this),l._bindOut.call(this)},_bindClick:function(){var i=this;i.stars.on("click.raty",function(t){var e=!0,n=i.opt.half||i.opt.precision?i.self.data("score"):this.alt||s(this).data("alt");i.opt.click&&(e=i.opt.click.call(i,+n,t)),(e||e===undefined)&&(i.opt.half&&!i.opt.precision&&(n=l._roundHalfScore.call(i,n)),l._apply.call(i,n))})},_bindClickCancel:function(){var e=this;e.cancel.on("click.raty",function(t){e.score.removeAttr("value"),e.opt.click&&e.opt.click.call(e,null,t)})},_bindOut:function(){var n=this;n.self.on("mouseleave.raty",function(t){var e=+n.score.val()||undefined;l._apply.call(n,e),l._target.call(n,e,t),l._resetTitle.call(n),n.opt.mouseout&&n.opt.mouseout.call(n,e,t)})},_bindOutCancel:function(){var i=this;i.cancel.on("mouseleave.raty",function(t){var e=i.opt.cancelOff;if("img"!==i.opt.starType&&(e=i.opt.cancelClass+" "+e),l._setIcon.call(i,this,e),i.opt.mouseout){var n=+i.score.val()||undefined;i.opt.mouseout.call(i,n,t)}})},_bindOver:function(){var n=this,t=n.opt.half?"mousemove.raty":"mouseover.raty";n.stars.on(t,function(t){var e=l._getScoreByPosition.call(n,t,this);l._fill.call(n,e),n.opt.half&&(l._roundStars.call(n,e,t),l._setTitle.call(n,e,t),n.self.data("score",e)),l._target.call(n,e,t),n.opt.mouseover&&n.opt.mouseover.call(n,e,t)})},_bindOverCancel:function(){var i=this;i.cancel.on("mouseover.raty",function(t){var e=i.opt.path+i.opt.starOff,n=i.opt.cancelOn;"img"===i.opt.starType?i.stars.attr("src",e):(n=i.opt.cancelClass+" "+n,i.stars.attr("class",e)),l._setIcon.call(i,this,n),l._target.call(i,null,t),i.opt.mouseover&&i.opt.mouseover.call(i,null)})},_buildScoreField:function(){return s("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var t=this.opt.path+this.opt.cancelOff,e=s("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});"img"===this.opt.starType?e.attr({src:t,alt:"x"}):e.attr("data-alt","x").addClass(t),"left"===this.opt.cancelPlace?this.self.prepend("&#160;").prepend(e):this.self.append("&#160;").append(e),this.cancel=e},_createScore:function(){var t=s(this.opt.targetScore);this.score=t.length?t:l._buildScoreField.call(this)},_createStars:function(){for(var t=1;t<=this.opt.number;t++){var e=l._nameForIndex.call(this,t),n={alt:t,src:this.opt.path+this.opt[e]};"img"!==this.opt.starType&&(n={"data-alt":t,"class":n.src}),n.title=l._getHint.call(this,t),s("<"+this.opt.starType+" />",n).appendTo(this),this.opt.space&&this.self.append(t<this.opt.number?"&#160;":"")}this.stars=this.self.children(this.opt.starType)},_error:function(t){s(this).text(t),s.error(t)},_fill:function(t){for(var e=0,n=1;n<=this.stars.length;n++){var i,r=this.stars[n-1],o=l._turnOn.call(this,n,t);if(this.opt.iconRange&&this.opt.iconRange.length>e){var a=this.opt.iconRange[e];i=l._getRangeIcon.call(this,a
,o),n<=a.range&&l._setIcon.call(this,r,i),n===a.range&&e++}else i=this.opt[o?"starOn":"starOff"],l._setIcon.call(this,r,i)}},_getFirstDecimal:function(t){var e=t.toString().split(".")[1],n=0;return e&&(n=parseInt(e.charAt(0),10),"9999"===e.slice(1,5)&&n++),n},_getRangeIcon:function(t,e){return e?t.on||this.opt.starOn:t.off||this.opt.starOff},_getScoreByPosition:function(t,e){var n=parseInt(e.alt||e.getAttribute("data-alt"),10);if(this.opt.half){var i=l._getWidth.call(this);n=n-1+parseFloat((t.pageX-s(e).offset().left)/i)}return n},_getHint:function(t,e){if(0!==t&&!t)return this.opt.noRatedMsg;var n=l._getFirstDecimal.call(this,t),i=Math.ceil(t),r=this.opt.hints[(i||1)-1],o=r,a=!e||this.move;return this.opt.precision?(a&&(n=0===n?9:n-1),o=r[n]):(this.opt.halfShow||this.opt.half)&&(o=r[n=a&&0===n?1:5<n?1:0]),""===o?"":o||t},_getWidth:function(){var t=this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"));return t||l._error.call(this,"Could not get the icon width!"),t},_lock:function(){var t=l._getHint.call(this,this.score.val());this.style.cursor="",this.title=t,this.score.prop("readonly",!0),this.stars.prop("title",t),this.cancel&&this.cancel.hide(),this.self.data("readonly",!0)},_nameForIndex:function(t){return this.opt.score&&this.opt.score>=t?"starOn":"starOff"},_resetTitle:function(){for(var t=0;t<this.opt.number;t++)this.stars[t].title=l._getHint.call(this,t+1)},_roundHalfScore:function(t){var e=parseInt(t,10),n=l._getFirstDecimal.call(this,t);return 0!==n&&(n=5<n?1:.5),e+n},_roundStars:function(t,e){var n,i=(t%1).toFixed(2);if(e||this.move?n=.5<i?"starOn":"starHalf":i>this.opt.round.down&&(n="starOn",this.opt.halfShow&&i<this.opt.round.up?n="starHalf":i<this.opt.round.full&&(n="starOff")),n){var r=this.opt[n],o=this.stars[Math.ceil(t)-1];l._setIcon.call(this,o,r)}},_setIcon:function(t,e){t["img"===this.opt.starType?"src":"className"]=this.opt.path+e},_setTarget:function(t,e){e&&(e=this.opt.targetFormat.toString().replace("{score}",e)),t.is(":input")?t.val(e):t.html(e)},_setTitle:function(t,e){if(t){var n=parseInt(Math.ceil(t),10);this.stars[n-1].title=l._getHint.call(this,t,e)}},_target:function(t,e){if(this.opt.target){var n=s(this.opt.target);n.length||l._error.call(this,"Target selector invalid or missing!");var i=e&&"mouseover"===e.type;if(t===undefined)t=this.opt.targetText;else if(null===t)t=i?this.opt.cancelHint:this.opt.targetText;else{"hint"===this.opt.targetType?t=l._getHint.call(this,t,e):this.opt.precision&&(t=parseFloat(t).toFixed(1));var r=e&&"mousemove"===e.type;i||r||this.opt.targetKeep||(t=this.opt.targetText)}l._setTarget.call(this,n,t)}},_turnOn:function(t,e){return this.opt.single?t===e:t<=e},_unlock:function(){this.style.cursor="pointer",this.removeAttribute("title"),this.score.removeAttr("readonly"),this.self.data("readonly",!1);for(var t=0;t<this.opt.number;t++)this.stars[t].title=l._getHint.call(this,t+1);this.cancel&&this.cancel.css("display","")},cancel:function(e){return this.each(function(){var t=s(this);!0!==t.data("readonly")&&(l[e?"click":"score"].call(t,null),this.score.removeAttr("value"))})},click:function(t){return this.each(function(){!0!==s(this).data("readonly")&&(t=l._adjustedScore.call(this,t),l._apply.call(this,t),this.opt.click&&this.opt.click.call(this,t,s.Event("click")),l._target.call(this,t))})},destroy:function(){return this.each(function(){var t=s(this),e=t.data("raw");e?t.off(".raty").empty().css({cursor:e.style.cursor}).removeData("readonly"):t.data("raw",t.clone()[0])})},getScore:function(){var t,e=[];return this.each(function(){t=this.score.val(),e.push(t?+t:undefined)}),1<e.length?e:e[0]},move:function(a){return this.each(function(){var t=parseInt(a,10),e=l._getFirstDecimal.call(this,a);t>=this.opt.number&&(t=this.opt.number-1,e=10);var n=l._getWidth.call(this)/10,i=s(this.stars[t]),r=i.offset().left+n*e,o=s.Event("mousemove",{pageX:r});this.move=!0,i.trigger(o),this.move=!1})},readOnly:function(e){return this.each(function(){var t=s(this);t.data("readonly")!==e&&(e?(t.off(".raty").children(this.opt.starType).off(".raty"),l._lock.call(this)):(l._binds.call(this),l._unlock.call(this)),t.data("readonly",e))})},reload:function(){return l.set.call(this,{})},score:function(){var t=s(this);return arguments.length?l.setScore.apply(t,arguments):l.getScore.call(t)},set:function(t){return this.each(function(){s(this).raty(s.extend({},this.opt,t))})},setScore:function(t){return this.each(function(){!0!==s(this).data("readonly")&&(t=l._adjustedScore.call(this,t),l._apply.call(this,t),l._target.call(this,t))})}};s.fn.raty=function(t){return l[t]?l[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void s.error("Method "+t+" does not exist!"):l.init.apply(this,arguments)},s.fn.raty.defaults={cancel:!1,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:undefined,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:undefined,mouseout:undefined,mouseover:undefined,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:undefined,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:undefined,scoreName:"score",single:!1,space:!0,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",starType:"img",target:undefined,targetFormat:"{score}",targetKeep:!1,targetScore:undefined,targetText:"",targetType:"hint"}}(jQuery),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e()}(this,function(){return function(n){function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var r={};return i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=27)}([function(t,e,n){"use strict";function o(){}function a(t,e){return"["+t+"] > "+e}function r(i){var r=self.console[i];return r?function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0]&&(e[0]=a(i,e[0])),r.apply(self.console,e)}:o}function i(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach(function(t){c[t]=e[t]?e[t].bind(e):r(t)})}n.d(e,"a",function(){return u}),n.d(e,"b",function(){return d});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l={trace:o,debug:o,log:o,warn:o,info:o,error:o},c=l,u=function(t){if(!0===t||"object"===(void 0===t?"undefined":s(t))){i(t,"debug","log","info","warn","error");try{c.log()}catch(t){c=l}}else c=l},d=l},function(t,e){"use strict";var n={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"};e.a=n},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});var i={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),a=n(2),s=n(1),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]),r=function(){function r(t){o(this,r),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return r.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},r.prototype.onHandlerDestroying=function(){},r.prototype.onHandlerDestroyed=function(){},r.prototype.isEventHandler=function(){return"object"===l(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},r.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(c.has(t))throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},r.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},r.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},r.prototype.onEventGeneric=function(t,e){var n=function(t,e){var n="on"+t.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,e)};try{n.call(this,t,e).call()}catch(e){i.b.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(s.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},r}();e.a=r},function(t){var n,u,e,i,d;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,u=/^([^\/;?#]*)(.*)$/,e=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var i=this.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");return i.path=d.normalizePath(i.path),d.buildURLFromParts(i)}var r=this.parseURL(e);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=d.normalizePath(r.path),d.buildURLFromParts(r)):e;var o=this.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var a=u.exec(o.path);o.netLoc=a[1],o.path=a[2]}o.netLoc&&!o.path&&(o.path="/");var s={scheme:o.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(s.netLoc=o.netLoc,"/"!==r.path[0]))if(r.path){var l=o.path,c=l.substring(0,l.lastIndexOf("/")+1)+r.path;s.path=d.normalizePath(c)}else s.path=o.path,r.params||(s.params=o.params,r.query||(s.query=o.query));return null===s.path&&(s.path=n.alwaysNormalize?d.normalizePath(r.path):r.path),d.buildURLFromParts(s)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(e,"");t.length!==(t=t.replace(i,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=d},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"b",function(){return o});var r=function(){function s(){i(this,s)}return s.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},s.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},s.getID3Data=function(t,e){for(var n=e,i=0;s.isHeader(t,e);)i+=10,i+=s._readSize(t,e+6),s.isFooter(t,e+10)&&(i+=10),e+=i;if(0<i)return t.subarray(n,n+i)},s._readSize=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,(n|=(127&t[e+2])<<7)|127&t[e+3]},s.getTimeStamp=function(t){for(var e=s.getID3Frames(t),n=0;n<e.length;n++){var i=e[n];if(s.isTimeStampFrame(i))return s._readTimeStamp(i)}},s.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},s._getFrameData=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=s._readSize(t,4);return{type:e,size:n,data:t.subarray(10,10+n)}},s.getID3Frames=function(t){for(var e=0,n=[];s.isHeader(t,e);){for(var i=s._readSize(t,e+6),r=(e+=10)+i;e+8<r;){var o=s._getFrameData(t.subarray(e)),a=s._decodeFrame(o);a&&n.push(a),e+=o.size+10}s.isFooter(t,e)&&(e+=10)}return n},s._decodeFrame=function(t){return"PRIV"===t.type?s._decodePrivFrame(t):"T"===t.type[0]?s._decodeTextFrame(t):"W"===t.type[0]?s._decodeURLFrame(t):void 0},s._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=1&e[3],i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},s._decodePrivFrame=function(t){if(!(t.size<2)){var e=s._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}}},s._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,n=s._utf8ArrayToStr(t.data.subarray(e));e+=n.length+1;var i=s._utf8ArrayToStr(t.data.subarray(e));return{key:t.type,info:n,data:i}}var r=s._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:r}}},s._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,n=s._utf8ArrayToStr(t.data.subarray(e));e+=n.length+1;var i=s._utf8ArrayToStr(t.data.subarray(e));return{key:t.type,info:n,data:i}}var r=s._utf8ArrayToStr(t.data);return{key:t.type,data:r}},s._utf8ArrayToStr=function(t,e){for(var n=1<arguments.length&&void 0!==e&&arguments[1],i=t.length,r=void 0,o=void 0,a=void 0,s="",l=0;l<i;){if(0===(r=t[l++])&&n)return s;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(r);break;case 12:case 13:o=t[l++],s+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=t[l++],a=t[l++],s+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&a)<<0)}}return s},s}(),o=r._utf8ArrayToStr;e.a=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(4),o=n.n(r),a=n(16),s=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),l=function(){function e(){var t;i(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this._elementaryStreams=((t={})[e.ElementaryStreamTypes.AUDIO]=!1,t[e.ElementaryStreamTypes.VIDEO]=!1,t)}return e.prototype.addElementaryStream=function(t){this._elementaryStreams[t]=!0},e.prototype.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},e.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},e.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var n=t;return t&&t.method&&t.uri&&!t.iv&&((n=new a.a).method=t.method,n.baseuri=t.baseuri,n.reluri=t.reluri,n.iv=this.createInitializationVector(e)),n},s(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=o.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var t=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var n=this.lastByteRangeEndOffset;t[0]=n||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0],this._byteRange=t}return t}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),e}();e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return c}),n.d(e,"b",function(){return i});var s=n(3),l=n(1),c={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},i=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,l.a.BUFFER_APPENDED,l.a.FRAG_BUFFERED,l.a.FRAG_LOADED));return e.bufferPadding=.2,e.fragments=Object.create(null),e.timeRanges=Object.create(null),e.config=t.config,e}return a(i,n),i.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,s.a.prototype.destroy.call(this),n.prototype.destroy.call(this)},i.prototype.getBufferedFrag=function(i,r){var o=this.fragments,t=Object.keys(o).filter(function(t){var e=o[t];if(e.body.type!==r)return!1;if(!e.buffered)return!1;var n=e.body;return n.startPTS<=i&&i<=n.endPTS});if(0===t.length)return null;var e=t.pop();return o[e].body},i.prototype.detectEvictedFragments=function(r,o){var a=this,s=void 0,l=void 0;Object.keys(this.fragments).forEach(function(t){var e=a.fragments[t];if(!0===e.buffered){var n=e.range[r];if(n){s=n.time;for(var i=0;i<s.length;i++)if(l=s[i],!1===a.isTimeBuffered(l.startPTS,l.endPTS,o)){a.removeFragment(e.body);break}}}})},i.prototype.detectPartialFragments=function(n){var i=this,t=this.getFragmentKey(n),r=this.fragments[t];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach(function(t){if(!0===n.hasElementaryStream(t)){var e=i.timeRanges[t];r.range[t]=i.getBufferedTimes(n.startPTS,n.endPTS,e)}}))},i.prototype.getBufferedTimes=function(t,e,n){for(var i=[],r=void 0,o=void 0,a=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,o=n.end(s)+this.bufferPadding,r<=t&&e<=o){i.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))});break}if(t<o&&r<e)i.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))}),a=!0;else if(e<=r)break}return{time:i,partial:a}},i.prototype.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.sn},i.prototype.getPartialFragment=function(n){var i=this,r=void 0,o=void 0,a=void 0,s=null,l=0;return Object.keys(this.fragments).forEach(function(t){var e=i.fragments[t];i.isPartial(e)&&(o=e.body.startPTS-i.bufferPadding,a=e.body.endPTS+i.bufferPadding,o<=n&&n<=a&&(r=Math.min(n-o,a-n),l<=r&&(s=e.body,l=r)))}),s},i.prototype.getState=function(t){var e=this.getFragmentKey(t),n=this.fragments[e],i=c.NOT_LOADED;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?c.PARTIAL:c.OK:c.APPENDING),i},i.prototype.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},i.prototype.isTimeBuffered=function(t,e,n){for(var i=void 0,r=void 0,o=0;o<n.length;o++){if(i=n.start(o)-this.bufferPadding,r=n.end(o)+this.bufferPadding,i<=t&&e<=r)return!0;if(e<=i)return!1}return!1},i.prototype.onFragLoaded=function(t){var e=t.frag;if(!isNaN(e.sn)){var n=this.getFragmentKey(e),i={body:e,range:Object.create(null),buffered:!1};this.fragments[n]=i}},i.prototype.onBufferAppended=function(t){var n=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var e=n.timeRanges[t];n.detectEvictedFragments(t,e)})},i.prototype.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},i.prototype.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},i.prototype.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},i.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},i}(s.a)},function(t,e){"use strict";var n={search:function(t,e){for(var n=0,i=t.length-1,r=null,o=null;n<=i;){var a=e(o=t[r=(n+i)/2|0]);if(0<a)n=r+1;else{if(!(a<0))return o;i=r-1}}return null}};e.a=n},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r});var r=function(){function t(){i(this,t)}return t.isBuffered=function(t,e){try{if(t)for(var n=t.buffered,i=0;i<n.length;i++)if(e>=n.start(i)&&e<=n.end(i))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,n){try{if(t){var i=t.buffered,r=[],o=void 0;for(o=0;o<i.length;o++)r.push({start:i.start(o),end:i.end(o)});return this.bufferedInfo(r,e,n)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,n){var i=[],r=void 0,o=void 0,a=void 0,s=void 0,l=void 0;for(t.sort(function(t,e){return t.start-e.start||e.end-t.end}),l=0;l<t.length;l++){var c=i.length;if(c){var u=i[c-1].end;t[l].start-u<n?t[l].end>u&&(i[c-1].end=t[l].end):i.push(t[l])}else i.push(t[l])}for(r=l=0,o=a=e;l<i.length;l++){var d=i[l].start,h=i[l].end;if(d<=e+n&&e<h)o=d,r=(a=h)-e;else if(e+n<d){s=d;break}}return{len:r,start:o,end:a,nextStart:s}},t}()},function(t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function u(t){return"function"==typeof t}function e(t){return"number"==typeof t}function d(t){return"object"==typeof t&&null!==t}function h(t){return void 0===t}((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!e(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t,e,n){var i,r,o,a,s,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||d(this._events.error)&&!this._events.error.length)){if((i=e)instanceof Error)throw i;var c=new Error('Uncaught, unspecified "error" event. ('+i+")");throw c.context=i,c}if(h(r=this._events[t]))return!1;if(u(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,e);break;case 3:r.call(this,e,n);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(d(r))for(a=Array.prototype.slice.call(arguments,1),o=(l=r.slice()).length,s=0;s<o;s++)l[s].apply(this,a);return!0},i.prototype.addListener=function(t,e){var n;if(!u(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,u(e.listener)?e.listener:e),this._events[t]?d(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,d(this._events[t])&&!this._events[t].warned&&(n=h(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!u(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},i.prototype.removeListener=function(t,e){var n,i,r,o;if(!u(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=(n=this._events[t]).length,i=-1,n===e||u(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(d(n)){for(o=r;0<o--;)if(n[o]===e||n[o].listener&&n[o].listener===e){i=o;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(u(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?u(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(u(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=n(34),c=n(35),u=n(36),o=n(2),d=n(0),i=function(){function a(t,e,n){var i=(2<arguments.length&&void 0!==n?arguments[2]:{}).removePKCS7Padding,r=void 0===i||i;if(s(this,a),this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=r)try{var o=crypto||self.crypto;this.subtle=o.subtle||o.webkitSubtle}catch(a){}this.disableWebCrypto=!this.subtle}return a.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},a.prototype.decrypt=function(e,n,i,r){var o=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(d.b.log("JS AES decrypt"),this.logEnabled=!1);var t=this.decryptor;t||(this.decryptor=t=new u.a),t.expandKey(n),r(t.decrypt(e,0,i,this.removePKCS7Padding))}else{this.logEnabled&&(d.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var a=this.subtle;this.key!==n&&(this.key=n,this.fastAesKey=new c.a(a,n)),this.fastAesKey.expandKey().then(function(t){new l.a(a,i).decrypt(e,t)["catch"](function(t){o.onWebCryptoError(t,e,n,i,r)}).then(function(t){r(t)})})["catch"](function(t){o.onWebCryptoError(t,e,n,i,r)})}},a.prototype.onWebCryptoError=function(t,e,n,i,r){this.config.enableSoftwareAES?(d.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,n,i,r)):(d.b.error("decrypting error : "+t.message),this.observer.trigger(Event.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},a.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},a}();e.a=i},function(t,e){"use strict";function n(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}e.a=n},function(t,e,n){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(o){function a(t){s(this,a);for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=l(this,o.call.apply(o,[this,t].concat(n)));return r._tickInterval=null,r._tickTimer=null,r._tickCallCount=0,r._boundTick=r.tick.bind(r),r}return i(a,o),a.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},a.prototype.hasInterval=function(){return!!this._tickInterval},a.prototype.hasNextTick=function(){return!!this._tickTimer},a.prototype.setInterval=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,t),!0)}),a.prototype.clearInterval=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),!(this._tickInterval=null))}),a.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),!(this._tickTimer=null))},a.prototype.tick=function(){1==++this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},a.prototype.doTick=function(){},a}(n(3).a);e.a=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var g=n(1),a=n(3),s=n(2),h=n(0),l=n(15),m=n(28),c=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),v={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},u={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},d=function(n){function f(t){i(this,f);var e=r(this,n.call(this,t,g.a.MANIFEST_LOADING,g.a.LEVEL_LOADING,g.a.AUDIO_TRACK_LOADING,g.a.SUBTITLE_TRACK_LOADING))
;return e.loaders={},e}return o(f,n),f.canHaveQualityLevels=function(t){return t!==v.AUDIO_TRACK&&t!==v.SUBTITLE_TRACK},f.mapContextToLevelType=function(t){switch(t.type){case v.AUDIO_TRACK:return u.AUDIO;case v.SUBTITLE_TRACK:return u.SUBTITLE;default:return u.MAIN}},f.getResponseUrl=function(t,e){var n=t.url;return void 0!==n&&0!==n.indexOf("data:")||(n=e.url),n},f.prototype.createInternalLoader=function(t){var e=this.hls.config,n=e.pLoader,i=e.loader,r=new(n||i)(e);return t.loader=r,this.loaders[t.type]=r},f.prototype.getInternalLoader=function(t){return this.loaders[t.type]},f.prototype.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},f.prototype.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},f.prototype.destroy=function(){this.destroyInternalLoaders(),n.prototype.destroy.call(this)},f.prototype.onManifestLoading=function(t){this.load(t.url,{type:v.MANIFEST})},f.prototype.onLevelLoading=function(t){this.load(t.url,{type:v.LEVEL,level:t.level,id:t.id})},f.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:v.AUDIO_TRACK,id:t.id})},f.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:v.SUBTITLE_TRACK,id:t.id})},f.prototype.load=function(t,e){var n=this.hls.config,i=this.getInternalLoader(e);if(i){var r=i.context;if(r&&r.url===t)return h.b.trace("playlist request ongoing"),!1;h.b.warn("aborting previous loader for type: "+e.type),i.abort()}var o=void 0,a=void 0,s=void 0,l=void 0;switch(e.type){case v.MANIFEST:o=n.manifestLoadingMaxRetry,a=n.manifestLoadingTimeOut,s=n.manifestLoadingRetryDelay,l=n.manifestLoadingMaxRetryTimeout;break;case v.LEVEL:o=0,a=n.levelLoadingTimeOut;break;default:o=n.levelLoadingMaxRetry,a=n.levelLoadingTimeOut,s=n.levelLoadingRetryDelay,l=n.levelLoadingMaxRetryTimeout,h.b.log("Playlist loader for "+e.type+" "+(e.level||e.id))}i=this.createInternalLoader(e),e.url=t,e.responseType=e.responseType||"";var c=void 0,u=void 0;return c={timeout:a,maxRetry:o,retryDelay:s,maxRetryDelay:l},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.load(e,c,u),!0},f.prototype.loadsuccess=function(t,e,n,i){var r=3<arguments.length&&void 0!==i?arguments[3]:null;if(n.isSidxRequest)return this._handleSidxRequest(t,n),void this._handlePlaylistLoaded(t,e,n,r);this.resetInternalLoader(n.type);var o=t.data;e.tload=performance.now(),0===o.indexOf("#EXTM3U")?0<o.indexOf("#EXTINF:")||0<o.indexOf("#EXT-X-TARGETDURATION:")?this._handleTrackOrLevelPlaylist(t,e,n,r):this._handleMasterPlaylist(t,e,n,r):this._handleManifestParsingError(t,n,"no EXTM3U delimiter",r)},f.prototype.loaderror=function(t,e,n){var i=2<arguments.length&&void 0!==n?arguments[2]:null;this._handleNetworkError(e,i)},f.prototype.loadtimeout=function(t,e,n){var i=2<arguments.length&&void 0!==n?arguments[2]:null;this._handleNetworkError(e,i,!0)},f.prototype._handleMasterPlaylist=function(t,e,n,i){var r=this.hls,o=t.data,a=f.getResponseUrl(t,n),s=m.a.parseMasterPlaylist(o,a);if(s.length){var l=s.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),c=m.a.parseMasterPlaylistMedia(o,a,"AUDIO",l),u=m.a.parseMasterPlaylistMedia(o,a,"SUBTITLES");if(c.length){var d=!1;c.forEach(function(t){t.url||(d=!0)}),!1===d&&s[0].audioCodec&&!s[0].attrs.AUDIO&&(h.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),c.unshift({type:"main",name:"main"}))}r.trigger(g.a.MANIFEST_LOADED,{levels:s,audioTracks:c,subtitles:u,url:a,stats:e,networkDetails:i})}else this._handleManifestParsingError(t,n,"no level found in manifest",i)},f.prototype._handleTrackOrLevelPlaylist=function(t,e,n,i){var r=this.hls,o=n.id,a=n.level,s=n.type,l=f.getResponseUrl(t,n),c=isNaN(a)?isNaN(o)?0:o:a,u=f.mapContextToLevelType(n),d=m.a.parseLevelPlaylist(t.data,l,c,u);if(d.tload=e.tload,s===v.MANIFEST){var h={url:l,details:d};r.trigger(g.a.MANIFEST_LOADED,{levels:[h],audioTracks:[],url:l,stats:e,networkDetails:i})}if(e.tparsed=performance.now(),d.needSidxRanges){var p=d.initSegment.url;this.load(p,{isSidxRequest:!0,type:s,level:a,levelDetails:d,id:o,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=d,this._handlePlaylistLoaded(t,e,n,i)},f.prototype._handleSidxRequest=function(t,r){var e=l.a.parseSegmentIndex(new Uint8Array(t.data));e.references.forEach(function(t,e){var n=t.info,i=r.levelDetails.fragments[e];0===i.byteRange.length&&(i.rawByteRange=String(1+n.end-n.start)+"@"+String(n.start))}),r.levelDetails.initSegment.rawByteRange=String(e.moovEndOffset)+"@0"},f.prototype._handleManifestParsingError=function(t,e,n,i){this.hls.trigger(g.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:n,networkDetails:i})},f.prototype._handleNetworkError=function(t,e,n){var i=2<arguments.length&&void 0!==n&&arguments[2],r=void 0,o=void 0,a=this.getInternalLoader(t);switch(t.type){case v.MANIFEST:r=i?s.a.MANIFEST_LOAD_TIMEOUT:s.a.MANIFEST_LOAD_ERROR,o=!0;break;case v.LEVEL:r=i?s.a.LEVEL_LOAD_TIMEOUT:s.a.LEVEL_LOAD_ERROR,o=!1;break;case v.AUDIO_TRACK:r=i?s.a.AUDIO_TRACK_LOAD_TIMEOUT:s.a.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}a&&(a.abort(),this.resetInternalLoader(t.type)),this.hls.trigger(g.a.ERROR,{type:s.b.NETWORK_ERROR,details:r,fatal:o,url:a.url,loader:a,context:t,networkDetails:e})},f.prototype._handlePlaylistLoaded=function(t,e,n,i){var r=n.type,o=n.level,a=n.id,s=n.levelDetails;if(s.targetduration)if(f.canHaveQualityLevels(n.type))this.hls.trigger(g.a.LEVEL_LOADED,{details:s,level:o||0,id:a||0,stats:e,networkDetails:i});else switch(r){case v.AUDIO_TRACK:this.hls.trigger(g.a.AUDIO_TRACK_LOADED,{details:s,id:a,stats:e,networkDetails:i});break;case v.SUBTITLE_TRACK:this.hls.trigger(g.a.SUBTITLE_TRACK_LOADED,{details:s,id:a,stats:e,networkDetails:i})}else this._handleManifestParsingError(t,n,"invalid target duration",i)},c(f,null,[{key:"ContextType",get:function(){return v}},{key:"LevelType",get:function(){return u}}]),f}(a.a);e.a=d},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=n(0),l=n(1),s=Math.pow(2,32)-1,r=function(){function g(t,e){i(this,g),this.observer=t,this.remuxer=e}return g.prototype.resetTimeStamp=function(t){this.initPTS=t},g.prototype.resetInitSegment=function(t,e,n,i){if(t&&t.byteLength){var r=this.initData=g.parseInitSegment(t);null==e&&(e="mp4a.40.5"),null==n&&(n="avc1.42e01e");var o={};r.audio&&r.video?o.audiovideo={container:"video/mp4",codec:e+","+n,initSegment:i?t:null}:(r.audio&&(o.audio={container:"audio/mp4",codec:e,initSegment:i?t:null}),r.video&&(o.video={container:"video/mp4",codec:n,initSegment:i?t:null})),this.observer.trigger(l.a.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else e&&(this.audioCodec=e),n&&(this.videoCodec=n)},g.probe=function(t){return 0<g.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length},g.bin2str=function(t){return String.fromCharCode.apply(null,t)},g.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<8|t[e+1];return n<0?65536+n:n},g.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n},g.writeUint32=function(t,e,n){t.data&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},g.findBox=function(t,e){var n=[],i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0;if(t.data?(s=t.start,o=t.end,t=t.data):(s=0,o=t.byteLength),!e.length)return null;for(i=s;i<o;)l=1<(r=g.readUint32(t,i))?i+r:o,g.bin2str(t.subarray(i+4,i+8))===e[0]&&(1===e.length?n.push({data:t,start:i+8,end:l}):(a=g.findBox({data:t,start:i+8,end:l},e.slice(1))).length&&(n=n.concat(a))),i=l;return n},g.parseSegmentIndex=function(t){var e=g.findBox(t,["moov"])[0],n=e?e.end:null,i=0,r=g.findBox(t,["sidx"]),o=void 0;if(!r||!r[0])return null;o=[];var a=(r=r[0]).data[0];i=0===a?8:16;var s=g.readUint32(r,i);i+=4,i+=0===a?8:16,i+=2;var l=r.end+0,c=g.readUint16(r,i);i+=2;for(var u=0;u<c;u++){var d=i,h=g.readUint32(r,d);d+=4;var p=2147483647&h;if(1==(2147483648&h)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var f=g.readUint32(r,d);d+=4,o.push({referenceSize:p,subsegmentDuration:f,info:{duration:f/s,start:l,end:l+p-1}}),l+=p,i=d+=4}return{earliestPresentationTime:0,timescale:s,version:a,referencesCount:c,references:o,moovEndOffset:n}},g.parseInitSegment=function(t){var d=[];return g.findBox(t,["moov","trak"]).forEach(function(t){var e=g.findBox(t,["tkhd"])[0];if(e){var n=e.data[e.start],i=0===n?12:20,r=g.readUint32(e,i),o=g.findBox(t,["mdia","mdhd"])[0];if(o){i=0===(n=o.data[o.start])?12:20;var a=g.readUint32(o,i),s=g.findBox(t,["mdia","hdlr"])[0];if(s){var l={soun:"audio",vide:"video"}[g.bin2str(s.data.subarray(s.start+8,s.start+12))];if(l){var c=g.findBox(t,["mdia","minf","stbl","stsd"]);if(c.length){c=c[0];var u=g.bin2str(c.data.subarray(c.start+12,c.start+16));h.b.log("MP4Demuxer:"+l+":"+u+" found")}d[r]={timescale:a,type:l},d[l]={timescale:a,id:r}}}}}}),d},g.getStartDTS=function(r,t){var e=void 0,n=void 0,i=void 0;return e=g.findBox(t,["moof","traf"]),n=[].concat.apply([],e.map(function(i){return g.findBox(i,["tfhd"]).map(function(t){var e=void 0,n=void 0;return e=g.readUint32(t,4),n=r[e].timescale||9e4,g.findBox(i,["tfdt"]).map(function(t){var e=void 0,n=void 0;return e=t.data[t.start],n=g.readUint32(t,4),1===e&&(n*=Math.pow(2,32),n+=g.readUint32(t,8)),n})[0]/n})})),i=Math.min.apply(null,n),isFinite(i)?i:0},g.offsetStartDTS=function(i,t,a){g.findBox(t,["moof","traf"]).map(function(n){return g.findBox(n,["tfhd"]).map(function(t){var e=g.readUint32(t,4),o=i[e].timescale||9e4;g.findBox(n,["tfdt"]).map(function(t){var e=t.data[t.start],n=g.readUint32(t,4);if(0===e)g.writeUint32(t,4,n-a*o);else{n*=Math.pow(2,32),n+=g.readUint32(t,8),n-=a*o,n=Math.max(n,0);var i=Math.floor(n/(s+1)),r=Math.floor(n%(s+1));g.writeUint32(t,4,i),g.writeUint32(t,8,r)}})})})},g.prototype.append=function(t,e,n,i){var r=this.initData;r||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),r=this.initData);var o=void 0,a=this.initPTS;if(void 0===a){var s=g.getStartDTS(r,t);this.initPTS=a=s-e,this.observer.trigger(l.a.INIT_PTS_FOUND,{initPTS:a})}g.offsetStartDTS(r,t,a),o=g.getStartDTS(r,t),this.remuxer.remux(r.audio,r.video,null,null,o,n,i,t)},g.prototype.destroy=function(){},g}();e.a=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(4),o=n.n(r),a=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),s=function(){function t(){i(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return a(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=o.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}();e.a=s},function(t,e,n){"use strict";function i(t,e){var n=o[e];return!!n&&!0===n[t.slice(0,4)]}function r(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});var o={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}}},function(t,e,n){"use strict";function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(10),u=n.n(i),r=n(33),d=n.n(r),h=n(1),p=n(19),v=n(0),f=n(2),o=n(12),g=Object(o.a)(),a=function(){function l(n,t){c(this,l),this.hls=n,this.id=t;var r=this.observer=new u.a,e=n.config;r.trigger=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];r.emit.apply(r,[t,t].concat(n))},r.off=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];r.removeListener.apply(r,[t].concat(n))};var i=function(t,e){(e=e||{}).frag=this.frag,e.id=this.id,n.trigger(t,e)}.bind(this);r.on(h.a.FRAG_DECRYPTED,i),r.on(h.a.FRAG_PARSING_INIT_SEGMENT,i),r.on(h.a.FRAG_PARSING_DATA,i),r.on(h.a.FRAG_PARSED,i),r.on(h.a.ERROR,i),r.on(h.a.FRAG_PARSING_METADATA,i),r.on(h.a.FRAG_PARSING_USERDATA,i),r.on(h.a.INIT_PTS_FOUND,i);var o={mp4:g.isTypeSupported("video/mp4"),mpeg:g.isTypeSupported("audio/mpeg"),mp3:g.isTypeSupported('audio/mp4; codecs="mp3"')},a=navigator.vendor;if(e.enableWorker&&"undefined"!=typeof Worker){v.b.log("demuxing in webworker");var s=void 0;try{s=this.w=d()(46),this.onwmsg=this.onWorkerMessage.bind(this),s.addEventListener("message",this.onwmsg),s.onerror=function(t){n.trigger(h.a.ERROR,{type:f.b.OTHER_ERROR,details:f.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},s.postMessage({cmd:"init",typeSupported:o,vendor:a,id:t,config:JSON.stringify(e)})}catch(l){v.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),s&&URL.revokeObjectURL(s.objectURL),this.demuxer=new p.a(r,o,e,a),this.w=void 0}}else this.demuxer=new p.a(r,o,e,a)}return l.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},l.prototype.push=function(t,e,n,i,r,o,a,s){var l=this.w,c=isNaN(r.startDTS)?r.start:r.startDTS,u=r.decryptdata,d=this.frag,h=!(d&&r.cc===d.cc),p=!(d&&r.level===d.level),f=d&&r.sn===d.sn+1,g=!p&&f;if(h&&v.b.log(this.id+":discontinuity detected"),p&&v.b.log(this.id+":switch detected"),this.frag=r,l)l.postMessage({cmd:"demux",data:t,decryptdata:u,initSegment:e,audioCodec:n,videoCodec:i,timeOffset:c,discontinuity:h,trackSwitch:p,contiguous:g,duration:o,accurateTimeOffset:a,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var m=this.demuxer;m&&m.push(t,u,e,n,i,c,h,p,g,o,a,s)}},l.prototype.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case h.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},l}();e.a=a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var S=n(1),E=n(2),g=n(11),A=n(37),C=n(15),k=n(38),_=n(41),R=n(42),D=n(45),i=function(){function r(t,e,n,i){o(this,r),this.observer=t,this.typeSupported=e,this.config=n,this.vendor=i}return r.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},r.prototype.push=function(t,n,i,r,o,a,s,l,c,u,d,h){if(0<t.byteLength&&null!=n&&null!=n.key&&"AES-128"===n.method){var e=this.decrypter;null==e&&(e=this.decrypter=new g.a(this.observer,this.config));var p=this,f=void 0;try{f=performance.now()}catch(t){f=Date.now()}e.decrypt(t,n.key.buffer,n.iv.buffer,function(t){var e=void 0;try{e=performance.now()}catch(t){e=Date.now()}p.observer.trigger(S.a.FRAG_DECRYPTED,{stats:{tstart:f,tdecrypt:e}}),p.pushDecrypted(new Uint8Array(t),n,new Uint8Array(i),r,o,a,s,l,c,u,d,h)})}else this.pushDecrypted(new Uint8Array(t),n,new Uint8Array(i),r,o,a,s,l,c,u,d,h)},r.prototype.pushDecrypted=function(t,e,n,i,r,o,a,s,l,c,u,d){var h=this.demuxer;if(!h||(a||s)&&!this.probe(t)){for(var p=this.observer,f=this.typeSupported,g=this.config,m=[{demux:k.a,remux:R.a},{demux:C.a,remux:D.a},{demux:A.a,remux:R.a},{demux:_.a,remux:R.a}],v=0,y=m.length;v<y;v++){var b=m[v],w=b.demux.probe;if(w(t)){var x=this.remuxer=new b.remux(p,g,f,this.vendor);h=new b.demux(p,x,g,f),this.probe=w;break}}if(!h)return void p.trigger(S.a.ERROR,{type:E.b.MEDIA_ERROR,details:E.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=h}var T=this.remuxer;(a||s)&&(h.resetInitSegment(n,i,r,c),T.resetInitSegment()),a&&(h.resetTimeStamp(d),T.resetTimeStamp(d)),"function"==typeof h.setDecryptData&&h.setDecryptData(e),h.append(t,o,l,u)},r}();e.a=i},function(t,e,n){"use strict";function a(t,e,n,i){var r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=navigator.userAgent.toLowerCase(),u=i,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return r=1+((192&e[n+2])>>>6),(o=(60&e[n+2])>>>2)>d.length-1?void t.trigger(Event.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o}):(s=(1&e[n+2])<<2,s|=(192&e[n+3])>>>6,p.b.log("manifest codec:"+i+",ADTS data:type:"+r+",sampleingIndex:"+o+"["+d[o]+"Hz],channelConfig:"+s),/firefox/i.test(c)?6<=o?(r=5,l=new Array(4),a=o-3):(r=2,l=new Array(2),a=o):-1!==c.indexOf("android")?(r=2,l=new Array(2),a=o):(r=5,l=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&6<=o?a=o-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(6<=o&&1===s||/vivaldi/i.test(c))||!i&&1===s)&&(r=2,l=new Array(2)),a=o)),l[0]=r<<3,l[0]|=(14&o)>>1,l[1]|=(1&o)<<7,l[1]|=s<<3,5===r&&(l[1]|=(14&a)>>1,l[2]=(1&a)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:d[o],channelCount:s,codec:"mp4a.40."+r,manifestCodec:u})}function r(t,e){return 255===t[e]&&240==(246&t[e+1])}function l(t,e){return 1&t[e+1]?7:9}function c(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function i(t,e){return!!(e+1<t.length&&r(t,e))}function o(t,e){if(e+1<t.length&&r(t,e)){var n=l(t,e);e+5<t.length&&(n=c(t,e));var i=e+n;if(i===t.length||i+1<t.length&&r(t,i))return!0}return!1}function s(t,e,n,i,r){if(!t.samplerate){var o=a(e,n,i,r);t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,p.b.log("parsed codec:"+t.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}}function u(t){return 9216e4/t}function d(t,e,n,i,r){var o=void 0,a=void 0,s=t.length;if(o=l(t,e),a=c(t,e),0<(a-=o)&&e+o+a<=s)return{headerLength:o,frameLength:a,stamp:n+i*r}}function h(t,e,n,i,r){var o=d(e,n,i,r,u(t.samplerate));if(o){var a=o.stamp,s=o.headerLength,l=o.frameLength,c={unit:e.subarray(n+s,n+s+l),pts:a,dts:a};return t.samples.push(c),t.len+=l,{sample:c,length:l+s}}}e.d=i,e.e=o,e.c=s,e.b=u,e.a=h;var p=n(0),f=n(2)},function(t,e){"use strict";var g={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,n,i,r){if(!(n+24>e.length)){var o=this.parseHeader(e,n);if(o&&n+o.frameLength<=e.length){var a=i+r*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:e.subarray(n,n+o.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=o.channelCount,t.samplerate=o.sampleRate,t.samples.push(s),t.len+=o.frameLength,{sample:s,length:o.frameLength}}}},parseHeader:function(t,e){var n=t[e+1]>>3&3,i=t[e+1]>>1&3,r=t[e+2]>>4&15,o=t[e+2]>>2&3,a=t[e+2]>>1&1;if(1!==n&&0!==r&&15!==r&&3!==o){var s=3===n?3-i:3===i?3:4,l=1e3*g.BitratesMap[14*s+r-1],c=3===n?0:2===n?1:2,u=g.SamplingRateMap[3*c+o],d=t[e+3]>>6==3?1:2,h=g.SamplesCoefficients[n][i],p=g.BytesInSlot[i],f=8*h*p;return{sampleRate:u,channelCount:d,frameLength:parseInt(h*l/u+a,10)*p,samplesPerFrame:f}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var n=this.parseHeader(t,e),i=4;n&&n.frameLength&&(i=n.frameLength);var r=e+i;if(r===t.length||r+1<t.length&&this.isHeaderPattern(t,r))return!0}return!1}};e.a=g},function(t,e,n){"use strict";function p(t,e,n){var i=t[e],r=t[n],o=r.startPTS;isNaN(o)?r.start=e<n?i.start+i.duration:Math.max(i.start-r.duration,0):e<n?(i.duration=o-i.start,i.duration<0&&g.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(r.duration=i.start-o,r.duration<0&&g.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"))}function f(t,e,n,i,r,o){var a=n;if(!isNaN(e.startPTS)){var s=Math.abs(e.startPTS-n);isNaN(e.deltaPTS)?e.deltaPTS=s:e.deltaPTS=Math.max(s,e.deltaPTS),a=Math.max(n,e.startPTS),n=Math.min(n,e.startPTS),i=Math.max(i,e.endPTS),r=Math.min(r,e.startDTS),o=Math.max(o,e.endDTS)}var l=n-e.start;e.start=e.startPTS=n,e.maxStartPTS=a,e.endPTS=i,e.startDTS=r,e.endDTS=o,e.duration=i-n;var c=e.sn;if(!t||c<t.startSN||c>t.endSN)return 0;var u=void 0,d=void 0,h=void 0;for(u=c-t.startSN,(d=t.fragments)[u]=e,h=u;0<h;h--)p(d,h,h-1);for(h=u;h<d.length-1;h++)p(d,h,h+1);return t.PTSKnown=!0,l}function i(t,e){var n=Math.max(t.startSN,e.startSN)-e.startSN,i=Math.min(t.endSN,e.endSN)-e.startSN,r=e.startSN-t.startSN,o=t.fragments,a=e.fragments,s=0,l=void 0;if(e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment),i<n)e.PTSKnown=!1;else{for(var c=n;c<=i;c++){var u=o[r+c],d=a[c];d&&u&&(s=u.cc-d.cc,isNaN(u.startPTS)||(d.start=d.startPTS=u.startPTS,d.endPTS=u.endPTS,d.duration=u.duration,d.backtracked=u.backtracked,d.dropped=u.dropped,l=d))}if(s)for(g.b.log("discontinuity sliding from playlist, take drift into account"),c=0;c<a.length;c++)a[c].cc+=s;if(l)f(e,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS);else if(0<=r&&r<o.length){var h=o[r].start;for(c=0;c<a.length;c++)a[c].start+=h}e.PTSKnown=t.PTSKnown}}e.b=f,e.a=i;var g=n(0)},function(t,e){"use strict";var n={toString:function(t){for(var e="",n=t.length,i=0;i<n;i++)e+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return e}};e.a=n},function(t,e,n){"use strict";function o(t,e){for(var n=null,i=0;i<t.length;i+=1){var r=t[i];if(r&&r.cc===e){n=r;break}}return n}function i(t,e){return c.a.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}function a(t,e,n){var i=!1;return e&&e.details&&n&&(n.endCC>n.startCC||t&&t.cc<n.startCC)&&(i=!0),i}function s(t,e){var n=t.fragments,i=e.fragments;if(i.length&&n.length){var r=o(n,i[0].cc);return!r||r&&!r.startPTS?void u.b.log("No frag in previous level to align on"):r}u.b.log("No fragments to align")}function l(n,t){t.fragments.forEach(function(t){if(t){var e=t.start+n;t.start=t.startPTS=e,t.endPTS=e+t.duration}}),t.PTSKnown=!0}function r(t,e,n){if(a(t,e,n)){var i=s(e.details,n);i&&(u.b.log("Adjusting PTS using last level due to CC increase within current level"),l(i.start,n))}if(!1===n.PTSKnown&&e&&e.details&&e.details.fragments&&e.details.fragments.length){var r=e.details.programDateTime,o=(n.programDateTime-r)/1e3+e.details.fragments[0].start;isNaN(o)||(u.b.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),l(o,n))}}e.b=i,e.a=r;var c=n(8),u=n(0)},function(t,e){"use strict";function n(t,e){var n=null;try{n=new window.Event("addtrack")}catch(t){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function i(t){if(t&&t.cues)for(;0<t.cues.length;)t.removeCue(t.cues[0])}e.b=n,e.a=i},function(t,e,n){"use strict";function i(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new r,this.regionList=[]}function o(t){function e(t,e,n,i){return 3600*(0|t)+60*(0|e)+(0|n)+(0|i)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function s(){this.values=Object.create(null)}function l(t,e,n,i){var r=i?t.split(i):[t];for(var o in r)if("string"==typeof r[o]){var a=r[o].split(n);if(2===a.length)e(a[0],a[1])}}function c(e,t,a){function n(){var t=o(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(){e=e.replace(/^\s+/,"")}var r=e;if(i(),t.startTime=n(),i(),"-->"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);e=e.substr(3),i(),t.endTime=n(),i(),function(t,e){var o=new s;l(t,function(t,e){switch(t){case"region":for(var n=a.length-1;0<=n;n--)if(a[n].id===e){o.set(t,a[n].region);break}break;case"vertical":o.alt(t,e,["rl","lr"]);break;case"line":var i=e.split(","),r=i[0];o.integer(t,r),o.percent(t,r)&&o.set("snapToLines",!1),o.alt(t,r,["auto"]),2===i.length&&o.alt("lineAlign",i[1],["start",p,"end"]);break;case"position":i=e.split(","),o.percent(t,i[0]),2===i.length&&o.alt("positionAlign",i[1],["start",p,"end","line-left","line-right","auto"]);break;case"size":o.percent(t,e);break;case"align":o.alt(t,e,["start",p,"end","left","right"])}},/:/,/\s/),e.region=o.get("region",null),e.vertical=o.get("vertical","");var n=o.get("line","auto");"auto"===n&&-1===h.line&&(n=-1),e.line=n,e.lineAlign=o.get("lineAlign","start"),e.snapToLines=o.get("snapToLines",!0),e.size=o.get("size",100),e.align=o.get("align",p);var i=o.get("position","auto");"auto"===i&&50===h.position&&(i="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=i}(e,t)}function u(t){return t.replace(/<br(?: \/)?>/gi,"\n")}n.d(e,"b",function(){return u});var d=n(61),r=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};s.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var i=0;i<n.length;++i)if(e===n[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(e=parseFloat(e))&&e<=100)&&(this.set(t,e),!0)}};var h=new d.a(0,0,0),p="middle"===h.align?"middle":"center";i.prototype={parse:function(t){function e(){var t=i.buffer,e=0;for(t=u(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),n}var i=this;t&&(i.buffer+=i.decoder.decode(t,{stream:!0}));try{var n=void 0;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var r=(n=e()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var o=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(o?o=!1:n=e(),i.state){case"HEADER":/:/.test(n)?l(n,function(t,e){switch(t){case"Region":console.log("parse region",e)}},/:/):n||(i.state="ID");continue;case"NOTE":n||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){i.state="NOTE";break}if(!n)continue;if(i.cue=new d.a(0,0,""),i.state="CUE",-1===n.indexOf("-->")){i.cue.id=n;continue}case"CUE":try{c(n,i.cue,i.regionList)}catch(t){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var a=-1!==n.indexOf("-->");if(!n||a&&(o=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=n;continue;case"BADCUE":n||(i.state="ID");continue}}}catch(t){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}},e.a=i},function(t,e,n){"use strict";function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=n.n(i),o=n(2),E=n(14),A=n(30),C=n(31),k=n(7),_=n(32),R=n(47),D=n(48),a=n(49),L=n(0),s=n(50),l=n(1),c=n(10),P=n.n(c),u=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();n(70);var d=function(){function T(t){var e=this,n=0<arguments.length&&void 0!==t?arguments[0]:{};S(this,T);var i=T.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in i)r in n||(n[r]=i[r]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(L.a)(n.debug),this.config=n,this._autoLevelCapping=-1;var o=this.observer=new P.a;o.trigger=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.emit.apply(o,[t,t].concat(n))},o.off=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.removeListener.apply(o,[t].concat(n))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var a=this.abrController=new n.abrController(this),s=new n.bufferController(this),l=new n.capLevelController(this),c=new n.fpsController(this),u=new E.a(this),d=new A.a(this),h=new C.a(this),p=new D.a(this),f=this.levelController=new R.a(this),g=new k.b(this),m=[f,this.streamController=new _.a(this,g)],v=n.audioStreamController;v&&m.push(new v(this,g)),this.networkControllers=m;var y=[u,d,h,a,s,l,c,p,g];if(v=n.audioTrackController){var b=new v(this);this.audioTrackController=b,y.push(b)}if(v=n.subtitleTrackController){var w=new v(this);this.subtitleTrackController=w,y.push(w)}if(v=n.emeController){var x=new v(this);this.emeController=x,y.push(x)}[n.subtitleStreamController,n.timelineController].forEach(function(t){t&&y.push(new t(e))}),this.coreComponents=y}return T.isSupported=function(){return Object(a.a)()},u(T,null,[{key:"version",get:function(){return"0.9.1"}},{key:"Events",get:function(){return l.a}},{key:"ErrorTypes",get:function(){return o.b}},{key:"ErrorDetails",get:function(){return o.a}},{key:"DefaultConfig",get:function(){return T.defaultConfig?T.defaultConfig:s.a},set:function(t){T.defaultConfig=t}}]),T.prototype.destroy=function(){L.b.log("destroy"),this.trigger(l.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},T.prototype.attachMedia=function(t){L.b.log("attachMedia"),this.media=t,this.trigger(l.a.MEDIA_ATTACHING,{media:t})},T.prototype.detachMedia=function(){L.b.log("detachMedia"),this.trigger(l.a.MEDIA_DETACHING),this.media=null},T.prototype.loadSource=function(t){t=r.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),L.b.log("loadSource:"+t),this.url=t,this.trigger(l.a.MANIFEST_LOADING,{url:t})},T.prototype.startLoad=function(t){var e=0<arguments.length&&void 0!==t?arguments[0]:-1;L.b.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},T.prototype.stopLoad=function(){L.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},T.prototype.swapAudioCodec=function(){L.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},T.prototype.recoverMediaError=function(){L.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},u(T,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){L.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){L.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){L.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){
this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){L.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){L.b.log("set startLevel:"+t);var e=this;-1!==t&&(t=Math.max(t,e.minAutoLevel)),e.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){L.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this,e=t.levels,n=t.config.minAutoBitrate,i=e?e.length:0,r=0;r<i;r++)if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>n)return r;return 0}},{key:"maxAutoLevel",get:function(){var t=this,e=t.levels,n=t.autoLevelCapping;return-1===n&&e&&e.length?e.length-1:n}},{key:"nextAutoLevel",get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){var e=this;e.abrController.nextAutoLevel=Math.max(e.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),T}();e["default"]=d},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(4),o=n.n(r),k=n(6),_=n(16),R=n(29),D=n(0),s=n(17),l=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,h=/#EXT-X-MEDIA:(.*)/g,L=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),P=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,a=function(){function d(){i(this,d)}return d.findGroup=function(t,e){if(!t)return null;for(var n=null,i=0;i<t.length;i++){var r=t[i];r.id===e&&(n=r)}return n},d.convertAVC1ToAVCOTI=function(t){var e=void 0,n=t.split(".");return 2<n.length?(e=n.shift()+".",e+=parseInt(n.shift()).toString(16),e+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):e=t,e},d.resolve=function(t,e){return o.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},d.parseMasterPlaylist=function(t,e){var n=[],i=void 0;for(l.lastIndex=0;null!=(i=l.exec(t));){var r={},o=r.attrs=new R.a(i[1]);r.url=d.resolve(i[2],e);var a=o.decimalResolution("RESOLUTION");a&&(r.width=a.width,r.height=a.height),r.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),r.name=o.NAME,function(i,r){["video","audio"].forEach(function(e){var n=i.filter(function(t){return Object(s.b)(t,e)});if(n.length){var t=n.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});r[e+"Codec"]=0<t.length?t[0]:n[0],i=i.filter(function(t){return-1===n.indexOf(t)})}}),r.unknownCodecs=i}([].concat((o.CODECS||"").split(/[ ,]+/)),r),r.videoCodec&&-1!==r.videoCodec.indexOf("avc1")&&(r.videoCodec=d.convertAVC1ToAVCOTI(r.videoCodec)),n.push(r)}return n},d.parseMasterPlaylistMedia=function(t,e,n,i){var r=3<arguments.length&&void 0!==i?arguments[3]:[],o=void 0,a=[],s=0;for(h.lastIndex=0;null!==(o=h.exec(t));){var l={},c=new R.a(o[1]);if(c.TYPE===n){if(l.groupId=c["GROUP-ID"],l.name=c.NAME,l.type=n,l["default"]="YES"===c.DEFAULT,l.autoselect="YES"===c.AUTOSELECT,l.forced="YES"===c.FORCED,c.URI&&(l.url=d.resolve(c.URI,e)),l.lang=c.LANGUAGE,l.name||(l.name=l.lang),r.length){var u=d.findGroup(r,l.groupId);l.audioCodec=u?u.codec:r[0].codec}l.id=s++,a.push(l)}}return a},d.parseLevelPlaylist=function(t,e,n,i){var r=0,o=0,a={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},s=new _.a,l=0,c=null,u=new k.a,d=void 0,h=void 0;for(L.lastIndex=0;null!==(d=L.exec(t));){var p=d[1];if(p){u.duration=parseFloat(p);var f=(" "+d[2]).slice(1);u.title=f||null,u.tagList.push(f?["INF",p,f]:["INF",p])}else if(d[3]){if(!isNaN(u.duration)){var g=r++;u.type=i,u.start=o,u.levelkey=s,u.sn=g,u.level=n,u.cc=l,u.baseurl=e,u.relurl=(" "+d[3]).slice(1),a.programDateTime&&(c?u.rawProgramDateTime?u.pdt=Date.parse(u.rawProgramDateTime):u.pdt=c.pdt+1e3*c.duration:u.pdt=Date.parse(a.programDateTime),u.endPdt=u.pdt+1e3*u.duration),a.fragments.push(u),o+=(c=u).duration,u=new k.a}}else if(d[4]){if(u.rawByteRange=(" "+d[4]).slice(1),c){var m=c.byteRangeEndOffset;m&&(u.lastByteRangeEndOffset=m)}}else if(d[5])u.rawProgramDateTime=(" "+d[5]).slice(1),u.tagList.push(["PROGRAM-DATE-TIME",u.rawProgramDateTime]),void 0===a.programDateTime&&(a.programDateTime=new Date(new Date(Date.parse(d[5]))-1e3*o));else{for(d=d[0].match(P),h=1;h<d.length&&void 0===d[h];h++);var v=(" "+d[h+1]).slice(1),y=(" "+d[h+2]).slice(1);switch(d[h]){case"#":u.tagList.push(y?[v,y]:[v]);break;case"PLAYLIST-TYPE":a.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":r=a.startSN=parseInt(v);break;case"TARGETDURATION":a.targetduration=parseFloat(v);break;case"VERSION":a.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"DIS":l++,u.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":l=parseInt(v);break;case"KEY":var b=v,w=new R.a(b),x=w.enumeratedString("METHOD"),T=w.URI,S=w.hexadecimalInteger("IV");x&&(s=new _.a,T&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(x)&&(s.method=x,s.baseuri=e,s.reluri=T,s.key=null,s.iv=S));break;case"START":var E=v,A=new R.a(E).decimalFloatingPoint("TIME-OFFSET");isNaN(A)||(a.startTimeOffset=A);break;case"MAP":var C=new R.a(v);u.relurl=C.URI,u.rawByteRange=C.BYTERANGE,u.baseurl=e,u.level=n,u.type=i,u.sn="initSegment",a.initSegment=u,u=new k.a;break;default:D.b.warn("line parsed but not handled: "+d)}}}return(u=c)&&!u.relurl&&(a.fragments.pop(),o-=u.duration),a.totalduration=o,a.averagetargetduration=o/a.fragments.length,a.endSN=r-1,a.startCC=a.fragments[0]?a.fragments[0].cc:0,a.endCC=l,!a.initSegment&&a.fragments.length&&a.fragments.every(function(t){return t.relurl.endsWith(".mp4")})&&(D.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(u=new k.a).relurl=a.fragments[0].relurl,u.baseurl=e,u.level=n,u.type=i,u.sn="initSegment",a.initSegment=u,a.needSidxRanges=!0),a},d}();e.a=a},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,n=function(){function n(t){for(var e in i(this,n),"string"==typeof t&&(t=n.parseAttrList(t)),t)t.hasOwnProperty(e)&&(this[e]=t[e])}return n.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},n.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)n[i]=parseInt(e.slice(2*i,2*i+2),16);return n}return null},n.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},n.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},n.prototype.enumeratedString=function(t){return this[t]},n.prototype.decimalResolution=function(t){var e=r.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},n.parseAttrList=function(t){var e=void 0,n={};for(o.lastIndex=0;null!==(e=o.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[e[1]]=i}return n},n}();e.a=n},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),i=n(3),l=n(2),p=n(0),c=function(i){function n(t){r(this,n);var e=o(this,i.call(this,t,s.a.FRAG_LOADING));return e.loaders={},e}return a(n,i),n.prototype.destroy=function(){var t=this.loaders;for(var e in t){var n=t[e];n&&n.destroy()}this.loaders={},i.prototype.destroy.call(this)},n.prototype.onFragLoading=function(t){var e=t.frag,n=e.type,i=this.loaders,r=this.hls.config,o=r.fLoader,a=r.loader;e.loaded=0;var s=i[n];s&&(p.b.warn("abort previous fragment loader for type: "+n),s.abort()),s=i[n]=e.loader=r.fLoader?new o(r):new a(r);var l=void 0,c=void 0,u=void 0;l={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var d=e.byteRangeStartOffset,h=e.byteRangeEndOffset;isNaN(d)||isNaN(h)||(l.rangeStart=d,l.rangeEnd=h),c={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},s.load(l,c,u)},n.prototype.loadsuccess=function(t,e,n,i){var r=3<arguments.length&&void 0!==i?arguments[3]:null,o=t.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(s.a.FRAG_LOADED,{payload:o,frag:a,stats:e,networkDetails:r})},n.prototype.loaderror=function(t,e,n){var i=2<arguments.length&&void 0!==n?arguments[2]:null,r=e.loader;r&&r.abort(),this.loaders[e.type]=void 0,this.hls.trigger(s.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:i})},n.prototype.loadtimeout=function(t,e,n){var i=2<arguments.length&&void 0!==n?arguments[2]:null,r=e.loader;r&&r.abort(),this.loaders[e.type]=void 0,this.hls.trigger(s.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:i})},n.prototype.loadprogress=function(t,e,n,i){var r=3<arguments.length&&void 0!==i?arguments[3]:null,o=e.frag;o.loaded=t.loaded,this.hls.trigger(s.a.FRAG_LOAD_PROGRESS,{frag:o,stats:t,networkDetails:r})},n}(i.a);e.a=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(1),s=n(3),l=n(2),d=n(0),i=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,u.a.KEY_LOADING));return e.loaders={},e.decryptkey=null,e.decrypturl=null,e}return a(i,n),i.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},s.a.prototype.destroy.call(this)},i.prototype.onKeyLoading=function(t){var e=t.frag,n=e.type,i=this.loaders[n],r=e.decryptdata,o=r.uri;if(o!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;i&&(d.b.warn("abort previous key loader for type:"+n),i.abort()),e.loader=this.loaders[n]=new a.loader(a),this.decrypturl=o,this.decryptkey=null;var s=void 0,l=void 0,c=void 0;s={url:o,frag:e,responseType:"arraybuffer"},l={timeout:a.fragLoadingTimeOut,maxRetry:a.fragLoadingMaxRetry,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(s,l,c)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(u.a.KEY_LOADED,{frag:e}))},i.prototype.loadsuccess=function(t,e,n){var i=n.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(u.a.KEY_LOADED,{frag:i})},i.prototype.loaderror=function(t,e){var n=e.frag,i=n.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(u.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},i.prototype.loadtimeout=function(t,e){var n=e.frag,i=n.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(u.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},i}(s.a);e.a=i},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var f=n(8),p=n(9),g=n(18),m=n(1),l=n(7),c=n(6),u=n(14),d=n(22),h=n(23),v=n(2),y=n(0),b=n(24),i=n(13),w=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),x={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},r=function(i){function r(t,e){o(this,r);var n=a(this,i.call(this,t,m.a.MEDIA_ATTACHED,m.a.MEDIA_DETACHING,m.a.MANIFEST_LOADING,m.a.MANIFEST_PARSED,m.a.LEVEL_LOADED,m.a.KEY_LOADED,m.a.FRAG_LOADED,m.a.FRAG_LOAD_EMERGENCY_ABORTED,m.a.FRAG_PARSING_INIT_SEGMENT,m.a.FRAG_PARSING_DATA,m.a.FRAG_PARSED,m.a.ERROR,m.a.AUDIO_TRACK_SWITCHING,m.a.AUDIO_TRACK_SWITCHED,m.a.BUFFER_CREATED,m.a.BUFFER_APPENDED,m.a.BUFFER_FLUSHED));return n.fragmentTracker=e,n.config=t.config,n.audioCodecSwap=!1,n._state=x.STOPPED,n.stallReported=!1,n}return s(r,i),r.prototype.onHandlerDestroying=function(){this.stopLoad()},r.prototype.onHandlerDestroyed=function(){this.state=x.STOPPED,this.fragmentTracker=null},r.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}0<e&&-1===t&&(y.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=x.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=x.STOPPED},r.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=x.STOPPED,this.forceStartLoad=!1},r.prototype.doTick=function(){switch(this.state){case x.BUFFER_FLUSHING:this.fragLoadError=0;break;case x.IDLE:this._doTickIdle();break;case x.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=x.IDLE);break;case x.FRAG_LOADING_WAITING_RETRY:var e=performance.now(),n=this.retryDate;(!n||n<=e||this.media&&this.media.seeking)&&(y.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=x.IDLE);break;case x.ERROR:case x.STOPPED:case x.FRAG_LOADING:case x.PARSING:case x.PARSED:case x.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},r.prototype._doTickIdle=function(){var t=this.hls,e=t.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&e.startFragPrefetch)){var i=void 0;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=t.nextLoadLevel,o=this.levels[r];if(o){var a=o.bitrate,s=void 0;s=a?Math.max(8*e.maxBufferSize/a,e.maxBufferLength):e.maxBufferLength,s=Math.min(s,e.maxMaxBufferLength);var l=p.a.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,e.maxBufferHole),c=l.len;if(!(s<=c)){y.b.trace("buffer length of "+c.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=r;var u=o.details;if(void 0===u||!0===u.live&&this.levelLastLoaded!==r)return void(this.state=x.WAITING_LEVEL);var d=this.fragPrevious;if(!u.live&&d&&!d.backtracked&&d.sn===u.endSN&&!l.nextStart&&Math.min(n.duration,d.start+d.duration)-Math.max(l.end,d.start)<=Math.max(.2,d.duration)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(m.a.BUFFER_EOS,h),void(this.state=x.ENDED)}this._fetchPayloadOrEos(i,l,u)}}}},r.prototype._fetchPayloadOrEos=function(t,e,n){var i=this.fragPrevious,r=this.level,o=n.fragments,a=o.length;if(0!==a){var s=o[0].start,l=o[a-1].start+o[a-1].duration,c=e.end,u=void 0;if(n.initSegment&&!n.initSegment.data)u=n.initSegment;else if(n.live){var d=this.config.initialLiveManifestSize;if(a<d)return void y.b.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(u=this._ensureFragmentAtLivePoint(n,c,s,l,i,o,a)))return}else c<s&&(u=o[0]);u||(u=this._findFragment(s,i,a,o,c,l,n)),u&&this._loadFragmentOrKey(u,r,n,t,c)}},r.prototype._ensureFragmentAtLivePoint=function(t,e,n,i,r,o,a){var s=this.hls.config,l=this.media,c=void 0,u=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(n-s.maxFragLookUpTolerance,i-u)){var d=this.liveSyncPosition=this.computeLivePosition(n,t);y.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),e=d,l&&l.readyState&&l.duration>d&&(l.currentTime=d),this.nextLoadPosition=d}if(t.PTSKnown&&i<e&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(r)if(t.programDateTime)c=this._findFragmentByPDT(o,r.endPdt+1);else{var h=r.sn+1;if(h>=t.startSN&&h<=t.endSN){var p=o[h-t.startSN];r.cc===p.cc&&(c=p,y.b.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=f.a.search(o,function(t){return r.cc-t.cc}))&&y.b.log("live playlist, switching playlist, load frag with same CC: "+c.sn)}c||(c=o[Math.min(a-1,Math.round(a/2))],y.b.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c},r.prototype._findFragmentByPDT=function(t,e){if(!t||void 0===e)return null;if(e<t[0].pdt)return null;if(e>=t[t.length-1].endPdt)return null;for(var n=0;n<t.length;++n){var i=t[n];if(e<i.endPdt)return i}return null},r.prototype._findFragmentBySN=function(t,e,n,i){var r=void 0,o=this.hls.config.maxFragLookUpTolerance,a=t?e[t.sn-e[0].sn+1]:void 0,s=function(t){var e=Math.min(o,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-e<=n?1:t.start-e>n&&t.start?-1:0};return n<i&&(i-o<n&&(o=0),r=a&&!s(a)?a:f.a.search(e,s)),r},r.prototype._findFragment=function(t,e,n,i,r,o,a){var s=this.hls.config,l=void 0,c=void 0;if(c=r<o?a.programDateTime?this._findFragmentByPDT(i,1e3*r+(a.programDateTime?Date.parse(a.programDateTime):0)-1e3*t):this._findFragmentBySN(e,i,r,o):i[n-1]){var u=(l=c).sn-a.startSN,d=e&&l.level===e.level,h=i[u-1],p=i[u+1];if(e&&l.sn===e.sn)if(d&&!l.backtracked)if(l.sn<a.endSN){var f=e.deltaPTS;f&&f>s.maxBufferHole&&e.dropped&&u?(l=h,y.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(l=p,y.b.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(p&&p.backtracked?(y.b.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+p.sn),l=p):(y.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,h?(l=h).backtracked=!0:u&&(l=null)))}return l},r.prototype._loadFragmentOrKey=function(t,e,n,i,r){if(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key)y.b.log("Loading key for "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e),this.state=x.KEY_LOADING,this.hls.trigger(m.a.KEY_LOADING,{frag:t});else{y.b.log("Loading "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e+", currentTime:"+i.toFixed(3)+",bufferEnd:"+r.toFixed(3));var o=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,isNaN(t.sn)||t.bitrateTest||(this.nextLoadPosition=t.start+t.duration),t.backtracked||o===l.a.NOT_LOADED?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(m.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new g.a(this.hls,"main")),this.state=x.FRAG_LOADING):o===l.a.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)}},r.prototype.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,u.a.LevelType.MAIN)},r.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},r.prototype._checkFragmentChanged=function(){var t=void 0,e=void 0,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((e=n.currentTime)>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),p.a.isBuffered(n,e)?t=this.getBufferedFrag(e):p.a.isBuffered(n,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var i=t;if(i!==this.fragPlaying){this.hls.trigger(m.a.FRAG_CHANGED,{frag:i});var r=i.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(m.a.LEVEL_SWITCHED,{level:r}),this.fragPlaying=i}}},r.prototype.immediateLevelSwitch=function(){if(y.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},r.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,p.a.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},r.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e=void 0,n=void 0,i=void 0;if((n=this.getBufferedFrag(t.currentTime))&&1<n.startPTS&&this.flushMainBuffer(0,n.startPTS-1),t.paused)e=0;else{var r=this.hls.nextLoadLevel,o=this.levels[r],a=this.fragLastKbps;e=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if((i=this.getBufferedFrag(t.currentTime+e))&&(i=this.followingBufferedFrag(i))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},r.prototype.flushMainBuffer=function(t,e){this.state=x.BUFFER_FLUSHING;var n={startOffset:t,endOffset:e};this.altAudio&&(n.type="video"),this.hls.trigger(m.a.BUFFER_FLUSHING,n)},r.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)},r.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(y.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,n=this.config;isNaN(e)||y.b.log("media seeking to "+e.toFixed(3));var i=this.mediaBuffer?this.mediaBuffer:t,r=p.a.bufferInfo(i,e,this.config.maxBufferHole);if(this.state===x.FRAG_LOADING){var o=this.fragCurrent;if(0===r.len&&o){var a=n.maxFragLookUpTolerance,s=o.start-a,l=o.start+o.duration+a;e<s||l<e?(o.loader&&(y.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=x.IDLE):y.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===x.ENDED&&(0===r.len&&(this.fragPrevious=0),this.state=x.IDLE);t&&(this.lastCurrentTime=e),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},r.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;isNaN(e)||y.b.log("media seeked to "+e.toFixed(3)),this.tick()},r.prototype.onMediaEnded=function(){y.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},r.prototype.onManifestLoading=function(){y.b.log("trigger BUFFER_RESET"),this.hls.trigger(m.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.prototype.onManifestParsed=function(t){var e=!1,n=!1,i=void 0;t.levels.forEach(function(t){(i=t.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(e=!0),-1!==i.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=e&&n,this.audioCodecSwitch&&y.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},r.prototype.onLevelLoaded=function(t){var e=t.details,n=t.level,i=this.levels[this.levelLastLoaded],r=this.levels[n],o=e.totalduration,a=0;if(y.b.log("level "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+o),e.live){var s=r.details;s&&0<e.fragments.length?(d.a(s,e),a=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,s),e.PTSKnown&&!isNaN(a)?y.b.log("live playlist sliding:"+a.toFixed(3)):(y.b.log("live playlist - outdated PTS, unknown sliding"),Object(b.a)(this.fragPrevious,i,e))):(y.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,Object(b.a)(this.fragPrevious,i,e))}else e.PTSKnown=!1;if(r.details=e,this.levelLastLoaded=n,this.hls.trigger(m.a.LEVEL_UPDATED,{details:e,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=e.startTimeOffset;isNaN(l)?e.live?(this.startPosition=this.computeLivePosition(a,e),y.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(l<0&&(y.b.log("negative start time offset "+l+", count from end of last fragment"),l=a+o+l),y.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===x.WAITING_LEVEL&&(this.state=x.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===x.KEY_LOADING&&(this.state=x.IDLE,this.tick())},r.prototype.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===x.FRAG_LOADING&&e&&"main"===n.type&&n.level===e.level&&n.sn===e.sn){var i=t.stats,r=this.levels[e.level],o=r.details;if(y.b.log("Loaded  "+e.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+e.level),this.bitrateTest=!1,this.stats=i,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state=x.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(m.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=x.IDLE,i.tparsed=i.tbuffered=performance.now(),o.initSegment.data=t.payload,this.hls.trigger(m.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.tick();else{this.state=x.PARSING;var a=o.totalduration,s=e.level,l=e.sn,c=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(y.b.log("swapping playlist audio codec"),void 0===c&&(c=this.lastAudioCodec),c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,y.b.log("Parsing "+l+" of ["+o.startSN+" ,"+o.endSN+"],level "+s+", cc "+e.cc);var u=this.demuxer;u||(u=this.demuxer=new g.a(this.hls,"main"));var d=this.media,h=!(d&&d.seeking)&&(o.PTSKnown||!o.live),p=o.initSegment?o.initSegment.data:[];u.push(t.payload,p,c,r.videoCodec,e,a,h,void 0)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===x.PARSING){var i=t.tracks,r=void 0,o=void 0;if(i.audio&&this.altAudio&&delete i.audio,o=i.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(y.b.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==o.container&&(a="mp4a.40.2",y.b.log("Android: force audio codec to "+a)),o.levelCodec=a,o.id=t.id}for(r in(o=i.video)&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=t.id),this.hls.trigger(m.a.BUFFER_CODECS,i),i){o=i[r],y.b.log("main track:"+r+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var l=o.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(m.a.BUFFER_APPENDING,{type:r,data:l,parent:"main",content:"initSegment"}))}this.tick()}},r.prototype.onFragParsingData=function(e){var n=this,t=this.fragCurrent,i=e.frag;if(t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&("audio"!==e.type||!this.altAudio)&&this.state===x.PARSING){var r=this.levels[this.level],o=t;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+t.duration,e.endDTS=e.startDTS+t.duration),!0===e.hasAudio&&o.addElementaryStream(c.a.ElementaryStreamTypes.AUDIO),!0===e.hasVideo&&o.addElementaryStream(c.a.ElementaryStreamTypes.VIDEO),y.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(o.dropped=e.dropped,o.dropped)if(o.backtracked)y.b.warn("Already backtracked on this fragment, appending with the gap");else{var a=r.details;if(!a||o.sn!==a.startSN)return y.b.warn("missing video frame(s), backtracking fragment"),this.fragmentTracker.removeFragment(o),o.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=x.IDLE,this.fragPrevious=o,void this.tick();y.b.warn("missing video frame(s) on first frag, appending with gap")}else o.backtracked=!1;var s=d.b(r.details,o,e.startPTS,e.endPTS,e.startDTS,e.endDTS),l=this.hls;l.trigger(m.a.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(t){t&&t.length&&n.state===x.PARSING&&(n.appended=!0,n.pendingBuffering=!0,l.trigger(m.a.BUFFER_APPENDING,{type:e.type,data:t,parent:"main",content:"data"}))}),this.tick()}},r.prototype.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===x.PARSING&&(this.stats.tparsed=performance.now(),this.state=x.PARSED,this._checkAppendedParsed())},r.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,n=t.id;if(!e){if(this.mediaBuffer!==this.media){y.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(y.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=x.IDLE}var r=this.hls;r.trigger(m.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),
r.trigger(m.a.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},r.prototype.onAudioTrackSwitched=function(t){var e=t.id,n=!!this.hls.audioTracks[e].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(y.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},r.prototype.onBufferCreated=function(t){var e=t.tracks,n=void 0,i=void 0,r=!1;for(var o in e){var a=e[o];"main"===a.id?(n=a,"video"===(i=o)&&(this.videoBuffer=e[o].buffer)):r=!0}r&&n?(y.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},r.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==x.PARSING&&e!==x.PARSED||(this.pendingBuffering=0<t.pending,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==x.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;y.b.log("main buffered : "+h.a.toString(e.buffered)),this.fragPrevious=t;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(m.a.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=x.IDLE}this.tick()}},r.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var n=!!this.media&&p.a.isBuffered(this.media,this.media.currentTime)&&p.a.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:case v.a.KEY_LOAD_ERROR:case v.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);y.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=x.FRAG_LOADING_WAITING_RETRY}else y.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=x.ERROR;break;case v.a.LEVEL_LOAD_ERROR:case v.a.LEVEL_LOAD_TIMEOUT:this.state!==x.ERROR&&(t.fatal?(this.state=x.ERROR,y.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==x.WAITING_LEVEL||(this.state=x.IDLE));break;case v.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==x.PARSING&&this.state!==x.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=x.IDLE):(y.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},r.prototype._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,y.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},r.prototype._checkBuffer=function(){var t=this.config,e=this.media;if(e&&0!==e.readyState){var n=e.currentTime,i=(this.mediaBuffer?this.mediaBuffer:e).buffered;if(!this.loadedmetadata&&i.length)this.loadedmetadata=!0,this._seekToStartPos();else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var r=!(e.paused&&1<e.readyState||e.ended||0===e.buffered.length),o=performance.now();if(n!==this.lastCurrentTime)this.stallReported&&(y.b.warn("playback not stuck anymore @"+n+", after "+Math.round(o-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0;else if(r){if(!this.stalled)return void(this.stalled=o);var a=p.a.bufferInfo(e,n,t.maxBufferHole),s=o-this.stalled;this._tryFixBufferStall(a,s)}}}},r.prototype.onFragLoadEmergencyAborted=function(){this.state=x.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(c.a.ElementaryStreamTypes.VIDEO,t.buffered),this.state=x.IDLE,this.fragPrevious=null},r.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.prototype.computeLivePosition=function(t,e){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-n)},r.prototype._tryFixBufferStall=function(t,e){var n=this.config,i=this.media.currentTime;this._reportStall(t.len);var r=this.fragmentTracker.getPartialFragment(i);r&&this._trySkipBufferHole(r),.5<t.len&&e>1e3*n.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},r.prototype._reportStall=function(t){var e=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,y.b.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),e.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},r.prototype._trySkipBufferHole=function(t){for(var e=this.hls,n=this.media,i=n.currentTime,r=0,o=0;o<n.buffered.length;o++){var a=n.buffered.start(o);if(r<=i&&i<a)return n.currentTime=Math.max(a,n.currentTime+.1),y.b.warn("skipping hole, adjusting currentTime from "+i+" to "+n.currentTime),this.stalled=null,void e.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+n.currentTime,frag:t});r=n.buffered.end(o)}},r.prototype._tryNudgeBuffer=function(){var t=this.config,e=this.hls,n=this.media,i=n.currentTime,r=(this.nudgeRetry||0)+1;if((this.nudgeRetry=r)<t.nudgeMaxRetry){var o=i+r*t.nudgeOffset;y.b.log("adjust currentTime from "+i+" to "+o),n.currentTime=o,e.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else y.b.error("still stuck in high buffer @"+i+" after "+t.nudgeMaxRetry+", raise fatal error"),e.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!0})},r.prototype._seekToStartPos=function(){var t=this.media,e=t.currentTime,n=t.seeking?e:this.startPosition;e!==n&&(y.b.log("target start position not buffered, seek to buffered.start(0) "+n+" from current time "+e+" "),t.currentTime=n)},w(r,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,y.b.log("main stream:"+e+"->"+t),this.hls.trigger(m.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),r}(i.a);e.a=r},function(t,e,c){function l(n){function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var r={};i.m=n,i.c=r,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var t=i(i.s=ENTRY_MODULE);return t["default"]||t}function u(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function h(t,e,n){var i={};i[n]=[];var r=e.toString(),o=r.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return i;for(var a,s=o[1],l=new RegExp("(\\\\n|\\W)"+u(s)+g,"g");a=l.exec(r);)"dll-reference"!==a[3]&&i[n].push(a[3]);for(l=new RegExp("\\("+u(s)+'\\("(dll-reference\\s('+f+'))"\\)\\)'+g,"g");a=l.exec(r);)t[a[2]]||(i[n].push(a[1]),t[a[2]]=c(a[1]).m),i[a[2]]=i[a[2]]||[],i[a[2]].push(a[4]);return i}function p(n){return Object.keys(n).reduce(function(t,e){return t||0<n[e].length},!1)}function d(t,e){for(var n={main:[e]},i={main:[]},r={main:{}};p(n);)for(var o=Object.keys(n),a=0;a<o.length;a++){var s=o[a],l=n[s].pop();if(r[s]=r[s]||{},!r[s][l]&&t[s][l]){r[s][l]=!0,i[s]=i[s]||[],i[s].push(l);for(var c=h(t,t[s][l],s),u=Object.keys(c),d=0;d<u.length;d++)n[u[d]]=n[u[d]]||[],n[u[d]]=n[u[d]].concat(c[u[d]])}}return i}var f="[\\.|\\-|\\+|\\w|/|@]+",g="\\((/\\*.*?\\*/)?s?.*?("+f+").*?\\)";t.exports=function(t,e){e=e||{};var n={main:c.m},i=e.all?{main:Object.keys(n)}:d(n,t),r="";Object.keys(i).filter(function(t){return"main"!==t}).forEach(function(e){for(var t=0;i[e][t];)t++;i[e].push(t),n[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",r=r+"var "+e+" = ("+l.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map(function(t){return JSON.stringify(t)+": "+n[e][t].toString()}).join(",")+"});\n"}),r=r+"("+l.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i.main.map(function(t){return JSON.stringify(t)+": "+n.main[t].toString()}).join(",")+"})(self);";var o=new window.Blob([r],{type:"text/javascript"});if(e.bare)return o;var a=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(o),s=new window.Worker(a);return s.objectURL=a,s}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(t,e){i(this,n),this.subtle=t,this.aesIV=e}return n.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},n}();e.a=n},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(t,e){i(this,n),this.subtle=t,this.key=e}return n.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},n}();e.a=n},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t){var e=t.byteLength,n=e&&new DataView(t).getUint8(e-1);return n?t.slice(0,e-n):t}var i=function(){function t(){n(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),i=0;i<4;i++)n[i]=e.getUint32(4*i);return n},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,i=n[0],r=n[1],o=n[2],a=n[3],s=this.invSubMix,l=s[0],c=s[1],u=s[2],d=s[3],h=new Uint32Array(256),p=0,f=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=f^f<<1^f<<2^f<<3^f<<4;m=m>>>8^255&m^99;var v=h[e[t[p]=m]=p],y=h[v],b=h[y],w=257*h[m]^16843008*m;i[p]=w<<24|w>>>8,r[p]=w<<16|w>>>16,o[p]=w<<8|w>>>24,a[p]=w,w=16843009*b^65537*y^257*v^16843008*p,l[m]=w<<24|w>>>8,c[m]=w<<16|w>>>16,u[m]=w<<8|w>>>24,d[m]=w,p?(p=v^h[h[h[b^v]]],f^=h[h[f]]):p=f=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,i=0;i<e.length&&n;)n=e[i]===this.key[i],i++;if(!n){this.key=e;var r=this.keySize=e.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var o=this.ksRows=4*(r+6+1),a=void 0,s=void 0,l=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),u=this.sBox,d=this.rcon,h=this.invSubMix,p=h[0],f=h[1],g=h[2],m=h[3],v=void 0,y=void 0;for(a=0;a<o;a++)a<r?v=l[a]=e[a]:(y=v,a%r==0?(y=u[(y=y<<8|y>>>24)>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y],y^=d[a/r|0]<<24):6<r&&a%r==4&&(y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y]),l[a]=v=(l[a-r]^y)>>>0);for(s=0;s<o;s++)a=o-s,y=3&s?l[a]:l[a-4],c[s]=s<4||a<=4?y:p[u[y>>>24]]^f[u[y>>>16&255]]^g[u[y>>>8&255]]^m[u[255&y]],c[s]=c[s]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,n,i){for(var r=this.keySize+6,o=this.invKeySchedule,a=this.invSBox,s=this.invSubMix,l=s[0],c=s[1],u=s[2],d=s[3],h=this.uint8ArrayToUint32Array_(n),p=h[0],f=h[1],g=h[2],m=h[3],v=new Int32Array(t),y=new Int32Array(v.length),b=void 0,w=void 0,x=void 0,T=void 0,S=void 0,E=void 0,A=void 0,C=void 0,k=void 0,_=void 0,R=void 0,D=void 0,L=void 0,P=void 0,I=this.networkToHostOrderSwap;e<v.length;){for(k=I(v[e]),_=I(v[e+1]),R=I(v[e+2]),D=I(v[e+3]),S=k^o[0],E=D^o[1],A=R^o[2],C=_^o[3],L=4,P=1;P<r;P++)b=l[S>>>24]^c[E>>16&255]^u[A>>8&255]^d[255&C]^o[L],w=l[E>>>24]^c[A>>16&255]^u[C>>8&255]^d[255&S]^o[L+1],x=l[A>>>24]^c[C>>16&255]^u[S>>8&255]^d[255&E]^o[L+2],T=l[C>>>24]^c[S>>16&255]^u[E>>8&255]^d[255&A]^o[L+3],S=b,E=w,A=x,C=T,L+=4;b=a[S>>>24]<<24^a[E>>16&255]<<16^a[A>>8&255]<<8^a[255&C]^o[L],w=a[E>>>24]<<24^a[A>>16&255]<<16^a[C>>8&255]<<8^a[255&S]^o[L+1],x=a[A>>>24]<<24^a[C>>16&255]<<16^a[S>>8&255]<<8^a[255&E]^o[L+2],T=a[C>>>24]<<24^a[S>>16&255]<<16^a[E>>8&255]<<8^a[255&A]^o[L+3],L+=3,y[e]=I(b^p),y[e+1]=I(T^f),y[e+2]=I(x^g),y[e+3]=I(w^m),p=k,f=_,g=R,m=D,e+=4}return i?O(y.buffer):y.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}();e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=n(20),g=n(0),m=n(5),i=function(){function i(t,e,n){r(this,i),this.observer=t,this.config=n,this.remuxer=e}return i.prototype.resetInitSegment=function(t,e,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},i.prototype.resetTimeStamp=function(){},i.probe=function(t){if(!t)return!1;for(var e=(m.a.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(f.e(t,e))return g.b.log("ADTS sync word found !"),!0;return!1},i.prototype.append=function(t,e,n,i){for(var r=this._audioTrack,o=m.a.getID3Data(t,0)||[],a=m.a.getTimeStamp(o),s=a?90*a:9e4*e,l=0,c=s,u=t.length,d=o.length,h=[{pts:c,dts:c,data:o}];d<u-1;)if(f.d(t,d)&&d+5<u){f.c(r,this.observer,t,d,r.manifestCodec);var p=f.a(r,t,d,s,l);if(!p){g.b.log("Unable to parse AAC frame");break}d+=p.length,c=p.sample.pts,l++}else m.a.isHeader(t,d)?(o=m.a.getID3Data(t,d),h.push({pts:c,dts:c,data:o}),d+=o.length):d++;this.remuxer.remux(r,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,n,i)},i.prototype.destroy=function(){},i}();e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var m=n(20),s=n(21),P=n(1),E=n(39),i=n(40),I=n(0),O=n(2),o={video:0,audio:1,id3:2,text:3},a=function(){function L(t,e,n,i){r(this,L),this.observer=t,this.config=n,this.typeSupported=i,this.remuxer=e,this.sampleAes=null}return L.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new i.a(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},L.probe=function(t){var e=L._syncOffset(t);return!(e<0||(e&&I.b.warn("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),0))},L._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),n=0;n<e;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},L.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:o[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},L.prototype.resetInitSegment=function(t,e,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=L.createTrack("video",i),this._audioTrack=L.createTrack("audio",i),this._id3Track=L.createTrack("id3",i),this._txtTrack=L.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=n,this._duration=i},L.prototype.resetTimeStamp=function(){},L.prototype.append=function(t,e,n,i){var r=void 0,o=t.length,a=void 0,s=void 0,l=void 0,c=void 0,u=!1;this.contiguous=n;var d=this.pmtParsed,h=this._avcTrack,p=this._audioTrack,f=this._id3Track,g=h.pid,m=p.pid,v=f.pid,y=this._pmtId,b=h.pesData,w=p.pesData,x=f.pesData,T=this._parsePAT,S=this._parsePMT,E=this._parsePES,A=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),k=this._parseMPEGPES.bind(this),_=this._parseID3PES.bind(this),R=L._syncOffset(t);for(o-=(o+R)%188,r=R;r<o;r+=188)if(71===t[r]){if(a=!!(64&t[r+1]),s=((31&t[r+1])<<8)+t[r+2],1<(48&t[r+3])>>4){if((l=r+5+t[r+4])===r+188)continue}else l=r+4;switch(s){case g:a&&(b&&(c=E(b))&&void 0!==c.pts&&A(c,!1),b={data:[],size:0}),b&&(b.data.push(t.subarray(l,r+188)),b.size+=r+188-l);break;case m:a&&(w&&(c=E(w))&&void 0!==c.pts&&(p.isAAC?C(c):k(c)),w={data:[],size:0}),w&&(w.data.push(t.subarray(l,r+188)),w.size+=r+188-l);break;case v:a&&(x&&(c=E(x))&&void 0!==c.pts&&_(c),x={data:[],size:0}),x&&(x.data.push(t.subarray(l,r+188)),x.size+=r+188-l);break;case 0:a&&(l+=t[l]+1),y=this._pmtId=T(t,l);break;case y:a&&(l+=t[l]+1);var D=S(t,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(g=D.avc)&&(h.pid=g),0<(m=D.audio)&&(p.pid=m,p.isAAC=D.isAAC),0<(v=D.id3)&&(f.pid=v),u&&!d&&(I.b.log("reparse from beginning"),u=!1,r=R-188),d=this.pmtParsed=!0;break;case 17:case 8191:break;default:u=!0}}else this.observer.trigger(P.a.ERROR,{type:O.b.MEDIA_ERROR,details:O.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});b&&(c=E(b))&&void 0!==c.pts?(A(c,!0),h.pesData=null):h.pesData=b,w&&(c=E(w))&&void 0!==c.pts?(p.isAAC?C(c):k(c),p.pesData=null):(w&&w.size&&I.b.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=w),x&&(c=E(x))&&void 0!==c.pts?(_(c),f.pesData=null):f.pesData=x,null==this.sampleAes?this.remuxer.remux(p,h,f,this._txtTrack,e,n,i):this.decryptAndRemux(p,h,f,this._txtTrack,e,n,i)},L.prototype.decryptAndRemux=function(t,e,n,i,r,o,a){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,n,i,r,o,a)})}else this.decryptAndRemuxAvc(t,e,n,i,r,o,a)},L.prototype.decryptAndRemuxAvc=function(t,e,n,i,r,o,a){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,n,i,r,o,a)})}else this.remuxer.remux(t,e,n,i,r,o,a)},L.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},L.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},L.prototype._parsePMT=function(t,e,n,i){var r=void 0,o=void 0,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<r;){switch(o=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!i){I.b.log("unkown stream type:"+t[e]);break}case 15:-1===a.audio&&(a.audio=o);break;case 21:-1===a.id3&&(a.id3=o);break;case 219:if(!i){I.b.log("unkown stream type:"+t[e]);break}case 27:-1===a.avc&&(a.avc=o);break;case 3:case 4:n?-1===a.audio&&(a.audio=o,a.isAAC=!1):I.b.log("MPEG audio found, not supported in this browser for now");break;case 36:I.b.warn("HEVC stream type found, not supported for now");break;default:I.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return a},L.prototype._parsePES=function(t){var e=0,n=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,u=t.data;if(!t||0===t.size)return null;for(;u[0].length<19&&1<u.length;){var d=new Uint8Array(u[0].length+u[1].length);d.set(u[0]),d.set(u[1],u[0].length),u[0]=d,u.splice(1,1)}if(1===((n=u[0])[0]<<16)+(n[1]<<8)+n[2]){if((r=(n[4]<<8)+n[5])&&r>t.size-6)return null;192&(i=n[7])&&(4294967295<(s=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2)&&(s-=8589934592),64&i?(4294967295<(l=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2)&&(l-=8589934592),54e5<s-l&&(I.b.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),c=(o=n[8])+9,t.size-=c,a=new Uint8Array(t.size);for(var h=0,p=u.length;h<p;h++){var f=(n=u[h]).byteLength;if(c){if(f<c){c-=f;continue}n=n.subarray(c),f-=c,c=0}a.set(n,e),e+=f}return r&&(r-=o+3),{data:a,pts:s,dts:l,len:r}}return null},L.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var n=e.samples,i=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(i||this.contiguous)?(t.id=i,n.push(t)):e.dropped++}t.debug.length&&I.b.log(t.pts+"/"+t.dts+":"+t.debug)},L.prototype._parseAVCPES=function(f,t){var g=this,m=this._avcTrack,e=this._parseAVCNALu(f.data),v=void 0,y=this.avcSample,b=void 0,w=!1,x=void 0,T=this.pushAccesUnit.bind(this),S=function(t,e,n,i){return{key:t,pts:e,dts:n,units:[],debug:i}};f.data=null,y&&e.length&&!m.audFound&&(T(y,m),y=this.avcSample=S(!1,f.pts,f.dts,"")),e.forEach(function(t){switch(t.type){case 1:b=!0,y||(y=g.avcSample=S(!0,f.pts,f.dts,"")),y.frame=!0;var e=t.data;if(w&&4<e.length){var n=new E.a(e).readSliceType();2!==n&&4!==n&&7!==n&&9!==n||(y.key=!0)}break;case 5:b=!0,y||(y=g.avcSample=S(!0,f.pts,f.dts,"")),y.key=!0,y.frame=!0;break;case 6:b=!0,(v=new E.a(g.discardEPB(t.data))).readUByte();for(var i=0,r=0,o=!1,a=0;!o&&1<v.bytesAvailable;){for(i=0;i+=a=v.readUByte(),255===a;);for(r=0;r+=a=v.readUByte(),255===a;);if(4===i&&0!==v.bytesAvailable){if(o=!0,181===v.readUByte()&&49===v.readUShort()&&1195456820===v.readUInt()&&3===v.readUByte()){var s=v.readUByte(),l=31&s,c=[s,v.readUByte()];for(x=0;x<l;x++)c.push(v.readUByte()),c.push(v.readUByte()),c.push(v.readUByte());g._insertSampleInOrder(g._txtTrack.samples,{type:3,pts:f.pts,bytes:c})}}else if(r<v.bytesAvailable)for(x=0;x<r;x++)v.readUByte()}break;case 7:if(w=b=!0,!m.sps){var u=(v=new E.a(t.data)).readSPS();m.width=u.width,m.height=u.height,m.pixelRatio=u.pixelRatio,m.sps=[t.data],m.duration=g._duration;var d=t.data.subarray(1,4),h="avc1.";for(x=0;x<3;x++){var p=d[x].toString(16);p.length<2&&(p="0"+p),h+=p}m.codec=h}break;case 8:b=!0,m.pps||(m.pps=[t.data]);break;case 9:b=!1,m.audFound=!0,y&&T(y,m),y=g.avcSample=S(!1,f.pts,f.dts,"");break;case 12:b=!1;break;default:b=!1,y&&(y.debug+="unknown NAL "+t.type+" ")}y&&b&&y.units.push(t)}),t&&y&&(T(y,m),this.avcSample=null)},L.prototype._insertSampleInOrder=function(t,e){var n=t.length;if(0<n){if(e.pts>=t[n-1].pts)t.push(e);else for(var i=n-1;0<=i;i--)if(e.pts<t[i].pts){t.splice(i,0,e);break}}else t.push(e)},L.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var n=this._avcTrack.samples;t=n[n.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},L.prototype._parseAVCNALu=function(t){var e=0,n=t.byteLength,i=void 0,r=void 0,o=this._avcTrack,a=o.naluState||0,s=a,l=[],c=void 0,u=-1,d=void 0;for(-1===a&&(d=31&t[u=0],a=0,e=1);e<n;)if(i=t[e++],a)if(1!==a)if(i)if(1===i){if(0<=u)c={data:t.subarray(u,e-a-1),type:d},l.push(c);else{var h=this._getLastNalUnit();if(h&&(s&&e<=4-s&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-s)),0<(r=e-a-1))){var p=new Uint8Array(h.data.byteLength+r);p.set(h.data,0),p.set(t.subarray(0,r),h.data.byteLength),h.data=p}}e<n?(d=31&t[u=e],a=0):a=-1}else a=0;else a=3;else a=i?0:2;else a=i?0:1;if(0<=u&&0<=a&&(c={data:t.subarray(u,n),type:d,state:a},l.push(c)),0===l.length){var f=this._getLastNalUnit();if(f){var g=new Uint8Array(f.data.byteLength+t.byteLength);g.set(f.data,0),g.set(t,f.data.byteLength),f.data=g}}return o.naluState=a,l},L.prototype.discardEPB=function(t){for(var e=t.byteLength,n=[],i=1,r=void 0,o=void 0;i<e-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return t;r=e-n.length,o=new Uint8Array(r);var a=0;for(i=0;i<r;a++,i++)a===n[0]&&(a++,n.shift()),o[i]=t[a];return o},L.prototype._parseAACPES=function(t){var e=this._audioTrack,n=t.data,i=t.pts,r=this.aacOverFlow,o=this.aacLastPTS,a=void 0,s=void 0,l=void 0,c=void 0,u=void 0;if(r){var d=new Uint8Array(r.byteLength+n.byteLength);d.set(r,0),d.set(n,r.byteLength),n=d}for(l=0,u=n.length;l<u-1&&!m.d(n,l);l++);if(l){var h=void 0,p=void 0;if(l<u-1?(h="AAC PES did not start with ADTS header,offset:"+l,p=!1):(h="no ADTS header found in AAC PES",p=!0),I.b.warn("parsing error:"+h),this.observer.trigger(P.a.ERROR,{type:O.b.MEDIA_ERROR,details:O.a.FRAG_PARSING_ERROR,fatal:p,reason:h}),p)return}if(m.c(e,this.observer,n,l,this.audioCodec),s=0,a=m.b(e.samplerate),r&&o){var f=o+a;1<Math.abs(f-i)&&(I.b.log("AAC: align PTS for overlapping frames by "+Math.round((f-i)/90)),i=f)}for(;l<u;)if(m.d(n,l)&&l+5<u){var g=m.a(e,n,l,i,s);if(!g)break;l+=g.length,c=g.sample.pts,s++}else l++;r=l<u?n.subarray(l,u):null,this.aacOverFlow=r,this.aacLastPTS=c},L.prototype._parseMPEGPES=function(t){for(var e=t.data,n=e.length,i=0,r=0,o=t.pts;r<n;)if(s.a.isHeader(e,r)){var a=s.a.appendFrame(this._audioTrack,e,r,o,i);if(!a)break;r+=a.length,i++}else r++},L.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},L}();e.a=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(0),o=function(){function e(t){i(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,i=new Uint8Array(4),r=Math.min(4,e);if(0===r)throw new Error("no bytes available");i.set(t.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},e.prototype.skipBits=function(t){var e=void 0;this.bitsAvailable>t||(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord()),this.word<<=t,this.bitsAvailable-=t},e.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return 32<t&&r.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,0<this.bitsAvailable?this.word<<=e:0<this.bytesAvailable&&this.loadWord(),0<(e=t-e)&&this.bitsAvailable?n<<e|this.readBits(e):n},e.prototype.skipLZ=function(){var t=void 0;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(t){var e=8,n=8,i=void 0;for(i=0;i<t;i++)0!==n&&(n=(e+this.readEG()+256)%256),e=0===n?e:n},e.prototype.readSPS=function(){var t=0,e=0,n=0,i=0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,u=void 0,d=this.readUByte.bind(this),h=this.readBits.bind(this),p=this.readUEG.bind(this),f=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),r=d(),h(5),g(3),d(),v(),100===r||110===r||122===r||244===r||44===r||83===r||86===r||118===r||128===r){var b=p();if(3===b&&g(1),v(),v(),g(1),f())for(c=3!==b?8:12,u=0;u<c;u++)f()&&y(u<6?16:64)}v();var w=p();if(0===w)p();else if(1===w)for(g(1),m(),m(),o=p(),u=0;u<o;u++)m();v(),g(1),a=p(),s=p(),0===(l=h(1))&&g(1),g(1),f()&&(t=p(),e=p(),n=p(),i=p());var x=[1,1];if(f()&&f())switch(d()){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:x=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(a+1)-2*t-2*e),height:(2-l)*(s+1)*16-(l?2:4)*(n+i),pixelRatio:x}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();e.a=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=n(11),i=function(){function r(t,e,n,i){o(this,r),this.decryptdata=n,this.discardEPB=i,this.decrypter=new a.a(t,e,{removePKCS7Padding:!1})}return r.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},r.prototype.decryptAacSample=function(e,n,i,r){var o=e[n].unit,t=o.subarray(16,o.length-o.length%16),a=t.buffer.slice(t.byteOffset,t.byteOffset+t.length),s=this;this.decryptBuffer(a,function(t){t=new Uint8Array(t),o.set(t,16),r||s.decryptAacSamples(e,n+1,i)})},r.prototype.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,i),!i)return}}},r.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),i=0,r=32;r<=t.length-16;r+=160,i+=16)n.set(t.subarray(r,r+16),i);return n},r.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var n=0,i=32;i<=t.length-16;i+=160,n+=16)t.set(e.subarray(n,n+16),i);return t},r.prototype.decryptAvcSample=function(e,n,i,r,o,a){var s=this.discardEPB(o.data),t=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(t.buffer,function(t){o.data=l.getAvcDecryptedUnit(s,t),a||l.decryptAvcSamples(e,n,i+1,r)})},r.prototype.decryptAvcSamples=function(t,e,n,i){for(;;e++,n=0){if(e>=t.length)return void i();for(var r=t[e].units;!(n>=r.length);n++){var o=r[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,i,o,a),!a)return}}}},r}();e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=n(5),o=n(0),g=n(21),i=function(){function i(t,e,n){r(this,i),this.observer=t,this.config=n,this.remuxer=e}return i.prototype.resetInitSegment=function(t,e,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},i.prototype.resetTimeStamp=function(){},i.probe=function(t){var e=void 0,n=void 0,i=f.a.getID3Data(t,0);if(i&&void 0!==f.a.getTimeStamp(i))for(e=i.length,n=Math.min(t.length-1,e+100);e<n;e++)if(g.a.probe(t,e))return o.b.log("MPEG Audio sync word found !"),!0;return!1},i.prototype.append=function(t,e,n,i){for(var r=f.a.getID3Data(t,0),o=f.a.getTimeStamp(r),a=o?90*o:9e4*e,s=r.length,l=t.length,c=0,u=0,d=this._audioTrack,h=[{pts:a,dts:a,data:r}];s<l;)if(g.a.isHeader(t,s)){var p=g.a.appendFrame(d,t,s,a,c);if(!p)break;s+=p.length,u=p.sample.pts,c++}else f.a.isHeader(t,s)?(r=f.a.getID3Data(t,s),h.push({pts:u,dts:u,data:r}),s+=r.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,n,i)},i.prototype.destroy=function(){},i}();e.a=i},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var z=n(43),Z=n(44),tt=n(1),et=n(2),nt=n(0),i=function(){function o(t,e,n,i){a(this,o),this.observer=t,this.config=e,this.typeSupported=n;var r=navigator.userAgent;this.isSafari=i&&-1<i.indexOf("Apple")&&r&&!r.match("CriOS"),this.ISGenerated=!1}return o.prototype.destroy=function(){},o.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},o.prototype.resetInitSegment=function(){this.ISGenerated=!1},o.prototype.remux=function(t,e,n,i,r,o,a){if(this.ISGenerated||this.generateIS(t,e,r),this.ISGenerated){var s=t.samples.length,l=e.samples.length,c=r,u=r;if(s&&l){var d=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale;c+=Math.max(0,d),u+=Math.max(0,-d)}if(s){t.timescale||(nt.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,r));var h=this.remuxAudio(t,c,o,a);if(l){var p=void 0;h&&(p=h.endPTS-h.startPTS),e.timescale||(nt.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,r)),this.remuxVideo(e,u,o,p,a)}}else if(l){var f=this.remuxVideo(e,u,o,0,a);f&&t.codec&&this.remuxEmptyAudio(t,c,o,f)}}n.samples.length&&this.remuxID3(n,r),i.samples.length&&this.remuxText(i,r),this.observer.trigger(tt.a.FRAG_PARSED)},o.prototype.generateIS=function(t,e,n){var i=this.observer,r=t.samples,o=e.samples,a=this.typeSupported,s="audio/mp4",l={},c={tracks:l},u=void 0===this._initPTS,d=void 0,h=void 0;if(u&&(d=h=1/0),t.config&&r.length&&(
t.timescale=t.samplerate,nt.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(a.mpeg?(s="audio/mpeg",t.codec=""):a.mp3&&(t.codec="mp3")),l.audio={container:s,codec:t.codec,initSegment:!t.isAAC&&a.mpeg?new Uint8Array:Z.a.initSegment([t]),metadata:{channelCount:t.channelCount}},u&&(d=h=r[0].pts-t.inputTimeScale*n)),e.sps&&e.pps&&o.length){var p=e.inputTimeScale;e.timescale=p,l.video={container:"video/mp4",codec:e.codec,initSegment:Z.a.initSegment([e]),metadata:{width:e.width,height:e.height}},u&&(d=Math.min(d,o[0].pts-p*n),h=Math.min(h,o[0].dts-p*n),this.observer.trigger(tt.a.INIT_PTS_FOUND,{initPTS:d}))}Object.keys(l).length?(i.trigger(tt.a.FRAG_PARSING_INIT_SEGMENT,c),this.ISGenerated=!0,u&&(this._initPTS=d,this._initDTS=h)):i.trigger(tt.a.ERROR,{type:et.b.MEDIA_ERROR,details:et.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},o.prototype.remuxVideo=function(t,e,n,i,r){var o=8,a=t.timescale,s=void 0,l=void 0,c=void 0,u=void 0,d=void 0,h=void 0,p=void 0,f=t.samples,g=[],m=f.length,v=this._PTSNormalize,y=this._initDTS,b=this.nextAvcDts,w=this.isSafari;if(0!==m){w&&(n|=f.length&&b&&(r&&Math.abs(e-b/a)<.1||Math.abs(f[0].pts-b-y)<a/5)),n||(b=e*a),f.forEach(function(t){t.pts=v(t.pts-y,b),t.dts=v(t.dts-y,b)}),f.sort(function(t,e){var n=t.dts-e.dts,i=t.pts-e.pts;return n||i||t.id-e.id});var x=f.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(x<0){nt.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(x/90)+" ms to overcome this issue");for(var T=0;T<f.length;T++)f[T].dts+=x}var S=f[0];d=Math.max(S.dts,0),u=Math.max(S.pts,0);var E=Math.round((d-b)/90);n&&E&&(1<E?nt.b.log("AVC:"+E+" ms hole between fragments detected,filling it"):E<-1&&nt.b.log("AVC:"+-E+" ms overlapping between fragments detected"),d=b,f[0].dts=d,u=Math.max(u-E,b),f[0].pts=u,nt.b.log("Video/PTS/DTS adjusted: "+Math.round(u/90)+"/"+Math.round(d/90)+",delta:"+E+" ms")),S=f[f.length-1],p=Math.max(S.dts,0),h=Math.max(S.pts,0,p),w&&(s=Math.round((p-d)/(f.length-1)));for(var A=0,C=0,k=0;k<m;k++){for(var _=f[k],R=_.units,D=R.length,L=0,P=0;P<D;P++)L+=R[P].data.length;C+=L,A+=D,_.length=L,_.dts=w?d+k*s:Math.max(_.dts,d),_.pts=Math.max(_.pts,_.dts)}var I=C+4*A+8;try{l=new Uint8Array(I)}catch(t){return void this.observer.trigger(tt.a.ERROR,{type:et.b.MUX_ERROR,details:et.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:I,reason:"fail allocating video mdat "+I})}var O=new DataView(l.buffer);O.setUint32(0,I),l.set(Z.a.types.mdat,4);for(var N=0;N<m;N++){for(var M=f[N],j=M.units,F=0,B=void 0,U=0,H=j.length;U<H;U++){var q=j[U],W=q.data,G=q.data.byteLength;O.setUint32(o,G),o+=4,l.set(W,o),o+=G,F+=4+G}if(w)B=Math.max(0,s*Math.round((M.pts-M.dts)/s));else{if(N<m-1)s=f[N+1].dts-M.dts;else{var z=this.config,V=M.dts-f[0<N?N-1:N].dts;if(z.stretchShortVideoTrack){var K=z.maxBufferHole,Y=Math.floor(K*a),X=(i?u+i*a:this.nextAudioPts)-M.pts;Y<X?((s=X-V)<0&&(s=V),nt.b.log("It is approximately "+X/90+" ms to the next segment; using duration "+s/90+" ms for the last video frame.")):s=V}else s=V}B=Math.round(M.pts-M.dts)}g.push({size:F,duration:s,cts:B,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:M.key?2:1,isNonSync:M.key?0:1}})}this.nextAvcDts=p+s;var $=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,g.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var J=g[0].flags;J.dependsOn=2,J.isNonSync=0}t.samples=g,c=Z.a.moof(t.sequenceNumber++,d,t),t.samples=[];var Q={data1:c,data2:l,startPTS:u/a,endPTS:(h+s)/a,startDTS:d/a,endDTS:this.nextAvcDts/a,type:"video",hasAudio:!1,hasVideo:!0,nb:g.length,dropped:$};return this.observer.trigger(tt.a.FRAG_PARSING_DATA,Q),Q}},o.prototype.remuxAudio=function(t,e,n,i){var r=t.inputTimeScale,o=t.timescale,a=r/o,s=(t.isAAC?1024:1152)*a,l=this._PTSNormalize,c=this._initDTS,u=!t.isAAC&&this.typeSupported.mpeg,d=void 0,h=void 0,p=void 0,f=void 0,g=void 0,m=void 0,v=void 0,y=t.samples,b=[],w=this.nextAudioPts;if(n|=y.length&&w&&(i&&Math.abs(e-w/r)<.1||Math.abs(y[0].pts-w-c)<20*s),y.forEach(function(t){t.pts=t.dts=l(t.pts-c,e*r)}),0!==(y=y.filter(function(t){return 0<=t.pts})).length){if(n||(w=i?e*r:y[0].pts),t.isAAC)for(var x=this.config.maxAudioFramesDrift,T=0,S=w;T<y.length;){var E,A=y[T];E=A.pts-S;var C=Math.abs(1e3*E/r);if(E<=-x*s)nt.b.warn("Dropping 1 audio frame @ "+(S/r).toFixed(3)+"s due to "+Math.round(C)+" ms overlap."),y.splice(T,1),t.len-=A.unit.length;else if(x*s<=E&&C<1e4&&S){var k=Math.round(E/s);nt.b.warn("Injecting "+k+" audio frame @ "+(S/r).toFixed(3)+"s due to "+Math.round(1e3*E/r)+" ms gap.");for(var _=0;_<k;_++){var R=Math.max(S,0);(p=z.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(nt.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),p=A.unit.subarray()),y.splice(T,0,{unit:p,pts:R,dts:R}),t.len+=p.length,S+=s,T++}A.pts=A.dts=S,S+=s,T++}else Math.abs(E),A.pts=A.dts=S,S+=s,T++}for(var D=0,L=y.length;D<L;D++){var P=y[D],I=P.unit,O=P.pts;if(void 0!==v)h.duration=Math.round((O-v)/a);else{var N=Math.round(1e3*(O-w)/r),M=0;if(n&&t.isAAC&&N){if(0<N&&N<1e4)M=Math.round((O-w)/s),nt.b.log(N+" ms hole between AAC samples detected,filling it"),0<M&&((p=z.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(p=I.subarray()),t.len+=M*p.length);else if(N<-12){nt.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(w/r).toFixed(3)+"s/"+(O/r).toFixed(3)+"s/"+-N+"ms"),t.len-=I.byteLength;continue}O=w}if(m=O,!(0<t.len))return;var j=u?t.len:t.len+8;d=u?0:8;try{f=new Uint8Array(j)}catch(t){return void this.observer.trigger(tt.a.ERROR,{type:et.b.MUX_ERROR,details:et.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating audio mdat "+j})}u||(new DataView(f.buffer).setUint32(0,j),f.set(Z.a.types.mdat,4));for(var F=0;F<M;F++)(p=z.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(nt.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),p=I.subarray()),f.set(p,d),d+=p.byteLength,h={size:p.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},b.push(h)}f.set(I,d);var B=I.byteLength;d+=B,h={size:B,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},b.push(h),v=O}var U=0,H=b.length;if(2<=H&&(U=b[H-2].duration,h.duration=U),H){this.nextAudioPts=w=v+a*U,t.len=0,t.samples=b,g=u?new Uint8Array:Z.a.moof(t.sequenceNumber++,m/a,t),t.samples=[];var q=m/r,W=w/r,G={data1:g,data2:f,startPTS:q,endPTS:W,startDTS:q,endDTS:W,type:"audio",hasAudio:!0,hasVideo:!1,nb:H};return this.observer.trigger(tt.a.FRAG_PARSING_DATA,G),G}return null}},o.prototype.remuxEmptyAudio=function(t,e,n,i){var r=t.inputTimeScale,o=r/(t.samplerate?t.samplerate:r),a=this.nextAudioPts,s=(void 0!==a?a:i.startDTS*r)+this._initDTS,l=i.endDTS*r+this._initDTS,c=1024*o,u=Math.ceil((l-s)/c),d=z.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(nt.b.warn("remux empty Audio"),d){for(var h=[],p=0;p<u;p++){var f=s+p*c;h.push({unit:d,pts:f,dts:f}),t.len+=d.length}t.samples=h,this.remuxAudio(t,e,n)}else nt.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},o.prototype.remuxID3=function(t,e){var n=t.samples.length,i=void 0,r=t.inputTimeScale,o=this._initPTS,a=this._initDTS;if(n){for(var s=0;s<n;s++)(i=t.samples[s]).pts=(i.pts-o)/r,i.dts=(i.dts-a)/r;this.observer.trigger(tt.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},o.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var n=t.samples.length,i=void 0,r=t.inputTimeScale,o=this._initPTS;if(n){for(var a=0;a<n;a++)(i=t.samples[a]).pts=(i.pts-o)/r;this.observer.trigger(tt.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},o.prototype._PTSNormalize=function(t,e){var n=void 0;if(void 0===e)return t;for(n=e<t?-8589934592:8589934592;4294967296<Math.abs(t-e);)t+=n;return t},o}();e.a=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(){n(this,t)}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}();e.a=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=Math.pow(2,32)-1,i=function(){function h(){n(this,h)}return h.init=function(){h.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t=void 0;for(t in h.types)h.types.hasOwnProperty(t)&&(h.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);h.HDLR_TYPES={video:e,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);h.STTS=h.STSC=h.STCO=r,h.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),h.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),h.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),h.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);h.FTYP=h.box(h.types.ftyp,o,s,o,a),h.DINF=h.box(h.types.dinf,h.box(h.types.dref,i))},h.box=function(t){for(var e=Array.prototype.slice.call(arguments,1),n=8,i=e.length,r=i,o=void 0;i--;)n+=e[i].byteLength;for((o=new Uint8Array(n))[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=255&n,o.set(t,4),i=0,n=8;i<r;i++)o.set(e[i],n),n+=e[i].byteLength;return o},h.hdlr=function(t){return h.box(h.types.hdlr,h.HDLR_TYPES[t])},h.mdat=function(t){return h.box(h.types.mdat,t)},h.mdhd=function(t,e){e*=t;var n=Math.floor(e/(s+1)),i=Math.floor(e%(s+1));return h.box(h.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},h.mdia=function(t){return h.box(h.types.mdia,h.mdhd(t.timescale,t.duration),h.hdlr(t.type),h.minf(t))},h.mfhd=function(t){return h.box(h.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},h.minf=function(t){return"audio"===t.type?h.box(h.types.minf,h.box(h.types.smhd,h.SMHD),h.DINF,h.stbl(t)):h.box(h.types.minf,h.box(h.types.vmhd,h.VMHD),h.DINF,h.stbl(t))},h.moof=function(t,e,n){return h.box(h.types.moof,h.mfhd(t),h.traf(n,e))},h.moov=function(t){for(var e=t.length,n=[];e--;)n[e]=h.trak(t[e]);return h.box.apply(null,[h.types.moov,h.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(h.mvex(t)))},h.mvex=function(t){for(var e=t.length,n=[];e--;)n[e]=h.trex(t[e]);return h.box.apply(null,[h.types.mvex].concat(n))},h.mvhd=function(t,e){e*=t;var n=Math.floor(e/(s+1)),i=Math.floor(e%(s+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return h.box(h.types.mvhd,r)},h.sdtp=function(t){var e=t.samples||[],n=new Uint8Array(4+e.length),i=void 0,r=void 0;for(r=0;r<e.length;r++)i=e[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return h.box(h.types.sdtp,n)},h.stbl=function(t){return h.box(h.types.stbl,h.stsd(t),h.box(h.types.stts,h.STTS),h.box(h.types.stsc,h.STSC),h.box(h.types.stsz,h.STSZ),h.box(h.types.stco,h.STCO))},h.avc1=function(t){var e=[],n=[],i=void 0,r=void 0,o=void 0;for(i=0;i<t.sps.length;i++)o=(r=t.sps[i]).byteLength,e.push(o>>>8&255),e.push(255&o),e=e.concat(Array.prototype.slice.call(r));for(i=0;i<t.pps.length;i++)o=(r=t.pps[i]).byteLength,n.push(o>>>8&255),n.push(255&o),n=n.concat(Array.prototype.slice.call(r));var a=h.box(h.types.avcC,new Uint8Array([1,e[3],e[4],e[5],255,224|t.sps.length].concat(e).concat([t.pps.length]).concat(n))),s=t.width,l=t.height,c=t.pixelRatio[0],u=t.pixelRatio[1];return h.box(h.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,h.box(h.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),h.box(h.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))},h.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},h.mp4a=function(t){var e=t.samplerate;return h.box(h.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]),h.box(h.types.esds,h.esds(t)))},h.mp3=function(t){var e=t.samplerate;return h.box(h.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]))},h.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?h.box(h.types.stsd,h.STSD,h.mp4a(t)):h.box(h.types.stsd,h.STSD,h.mp3(t)):h.box(h.types.stsd,h.STSD,h.avc1(t))},h.tkhd=function(t){var e=t.id,n=t.duration*t.timescale,i=t.width,r=t.height,o=Math.floor(n/(s+1)),a=Math.floor(n%(s+1));return h.box(h.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,r>>8&255,255&r,0,0]))},h.traf=function(t,e){var n=h.sdtp(t),i=t.id,r=Math.floor(e/(s+1)),o=Math.floor(e%(s+1));return h.box(h.types.traf,h.box(h.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),h.box(h.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,o>>24,o>>16&255,o>>8&255,255&o])),h.trun(t,n.length+16+20+8+16+8+8),n)},h.trak=function(t){return t.duration=t.duration||4294967295,h.box(h.types.trak,h.tkhd(t),h.mdia(t))},h.trex=function(t){var e=t.id;return h.box(h.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},h.trun=function(t,e){var n=t.samples||[],i=n.length,r=12+16*i,o=new Uint8Array(r),a=void 0,s=void 0,l=void 0,c=void 0,u=void 0,d=void 0;for(e+=8+r,o.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,e>>>24&255,e>>>16&255,e>>>8&255,255&e],0),a=0;a<i;a++)l=(s=n[a]).duration,c=s.size,u=s.flags,d=s.cts,o.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,61440&u.degradPrio,15&u.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*a);return h.box(h.types.trun,o)},h.initSegment=function(t){h.types||h.init();var e=h.moov(t),n=void 0;return(n=new Uint8Array(h.FTYP.byteLength+e.byteLength)).set(h.FTYP),n.set(e,h.FTYP.byteLength),n},h}();e.a=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=n(1),r=function(){function e(t){i(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(t,e,n,i,r,o,a,s){var l=this.observer,c="";t&&(c+="audio"),e&&(c+="video"),l.trigger(u.a.FRAG_PARSING_DATA,{data1:s,startPTS:r,startDTS:r,type:c,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),l.trigger(u.a.FRAG_PARSED)},e}();e.a=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(19),s=n(1),l=n(0),i=n(10),c=n.n(i),r=function(r){var o=new c.a;o.trigger=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.emit.apply(o,[t,t].concat(n))},o.off=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.removeListener.apply(o,[t].concat(n))};var i=function(t,e){r.postMessage({event:t,data:e})};r.addEventListener("message",function(t){var e=t.data;switch(e.cmd){case"init":var n=JSON.parse(e.config);r.demuxer=new a.a(o,e.typeSupported,n,e.vendor);try{Object(l.a)(!0===n.debug)}catch(r){console.warn("demuxerWorker: unable to enable logs")}i("init",null);break;case"demux":r.demuxer.push(e.data,e.decryptdata,e.initSegment,e.audioCodec,e.videoCodec,e.timeOffset,e.discontinuity,e.trackSwitch,e.contiguous,e.duration,e.accurateTimeOffset,e.defaultInitPTS)}}),o.on(s.a.FRAG_DECRYPTED,i),o.on(s.a.FRAG_PARSING_INIT_SEGMENT,i),o.on(s.a.FRAG_PARSED,i),o.on(s.a.ERROR,i),o.on(s.a.FRAG_PARSING_METADATA,i),o.on(s.a.FRAG_PARSING_USERDATA,i),o.on(s.a.INIT_PTS_FOUND,i),o.on(s.a.FRAG_PARSING_DATA,function(t,e){var n=[],i={event:t,data:e};e.data1&&(i.data1=e.data1.buffer,n.push(e.data1.buffer),delete e.data1),e.data2&&(i.data2=e.data2.buffer,n.push(e.data2.buffer),delete e.data2),r.postMessage(i,n)})};e["default"]=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(1),i=n(3),d=n(0),h=n(2),p=n(17),s=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),l=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,u.a.MANIFEST_LOADED,u.a.LEVEL_LOADED,u.a.FRAG_LOADED,u.a.ERROR));return e.canload=!1,e.currentLevelIndex=null,e.manualLevelIndex=-1,e.timer=null,e}return a(i,n),i.prototype.onHandlerDestroying=function(){this.cleanTimer(),this.manualLevelIndex=-1},i.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},i.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},i.prototype.stopLoad=function(){this.canload=!1},i.prototype.onManifestLoaded=function(t){var e=[],n=void 0,i={},r=null,o=!1,a=!1,s=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),l=[];if(t.levels.forEach(function(t){t.loadError=0,t.fragmentError=!1,o=o||!!t.videoCodec,a=a||!!t.audioCodec||!(!t.attrs||!t.attrs.AUDIO),!0===s&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),void 0===(r=i[t.bitrate])?(t.url=[t.url],t.urlId=0,i[t.bitrate]=t,e.push(t)):r.url.push(t.url)}),!0===o&&!0===a&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||Object(p.a)(e))&&(!n||Object(p.a)(n))}),t.audioTracks&&(l=t.audioTracks.filter(function(t){return!t.audioCodec||Object(p.a)(t.audioCodec,"audio")})),0<e.length){n=e[0].bitrate,e.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=e;for(var c=0;c<e.length;c++)if(e[c].bitrate===n){this._firstLevel=c,d.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+n);break}this.hls.trigger(u.a.MANIFEST_PARSED,{levels:e,audioTracks:l,firstLevel:this._firstLevel,stats:t.stats,audio:a,video:o,altAudio:0<l.length&&o})}else this.hls.trigger(u.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},i.prototype.setLevelInternal=function(t){var e=this._levels,n=this.hls;if(0<=t&&t<e.length){if(this.cleanTimer(),this.currentLevelIndex!==t){d.b.log("switching to level "+t);var i=e[this.currentLevelIndex=t];i.level=t,n.trigger(u.a.LEVEL_SWITCHING,i)}var r=e[t],o=r.details;if(!o||!0===o.live){var a=r.urlId;n.trigger(u.a.LEVEL_LOADING,{url:r.url[a],level:t,id:a})}}else n.trigger(u.a.ERROR,{type:h.b.OTHER_ERROR,details:h.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},i.prototype.onError=function(t){if(!0!==t.fatal){var e=!1,n=!1,i=void 0;switch(t.details){case h.a.FRAG_LOAD_ERROR:case h.a.FRAG_LOAD_TIMEOUT:case h.a.KEY_LOAD_ERROR:case h.a.KEY_LOAD_TIMEOUT:i=t.frag.level,n=!0;break;case h.a.LEVEL_LOAD_ERROR:case h.a.LEVEL_LOAD_TIMEOUT:i=t.context.level,e=!0;break;case h.a.REMUX_ALLOC_ERROR:i=t.level,e=!0}void 0!==i&&this.recoverLevel(t,i,e,n)}else t.type===h.b.NETWORK_ERROR&&this.cleanTimer()},i.prototype.recoverLevel=function(t,e,n,i){var r=this,o=this.hls.config,a=t.details,s=this._levels[e],l=void 0,c=void 0,u=void 0;if(s.loadError++,s.fragmentError=i,!0===n){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return d.b.error("level controller, cannot recover from "+a+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(t.fatal=!0);c=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return r.loadLevel()},c),t.levelRetry=!0,this.levelRetryCount++,d.b.warn("level controller, "+a+", retry in "+c+" ms, current retry count is "+this.levelRetryCount)}!0!==n&&!0!==i||(1<(l=s.url.length)&&s.loadError<l?(d.b.warn("level controller, "+a+" for level "+e+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%l,s.details=void 0):-1===this.manualLevelIndex?(u=0===e?this._levels.length-1:e-1,d.b.warn("level controller, "+a+": switch to "+u),this.hls.nextAutoLevel=this.currentLevelIndex=u):!0===i&&(d.b.warn("level controller, "+a+": reload a fragment"),this.currentLevelIndex=null))},i.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var n=this._levels[e.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},i.prototype.onLevelLoaded=function(t){var e=this,n=t.level;if(n===this.currentLevelIndex){var i=this._levels[n];!1===i.fragmentError&&(i.loadError=0,this.levelRetryCount=0);var r=t.details;if(r.live){var o=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),a=o,s=i.details;s&&r.endSN===s.endSN&&(a/=2,d.b.log("same live playlist, reload twice faster")),a-=performance.now()-t.stats.trequest,a=Math.max(o/2,Math.round(a)),d.b.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},a)}else this.cleanTimer()}},i.prototype.loadLevel=function(){var t=void 0,e=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(t=this._levels[this.currentLevelIndex])&&0<t.url.length&&(e=t.urlId,this.hls.trigger(u.a.LEVEL_LOADING,{url:t.url[e],level:this.currentLevelIndex,id:e}))},s(i,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),i}(i.a);e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),l=n(3),d=n(5),c=n(25),i=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.FRAG_PARSING_METADATA));return e.id3Track=void 0,e.media=void 0,e}return a(i,n),i.prototype.destroy=function(){l.a.prototype.destroy.call(this)},i.prototype.onMediaAttached=function(t){this.media=t.media,this.media},i.prototype.onMediaDetaching=function(){Object(c.a)(this.id3Track),this.id3Track=void 0,this.media=void 0},i.prototype.getID3Track=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("metadata"===n.kind&&"id3"===n.label)return Object(c.b)(n,this.media),n}return this.media.addTextTrack("metadata","id3")},i.prototype.onFragParsingMetadata=function(t){var e=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var o=d.a.getID3Frames(n[r].data);if(o){var a=n[r].pts,s=r<n.length-1?n[r+1].pts:e.endPTS;a===s&&(s+=1e-4);for(var l=0;l<o.length;l++){var c=o[l];if(!d.a.isTimeStampFrame(c)){var u=new i(a,s,"");u.value=c,this.id3Track.addCue(u)}}}}},i}(l.a);e.a=i},function(t,e,n){"use strict";function i(){var t=Object(r.a)(),e=window.SourceBuffer||window.WebKitSourceBuffer,n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!n&&!!i}e.a=i;var r=n(12)},function(t,e,n){"use strict";n.d(e,"a",function(){return m});var i=n(51),r=n(54),o=n(55),a=n(56),s=n(57),l=n(58),c=n(59),u=n(60),d=n(62),h=n(66),p=n(67),f=n(68),g=n(69),m={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.a,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:i.a,bufferController:r.a,capLevelController:o.a,fpsController:a.a,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:g.a};m.subtitleStreamController=p.a,m.subtitleTrackController=h.a,m.timelineController=d.a,m.cueHandler=u,m.enableCEA708Captions=!0,m.enableWebVTT=!0,m.captionsTextTrack1Label="English",m.captionsTextTrack1LanguageCode="en",m.captionsTextTrack2Label="Spanish",m.captionsTextTrack2LanguageCode="es",m.audioStreamController=c.a,m.audioTrackController=l.a,m.emeController=f.a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var b=n(1),s=n(3),w=n(9),l=n(2),x=n(0),c=n(52),u=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),i=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,b.a.FRAG_LOADING,b.a.FRAG_LOADED,b.a.FRAG_BUFFERED,b.a.ERROR));return e.lastLoadedFragLevel=0,e._nextAutoLevel=-1,e.hls=t,e.timer=null,e._bwEstimator=null,e.onCheck=e._abandonRulesCheck.bind(e),e}return a(i,n),i.prototype.destroy=function(){this.clearTimer(),s.a.prototype.destroy.call(this)},i.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,i=t.frag.level,r=n.levels[i].details.live,o=n.config,a=void 0,s=void 0;r?(a=o.abrEwmaFastLive,s=o.abrEwmaSlowLive):(a=o.abrEwmaFastVoD,s=o.abrEwmaSlowVoD),this._bwEstimator=new c.a(n,s,a,o.abrEwmaDefaultEstimate)}this.fragCurrent=e}},i.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,n=this.fragCurrent,i=n.loader,r=t.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return x.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var o=i.stats;if(e&&o&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&n.autoLevel&&n.level){var a=performance.now()-o.trequest,s=Math.abs(e.playbackRate);if(a>500*n.duration/s){var l=t.levels,c=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/a),u=l[n.level],d=u.realBitrate?Math.max(u.realBitrate,u.bitrate):u.bitrate,h=o.total?o.total:Math.max(o.loaded,Math.round(n.duration*d/8)),p=e.currentTime,f=(h-o.loaded)/c,g=(w.a.bufferInfo(e,p,t.config.maxBufferHole).end-p)/s;if(g<2*n.duration/s&&g<f){var m=void 0,v=void 0;for(v=n.level-1;r<v;v--){var y=l[v].realBitrate?Math.max(l[v].realBitrate,l[v].bitrate):l[v].bitrate;if((m=n.duration*y/(6.4*c))<g)break}m<f&&(x.b.warn("loading too slow, abort fragment loading and switch to level "+v+":fragLoadedDelay["+v+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+m.toFixed(1)+"<"+f.toFixed(1)+":"+g.toFixed(1)),t.nextLoadLevel=v,this._bwEstimator.sample(a,o.loaded),i.abort(),this.clearTimer(),t.trigger(b.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:o}))}}}},i.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&!isNaN(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[e.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,r=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r)}if(t.frag.bitrateTest){var o=t.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(t)}}},
i.prototype.onFragBuffered=function(t){var e=t.stats,n=t.frag;if(!(!0===e.aborted||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&e.tload!==e.tbuffered)){var i=e.tparsed-e.trequest;x.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(i,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},i.prototype.onError=function(t){switch(t.details){case l.a.FRAG_LOAD_ERROR:case l.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},i.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},i.prototype._findBestLevel=function(t,e,n,i,r,o,a,s,l){for(var c=r;i<=c;c--){var u=l[c].details,d=u?u.totalduration/u.fragments.length:e,h=!!u&&u.live,p=void 0;p=c<=t?a*n:s*n;var f=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,g=f*d/p;if(x.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(p)+"/"+f+"/"+d+"/"+o+"/"+g),f<p&&(!g||h&&!this.bitrateTestDelay||g<o))return c}return-1},u(i,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var n=this._nextABRAutoLevel;return-1!==t&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,n=t.levels,i=t.config,r=t.minAutoLevel,o=t.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=o?o.currentTime:0,c=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,u=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,d=(w.a.bufferInfo(o,l,i.maxBufferHole).end-l)/c,h=this._findBestLevel(a,s,u,r,e,d,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(0<=h)return h;x.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,f=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(0===d){var m=this.bitrateTestDelay;m&&(p=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-m,x.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),f=g=1)}return h=this._findBestLevel(a,s,u,r,e,d+p,f,g,n),Math.max(h,0)}}]),i}(s.a);e.a=i},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=n(53),i=function(){function r(t,e,n,i){o(this,r),this.hls=t,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new a.a(e),this.fast_=new a.a(n)}return r.prototype.sample=function(t,e){var n=8e3*e/(t=Math.max(t,this.minDelayMs_)),i=t/1e3;this.fast_.sample(i,n),this.slow_.sample(i,n)},r.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},r.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},r.prototype.destroy=function(){},r}();e.a=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t){n(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},e}();e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=n(1),s=n(3),d=n(0),c=n(2),i=n(12),u=Object(i.a)(),h=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,l.a.MEDIA_ATTACHING,l.a.MEDIA_DETACHING,l.a.MANIFEST_PARSED,l.a.BUFFER_RESET,l.a.BUFFER_APPENDING,l.a.BUFFER_CODECS,l.a.BUFFER_EOS,l.a.BUFFER_FLUSHING,l.a.LEVEL_PTS_UPDATED,l.a.LEVEL_UPDATED));return e._msDuration=null,e._levelDuration=null,e._live=null,e._objectUrl=null,e.onsbue=e.onSBUpdateEnd.bind(e),e.onsbe=e.onSBUpdateError.bind(e),e.pendingTracks={},e.tracks={},e}return a(i,n),i.prototype.destroy=function(){s.a.prototype.destroy.call(this)},i.prototype.onLevelPtsUpdated=function(t){var e=t.type,n=this.tracks.audio;if("audio"===e&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio;if(.1<Math.abs(i.timestampOffset-t.start)){var r=i.updating;try{i.abort()}catch(t){r=!0,d.b.warn("can not abort audio buffer: "+t)}r?this.audioTimestampOffset=t.start:(d.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+t.start),i.timestampOffset=t.start)}}},i.prototype.onManifestParsed=function(t){var e=t.audio,n=t.video||t.levels.length&&t.altAudio,i=0;t.altAudio&&(e||n)&&(i=(e?1:0)+(n?1:0),d.b.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i},i.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var n=this.mediaSource=new u;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(n),this._objectUrl=e.src}},i.prototype.onMediaDetaching=function(){d.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){d.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):d.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l.a.MEDIA_DETACHED)},i.prototype.onMediaSourceOpen=function(){d.b.log("media source opened"),this.hls.trigger(l.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},i.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},i.prototype.onMediaSourceClose=function(){d.b.log("media source closed")},i.prototype.onMediaSourceEnded=function(){d.b.log("media source ended")},i.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;d.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var n=this.parent,e=this.segments.reduce(function(t,e){return e.parent===n?t+1:t},0),i={},r=this.sourceBuffer;for(var o in r)i[o]=r[o].buffered;this.hls.trigger(l.a.BUFFER_APPENDED,{parent:n,pending:e,timeRanges:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},i.prototype.onSBUpdateError=function(t){d.b.error("sourceBuffer error:",t),this.hls.trigger(l.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.BUFFER_APPENDING_ERROR,fatal:!1})},i.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var n=t[e];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},i.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}},i.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;for(var i in t)if(!e[i]){var r=t[i],o=r.levelCodec||r.codec,a=r.container+";codecs="+o;d.b.log("creating sourceBuffer("+a+")");try{var s=e[i]=n.addSourceBuffer(a);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[i]={codec:o,container:r.container},r.buffer=s}catch(t){d.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(l.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:a})}}this.hls.trigger(l.a.BUFFER_CREATED,{tracks:t})},i.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},i.prototype.onBufferAppendFail=function(t){d.b.error("sourceBuffer error:",t.event),this.hls.trigger(l.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.BUFFER_APPENDING_ERROR,fatal:!1})},i.prototype.onBufferEos=function(t){var e=this.sourceBuffer,n=t.type;for(var i in e)n&&i!==n||e[i].ended||(e[i].ended=!0,d.b.log(i+" sourceBuffer now EOS"));this.checkEos()},i.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var n in t){var i=t[n];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}d.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){d.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},i.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},i.prototype.onLevelUpdated=function(t){var e=t.details;0<e.fragments.length&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._live=e.live,this.updateMediaElementDuration())},i.prototype.updateMediaElementDuration=function(){var t=this.hls.config,e=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(d.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(d.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},i.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,n=this.sourceBuffer;try{for(var i in n)e+=n[i].buffered.length}catch(t){d.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(l.a.BUFFER_FLUSHED)}},i.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,n=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void d.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var i=n.shift();try{var r=e[i.type];r?r.updating?n.unshift(i):(r.ended=!1,this.parent=i.parent,r.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){d.b.error("error while trying to append buffer:"+e.message),n.unshift(i);var o={type:c.b.MEDIA_ERROR,parent:i.parent};22!==e.code?(this.appendError?this.appendError++:this.appendError=1,o.details=c.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry?(d.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],o.fatal=!0):o.fatal=!1):(this.segments=[],o.details=c.a.BUFFER_FULL_ERROR,o.fatal=!1),t.trigger(l.a.ERROR,o)}}}},i.prototype.flushBuffer=function(t,e,n){var i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=this.sourceBuffer;if(Object.keys(c).length){if(d.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var u in c)if(!n||u===n){if((i=c[u]).ended=!1,i.updating)return d.b.warn("cannot flush, sb updating in progress"),!1;try{for(r=0;r<i.buffered.length;r++)if(o=i.buffered.start(r),a=i.buffered.end(r),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(s=t,l=e):(s=Math.max(o,t),l=Math.min(a,e)),.5<Math.min(l,a)-s)return this.flushBufferCounter++,d.b.log("flush "+u+" ["+s+","+l+"], of ["+o+","+a+"], pos:"+this.media.currentTime),i.remove(s,l),!1}catch(t){d.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else d.b.warn("abort flushing too many retries");d.b.log("buffer flushed")}return!0},i}(s.a);e.a=h},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),r=n(3),l=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),c=function(e){function r(t){return i(this,r),o(this,e.call(this,t,s.a.FPS_DROP_LEVEL_CAPPING,s.a.MEDIA_ATTACHING,s.a.MANIFEST_PARSED))}return a(r,e),r.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},r.prototype.onFpsDropLevelCapping=function(t){r.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},r.prototype.onMediaAttaching=function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null},r.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],e.config.capLevelToPlayerSize&&(t.video||t.levels.length&&t.altAudio)&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,e.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},r.prototype.getMaxLevel=function(n){var i=this;if(!this.levels)return-1;var t=this.levels.filter(function(t,e){return r.isLevelAllowed(e,i.restrictedLevels)&&e<=n});return r.getMaxLevelByMediaSize(t,this.mediaWidth,this.mediaHeight)},r.isLevelAllowed=function(t,e){return-1===(1<arguments.length&&void 0!==e?arguments[1]:[]).indexOf(t)},r.getMaxLevelByMediaSize=function(t,e,n){if(!t||t&&!t.length)return-1;for(var i=t.length-1,r=0;r<t.length;r+=1){var o=t[r];if((o.width>=e||o.height>=n)&&(a=o,!(s=t[r+1])||a.width!==s.width||a.height!==s.height)){i=r;break}}var a,s;return i},l(r,[{key:"mediaWidth",get:function(){var t=void 0,e=this.media;return e&&(t=e.width||e.clientWidth||e.offsetWidth,t*=r.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,e=this.media;return e&&(t=e.height||e.clientHeight||e.offsetHeight,t*=r.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),r}(r.a);e.a=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(1),a=n(3),d=n(0),s=function(e){function n(t){return i(this,n),r(this,e.call(this,t,u.a.MEDIA_ATTACHING))}return o(n,e),n.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.prototype.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},n.prototype.checkFPS=function(t,e,n){var i=performance.now();if(e){if(this.lastTime){var r=i-this.lastTime,o=n-this.lastDroppedFrames,a=e-this.lastDecodedFrames,s=1e3*o/r,l=this.hls;if(l.trigger(u.a.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:n}),0<s&&o>l.config.fpsDroppedMonitoringThreshold*a){var c=l.currentLevel;d.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),0<c&&(-1===l.autoLevelCapping||l.autoLevelCapping>=c)&&(c-=1,l.trigger(u.a.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:l.currentLevel}),l.autoLevelCapping=c,l.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},n.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},n}(a.a);e.a=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=n(0),r=function(){function e(t){i(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var t=void 0,e=this.context;t=this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(t,e.url)}catch(n){t.open("GET",e.url,!0),i(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(n){return void this.callbacks.onError({code:t.status,text:n.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},e.prototype.readystatechange=function(t){var e=t.currentTarget,n=e.readyState,i=this.stats,r=this.context,o=this.config;if(!i.aborted&&2<=n)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===n){var a=e.status;if(200<=a&&a<300){i.tload=Math.max(i.tfirst,performance.now());var s=void 0,l=void 0;"arraybuffer"===r.responseType?l=(s=e.response).byteLength:l=(s=e.responseText).length,i.loaded=i.total=l;var c={url:e.responseURL,data:s};this.callbacks.onSuccess(c,i,r,e)}else i.retry>=o.maxRetry||400<=a&&a<499?(u.b.error(a+" while loading "+r.url),this.callbacks.onError({code:a,text:e.statusText},r,e)):(u.b.warn(a+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},e.prototype.loadtimeout=function(){u.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(t){var e=t.currentTarget,n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,e)},e}();e.a=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),l=n(3),c=n(0),u=n(2),d=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),i=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,s.a.MANIFEST_LOADING,s.a.MANIFEST_PARSED,s.a.AUDIO_TRACK_LOADED,s.a.ERROR));return e.ticks=0,e.ontick=e.tick.bind(e),e}return a(i,n),i.prototype.destroy=function(){this.cleanTimer(),l.a.prototype.destroy.call(this)},i.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},i.prototype.tick=function(){1==++this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},i.prototype.doTick=function(){this.updateTrack(this.trackId)},i.prototype.onError=function(t){t.fatal&&t.type===u.b.NETWORK_ERROR&&this.cleanTimer()},i.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},i.prototype.onManifestParsed=function(t){var e=this,n=t.audioTracks||[],i=!1;this.tracks=n,this.hls.trigger(s.a.AUDIO_TRACKS_UPDATED,{audioTracks:n});var r=0;n.forEach(function(t){if(t["default"]&&!i)return e.audioTrack=r,void(i=!0);r++}),!1===i&&n.length&&(c.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},i.prototype.onAudioTrackLoaded=function(t){t.id<this.tracks.length&&(c.b.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*t.details.targetduration)),!t.details.live&&this.timer&&this.cleanTimer())},i.prototype.setAudioTrackInternal=function(t){if(0<=t&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,c.b.log("switching to audioTrack "+t);var e=this.tracks[t],n=this.hls,i=e.type,r=e.url,o={id:t,type:i,url:r};n.trigger(s.a.AUDIO_TRACK_SWITCHING,o);var a=e.details;!r||void 0!==a&&!0!==a.live||(c.b.log("(re)loading playlist for audioTrack "+t),n.trigger(s.a.AUDIO_TRACK_LOADING,{url:r,id:t}))}},i.prototype.updateTrack=function(t){if(0<=t&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,c.b.log("updating audioTrack "+t);var e=this.tracks[t],n=e.url,i=e.details;!n||void 0!==i&&!0!==i.live||(c.b.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(s.a.AUDIO_TRACK_LOADING,{url:n,id:t}))}},d(i,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.trackId===t&&void 0!==this.tracks[t].details||this.setAudioTrackInternal(t)}}]),i}(l.a);e.a=i},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var I=n(8),O=n(9),p=n(18),N=n(1),h=n(22),l=n(23),f=n(2),M=n(0),j=n(24),i=n(13),F=n(7),g=n(6),c=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),B={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},r=function(i){function r(t,e){o(this,r);var n=a(this,i.call(this,t,N.a.MEDIA_ATTACHED,N.a.MEDIA_DETACHING,N.a.AUDIO_TRACKS_UPDATED,N.a.AUDIO_TRACK_SWITCHING,N.a.AUDIO_TRACK_LOADED,N.a.KEY_LOADED,N.a.FRAG_LOADED,N.a.FRAG_PARSING_INIT_SEGMENT,N.a.FRAG_PARSING_DATA,N.a.FRAG_PARSED,N.a.ERROR,N.a.BUFFER_RESET,N.a.BUFFER_CREATED,N.a.BUFFER_APPENDED,N.a.BUFFER_FLUSHED,N.a.INIT_PTS_FOUND));return n.fragmentTracker=e,n.config=t.config,n.audioCodecSwap=!1,n._state=B.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return s(r,i),r.prototype.onHandlerDestroying=function(){this.stopLoad()},r.prototype.onHandlerDestroyed=function(){this.state=B.STOPPED,this.fragmentTracker=null},r.prototype.onInitPtsFound=function(t){var e=t.id,n=t.frag.cc,i=t.initPTS;"main"===e&&(this.initPTS[n]=i,this.videoTrackCC=n,M.b.log("InitPTS for cc: "+n+" found from video track: "+i),this.state===B.WAITING_INIT_PTS&&this.tick())},r.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),(this.fragLoadError=0)<e&&-1===t?(M.b.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=B.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=B.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=B.STOPPED},r.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=B.STOPPED},r.prototype.doTick=function(){var t=void 0,e=void 0,n=void 0,i=this.hls,r=i.config;switch(this.state){case B.ERROR:case B.PAUSED:case B.BUFFER_FLUSHING:break;case B.STARTING:this.state=B.WAITING_TRACK,this.loadedmetadata=!1;break;case B.IDLE:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var a=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,l=O.a.bufferInfo(a,t,r.maxBufferHole),c=O.a.bufferInfo(s,t,r.maxBufferHole),u=l.len,d=l.end,h=this.fragPrevious,p=Math.min(r.maxBufferLength,r.maxMaxBufferLength),f=Math.max(p,c.len),g=this.audioSwitch,m=this.trackId;if((u<f||g)&&m<o.length){if(void 0===(n=o[m].details)){this.state=B.WAITING_TRACK;break}if(!g&&!n.live&&h&&h.sn===n.endSN&&!l.nextStart&&(!this.media.seeking||this.media.duration-d<h.duration/2)){this.hls.trigger(N.a.BUFFER_EOS,{type:"audio"}),this.state=B.ENDED;break}var v=n.fragments,y=v.length,b=v[0].start,w=v[y-1].start+v[y-1].duration,x=void 0;if(g)if(n.live&&!n.PTSKnown)M.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),d=0;else if(d=t,n.PTSKnown&&t<b){if(!(l.end>b||l.nextStart))return;M.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=b+.05}if(n.initSegment&&!n.initSegment.data)x=n.initSegment;else if(d<=b){if(x=v[0],null!==this.videoTrackCC&&x.cc!==this.videoTrackCC&&(x=Object(j.b)(v,this.videoTrackCC)),n.live&&x.loadIdx&&x.loadIdx===this.fragLoadIdx){var T=l.nextStart?l.nextStart:b;return M.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(T+.05)),void(this.media.currentTime=T+.05)}}else{var S=void 0,E=r.maxFragLookUpTolerance,A=h?v[h.sn-v[0].sn+1]:void 0,C=function(t){var e=Math.min(E,t.duration);return t.start+t.duration-e<=d?1:t.start-e>d&&t.start?-1:0};d<w?(w-E<d&&(E=0),S=A&&!C(A)?A:I.a.search(v,C)):S=v[y-1],S&&(b=(x=S).start,h&&x.level===h.level&&x.sn===h.sn&&(x.sn<n.endSN?(x=v[x.sn+1-n.startSN],M.b.log("SN just loaded, load next one: "+x.sn)):x=null))}x&&(x.decryptdata&&null!=x.decryptdata.uri&&null==x.decryptdata.key?(M.b.log("Loading key for "+x.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+m),this.state=B.KEY_LOADING,i.trigger(N.a.KEY_LOADING,{frag:x})):(M.b.log("Loading "+x.sn+", cc: "+x.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+m+", currentTime:"+t+",bufferEnd:"+d.toFixed(3)),(g||this.fragmentTracker.getState(x)===F.a.NOT_LOADED)&&(this.fragCurrent=x,this.startFragRequested=!0,isNaN(x.sn)||(this.nextLoadPosition=x.start+x.duration),i.trigger(N.a.FRAG_LOADING,{frag:x}),this.state=B.FRAG_LOADING)))}break;case B.WAITING_TRACK:(e=this.tracks[this.trackId])&&e.details&&(this.state=B.IDLE);break;case B.FRAG_LOADING_WAITING_RETRY:var k=performance.now(),_=this.retryDate,R=(a=this.media)&&a.seeking;(!_||_<=k||R)&&(M.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=B.IDLE);break;case B.WAITING_INIT_PTS:var D=this.videoTrackCC;if(void 0===this.initPTS[D])break;var L=this.waitingFragment;if(L){var P=L.frag.cc;D!==P?(e=this.tracks[this.trackId]).details&&e.details.live&&(M.b.warn("Waiting fragment CC ("+P+") does not match video track CC ("+D+")"),this.waitingFragment=null,this.state=B.IDLE):(this.state=B.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=B.IDLE;break;case B.STOPPED:case B.FRAG_LOADING:case B.PARSING:case B.PARSED:case B.ENDED:}},r.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},r.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(M.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeking=function(){this.state===B.ENDED&&(this.state=B.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),this.tick()},r.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.prototype.onAudioTracksUpdated=function(t){M.b.log("audio tracks updated"),this.tracks=t.audioTracks},r.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=B.PAUSED,this.waitingFragment=null,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=B.IDLE),this.tick()},r.prototype.onAudioTrackLoaded=function(t){
var e=t.details,n=t.id,i=this.tracks[n],r=e.totalduration,o=0;if(M.b.log("track "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+r),e.live){var a=i.details;a&&0<e.fragments.length?(h.a(a,e),o=e.fragments[0].start,e.PTSKnown?M.b.log("live audio playlist sliding:"+o.toFixed(3)):M.b.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,M.b.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(i.details=e,!this.startFragRequested){if(-1===this.startPosition){var s=e.startTimeOffset;isNaN(s)?this.startPosition=0:(M.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===B.WAITING_TRACK&&(this.state=B.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===B.KEY_LOADING&&(this.state=B.IDLE,this.tick())},r.prototype.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===B.FRAG_LOADING&&e&&"audio"===n.type&&n.level===e.level&&n.sn===e.sn){var i=this.tracks[this.trackId],r=i.details,o=r.totalduration,a=e.level,s=e.sn,l=e.cc,c=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",u=this.stats=t.stats;if("initSegment"===s)this.state=B.IDLE,u.tparsed=u.tbuffered=performance.now(),r.initSegment.data=t.payload,this.hls.trigger(N.a.FRAG_BUFFERED,{stats:u,frag:e,id:"audio"}),this.tick();else{this.state=B.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new p.a(this.hls,"audio"));var d=this.initPTS[l],h=r.initSegment?r.initSegment.data:[];r.initSegment||void 0!==d?(this.pendingBuffering=!0,M.b.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+a),this.demuxer.push(t.payload,h,c,null,e,o,!1,d)):(M.b.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+a),this.waitingFragment=t,this.state=B.WAITING_INIT_PTS)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===B.PARSING){var i=t.tracks,r=void 0;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=t.id,this.hls.trigger(N.a.BUFFER_CODECS,i),M.b.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var o=r.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(N.a.BUFFER_APPENDING,a))}this.tick()}}},r.prototype.onFragParsingData=function(e){var n=this,t=this.fragCurrent,i=e.frag;if(t&&"audio"===e.id&&"audio"===e.type&&i.sn===t.sn&&i.level===t.level&&this.state===B.PARSING){var r=this.trackId,o=this.tracks[r],a=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+t.duration,e.endDTS=e.startDTS+t.duration),t.addElementaryStream(g.a.ElementaryStreamTypes.AUDIO),M.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),h.b(o.details,t,e.startPTS,e.endPTS);var s=this.audioSwitch,l=this.media,c=!1;if(s&&l)if(l.readyState){var u=l.currentTime;M.b.log("switching audio track : currentTime:"+u),u>=e.startPTS&&(M.b.log("switching audio track : flushing all audio"),this.state=B.BUFFER_FLUSHING,a.trigger(N.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),c=!0,this.audioSwitch=!1,a.trigger(N.a.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,a.trigger(N.a.AUDIO_TRACK_SWITCHED,{id:r});var d=this.pendingData;if(!d)return console.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void a.trigger(N.a.ERROR,{type:f.b.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&d.push({type:e.type,data:t,parent:"audio",content:"data"})}),!c&&d.length&&(d.forEach(function(t){n.state===B.PARSING&&(n.pendingBuffering=!0,n.hls.trigger(N.a.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},r.prototype.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===B.PARSING&&(this.stats.tparsed=performance.now(),this.state=B.PARSED,this._checkAppendedParsed())},r.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},r.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==B.PARSING&&e!==B.PARSED||(this.pendingBuffering=0<t.pending,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==B.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,n=this.hls;if(t){this.fragPrevious=t,e.tbuffered=performance.now(),n.trigger(N.a.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;M.b.log("audio buffered : "+l.a.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(N.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=B.IDLE}this.tick()}},r.prototype.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case f.a.FRAG_LOAD_ERROR:case f.a.FRAG_LOAD_TIMEOUT:if(!t.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n;var r=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);M.b.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state=B.FRAG_LOADING_WAITING_RETRY}else M.b.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=B.ERROR}break;case f.a.AUDIO_TRACK_LOAD_ERROR:case f.a.AUDIO_TRACK_LOAD_TIMEOUT:case f.a.KEY_LOAD_ERROR:case f.a.KEY_LOAD_TIMEOUT:this.state!==B.ERROR&&(this.state=t.fatal?B.ERROR:B.IDLE,M.b.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."));break;case f.a.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===B.PARSING||this.state===B.PARSED)){var o=this.mediaBuffer,a=this.media.currentTime;if(o&&O.a.isBuffered(o,a)&&O.a.isBuffered(o,a+.5)){var s=this.config;s.maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,M.b.warn("audio:reduce max buffer length to "+s.maxMaxBufferLength+"s")),this.state=B.IDLE}else M.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=B.BUFFER_FLUSHING,this.hls.trigger(N.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},r.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(M.b.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(N.a.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=B.PARSED):(this.state=B.IDLE,this.fragPrevious=null,this.tick())},c(r,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,M.b.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),r}(i.a);e.a=r},function(t,e,n){"use strict";function i(t,e,n,i){for(var r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=window.VTTCue||window.TextTrackCue,u=0;u<i.rows.length;u++)if(a=!0,s=0,l="",!(r=i.rows[u]).isEmpty()){for(var d=0;d<r.chars.length;d++)r.chars[d].uchar.match(/\s/)&&a?s++:(l+=r.chars[d].uchar,a=!1);(r.cueStartTime=e)===n&&(n+=1e-4),o=new c(e,n,Object(h.b)(l.trim())),16<=s?s--:s++,navigator.userAgent.match(/Firefox\//)?o.line=u+1:o.line=7<u?u-2:u+1,o.align="left",o.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.newCue=i;var h=n(26)},function(t,e){"use strict";e.a=function(){function w(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}function x(t){return"string"==typeof t&&!!n[t.toLowerCase()]&&t.toLowerCase()}function T(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(t,e,n){var i=this,r=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),o={};r?i=document.createElement("custom"):o.enumerable=!0,i.hasBeenReset=!1;var a="",s=!1,l=t,c=e,u=n,d=null,h="",p=!0,f="auto",g="start",m=50,v="middle",y=50,b="middle";if(Object.defineProperty(i,"id",T({},o,{get:function(){return a},set:function(t){a=""+t}})),Object.defineProperty(i,"pauseOnExit",T({},o,{get:function(){return s},set:function(t){s=!!t}})),Object.defineProperty(i,"startTime",T({},o,{get:function(){return l},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");l=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",T({},o,{get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");c=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",T({},o,{get:function(){return u},set:function(t){u=""+t,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",T({},o,{get:function(){return d},set:function(t){d=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",T({},o,{get:function(){return h},set:function(t){var e=w(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",T({},o,{get:function(){return p},set:function(t){p=!!t,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",T({},o,{get:function(){return f},set:function(t){if("number"!=typeof t&&t!==S)throw new SyntaxError("An invalid number or illegal string was specified.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",T({},o,{get:function(){return g},set:function(t){var e=x(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",T({},o,{get:function(){return m},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",T({},o,{get:function(){return v},set:function(t){var e=x(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",T({},o,{get:function(){return y},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",T({},o,{get:function(){return b},set:function(t){var e=x(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),i.displayState=void 0,r)return i}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var S="auto",e={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};return t.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},t}()},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function c(t,e,n,i){return Math.min(e,i)-Math.max(t,n)}var u=n(1),d=n(3),h=n(63),p=n(64),f=n(65),g=n(0),m=n(25),r=function(r){function o(t){a(this,o);var e=s(this,r.call(this,t,u.a.MEDIA_ATTACHING,u.a.MEDIA_DETACHING,u.a.FRAG_PARSING_USERDATA,u.a.FRAG_DECRYPTED,u.a.MANIFEST_LOADING,u.a.MANIFEST_LOADED,u.a.FRAG_LOADED,u.a.LEVEL_SWITCHING,u.a.INIT_PTS_FOUND));if(e.hls=t,e.config=t.config,e.enabled=!0,e.Cues=t.config.cueHandler,e.textTracks=[],e.tracks=[],e.unparsedVttFrags=[],e.initPTS=void 0,e.cueRanges=[],e.captionsTracks={},e.captionsProperties={textTrack1:{label:e.config.captionsTextTrack1Label,languageCode:e.config.captionsTextTrack1LanguageCode},textTrack2:{label:e.config.captionsTextTrack2Label,languageCode:e.config.captionsTextTrack2LanguageCode}},e.config.enableCEA708Captions){var n=new p.a(e,"textTrack1"),i=new p.a(e,"textTrack2");e.cea608Parser=new h.a(0,n,i)}return e}return i(o,r),o.prototype.addCues=function(t,e,n,i){for(var r=this.cueRanges,o=!1,a=r.length;a--;){var s=r[a],l=c(s[0],s[1],e,n);if(0<=l&&(s[0]=Math.min(s[0],e),s[1]=Math.max(s[1],n),o=!0,.5<l/(n-e)))return}o||r.push([e,n]),this.Cues.newCue(this.captionsTracks[t],e,n,i)},o.prototype.onInitPtsFound=function(t){var e=this;void 0===this.initPTS&&(this.initPTS=t.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(t){e.onFragLoaded(t)}),this.unparsedVttFrags=[])},o.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var i=e.textTracks[n];if(i[t])return i}return null},o.prototype.createCaptionsTrack=function(t){var e=this.captionsProperties[t],n=e.label,i=e.languageCode,r=this.captionsTracks;if(!r[t]){var o=this.getExistingTrack(t);if(o)r[t]=o,Object(m.a)(r[t]),Object(m.b)(r[t],this.media);else{var a=this.createTextTrack("captions",n,i);a&&(a[t]=!0,r[t]=a)}}},o.prototype.createTextTrack=function(t,e,n){var i=this.media;if(i)return i.addTextTrack(t,e,n)},o.prototype.destroy=function(){d.a.prototype.destroy.call(this)},o.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},o.prototype.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){Object(m.a)(e[t]),delete e[t]})},o.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},o.prototype._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)Object(m.a)(e[n])}},o.prototype.onManifestLoaded=function(t){var r=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var o=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,e){var n=void 0;if(e<o.length){var i=o[e];l(i,t)&&(n=i)}n||(n=r.createTextTrack("subtitles",t.name,t.lang)),t["default"]?n.mode=r.hls.subtitleDisplay?"showing":"hidden":n.mode="disabled",r.textTracks.push(n)})}},o.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},o.prototype.onFragLoaded=function(t){var e=t.frag,n=t.payload;if("main"===e.type){var i=e.sn;if(i!==this.lastSn+1){var r=this.cea608Parser;r&&r.reset()}this.lastSn=i}else if("subtitle"===e.type)if(n.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);var o=e.decryptdata;null!=o&&null!=o.key&&"AES-128"===o.method||this._parseVTTs(e,n)}else this.hls.trigger(u.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},o.prototype._parseVTTs=function(e,t){var n=this.vttCCs;n[e.cc]||(n[e.cc]={start:e.start,prevCC:this.prevCC,"new":!0},this.prevCC=e.cc);var i=this.textTracks,r=this.hls;f.a.parse(t,this.initPTS,n,e.cc,function(t){var n=i[e.trackId];"disabled"!==n.mode?(t.forEach(function(t){if(!n.cues.getCueById(t.id))try{n.addCue(t)}catch(i){var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,n.addCue(e)}}),r.trigger(u.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):r.trigger(u.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},function(t){g.b.log("Failed to parse VTT cue: "+t),r.trigger(u.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},o.prototype.onFragDecrypted=function(t){var e=t.payload,n=t.frag;if("subtitle"===n.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);this._parseVTTs(n,e)}},o.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var n=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,n)}},o.prototype.extractCea608Data=function(t){for(var e=31&t[0],n=2,i=void 0,r=void 0,o=void 0,a=[],s=0;s<e;s++)i=t[n++],r=127&t[n++],o=127&t[n++],0===r&&0===o||0!=(4&i)&&0===(3&i)&&(a.push(r),a.push(o));return a},o}(d.a);e.a=r},function(t,e){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},l=function(t){var e=t;return n.hasOwnProperty(t)&&(e=n[t]),String.fromCharCode(e)},d=15,r=100,o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},a={17:2,18:4,21:6,22:8,23:10,19:13,20:15},c={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var n=this.verboseFilter[t];this.verboseLevel>=n&&console.log(this.time+" ["+t+"] "+e)}},f=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},g=function(){function o(t,e,n,i,r){s(this,o),this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}return o.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},o.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var i=e[n];t.hasOwnProperty(i)&&(this[i]=t[i])}},o.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},o.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},o.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},o.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},o}(),i=function(){function a(t,e,n,i,r,o){s(this,a),this.uchar=t||" ",this.penState=new g(e,n,i,r,o)}return a.prototype.reset=function(){this.uchar=" ",this.penState.reset()},a.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},a.prototype.setPenState=function(t){this.penState.copy(t)},a.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},a.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},a.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},a}(),m=function(){function e(){s(this,e),this.chars=[];for(var t=0;t<r;t++)this.chars.push(new i);this.pos=0,this.currPenState=new g}return e.prototype.equals=function(t){for(var e=!0,n=0;n<r;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},e.prototype.copy=function(t){for(var e=0;e<r;e++)this.chars[e].copy(t.chars[e])},e.prototype.isEmpty=function(){for(var t=!0,e=0;e<r;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>r&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=r)},e.prototype.moveCursor=function(t){var e=this.pos+t;if(1<t)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(t){144<=t&&this.backSpace();var e=l(t);this.pos>=r?p.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(t){var e=void 0;for(e=t;e<r;e++)this.chars[e].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var t=[],e=!0,n=0;n<r;n++){var i=this.chars[n].uchar;" "!==i&&(e=!1),t.push(i)}return e?"":t.join("")},e.prototype.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},e}(),v=function(){function e(){s(this,e),this.rows=[];for(var t=0;t<d;t++)this.rows.push(new m);this.currRow=d-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var t=0;t<d;t++)this.rows[t].clear();this.currRow=d-1},e.prototype.equals=function(t){for(var e=!0,n=0;n<d;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},e.prototype.copy=function(t){for(var e=0;e<d;e++)this.rows[e].copy(t.rows[e])},e.prototype.isEmpty=function(){for(var t=!0,e=0;e<d;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.prototype.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.prototype.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.prototype.setCursor=function(t){p.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.prototype.setPAC=function(t){p.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<d;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var o=r.rows[i].cueStartTime;if(o&&o<p.time)for(var a=0;a<this.nrRollUpRows;a++)this.rows[e-this.nrRollUpRows+a+1].copy(r.rows[i+a])}}this.currRow=e;var s=this.rows[this.currRow];if(null!==t.indent){var l=t.indent,c=Math.max(l-1,0);s.setCursor(t.indent),t.color=s.chars[c].penState.foreground}var u={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(u)},e.prototype.setBkgData=function(t){p.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){p.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),p.log("INFO","Rolling up")}else p.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],n="",i=-1,r=0;r<d;r++){var o=this.rows[r].getTextString();o&&(i=r+1,t?e.push("Row "+i+": '"+o+"'"):e.push(o.trim()))}return 0<e.length&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},e.prototype.getTextAndFormat=function(){return this.rows},e}(),y=function(){function n(t,e){s(this,n),this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new v,this.nonDisplayedMemory=new v,this.lastOutputScreen=new v,this.currRollUpRow=this.displayedMemory.rows[d-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return n.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[d-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},n.prototype.getHandler=function(){return this.outputFilter},n.prototype.setHandler=function(t){this.outputFilter=t},n.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},n.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},n.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,p.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},n.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},n.prototype.ccRCL=function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},n.prototype.ccBS=function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},n.prototype.ccAOF=function(){},n.prototype.ccAON=function(){},n.prototype.ccDER=function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},n.prototype.ccRU=function(t){p.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},n.prototype.ccFON=function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},n.prototype.ccRDC=function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},n.prototype.ccTR=function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")},n.prototype.ccRTD=function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")},n.prototype.ccEDM=function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},n.prototype.ccCR=function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},n.prototype.ccENM=function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},n.prototype.ccEOC=function(){if(p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},n.prototype.ccTO=function(t){p.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},n.prototype.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=46<=t,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=i[n]}p.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},n.prototype.outputDataUpdate=function(t){var e=0<arguments.length&&void 0!==t&&arguments[0],n=p.time;null!==n&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:n):this.cueStartTime=n,this.lastOutputScreen.copy(this.displayedMemory))},n.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},n}(),b=function(){function i(t,e,n){s(this,i),this.field=t||1,this.outputs=[e,n],this.channels=[new y(1,e),new y(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}}return i.prototype.getHandler=function(t){return this.channels[t].getHandler()},i.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},i.prototype.addData=function(t,e){var n=void 0,i=void 0,r=void 0,o=!1;this.lastTime=t,p.setTime(t);for(var a=0;a<e.length;a+=2)if(i=127&e[a],r=127&e[a+1],0!==i||0!==r){if(p.log("DATA","["+f([e[a],e[a+1]])+"] -> ("+f([i,r])+")"),(n=this.parseCmd(i,r))||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(o=this.parseChars(i,r)))if(this.currChNr&&0<=this.currChNr){this.channels[this.currChNr-1].insertChars(o)}else p.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters["char"]+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+f([i,r])+" orig: "+f([e[a],e[a+1]])))}else this.dataCounters.padding+=2},i.prototype.parseCmd=function(t,e){var n=null;if(!((20===t||28===t)&&32<=e&&e<=47)&&!((23===t||31===t)&&33<=e&&e<=35))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+f([t,e])+") is dropped"),!0;n=20===t||23===t?1:2;var i=this.channels[n-1];return 20===t||28===t?32===e?i.ccRCL():33===e?i.ccBS():34===e?i.ccAOF():35===e?i.ccAON():36===e?i.ccDER():37===e?i.ccRU(2):38===e?i.ccRU(3):39===e?i.ccRU(4):40===e?i.ccFON():41===e?i.ccRDC():42===e?i.ccTR():43===e?i.ccRTD():44===e?i.ccEDM():45===e?i.ccCR():46===e?i.ccENM():47===e&&i.ccEOC():i.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},i.prototype.parseMidrow=function(t,e){var n=null;return(17===t||25===t)&&32<=e&&e<=47&&((n=17===t?1:2)!==this.currChNr?(p.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(e),p.log("DEBUG","MIDROW ("+f([t,e])+")"),!0))},i.prototype.parsePAC=function(t,e){var n=null,i=null;if(!((17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127)&&!((16===t||24===t)&&64<=e&&e<=95))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,!(this.lastCmdB=null);n=t<=23?1:2,i=64<=e&&e<=95?1===n?o[t]:c[t]:1===n?a[t]:u[t];var r=this.interpretPAC(i,e);return this.channels[n-1].setPAC(r),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},i.prototype.interpretPAC=function(t,e){var n=e,i={color:null,italics:!1,indent:null,underline:!1,row:t};return n=95<e?e-96:e-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},i.prototype.parseChars=function(t,e){var n=null,i=null,r=null;if(25<=t?(n=2,r=t-8):(n=1,r=t),17<=r&&r<=19){var o=e;o=17===r?e+80:18===r?e+112:e+144,p.log("INFO","Special char '"+l(o)+"' in channel "+n),i=[o]}else 32<=t&&t<=127&&(i=0===e?[t]:[t,e]);if(i){var a=f(i);p.log("DEBUG","Char codes =  "+a.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},i.prototype.parseBackgroundAttributes=function(t,e){var n=void 0,i=void 0,r=void 0;return!(!((16===t||24===t)&&32<=e&&e<=47)&&!((23===t||31===t)&&45<=e&&e<=47)||(n={},16===t||24===t?(i=Math.floor((e-32)/2),n.background=h[i],e%2==1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0)),r=t<24?1:2,this.channels[r-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null))},i.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},i.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},i}();e.a=b},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(t,e){i(this,n),this.timelineController=t,this.trackName=e,this.startTime=null,this.endTime=null,this.screen=null}return n.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},n.prototype.newCue=function(t,e,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t
),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},n}();e.a=n},function(t,e,n){"use strict";var m=n(26),v=n(5),y=function(t,e,n){return t.substr(n||0,e.length)===e},b=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),r=9<t.length?parseInt(t.substr(0,t.indexOf(":"))):0;return isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)?-1:(e+=1e3*n,e+=6e4*i,e+=36e5*r)},w=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()},x=function(t,e,n){var i=t[e],r=t[i.prevCC];if(!r||!r["new"]&&i["new"])return t.ccOffset=t.presentationOffset=i.start,void(i["new"]=!1);for(;r&&r["new"];)t.ccOffset+=i.start-r.start,i["new"]=!1,r=t[(i=r).prevCC];t.presentationOffset=n},i={parse:function(t,e,i,r,n,o){var a=/\r\n|\n\r|\n|\r/g,s=Object(v.b)(new Uint8Array(t)).trim().replace(a,"\n").split("\n"),l="00:00.000",c=0,u=0,d=0,h=[],p=void 0,f=!0,g=new m.a;g.oncue=function(t){var e=i[r],n=i.ccOffset;e&&e["new"]&&(void 0!==u?n=i.ccOffset=e.start:x(i,r,d)),d&&(n=d+i.ccOffset-i.presentationOffset),t.startTime+=n-u,t.endTime+=n-u,t.id=w(t.startTime.toString())+w(t.endTime.toString())+w(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),0<t.endTime&&h.push(t)},g.onparsingerror=function(t){p=t},g.onflush=function(){p&&o?o(p):n(h)},s.forEach(function(t){if(f){if(y(t,"X-TIMESTAMP-MAP=")){f=!1,t.substr(16).split(",").forEach(function(t){y(t,"LOCAL:")?l=t.substr(6):y(t,"MPEGTS:")&&(c=parseInt(t.substr(7)))});try{c-=e=e<0?e+8589934592:e,u=b(l)/1e3,d=c/9e4,-1===u&&(p=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){p=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(f=!1)}g.parse(t+"\n")}),g.flush()}};e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){for(var e=[],n=0;n<t.length;n++)"subtitles"===t[n].kind&&e.push(t[n]);return e}var l=n(1),c=n(3),u=n(0),d=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),i=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,l.a.MEDIA_ATTACHED,l.a.MEDIA_DETACHING,l.a.MANIFEST_LOADING,l.a.MANIFEST_LOADED,l.a.SUBTITLE_TRACK_LOADED));return e.tracks=[],e.trackId=-1,e.media=void 0,e.subtitleDisplay=!1,e}return a(i,n),i.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=s(this.media.textTracks),n=0;n<e.length;n++)if("hidden"===e[n].mode)t=n;else if("showing"===e[n].mode){t=n;break}this.subtitleTrack=t}},i.prototype.destroy=function(){c.a.prototype.destroy.call(this)},i.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},i.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},i.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},i.prototype.onManifestLoaded=function(t){var e=this,n=t.subtitles||[];this.tracks=n,this.trackId=-1,this.hls.trigger(l.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(t){t["default"]&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},i.prototype.onTick=function(){var t=this.trackId,e=this.tracks[t];if(e){var n=e.details;void 0!==n&&!0!==n.live||(u.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(l.a.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))}},i.prototype.onSubtitleTrackLoaded=function(t){var e=this;t.id<this.tracks.length&&(u.b.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){e.onTick()},1e3*t.details.targetduration,this)),!t.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},i.prototype.setSubtitleTrackInternal=function(t){if(!(t<-1||t>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var e=s(this.media.textTracks);if(-1!==this.trackId&&(e[this.trackId].mode="disabled"),this.trackId=t,u.b.log("switching to subtitle track "+t),this.hls.trigger(l.a.SUBTITLE_TRACK_SWITCH,{id:t}),-1!==t){var n=this.tracks[t];t<e.length&&(e[t].mode=this.subtitleDisplay?"showing":"hidden");var i=n.details;void 0!==i&&!0!==i.live||(u.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(l.a.SUBTITLE_TRACK_LOADING,{url:n.url,id:t}))}}},d(i,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&this.setSubtitleTrackInternal(t)}}]),i}(c.a);e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=n(1),u=n(0),s=n(11),i=n(13),d={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},l=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,c.a.MEDIA_ATTACHED,c.a.ERROR,c.a.KEY_LOADED,c.a.FRAG_LOADED,c.a.SUBTITLE_TRACKS_UPDATED,c.a.SUBTITLE_TRACK_SWITCH,c.a.SUBTITLE_TRACK_LOADED,c.a.SUBTITLE_FRAG_PROCESSED));return e.config=t.config,e.vttFragSNsProcessed={},e.vttFragQueues=void 0,e.currentlyProcessing=null,e.state=d.STOPPED,e.currentTrackId=-1,e.decrypter=new s.a(t.observer,t.config),e}return a(i,n),i.prototype.onHandlerDestroyed=function(){this.state=d.STOPPED},i.prototype.clearVttFragQueues=function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})},i.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&-1<this.currentTrackId&&this.vttFragQueues[this.currentTrackId].length){var t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=t,this.hls.trigger(c.a.FRAG_LOADING,{frag:t}),this.state=d.FRAG_LOADING}},i.prototype.onSubtitleFragProcessed=function(t){t.success&&this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn),this.currentlyProcessing=null,this.state=d.IDLE,this.nextFrag()},i.prototype.onMediaAttached=function(){this.state=d.IDLE},i.prototype.onError=function(t){var e=t.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},i.prototype.doTick=function(){var e=this;switch(this.state){case d.IDLE:var t,n=this.tracks,i=this.currentTrackId,r=this.vttFragSNsProcessed[i],o=this.vttFragQueues[i],a=this.currentlyProcessing?this.currentlyProcessing.sn:-1,s=function(t){return-1<r.indexOf(t.sn)},l=function(e){return o.some(function(t){return t.sn===e.sn})};if(!n)break;if(i<n.length&&(t=n[i].details),void 0===t)break;t.fragments.forEach(function(t){s(t)||t.sn===a||l(t)||(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key?(u.b.log("Loading key for "+t.sn),e.state=d.KEY_LOADING,e.hls.trigger(c.a.KEY_LOADING,{frag:t})):(t.trackId=i,o.push(t),e.nextFrag()))})}},i.prototype.onSubtitleTracksUpdated=function(t){var e=this;u.b.log("subtitle tracks updated"),this.tracks=t.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(t){e.vttFragSNsProcessed[t.id]=[]})},i.prototype.onSubtitleTrackSwitch=function(t){this.currentTrackId=t.id,-1!==this.currentTrackId&&void 0!==this.tracks[this.currentTrackId].details&&this.tick()},i.prototype.onSubtitleTrackLoaded=function(){this.tick()},i.prototype.onKeyLoaded=function(){this.state===d.KEY_LOADING&&(this.state=d.IDLE,this.tick())},i.prototype.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag.decryptdata,i=t.frag,r=this.hls;if(this.state===d.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&0<t.payload.byteLength&&null!=n&&null!=n.key&&"AES-128"===n.method){var o=void 0;try{o=performance.now()}catch(t){o=Date.now()}this.decrypter.decrypt(t.payload,n.key.buffer,n.iv.buffer,function(t){var e=void 0;try{e=performance.now()}catch(t){e=Date.now()}r.trigger(c.a.FRAG_DECRYPTED,{frag:i,payload:t,stats:{tstart:o,tdecrypt:e}})})}},i}(i.a);e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=n(3),s=n(1),l=n(2),c=n(0),u=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),d={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready"},h=function(t,e){var n={videoCapabilities:[]};return e.forEach(function(t){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"'})}),[n]},p=function(t,e,n){switch(t){case d.WIDEVINE:return h(0,n);default:throw Error("Unknown key-system: "+t)}},f=function(n){function i(t){r(this,i);var e=o(this,n.call(this,t,s.a.MEDIA_ATTACHED,s.a.MANIFEST_PARSED));return e._widevineLicenseUrl=t.config.widevineLicenseUrl,e._licenseXhrSetup=t.config.licenseXhrSetup,e._emeEnabled=t.config.emeEnabled,e._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,e._mediaKeysList=[],e._media=null,e._hasSetMediaKeys=!1,e._isMediaEncrypted=!1,e._requestLicenseFailureCount=0,e}return a(i,n),i.prototype.getLicenseServerUrl=function(t){var e=void 0;switch(t){case d.WIDEVINE:e=this._widevineLicenseUrl;break;default:e=null}return e||(c.b.error('No license server URL configured for key-system "'+t+'"'),this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),e},i.prototype._attemptKeySystemAccess=function(e,t,n){var i=this,r=p(e,0,n);r?(c.b.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,r).then(function(t){i._onMediaKeySystemAccessObtained(e,t)})["catch"](function(t){c.b.error('Failed to obtain key-system "'+e+'" access:',t)})):c.b.warn("Can not create config for key-system (maybe because platform is not supported):",e)},i.prototype._onMediaKeySystemAccessObtained=function(e,t){var n=this;c.b.log('Access for key-system "'+e+'" obtained');var i={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(i),t.createMediaKeys().then(function(t){i.mediaKeys=t,c.b.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated()})["catch"](function(t){c.b.error("Failed to create media-keys:",t)})},i.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},i.prototype._onNewMediaKeySession=function(e){var n=this;c.b.log("New key-system session "+e.sessionId),e.addEventListener("message",function(t){n._onKeySessionMessage(e,t.message)},!1)},i.prototype._onKeySessionMessage=function(e,t){c.b.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){c.b.log("Received license data, updating key-session"),e.update(t)})},i.prototype._onMediaEncrypted=function(t,e){c.b.log('Media is encrypted using "'+t+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=t,this._mediaEncryptionInitData=e,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},i.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return c.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_KEYS,fatal:!0});c.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},i.prototype._generateRequestWithPreferredKeySession=function(){var e=this,t=this._mediaKeysList[0];if(!t)return c.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(t.mediaKeysSessionInitialized)c.b.warn("Key-Session already initialized but requested again");else{var n=t.mediaKeysSession;n||(c.b.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_SESSION,fatal:!0}));var i=this._mediaEncryptionInitDataType,r=this._mediaEncryptionInitData;c.b.log('Generating key-session request for "'+i+'" init data type'),t.mediaKeysSessionInitialized=!0,n.generateRequest(i,r).then(function(){c.b.debug("Key-session generation succeeded")})["catch"](function(t){c.b.error("Error generating key-session request:",t),e.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},i.prototype._createLicenseXhr=function(t,e,n){var i=new XMLHttpRequest,r=this._licenseXhrSetup;try{if(r)try{r(i,t)}catch(e){i.open("POST",t,!0),r(i,t)}i.readyState||i.open("POST",t,!0)}catch(t){return c.b.error("Error setting up key-system license XHR",t),void this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,t,e,n),i},i.prototype._onLicenseRequestReadyStageChange=function(t,e,n,i){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,c.b.log("License request succeeded"),i(t.response);else{if(c.b.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),++this._requestLicenseFailureCount<=3){var r=3-this._requestLicenseFailureCount+1;return c.b.warn("Retrying license request, "+r+" attempts left"),void this._requestLicense(n,i)}this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},i.prototype._generateLicenseRequestChallenge=function(t,e){var n=void 0;return t.mediaKeySystemDomain===d.PLAYREADY?c.b.error("PlayReady is not supported (yet)"):t.mediaKeySystemDomain===d.WIDEVINE?n=e:c.b.error("Unsupported key-system:",t.mediaKeySystemDomain),n},i.prototype._requestLicense=function(t,e){c.b.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return c.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});var i=this.getLicenseServerUrl(n.mediaKeySystemDomain),r=this._createLicenseXhr(i,t,e);c.b.log("Sending license request to URL: "+i),r.send(this._generateLicenseRequestChallenge(n,t))},i.prototype.onMediaAttached=function(t){var e=this;if(this._emeEnabled){var n=t.media;(this._media=n).addEventListener("encrypted",function(t){e._onMediaEncrypted(t.initDataType,t.initData)})}},i.prototype.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map(function(t){return t.audioCodec}),n=t.levels.map(function(t){return t.videoCodec});this._attemptKeySystemAccess(d.WIDEVINE,e,n)}},u(i,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),i}(i.a);e.a=f},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null},function(){String.prototype.endsWith||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(t){}return n}(),c={}.toString,e=function(t,e){if(null==this)throw TypeError();var n=String(this);if(t&&"[object RegExp]"==c.call(t))throw TypeError();var i=n.length,r=String(t),o=r.length,a=i;if(1<arguments.length){void 0!==e&&(a=e?Number(e):0)!=a&&(a=0)}var s=Math.min(Math.max(a,0),i)-o;if(s<0)return!1;for(var l=-1;++l<o;)if(n.charCodeAt(s+l)!=r.charCodeAt(l))return!1;return!0};t?t(String.prototype,"endsWith",{value:e,configurable:!0,writable:!0}):String.prototype.endsWith=e}()}])["default"]}),function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(S,t){"use strict";function g(t,e){var n=(e=e||et).createElement("script");n.text=t,e.head.appendChild(n).parentNode.removeChild(n)}function s(t){var e=!!t&&"length"in t&&t.length,n=ft.type(t);return"function"!==n&&!ft.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}function c(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function e(t,n,i){return ft.isFunction(n)?ft.grep(t,function(t,e){return!!n.call(t,e,t)!==i}):n.nodeType?ft.grep(t,function(t){return t===n!==i}):"string"!=typeof n?ft.grep(t,function(t){return-1<at.call(n,t)!==i}):Et.test(n)?ft.filter(n,t,i):(n=ft.filter(n,t),ft.grep(t,function(t){return-1<at.call(n,t)!==i&&1===t.nodeType}))}function n(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function u(t){var n={};return ft.each(t.match(Dt)||[],function(t,e){n[e]=!0}),n}function d(t){return t}function h(t){throw t}function l(t,e,n,i){var r;try{t&&ft.isFunction(r=t.promise)?r.call(t).done(e).fail(n):t&&ft.isFunction(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}function i(){et.removeEventListener("DOMContentLoaded",i),S.removeEventListener("load",i),ft.ready()}function r(){this.expando=ft.expando+r.uid++}function o(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:jt.test(t)?JSON.parse(t):t)}function p(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Ft,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=o(n)}catch(nt){}Mt.set(t,e,n)}else n=void 0;return n}function At(t,e,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return ft.css(t,e,"")},l=s(),c=n&&n[3]||(ft.cssNumber[e]?"":"px"),u=(ft.cssNumber[e]||"px"!==c&&+l)&&Ut.exec(ft.css(t,e));if(u&&u[3]!==c)for(c=c||u[3],n=n||[],u=+l||1;u/=o=o||".5",ft.style(t,e,u+c),o!==(o=s()/l)&&1!==o&&--a;);return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}function f(t){var e,n=t.ownerDocument,i=t.nodeName,r=Gt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=ft.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),Gt[i]=r)}function v(t,e){for(var n,i,r=[],o=0,a=t.length;o<a;o++)(i=t[o]).style&&(n=i.style.display,e?("none"===n&&(r[o]=Nt.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&qt(i)&&(r[o]=f(i))):"none"!==n&&(r[o]="none",Nt.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}function m(t,e){var n;return n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&c(t,e)?ft.merge([t],n):n}function y(t,e){for(var n=0,i=t.length;n<i;n++)Nt.set(t[n],"globalEval",!e||Nt.get(e[n],"globalEval"))}function b(t,e,n,i,r){for(var o,a,s,l,c,u,d=e.createDocumentFragment(),h=[],p=0,f=t.length;p<f;p++)if((o=t[p])||0===o)if("object"===ft.type(o))ft.merge(h,o.nodeType?[o]:o);else if(Jt.test(o)){for(a=a||d.appendChild(e.createElement("div")),s=(Vt.exec(o)||["",""])[1].toLowerCase(),l=Yt[s]||Yt._default,a.innerHTML=l[1]+ft.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;ft.merge(h,a.childNodes),(a=d.firstChild).textContent=""}else h.push(e.createTextNode(o));for(d.textContent="",p=0;o=h[p++];)if(i&&-1<ft.inArray(o,i))r&&r.push(o);else if(c=ft.contains(o.ownerDocument,o),a=m(d.appendChild(o),"script"),c&&y(a),n)for(u=0;o=a[u++];)Kt.test(o.type||"")&&n.push(o);return d}function a(){return!0}function w(){return!1}function x(){try{return et.activeElement}catch(S){}}function T(t,e,n,i,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=void 0),e)T(t,s,n,i,e[s],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=w;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return ft().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=ft.guid++)),t.each(function(){ft.event.add(this,e,r,i,n)})}function E(t,e){return c(t,"table")&&c(11!==e.nodeType?e:e.firstChild,"tr")&&ft(">tbody",t)[0]||t}function A(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function C(t){var e=oe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function k(t,e){var n,i,r,o,a,s,l,c;if(1===e.nodeType){if(Nt.hasData(t)&&(o=Nt.access(t),a=Nt.set(e,o),c=o.events))for(r in delete a.handle,a.events={},c)for(n=0,i=c[r].length;n<i;n++)ft.event.add(e,r,c[r][n]);Mt.hasData(t)&&(s=Mt.access(t),l=ft.extend({},s),Mt.set(e,l))}}function _(t,e){var n=e.nodeName.toLowerCase();"input"===n&&zt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function R(n,i,r,o){i=rt.apply([],i);var t,e,a,s,l,c,u=0,d=n.length,h=d-1,p=i[0],f=ft.isFunction(p);if(f||1<d&&"string"==typeof p&&!ht.checkClone&&re.test(p))return n.each(function(t){var e=n.eq(t);f&&(i[0]=p.call(this,t,e.html())),R(e,i,r,o)});if(d&&(e=(t=b(i,n[0].ownerDocument,!1,n,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(s=(a=ft.map(m(t,"script"),A)).length;u<d;u++)l=t,u!==h&&(l=ft.clone(l,!0,!0),s&&ft.merge(a,m(l,"script"))),r.call(n[u],l,u);if(s)for(c=a[a.length-1].ownerDocument,ft.map(a,C),u=0;u<s;u++)l=a[u],Kt.test(l.type||"")&&!Nt.access(l,"globalEval")&&ft.contains(c,l)&&(l.src?ft._evalUrl&&ft._evalUrl(l.src):g(l.textContent.replace(ae,""),c))}return n}function D(t,e,n){for(var i,r=e?ft.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||ft.cleanData(m(i)),i.parentNode&&(n&&ft.contains(i.ownerDocument,i)&&y(m(i,"script")),i.parentNode.removeChild(i));return t}function L(t,e,n){var i,r,o,a,s=t.style;return(n=n||ce(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||ft.contains(t.ownerDocument,t)||(a=ft.style(t,e)),!ht.pixelMarginRight()&&le.test(a)&&se.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function P(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function I(t){if(t in ge)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=fe.length;n--;)if((t=fe[n]+e)in ge)return t}function O(t){var e=ft.cssProps[t];return e||(e=ft.cssProps[t]=I(t)||t),e}function N(t,e,n){var i=Ut.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function M(t,e,n,i,r){var o,a=0;for(o=n===(i?"border":"content")?4:"width"===e?1:0;o<4;o+=2)"margin"===n&&(a+=ft.css(t,n+Ht[o],!0,r)),i?("content"===n&&(a-=ft.css(t,"padding"+Ht[o],!0,r)),"margin"!==n&&(a-=ft.css(t,"border"+Ht[o]+"Width",!0,r))):(a+=ft.css(t,"padding"+Ht[o],!0,r),"padding"!==n&&(a+=ft.css(t,"border"+Ht[o]+"Width",!0,r)));return a}function j(t,e,n){var i,r=ce(t),o=L(t,e,r),a="border-box"===ft.css(t,"boxSizing",!1,r);return le.test(o)?o:(i=a&&(ht.boxSizingReliable()||o===t.style[e]),"auto"===o&&(o=t["offset"+e[0].toUpperCase()+e.slice(1)]),(o=parseFloat(o)||0)+M(t,e,n||(a?"border":"content"),i,r)+"px")}function F(t,e,n,i,r){return new F.prototype.init(t,e,n,i,r)}function B(){ve&&(!1===et.hidden&&S.requestAnimationFrame?S.requestAnimationFrame(B):S.setTimeout(B,ft.fx.interval),ft.fx.tick())}function U(){return S.setTimeout(function(){me=void 0}),me=ft.now()}function H(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=Ht[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function q(t,e,n){for(var i,r=(z.tweeners[e]||[]).concat(z.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function W(t,e,n){var i,r,o,a,s,l,c,u,d="width"in e||"height"in e,h=this,p={},f=t.style,g=t.nodeType&&qt(t),m=Nt.get(t,"fxshow");for(i in n.queue||(null==(a=ft._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,ft.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[i],we.test(r)){if(delete e[i],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}p[i]=m&&m[i]||ft.style(t,i)}if((l=!ft.isEmptyObject(e))||!ft.isEmptyObject(p))for(i in d&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=m&&m.display)&&(c=Nt.get(t,"display")),"none"===(u=ft.css(t,"display"))&&(c?u=c:(v([t],!0),c=t.style.display||c,u=ft.css(t,"display"),v([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===ft.css(t,"float")&&(l||(h.done(function(){f.display=c}),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=Nt.access(t,"fxshow",{display:c}),o&&(m.hidden=!g),g&&v([t],!0),h.done(function(){for(i in g||v([t]),Nt.remove(t,"fxshow"),p)ft.style(t,i,p[i])})),l=q(g?m[i]:0,i,h),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}function G(t,e){var n,i,r,o,a;for(n in t)if(r=e[i=ft.camelCase(n)],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(a=ft.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}function z(o,t,e){var n,a,i=0,r=z.prefilters.length,s=ft.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=me||U(),e=Math.max(0,c.startTime+c.duration-t),n=1-(e/c.duration||0),i=0,r=c.tweens.length;i<r;i++)c.tweens[i].run(n);return s.notifyWith(o,[c,n,e]),n<1&&r?e:(r||s.notifyWith(o,[c,1,0]),s.resolveWith(o,[c]),!1)},c=s.promise({elem:o,props:ft.extend({},t),opts:ft.extend(!0,{specialEasing:{},easing:ft.easing._default},e),originalProperties:t,originalOptions:e,startTime:me||U(),duration:e.duration,tweens:[],createTween:function(t,e){var n=ft.Tween(o,c.opts,t,e,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var e=0,n=t?c.tweens.length:0;if(a)return this;for(a=!0;e<n;e++)c.tweens[e].run(1);return t?(s.notifyWith(o,[c,1,0]),s.resolveWith(o,[c,t])):s.rejectWith(o,[c,t]),this}}),u=c.props;for(G(u,c.opts.specialEasing);i<r;i++)if(n=z.prefilters[i].call(c,o,u,c.opts))return ft.isFunction(n.stop)&&(ft._queueHooks(c.elem,c.opts.queue).stop=ft.proxy(n.stop,n)),n;return ft.map(u,q,c),ft.isFunction(c.opts.start)&&c.opts.start.call(o,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),ft.fx.timer(ft.extend(l,{elem:o,anim:c,queue:c.opts.queue})),c}function V(t){return(t.match(Dt)||[]).join(" ")}function K(t){return t.getAttribute&&t.getAttribute("class")||""}function Y(n,t,i,r){var e;if(Array.isArray(t))ft.each(t,function(t,e){i||Le.test(n)?r(n,e):Y(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,i,r)});else if(i||"object"!==ft.type(t))r(n,t);else for(e in t)Y(n+"["+e+"]",t[e],i,r)}function X(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,r=t.toLowerCase().match(Dt)||[];if(ft.isFunction(e))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function $(e,r,o,a){function s(t){var i;return l[t]=!0,ft.each(e[t]||[],function(t,e){var n=e(r,o,a);return"string"!=typeof n||c||l[n]?c?!(i=n):void 0:(r.dataTypes.unshift(n),s(n),!1)}),i}var l={},c=e===We;return s(r.dataTypes[0])||!l["*"]&&s("*")}function J(t,e){var n,i,r=ft.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&ft.extend(!0,t,i),t}function Q(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}function Z(t,e,n,i){var r,o,a,s,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(ct){return{state:"parsererror",error:a?ct:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}var tt=[],et=S.document,nt=Object.getPrototypeOf,it=tt.slice,rt=tt.concat,ot=tt.push,at=tt.indexOf,st={},lt=st.toString,ct=st.hasOwnProperty,ut=ct.toString,dt=ut.call(Object),ht={},pt="3.2.1",ft=function(t,e){return new ft.fn.init(t,e)},gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,mt=/^-ms-/,vt=/-([a-z])/g,yt=function(t,e){return e.toUpperCase()};ft.fn=ft.prototype={jquery:pt,constructor:ft,length:0,toArray:function(){return it.call(this)},get:function(t){return null==t?it.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=ft.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return ft.each(this,t)},map:function(n){return this.pushStack(ft.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(it.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ot,sort:tt.sort,splice:tt.splice},ft.extend=ft.fn.extend=function(t){var e,n,i,r,o,a,s=t||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[l]||{},l++),"object"==typeof s||ft.isFunction(s)||(s={}),l===c&&(s=this,l--);l<c;l++)if(null!=(e=arguments[l]))for(n in e)i=s[n],s!==(r=e[n])&&(u&&r&&(ft.isPlainObject(r)||(o=Array.isArray(r)))?(o?(o=!1,a=i&&Array.isArray(i)?i:[]):a=i&&ft.isPlainObject(i)?i:{},s[n]=ft.extend(u,a,r)):void 0!==r&&(s[n]=r));return s},ft.extend({expando:"jQuery"+(pt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ft.type(t)},isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=ft.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==lt.call(t)||(e=nt(t))&&("function"!=typeof(n=ct.call(e,"constructor")&&e.constructor)||ut.call(n)!==dt))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?st[lt.call(t)]||"object":typeof t},globalEval:function(t){g(t)},camelCase:function(t){return t.replace(mt,"ms-").replace(vt,yt)},
each:function(t,e){var n,i=0;if(s(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(gt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(s(Object(t))?ft.merge(n,"string"==typeof t?[t]:t):ot.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:at.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,a=!n;r<o;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,a=[];if(s(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&a.push(r);return rt.apply([],a)},guid:1,proxy:function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),ft.isFunction(t))return i=it.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(it.call(arguments)))}).guid=t.guid=t.guid||ft.guid++,r},now:Date.now,support:ht}),"function"==typeof Symbol&&(ft.fn[Symbol.iterator]=tt[Symbol.iterator]),ft.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){st["[object "+e+"]"]=e.toLowerCase()});var bt=function(n){function w(t,e,n,i){var r,o,a,s,l,c,u,d=e&&e.ownerDocument,h=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==h&&9!==h&&11!==h)return n;if(!i&&((e?e.ownerDocument||e:H)!==I&&P(e),e=e||I,N)){if(11!==h&&(l=vt.exec(t)))if(r=l[1]){if(9===h){if(!(a=e.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(d&&(a=d.getElementById(r))&&B(e,a)&&a.id===r)return n.push(a),n}else{if(l[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&T.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(r)),n}if(T.qsa&&!V[t+" "]&&(!M||!M.test(t))){if(1!==h)d=e,u=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(xt,Tt):e.setAttribute("id",s=U),o=(c=C(t)).length;o--;)c[o]="#"+s+" "+f(c[o]);u=c.join(","),d=yt.test(t)&&p(e.parentNode)||e}if(u)try{return Q.apply(n,d.querySelectorAll(u)),n}catch(W){}finally{s===U&&e.removeAttribute("id")}}}return _(t.replace(st,"$1"),e,n,i)}function t(){function n(t,e){return i.push(t+" ")>S.cacheLength&&delete n[i.shift()],n[t+" "]=e}var i=[];return n}function l(t){return t[U]=!0,t}function r(t){var e=I.createElement("fieldset");try{return!!t(e)}catch(T){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function e(t,e){for(var n=t.split("|"),i=n.length;i--;)S.attrHandle[n[i]]=e}function c(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function i(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function o(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function a(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Et(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function s(a){return l(function(o){return o=+o,l(function(t,e){for(var n,i=a([],t.length,o),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}function p(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function u(){}function f(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function d(s,t,e){var l=t.dir,c=t.next,u=c||l,d=e&&"parentNode"===u,h=W++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||d)return s(t,e,n);return!1}:function(t,e,n){var i,r,o,a=[q,h];if(n){for(;t=t[l];)if((1===t.nodeType||d)&&s(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||d)if(r=(o=t[U]||(t[U]={}))[t.uniqueID]||(o[t.uniqueID]={}),c&&c===t.nodeName.toLowerCase())t=t[l]||t;else{if((i=r[u])&&i[0]===q&&i[1]===h)return a[2]=i[2];if((r[u]=a)[2]=s(t,e,n))return!0}return!1}}function h(r){return 1<r.length?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function y(t,e,n){for(var i=0,r=e.length;i<r;i++)w(t,e[i],n);return n}function x(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,c=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),c&&e.push(s)));return a}function b(p,f,g,m,v,t){return m&&!m[U]&&(m=b(m)),v&&!v[U]&&(v=b(v,t)),l(function(t,e,n,i){var r,o,a,s=[],l=[],c=e.length,u=t||y(f||"*",n.nodeType?[n]:n,[]),d=!p||!t&&f?u:x(u,s,p,n,i),h=g?v||(t?p:c||m)?[]:e:d;if(g&&g(d,h,n,i),m)for(r=x(h,l),m(r,[],n,i),o=r.length;o--;)(a=r[o])&&(h[l[o]]=!(d[l[o]]=a));if(t){if(v||p){if(v){for(r=[],o=h.length;o--;)(a=h[o])&&r.push(d[o]=a);v(null,h=[],r,i)}for(o=h.length;o--;)(a=h[o])&&-1<(r=v?tt(t,a):s[o])&&(t[r]=!(e[r]=a))}}else h=x(h===e?h.splice(c,h.length):h),v?v(null,e,h,i):Q.apply(e,h)})}function g(t){for(var r,e,n,i=t.length,o=S.relative[t[0].type],a=o||S.relative[" "],s=o?1:0,l=d(function(t){return t===r},a,!0),c=d(function(t){return-1<tt(r,t)},a,!0),u=[function(t,e,n){var i=!o&&(n||e!==R)||((r=e).nodeType?l(t,e,n):c(t,e,n));return r=null,i}];s<i;s++)if(e=S.relative[t[s].type])u=[d(h(u),e)];else{if((e=S.filter[t[s].type].apply(null,t[s].matches))[U]){for(n=++s;n<i&&!S.relative[t[n].type];n++);return b(1<s&&h(u),1<s&&f(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),e,s<n&&g(t.slice(s,n)),n<i&&g(t=t.slice(n)),n<i&&f(t))}u.push(e)}return h(u)}function m(m,v){var y=0<v.length,b=0<m.length,t=function(t,e,n,i,r){var o,a,s,l=0,c="0",u=t&&[],d=[],h=R,p=t||b&&S.find.TAG("*",r),f=q+=null==h?1:Math.random()||.1,g=p.length;for(r&&(R=e===I||e||r);c!==g&&null!=(o=p[c]);c++){if(b&&o){for(a=0,e||o.ownerDocument===I||(P(o),n=!N);s=m[a++];)if(s(o,e||I,n)){i.push(o);break}r&&(q=f)}y&&((o=!s&&o)&&l--,t&&u.push(o))}if(l+=c,y&&c!==l){for(a=0;s=v[a++];)s(u,d,e,n);if(t){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=$.call(i));d=x(d)}Q.apply(i,d),r&&!t&&0<d.length&&1<l+v.length&&w.uniqueSort(i)}return r&&(q=f,R=h),u};return y?l(t):t}var v,T,S,E,A,C,k,_,R,D,L,P,I,O,N,M,j,F,B,U="sizzle"+1*new Date,H=n.document,q=0,W=0,G=t(),z=t(),V=t(),K=function(t,e){return t===e&&(L=!0),0},Y={}.hasOwnProperty,X=[],$=X.pop,J=X.push,Q=X.push,Z=X.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",rt="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",ot=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ut=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),dt=new RegExp(ot),ht=new RegExp("^"+it+"$"),pt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Tt=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},St=function(){P()},Et=d(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{Q.apply(X=Z.call(H.childNodes),H.childNodes),X[H.childNodes.length].nodeType}catch(At){Q={apply:X.length?function(t,e){J.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}for(v in T=w.support={},A=w.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=w.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:H;return i!==I&&9===i.nodeType&&i.documentElement&&(O=(I=i).documentElement,N=!A(I),H!==I&&(n=I.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",St,!1):n.attachEvent&&n.attachEvent("onunload",St)),T.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),T.getElementsByTagName=r(function(t){return t.appendChild(I.createComment("")),!t.getElementsByTagName("*").length}),T.getElementsByClassName=mt.test(I.getElementsByClassName),T.getById=r(function(t){return O.appendChild(t).id=U,!I.getElementsByName||!I.getElementsByName(U).length}),T.getById?(S.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){return t.getAttribute("id")===e}},S.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&N){var n=e.getElementById(t);return n?[n]:[]}}):(S.filter.ID=function(t){var n=t.replace(bt,wt);return function(t){var e="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},S.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&N){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),S.find.TAG=T.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):T.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},S.find.CLASS=T.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&N)return e.getElementsByClassName(t)},j=[],M=[],(T.qsa=mt.test(I.querySelectorAll))&&(r(function(t){O.appendChild(t).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||M.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+U+"-]").length||M.push("~="),t.querySelectorAll(":checked").length||M.push(":checked"),t.querySelectorAll("a#"+U+"+*").length||M.push(".#.+[+~]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=I.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&M.push("name"+nt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&M.push(":enabled",":disabled"),O.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&M.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),M.push(",.*:")})),(T.matchesSelector=mt.test(F=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(t){T.disconnectedMatch=F.call(t,"*"),F.call(t,"[s!='']:x"),j.push("!=",ot)}),M=M.length&&new RegExp(M.join("|")),j=j.length&&new RegExp(j.join("|")),e=mt.test(O.compareDocumentPosition),B=e||mt.test(O.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},K=e?function(t,e){if(t===e)return L=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!T.sortDetached&&e.compareDocumentPosition(t)===n?t===I||t.ownerDocument===H&&B(H,t)?-1:e===I||e.ownerDocument===H&&B(H,e)?1:D?tt(D,t)-tt(D,e):0:4&n?-1:1)}:function(t,e){if(t===e)return L=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t===I?-1:e===I?1:r?-1:o?1:D?tt(D,t)-tt(D,e):0;if(r===o)return c(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?c(a[i],s[i]):a[i]===H?-1:s[i]===H?1:0}),I},w.matches=function(t,e){return w(t,null,null,e)},w.matchesSelector=function(t,e){if((t.ownerDocument||t)!==I&&P(t),e=e.replace(ut,"='$1']"),T.matchesSelector&&N&&!V[e+" "]&&(!j||!j.test(e))&&(!M||!M.test(e)))try{var n=F.call(t,e);if(n||T.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(E){}return 0<w(e,I,null,[t]).length},w.contains=function(t,e){return(t.ownerDocument||t)!==I&&P(t),B(t,e)},w.attr=function(t,e){(t.ownerDocument||t)!==I&&P(t);var n=S.attrHandle[e.toLowerCase()],i=n&&Y.call(S.attrHandle,e.toLowerCase())?n(t,e,!N):void 0;return void 0!==i?i:T.attributes||!N?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},w.escape=function(t){return(t+"").replace(xt,Tt)},w.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},w.uniqueSort=function(t){var e,n=[],i=0,r=0;if(L=!T.detectDuplicates,D=!T.sortStable&&t.slice(0),t.sort(K),L){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return D=null,t},E=w.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=E(e);return n},(S=w.selectors={cacheLength:50,createPseudo:l,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||w.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&w.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&dt.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=G[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&G(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(t){var e=w.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===r:"!="===i?e!==r:"^="===i?r&&0===e.indexOf(r):"*="===i?r&&-1<e.indexOf(r):"$="===i?r&&e.slice(-r.length)===r:"~="===i?-1<(" "+e.replace(at," ")+" ").indexOf(r):"|="===i&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(f,t,e,g,m){var v="nth"!==f.slice(0,3),y="last"!==f.slice(-4),b="of-type"===t;return 1===g&&0===m?function(t){return!!t.parentNode}:function(t,e,n){var i,r,o,a,s,l,c=v!==y?"nextSibling":"previousSibling",u=t.parentNode,d=b&&t.nodeName.toLowerCase(),h=!n&&!b,p=!1;if(u){if(v){for(;c;){for(a=t;a=a[c];)if(b?a.nodeName.toLowerCase()===d:1===a.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[y?u.firstChild:u.lastChild],y&&h){for(p=(s=(i=(r=(o=(a=u)[U]||(a[U]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===q&&i[1])&&i[2],a=s&&u.childNodes[s];a=++s&&a&&a[c]||(p=s=0)||l.pop();)if(1===a.nodeType&&++p&&a===t){r[f]=[q,s,p];break}}else if(h&&(p=s=(i=(r=(o=(a=t)[U]||(a[U]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===q&&i[1]),!1===p)for(;(a=++s&&a&&a[c]||(p=s=0)||l.pop())&&((b?a.nodeName.toLowerCase()!==d:1!==a.nodeType)||!++p||(h&&((r=(o=a[U]||(a[U]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]=[q,p]),a!==t)););return(p-=m)===g||p%g==0&&0<=p/g}}},PSEUDO:function(t,o){var e,a=S.pseudos[t]||S.setFilters[t.toLowerCase()]||w.error("unsupported pseudo: "+t);return a[U]?a(o):1<a.length?(e=[t,t,"",o],S.setFilters.hasOwnProperty(t.toLowerCase())?l(function(t,e){for(var n,i=a(t,o),r=i.length;r--;)t[n=tt(t,i[r])]=!(e[n]=i[r])}):function(t){return a(t,0,e)}):a}},pseudos:{not:l(function(t){var i=[],r=[],s=k(t.replace(st,"$1"));return s[U]?l(function(t,e,n,i){for(var r,o=s(t,null,i,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,e,n){return i[0]=t,s(i,null,n,r),i[0]=null,!r.pop()}}),has:l(function(e){return function(t){return 0<w(e,t).length}}),contains:l(function(e){return e=e.replace(bt,wt),function(t){return-1<(t.textContent||t.innerText||E(t)).indexOf(e)}}),lang:l(function(n){return ht.test(n||"")||w.error("unsupported lang: "+n),n=n.replace(bt,wt).toLowerCase(),function(t){var e;do{if(e=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===O},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!S.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:s(function(){return[0]}),last:s(function(t,e){return[e-1]}),eq:s(function(t,e,n){return[n<0?n+e:n]}),even:s(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:s(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:s(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:s(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=S.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[v]=i(v);for(v in{submit:!0,reset:!0})S.pseudos[v]=o(v);return u.prototype=S.filters=S.pseudos,S.setFilters=new u,C=w.tokenize=function(t,e){var n,i,r,o,a,s,l,c=z[t+" "];if(c)return e?0:c.slice(0);for(a=t,s=[],l=S.preFilter;a;){for(o in n&&!(i=lt.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(r=[])),n=!1,(i=ct.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(st," ")}),a=a.slice(n.length)),S.filter)!(i=pt[o].exec(a))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?w.error(t):z(t,s).slice(0)},k=w.compile=function(t,e){var n,i=[],r=[],o=V[t+" "];if(!o){for(e||(e=C(t)),n=e.length;n--;)(o=g(e[n]))[U]?i.push(o):r.push(o);(o=V(t,m(r,i))).selector=t}return o},_=w.select=function(t,e,n,i){var r,o,a,s,l,c="function"==typeof t&&t,u=!i&&C(t=c.selector||t);if(n=n||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===e.nodeType&&N&&S.relative[o[1].type]){if(!(e=(S.find.ID(a.matches[0].replace(bt,wt),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=pt.needsContext.test(t)?0:o.length;r--&&(a=o[r],!S.relative[s=a.type]);)if((l=S.find[s])&&(i=l(a.matches[0].replace(bt,wt),yt.test(o[0].type)&&p(e.parentNode)||e))){if(o.splice(r,1),!(t=i.length&&f(o)))return Q.apply(n,i),n;break}}return(c||k(t,u))(i,e,!N,n,!e||yt.test(t)&&p(e.parentNode)||e),n},T.sortStable=U.split("").sort(K).join("")===U,T.detectDuplicates=!!L,P(),T.sortDetached=r(function(t){return 1&t.compareDocumentPosition(I.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||e("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),T.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||e("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||e(et,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),w}(S);ft.find=bt,ft.expr=bt.selectors,ft.expr[":"]=ft.expr.pseudos,ft.uniqueSort=ft.unique=bt.uniqueSort,ft.text=bt.getText,ft.isXMLDoc=bt.isXML,ft.contains=bt.contains,ft.escapeSelector=bt.escape;var wt=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&ft(t).is(n))break;i.push(t)}return i},xt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},Tt=ft.expr.match.needsContext,St=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Et=/^.[^:#\[\.,]*$/;ft.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?ft.find.matchesSelector(i,t)?[i]:[]:ft.find.matches(t,ft.grep(e,function(t){return 1===t.nodeType}))},ft.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(ft(t).filter(function(){for(e=0;e<i;e++)if(ft.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)ft.find(t,r[e],n);return 1<i?ft.uniqueSort(n):n},filter:function(t){return this.pushStack(e(this,t||[],!1))},not:function(t){return this.pushStack(e(this,t||[],!0))},is:function(t){return!!e(this,"string"==typeof t&&Tt.test(t)?ft(t):t||[],!1).length}});var Ct,kt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ft.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||Ct,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:kt.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof ft?e[0]:e,ft.merge(this,ft.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:et,!0)),St.test(i[1])&&ft.isPlainObject(e))for(i in e)ft.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=et.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):ft.isFunction(t)?void 0!==n.ready?n.ready(t):t(ft):ft.makeArray(t,this)}).prototype=ft.fn,Ct=ft(et);var _t=/^(?:parents|prev(?:Until|All))/,Rt={children:!0,contents:!0,next:!0,prev:!0};ft.fn.extend({has:function(t){var e=ft(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(ft.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],a="string"!=typeof t&&ft(t);if(!Tt.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ft.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?ft.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?at.call(ft(t),this[0]):at.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ft.uniqueSort(ft.merge(this.get(),ft(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ft.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return wt(t,"parentNode")},parentsUntil:function(t,e,n){return wt(t,"parentNode",n)},next:function(t){return n(t,"nextSibling")},prev:function(t){return n(t,"previousSibling")},nextAll:function(t){return wt(t,"nextSibling")},prevAll:function(t){return wt(t,"previousSibling")},nextUntil:function(t,e,n){return wt(t,"nextSibling",n)},prevUntil:function(t,e,n){return wt(t,"previousSibling",n)},siblings:function(t){return xt((t.parentNode||{}).firstChild,t)},children:function(t){return xt(t.firstChild)},contents:function(t){return c(t,"iframe")?t.contentDocument:(c(t,"template")&&(t=t.content||t),ft.merge([],t.childNodes))}},function(i,r){ft.fn[i]=function(t,e){var n=ft.map(this,r,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=ft.filter(e,n)),1<this.length&&(Rt[i]||ft.uniqueSort(n),_t.test(i)&&n.reverse()),this.pushStack(n)}});var Dt=/[^\x20\t\r\n\f]+/g;ft.Callbacks=function(i){i="string"==typeof i?u(i):ft.extend({},i);var r,t,e,n,o=[],a=[],s=-1,l=function(){for(n=n||i.once,e=r=!0;a.length;s=-1)for(t=a.shift();++s<o.length;)!1===o[s].apply(t[0],t[1])&&i.stopOnFalse&&(s=o.length,t=!1);i.memory||(t=!1),r=!1,n&&(o=t?[]:"")},c={add:function(){return o&&(t&&!r&&(s=o.length-1,a.push(t)),function n(t){ft.each(t,function(t,e){ft.isFunction(e)?i.unique&&c.has(e)||o.push(e):e&&e.length&&"string"!==ft.type(e)&&n(e)})}(arguments),t&&!r&&l()),this},remove:function(){return ft.each(arguments,function(t,e){for(var n;-1<(n=ft.inArray(e,o,n));)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?-1<ft.inArray(t,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return n=a=[],o=t="",this},disabled:function(){return!o},lock:function(){return n=a=[],t||r||(o=t=""),this},locked:function(){return!!n},fireWith:function(t,e){return n||(e=[t,(e=e||[]).slice?e.slice():e],a.push(e),r||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!e}};return c},ft.extend({Deferred:function(t){var o=[["notify","progress",ft.Callbacks("memory"),ft.Callbacks("memory"),2],["resolve","done",ft.Callbacks("once memory"),ft.Callbacks("once memory"),0,"resolved"],["reject","fail",ft.Callbacks("once memory"),ft.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(t){return a.then(null,t)},pipe:function(){var r=arguments;return ft.Deferred(function(i){ft.each(o,function(t,e){var n=ft.isFunction(r[e[4]])&&r[e[4]];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&ft.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this,n?[t]:arguments)})}),r=null}).promise()},then:function(e,n,i){function l(r,o,a,s){return function(){var n=this,i=arguments,t=function(){var t,e;if(!(r<c)){if((t=a.apply(n,i))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,ft.isFunction(e)?s?e.call(t,l(c,o,d,s),l(c,o,h,s)):(c++,e.call(t,l(c,o,d,s),l(c,o,h,s),l(c,o,d,o.notifyWith))):(a!==d&&(n=void 0,i=[t]),(s||o.resolveWith)(n,i))}},e=s?t:function(){try{t()}catch(S){ft.Deferred.exceptionHook&&ft.Deferred.exceptionHook(S,e.stackTrace),c<=r+1&&(a!==h&&(n=void 0,i=[S]),o.rejectWith(n,i))}};r?e():(ft.Deferred.getStackHook&&(e.stackTrace=ft.Deferred.getStackHook()),S.setTimeout(e))}}var c=0;return ft.Deferred(function(t){o[0][3].add(l(0,t,ft.isFunction(i)?i:d,t.notifyWith)),o[1][3].add(l(0,t,ft.isFunction(e)?e:d)),o[2][3].add(l(0,t,ft.isFunction(n)?n:h))}).promise()},promise:function(t){return null!=t?ft.extend(t,a):a}},s={};return ft.each(o,function(t,e){var n=e[2],i=e[5];a[e[1]]=n.add,i&&n.add(function(){r=i},o[3-t][2].disable,o[0][2].lock),n.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=n.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){var n=arguments.length,e=n,i=Array(e),r=it.call(arguments),o=ft.Deferred(),a=function(e){return function(t){i[e]=this,r[e]=1<arguments.length?it.call(arguments):t,--n||o.resolveWith(i,r)}};if(n<=1&&(l(t,o.done(a(e)).resolve,o.reject,!n),"pending"===o.state()||ft.isFunction(r[e]&&r[e].then)))return o.then();for(;e--;)l(r[e],a(e),o.reject);return o.promise()}});var Lt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ft.Deferred.exceptionHook=function(t,e){S.console&&S.console.warn&&t&&Lt.test(t.name)&&S.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},ft.readyException=function(t){S.setTimeout(function(){throw t})};var Pt=ft.Deferred();ft.fn.ready=function(t){return Pt.then(t)["catch"](function(t){ft.readyException(t)}),this},ft.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--ft.readyWait:ft.isReady)||((ft.isReady=!0)!==t&&0<--ft.readyWait||Pt.resolveWith(et,[ft]))}}),ft.ready.then=Pt.then,"complete"===et.readyState||"loading"!==et.readyState&&!et.documentElement.doScroll?S.setTimeout(ft.ready):(et.addEventListener("DOMContentLoaded",i),S.addEventListener("load",i));var It=function(t,e,n,i,r,o,a){var s=0,l=t.length,c=null==n;if("object"===ft.type(n))for(s in r=!0,n)It(t,e,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,ft.isFunction(i)||(a=!0),c&&(a?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(ft(t),n)})),e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:c?e.call(t):l?e(t[0],n):o},Ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};r.uid=1,r.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[ft.camelCase(e)]=n;else for(i in e)r[ft.camelCase(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][ft.camelCase(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){Array.isArray(e)?e=e.map(ft.camelCase):e=(e=ft.camelCase(e))in i?[e]:e.match(Dt)||[],n=e.length;for(;n--;)delete i[e[n]]}(void 0===e||ft.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!ft.isEmptyObject(e)}};var Nt=new r,Mt=new r,jt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ft=/[A-Z]/g;ft.extend({hasData:function(t){return Mt.hasData(t)||Nt.hasData(t)},data:function(t,e,n){return Mt.access(t,e,n)},removeData:function(t,e){Mt.remove(t,e)},_data:function(t,e,n){return Nt.access(t,e,n)},_removeData:function(t,e){Nt.remove(t,e)}}),ft.fn.extend({data:function(n,t){var e,i,r,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(r=Mt.get(o),1===o.nodeType&&!Nt.get(o,"hasDataAttrs"))){for(e=a.length;e--;)a[e]&&(0===(i=a[e].name).indexOf("data-")&&(i=ft.camelCase(i.slice(5)),p(o,i,r[i])));Nt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof n?this.each(function(){Mt.set(this,n)}):It(this,function(t){var e;if(o&&void 0===t){if(void 0!==(e=Mt.get(o,n)))return e;if(void 0!==(e=p(o,n)))return e}else this.each(function(){Mt.set(this,n,t)})},null,t,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){Mt.remove(this,t)})}}),ft.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Nt.get(t,e),n&&(!i||Array.isArray(n)?i=Nt.access(t,e,ft.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=ft.queue(t,e),i=n.length,r=n.shift(),o=ft._queueHooks(t,e),a=function(){ft.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Nt.get(t,n)||Nt.access(t,n,{empty:ft.Callbacks("once memory").add(function(){Nt.remove(t,[e+"queue",n])})})}}),ft.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?ft.queue(this[0],e):void 0===n?this:this.each(function(){var t=ft.queue(this,e,n);ft._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ft.dequeue(this,e)})},dequeue:function(t){return this.each(function(){ft.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=ft.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=Nt.get(o[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var Bt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ut=new RegExp("^(?:([+-])=|)("+Bt+")([a-z%]*)$","i"),Ht=["Top","Right","Bottom","Left"],qt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ft.contains(t.ownerDocument,t)&&"none"===ft.css(t,"display")},Wt=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=a[o];return r},Gt={};ft.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){qt(this)?ft(this).show(
):ft(this).hide()})}});var zt=/^(?:checkbox|radio)$/i,Vt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Kt=/^$|\/(?:java|ecma)script/i,Yt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Yt.optgroup=Yt.option,Yt.tbody=Yt.tfoot=Yt.colgroup=Yt.caption=Yt.thead,Yt.th=Yt.td;var Xt,$t,Jt=/<|&#?\w+;/;Xt=et.createDocumentFragment().appendChild(et.createElement("div")),($t=et.createElement("input")).setAttribute("type","radio"),$t.setAttribute("checked","checked"),$t.setAttribute("name","t"),Xt.appendChild($t),ht.checkClone=Xt.cloneNode(!0).cloneNode(!0).lastChild.checked,Xt.innerHTML="<textarea>x</textarea>",ht.noCloneChecked=!!Xt.cloneNode(!0).lastChild.defaultValue;var Qt=et.documentElement,Zt=/^key/,te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ee=/^([^.]*)(?:\.(.+)|)/;ft.event={global:{},add:function(e,t,n,i,r){var o,a,s,l,c,u,d,h,p,f,g,m=Nt.get(e);if(m)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&ft.find.matchesSelector(Qt,r),n.guid||(n.guid=ft.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(t){return void 0!==ft&&ft.event.triggered!==t.type?ft.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(Dt)||[""]).length;c--;)p=g=(s=ee.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p&&(d=ft.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,d=ft.event.special[p]||{},u=ft.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&ft.expr.match.needsContext.test(r),namespace:f.join(".")},o),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,a)||e.addEventListener&&e.addEventListener(p,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),ft.event.global[p]=!0)},remove:function(t,e,n,i,r){var o,a,s,l,c,u,d,h,p,f,g,m=Nt.hasData(t)&&Nt.get(t);if(m&&(l=m.events)){for(c=(e=(e||"").match(Dt)||[""]).length;c--;)if(p=g=(s=ee.exec(e[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(d=ft.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)u=h[o],!r&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(t,u));a&&!h.length&&(d.teardown&&!1!==d.teardown.call(t,f,m.handle)||ft.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)ft.event.remove(t,p+e[c],n,i,!0);ft.isEmptyObject(l)&&Nt.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,a,s=ft.event.fix(t),l=new Array(arguments.length),c=(Nt.get(this,"events")||{})[s.type]||[],u=ft.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=ft.event.handlers.call(this,s,c),e=0;(r=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(i=((ft.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,i,r,o,a,s=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[r=(i=e[n]).selector+" "]&&(a[r]=i.needsContext?-1<ft(r,this).index(c):ft.find(r,this,null,[c]).length),a[r]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,l<e.length&&s.push({elem:c,handlers:e.slice(l)}),s},addProp:function(e,t){Object.defineProperty(ft.Event.prototype,e,{enumerable:!0,configurable:!0,get:ft.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[ft.expando]?t:new ft.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==x()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===x()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&c(this,"input"))return this.click(),!1},_default:function(t){return c(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},ft.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},ft.Event=function(t,e){return this instanceof ft.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?a:w,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&ft.extend(this,e),this.timeStamp=t&&t.timeStamp||ft.now(),void(this[ft.expando]=!0)):new ft.Event(t,e)},ft.Event.prototype={constructor:ft.Event,isDefaultPrevented:w,isPropagationStopped:w,isImmediatePropagationStopped:w,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=a,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=a,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=a,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},ft.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Zt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&te.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},ft.event.addProp),ft.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){ft.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=this,i=t.relatedTarget,r=t.handleObj;return i&&(i===n||ft.contains(n,i))||(t.type=r.origType,e=r.handler.apply(this,arguments),t.type=o),e}}}),ft.fn.extend({on:function(t,e,n,i){return T(this,t,e,n,i)},one:function(t,e,n,i){return T(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,ft(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=w),this.each(function(){ft.event.remove(this,t,n,e)})}});var ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ie=/<script|<style|<link/i,re=/checked\s*(?:[^=]|=\s*.checked.)/i,oe=/^true\/(.*)/,ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ft.extend({htmlPrefilter:function(t){return t.replace(ne,"<$1></$2>")},clone:function(t,e,n){var i,r,o,a,s=t.cloneNode(!0),l=ft.contains(t.ownerDocument,t);if(!(ht.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ft.isXMLDoc(t)))for(a=m(s),i=0,r=(o=m(t)).length;i<r;i++)_(o[i],a[i]);if(e)if(n)for(o=o||m(t),a=a||m(s),i=0,r=o.length;i<r;i++)k(o[i],a[i]);else k(t,s);return 0<(a=m(s,"script")).length&&y(a,!l&&m(t,"script")),s},cleanData:function(t){for(var e,n,i,r=ft.event.special,o=0;void 0!==(n=t[o]);o++)if(Ot(n)){if(e=n[Nt.expando]){if(e.events)for(i in e.events)r[i]?ft.event.remove(n,i):ft.removeEvent(n,i,e.handle);n[Nt.expando]=void 0}n[Mt.expando]&&(n[Mt.expando]=void 0)}}}),ft.fn.extend({detach:function(t){return D(this,t,!0)},remove:function(t){return D(this,t)},text:function(t){return It(this,function(t){return void 0===t?ft.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return R(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||E(this,t).appendChild(t)})},prepend:function(){return R(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=E(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return R(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return R(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(ft.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return ft.clone(this,t,e)})},html:function(t){return It(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ie.test(t)&&!Yt[(Vt.exec(t)||["",""])[1].toLowerCase()]){t=ft.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(ft.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(nt){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return R(this,arguments,function(t){var e=this.parentNode;ft.inArray(this,n)<0&&(ft.cleanData(m(this)),e&&e.replaceChild(t,this))},n)}}),ft.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){ft.fn[t]=function(t){for(var e,n=[],i=ft(t),r=i.length-1,o=0;o<=r;o++)e=o===r?this:this.clone(!0),ft(i[o])[a](e),ot.apply(n,e.get());return this.pushStack(n)}});var se=/^margin/,le=new RegExp("^("+Bt+")(?!px)[a-z%]+$","i"),ce=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=S),e.getComputedStyle(t)};!function(){function t(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Qt.appendChild(o);var t=S.getComputedStyle(a);e="1%"!==t.top,r="2px"===t.marginLeft,n="4px"===t.width,a.style.marginRight="50%",i="4px"===t.marginRight,Qt.removeChild(o),a=null}}var e,n,i,r,o=et.createElement("div"),a=et.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ht.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),ft.extend(ht,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return t(),n},pixelMarginRight:function(){return t(),i},reliableMarginLeft:function(){return t(),r}}))}();var ue=/^(none|table(?!-c[ea]).+)/,de=/^--/,he={position:"absolute",visibility:"hidden",display:"block"},pe={letterSpacing:"0",fontWeight:"400"},fe=["Webkit","Moz","ms"],ge=et.createElement("div").style;ft.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=L(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=ft.camelCase(e),l=de.test(e),c=t.style;return l||(e=O(s)),a=ft.cssHooks[e]||ft.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:c[e]:("string"===(o=typeof n)&&(r=Ut.exec(n))&&r[1]&&(n=At(t,e,r),o="number"),void(null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(ft.cssNumber[s]?"":"px")),ht.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l?c.setProperty(e,n):c[e]=n))))}},css:function(t,e,n,i){var r,o,a,s=ft.camelCase(e);return de.test(e)||(e=O(s)),(a=ft.cssHooks[e]||ft.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=L(t,e,i)),"normal"===r&&e in pe&&(r=pe[e]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),ft.each(["height","width"],function(t,a){ft.cssHooks[a]={get:function(t,e,n){if(e)return!ue.test(ft.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?j(t,a,n):Wt(t,he,function(){return j(t,a,n)})},set:function(t,e,n){var i,r=n&&ce(t),o=n&&M(t,a,n,"border-box"===ft.css(t,"boxSizing",!1,r),r);return o&&(i=Ut.exec(e))&&"px"!==(i[3]||"px")&&(t.style[a]=e,e=ft.css(t,a)),N(t,e,o)}}}),ft.cssHooks.marginLeft=P(ht.reliableMarginLeft,function(t,e){if(e)return(parseFloat(L(t,"marginLeft"))||t.getBoundingClientRect().left-Wt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),ft.each({margin:"",padding:"",border:"Width"},function(r,o){ft.cssHooks[r+o]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[r+Ht[e]+o]=i[e]||i[e-2]||i[0];return n}},se.test(r)||(ft.cssHooks[r+o].set=N)}),ft.fn.extend({css:function(t,e){return It(this,function(t,e,n){var i,r,o={},a=0;if(Array.isArray(e)){for(i=ce(t),r=e.length;a<r;a++)o[e[a]]=ft.css(t,e[a],!1,i);return o}return void 0!==n?ft.style(t,e,n):ft.css(t,e)},t,e,1<arguments.length)}}),(ft.Tween=F).prototype={constructor:F,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||ft.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(ft.cssNumber[n]?"":"px")},cur:function(){var t=F.propHooks[this.prop];return t&&t.get?t.get(this):F.propHooks._default.get(this)},run:function(t){var e,n=F.propHooks[this.prop];return this.options.duration?this.pos=e=ft.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):F.propHooks._default.set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=ft.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){ft.fx.step[t.prop]?ft.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[ft.cssProps[t.prop]]&&!ft.cssHooks[t.prop]?t.elem[t.prop]=t.now:ft.style(t.elem,t.prop,t.now+t.unit)}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ft.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},ft.fx=F.prototype.init,ft.fx.step={};var me,ve,ye,be,we=/^(?:toggle|show|hide)$/,xe=/queueHooks$/;ft.Animation=ft.extend(z,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return At(n.elem,t,Ut.exec(e),n),n}]},tweener:function(t,e){ft.isFunction(t)?(e=t,t=["*"]):t=t.match(Dt);for(var n,i=0,r=t.length;i<r;i++)n=t[i],z.tweeners[n]=z.tweeners[n]||[],z.tweeners[n].unshift(e)},prefilters:[W],prefilter:function(t,e){e?z.prefilters.unshift(t):z.prefilters.push(t)}}),ft.speed=function(t,e,n){var i=t&&"object"==typeof t?ft.extend({},t):{complete:n||!n&&e||ft.isFunction(t)&&t,duration:t,easing:n&&e||e&&!ft.isFunction(e)&&e};return ft.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in ft.fx.speeds?i.duration=ft.fx.speeds[i.duration]:i.duration=ft.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){ft.isFunction(i.old)&&i.old.call(this),i.queue&&ft.dequeue(this,i.queue)},i},ft.fn.extend({fadeTo:function(t,e,n,i){return this.filter(qt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var r=ft.isEmptyObject(e),o=ft.speed(t,n,i),a=function(){var t=z(this,ft.extend({},e),o);(r||Nt.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(r,t,o){var a=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof r&&(o=t,t=r,r=void 0),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",n=ft.timers,i=Nt.get(this);if(e)i[e]&&i[e].stop&&a(i[e]);else for(e in i)i[e]&&i[e].stop&&xe.test(e)&&a(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=r&&n[e].queue!==r||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||ft.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=Nt.get(this),n=e[a+"queue"],i=e[a+"queueHooks"],r=ft.timers,o=n?n.length:0;for(e.finish=!0,ft.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===a&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),ft.each(["toggle","show","hide"],function(t,i){var r=ft.fn[i];ft.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(H(i,!0),t,e,n)}}),ft.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){ft.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),ft.timers=[],ft.fx.tick=function(){var t,e=0,n=ft.timers;for(me=ft.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||ft.fx.stop(),me=void 0},ft.fx.timer=function(t){ft.timers.push(t),ft.fx.start()},ft.fx.interval=13,ft.fx.start=function(){ve||(ve=!0,B())},ft.fx.stop=function(){ve=null},ft.fx.speeds={slow:600,fast:200,_default:400},ft.fn.delay=function(i,t){return i=ft.fx&&ft.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=S.setTimeout(t,i);e.stop=function(){S.clearTimeout(n)}})},ye=et.createElement("input"),be=et.createElement("select").appendChild(et.createElement("option")),ye.type="checkbox",ht.checkOn=""!==ye.value,ht.optSelected=be.selected,(ye=et.createElement("input")).value="t",ye.type="radio",ht.radioValue="t"===ye.value;var Te,Se=ft.expr.attrHandle;ft.fn.extend({attr:function(t,e){return It(this,ft.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){ft.removeAttr(this,t)})}}),ft.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?ft.prop(t,e,n):(1===o&&ft.isXMLDoc(t)||(r=ft.attrHooks[e.toLowerCase()]||(ft.expr.match.bool.test(e)?Te:void 0)),void 0!==n?null===n?void ft.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=ft.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!ht.radioValue&&"radio"===e&&c(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(Dt);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),Te={set:function(t,e,n){return!1===e?ft.removeAttr(t,n):t.setAttribute(n,n),n}},ft.each(ft.expr.match.bool.source.match(/\w+/g),function(t,e){var a=Se[e]||ft.find.attr;Se[e]=function(t,e,n){var i,r,o=e.toLowerCase();return n||(r=Se[o],Se[o]=i,i=null!=a(t,e,n)?o:null,Se[o]=r),i}});var Ee=/^(?:input|select|textarea|button)$/i,Ae=/^(?:a|area)$/i;ft.fn.extend({prop:function(t,e){return It(this,ft.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[ft.propFix[t]||t]})}}),ft.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ft.isXMLDoc(t)||(e=ft.propFix[e]||e,r=ft.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=ft.find.attr(t,"tabindex");return e?parseInt(e,10):Ee.test(t.nodeName)||Ae.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ht.optSelected||(ft.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),ft.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ft.propFix[this.toLowerCase()]=this}),ft.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,l=0;if(ft.isFunction(e))return this.each(function(t){ft(this).addClass(e.call(this,t,K(this)))});if("string"==typeof e&&e)for(t=e.match(Dt)||[];n=this[l++];)if(r=K(n),i=1===n.nodeType&&" "+V(r)+" "){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=V(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,l=0;if(ft.isFunction(e))return this.each(function(t){ft(this).removeClass(e.call(this,t,K(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Dt)||[];n=this[l++];)if(r=K(n),i=1===n.nodeType&&" "+V(r)+" "){for(a=0;o=t[a++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");r!==(s=V(i))&&n.setAttribute("class",s)}return this},toggleClass:function(r,e){var o=typeof r;return"boolean"==typeof e&&"string"===o?e?this.addClass(r):this.removeClass(r):ft.isFunction(r)?this.each(function(t){ft(this).toggleClass(r.call(this,t,K(this),e),e)}):this.each(function(){var t,e,n,i;if("string"===o)for(e=0,n=ft(this),i=r.match(Dt)||[];t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==r&&"boolean"!==o||((t=K(this))&&Nt.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===r?"":Nt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+V(K(n))+" ").indexOf(e))return!0;return!1}});var Ce=/\r/g;ft.fn.extend({val:function(n){var i,t,r,e=this[0];return arguments.length?(r=ft.isFunction(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?n.call(this,t,ft(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=ft.map(e,function(t){return null==t?"":t+""})),(i=ft.valHooks[this.type]||ft.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):e?(i=ft.valHooks[e.type]||ft.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&void 0!==(t=i.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(Ce,""):null==t?"":t:void 0}}),ft.extend({valHooks:{option:{get:function(t){var e=ft.find.attr(t,"value");return null!=e?e:V(ft.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:r.length;for(i=o<0?l:a?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!c(n.parentNode,"optgroup"))){if(e=ft(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=ft.makeArray(e),a=r.length;a--;)((i=r[a]).selected=-1<ft.inArray(ft.valHooks.option.get(i),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),ft.each(["radio","checkbox"],function(){ft.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<ft.inArray(ft(t).val(),e)}},ht.checkOn||(ft.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ke=/^(?:focusinfocus|focusoutblur)$/;ft.extend(ft.event,{trigger:function(t,e,n,i){var r,o,a,s,l,c,u,d=[n||et],h=ct.call(t,"type")?t.type:t,p=ct.call(t,"namespace")?t.namespace.split("."):[];if(o=a=n=n||et,3!==n.nodeType&&8!==n.nodeType&&!ke.test(h+ft.event.triggered)&&(-1<h.indexOf(".")&&(h=(p=h.split(".")).shift(),p.sort()),l=h.indexOf(":")<0&&"on"+h,(t=t[ft.expando]?t:new ft.Event(h,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:ft.makeArray(e,[t]),u=ft.event.special[h]||{},i||!u.trigger||!1!==u.trigger.apply(n,e))){if(!i&&!u.noBubble&&!ft.isWindow(n)){for(s=u.delegateType||h,ke.test(s+h)||(o=o.parentNode);o;o=o.parentNode)d.push(o),a=o;a===(n.ownerDocument||et)&&d.push(a.defaultView||a.parentWindow||S)}for(r=0;(o=d[r++])&&!t.isPropagationStopped();)t.type=1<r?s:u.bindType||h,(c=(Nt.get(o,"events")||{})[t.type]&&Nt.get(o,"handle"))&&c.apply(o,e),(c=l&&o[l])&&c.apply&&Ot(o)&&(t.result=c.apply(o,e),!1===t.result&&t.preventDefault());return t.type=h,i||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(d.pop(),e)||!Ot(n)||l&&ft.isFunction(n[h])&&!ft.isWindow(n)&&((a=n[l])&&(n[l]=null),n[ft.event.triggered=h](),ft.event.triggered=void 0,a&&(n[l]=a)),t.result}},simulate:function(t,e,n){var i=ft.extend(new ft.Event,n,{type:t,isSimulated:!0});ft.event.trigger(i,null,e)}}),ft.fn.extend({trigger:function(t,e){return this.each(function(){ft.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return ft.event.trigger(t,e,n,!0)}}),ft.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){ft.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),ft.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),ht.focusin="onfocusin"in S,ht.focusin||ft.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(t){ft.event.simulate(i,t.target,ft.event.fix(t))};ft.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=Nt.access(t,i);e||t.addEventListener(n,r,!0),Nt.access(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=Nt.access(t,i)-1;e?Nt.access(t,i,e):(t.removeEventListener(n,r,!0),Nt.remove(t,i))}}});var _e=S.location,Re=ft.now(),De=/\?/;ft.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new S.DOMParser).parseFromString(t,"text/xml")}catch(et){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||ft.error("Invalid XML: "+t),e};var Le=/\[\]$/,Pe=/\r?\n/g,Ie=/^(?:submit|button|image|reset|file)$/i,Oe=/^(?:input|select|textarea|keygen)/i;ft.param=function(t,e){var n,i=[],r=function(t,e){var n=ft.isFunction(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!ft.isPlainObject(t))ft.each(t,function(){r(this.name,this.value)});else for(n in t)Y(n,t[n],e,r);return i.join("&")},ft.fn.extend({serialize:function(){return ft.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ft.prop(this,"elements");return t?ft.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ft(this).is(":disabled")&&Oe.test(this.nodeName)&&!Ie.test(t)&&(this.checked||!zt.test(t))}).map(function(t,e){var n=ft(this).val();return null==n?null:Array.isArray(n)?ft.map(n,function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}}):{name:e.name,value:n.replace(Pe,"\r\n")}}).get()}});var Ne=/%20/g,Me=/#.*$/,je=/([?&])_=[^&]*/,Fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Be=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ue=/^(?:GET|HEAD)$/,He=/^\/\//,qe={},We={},Ge="*/".concat("*"),ze=et.createElement("a");ze.href=_e.href,ft.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_e.href,type:"GET",isLocal:Be.test(_e.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ge,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ft.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?J(J(t,ft.ajaxSettings),e):J(ft.ajaxSettings,t)},ajaxPrefilter:X(qe),ajaxTransport:X(We),ajax:function(t,e){function n(t,e,n,i){var r,o,a,s,l,c=e;f||(f=!0,p&&S.clearTimeout(p),u=void 0,h=i||"",T.readyState=0<t?4:0,r=200<=t&&t<300||304===t,n&&(s=Q(m,T,n)),s=Z(m,s,T,r),r?(m.ifModified&&((l=T.getResponseHeader("Last-Modified"))&&(ft.lastModified[d]=l),(l=T.getResponseHeader("etag"))&&(ft.etag[d]=l)),204===t||"HEAD"===m.type?c="nocontent":304===t?c="notmodified":(c=s.state,o=s.data,r=!(a=s.error))):(a=c,!t&&c||(c="error",t<0&&(t=0))),T.status=t,T.statusText=(e||c)+"",r?b.resolveWith(v,[o,c,T]):b.rejectWith(v,[T,c,a]),T.statusCode(x),x=void 0,g&&y.trigger(r?"ajaxSuccess":"ajaxError",[T,m,r?o:a]),w.fireWith(v,[T,c]),g&&(y.trigger("ajaxComplete",[T,m]),--ft.active||ft.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var u,d,h,i,p,r,f,g,o,a,m=ft.ajaxSetup({},e),v=m.context||m,y=m.context&&(v.nodeType||v.jquery)?ft(v):ft.event,b=ft.Deferred(),w=ft.Callbacks("once memory"),x=m.statusCode||{},s={},l={},c="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(f){if(!i)for(i={};e=Fe.exec(h);)i[e[1].toLowerCase()]=e[2];e=i[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return f?h:null},setRequestHeader:function(t,e){return null==f&&(t=l[t.toLowerCase()]=l[t.toLowerCase()]||t,s[t]=e),this},overrideMimeType:function(t){return null==f&&(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(f)T.always(t[T.status]);else for(e in t)x[e]=[x[e],t[e]];return this},abort:function(t){var e=t||c;return u&&u.abort(e),n(0,e),this}};if(b.promise(T),m.url=((t||m.url||_e.href)+"").replace(He,_e.protocol+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(Dt)||[""],null==m.crossDomain){r=et.createElement("a");try{r.href=m.url,r.href=r.href,m.crossDomain=ze.protocol+"//"+ze.host!=r.protocol+"//"+r.host}catch(xt){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ft.param(m.data,m.traditional)),$(qe,m,e,T),f)return T;for(o in(g=ft.event&&m.global)&&0==ft.active++&&ft.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Ue.test(m.type),d=m.url.replace(Me,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Ne,"+")):(a=m.url.slice(d.length),m.data&&(d+=(De.test(d)?"&":"?")+m.data,delete m.data),!1===m.cache&&(d=d.replace(je,"$1"),a=(De.test(d)?"&":"?")+"_="+Re+++a),m.url=d+a),m.ifModified&&(ft.lastModified[d]&&T.setRequestHeader("If-Modified-Since",ft.lastModified[d]),ft.etag[d]&&T.setRequestHeader("If-None-Match",ft.etag[d])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&T.setRequestHeader("Content-Type",m.contentType),T.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Ge+"; q=0.01":""):m.accepts["*"]),m.headers)T.setRequestHeader(o,m.headers[o]);if(m.beforeSend&&(!1===m.beforeSend.call(v,T,m)||f))return T.abort();if(c="abort",w.add(m.complete),T.done(m.success),T.fail(m.error),u=$(We,m,e,T)){if(T.readyState=1,g&&y.trigger("ajaxSend",[T,m]),f)return T;m.async&&0<m.timeout&&(p=S.setTimeout(function(){T.abort("timeout")},m.timeout));try{f=!1,u.send(s,n)}catch(xt){if(f)throw xt;n(-1,xt)}}else n(-1,"No Transport");return T},getJSON:function(t,e,n){return ft.get(t,e,n,"json")},getScript:function(t,e){return ft.get(t,void 0,e,"script")}}),ft.each(["get","post"],function(t,r){ft[r]=function(t,e,n,i){return ft.isFunction(e)&&(i=i||n,n=e,e=void 0),ft.ajax(ft.extend({url:t,type:r,dataType:i,data:e,success:n},ft.isPlainObject(t)&&t))}}),ft._evalUrl=function(t){return ft.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},ft.fn.extend({wrapAll:function(t){var e;return this[0]&&(ft.isFunction(t)&&(t=t.call(this[0])),e=ft(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return ft.isFunction(n)?this.each(function(t){ft(this).wrapInner(n.call(this,t))}):this.each(function(){var t=ft(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=ft.isFunction(e);return this.each(function(t){ft(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){ft(this).replaceWith(this.childNodes)}),this}}),ft.expr.pseudos.hidden=function(t){return!ft.expr.pseudos.visible(t)},ft.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},ft.ajaxSettings.xhr=function(){try{return new S.XMLHttpRequest}catch(t){}};var Ve={0:200,1223:204},Ke=ft.ajaxSettings.xhr();ht.cors=!!Ke&&"withCredentials"in Ke,ht.ajax=Ke=!!Ke,ft.ajaxTransport(function(r){var o,a;if(ht.cors||Ke&&!r.crossDomain)return{send:function(t,e){var n,i=r.xhr();if(i.open(r.type,r.url,r.async
,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)i.setRequestHeader(n,t[n]);o=function(t){return function(){o&&(o=a=i.onload=i.onerror=i.onabort=i.onreadystatechange=null,"abort"===t?i.abort():"error"===t?"number"!=typeof i.status?e(0,"error"):e(i.status,i.statusText):e(Ve[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=o(),a=i.onerror=o("error"),void 0!==i.onabort?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&S.setTimeout(function(){o&&a()})},o=o("abort");try{i.send(r.hasContent&&r.data||null)}catch(at){if(o)throw at}},abort:function(){o&&o()}}}),ft.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),ft.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return ft.globalEval(t),t}}}),ft.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),ft.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(t,e){i=ft("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(t){i.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),et.head.appendChild(i[0])},abort:function(){r&&r()}}});var Ye,Xe=[],$e=/(=)\?(?=&|$)|\?\?/;ft.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Xe.pop()||ft.expando+"_"+Re++;return this[t]=!0,t}}),ft.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,o,a=!1!==t.jsonp&&($e.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&$e.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=ft.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace($e,"$1"+i):!1!==t.jsonp&&(t.url+=(De.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||ft.error(i+" was not called"),o[0]},t.dataTypes[0]="json",r=S[i],S[i]=function(){o=arguments},n.always(function(){void 0===r?ft(S).removeProp(i):S[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,Xe.push(i)),o&&ft.isFunction(r)&&r(o[0]),o=r=void 0}),"script"}),ht.createHTMLDocument=((Ye=et.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ye.childNodes.length),ft.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(ht.createHTMLDocument?((i=(e=et.implementation.createHTMLDocument("")).createElement("base")).href=et.location.href,e.head.appendChild(i)):e=et),o=!n&&[],(r=St.exec(t))?[e.createElement(r[1])]:(r=b([t],e,o),o&&o.length&&ft(o).remove(),ft.merge([],r.childNodes)));var i,r,o},ft.fn.load=function(t,e,n){var i,r,o,a=this,s=t.indexOf(" ");return-1<s&&(i=V(t.slice(s)),t=t.slice(0,s)),ft.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<a.length&&ft.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?ft("<div>").append(ft.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},ft.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ft.fn[e]=function(t){return this.on(e,t)}}),ft.expr.pseudos.animated=function(e){return ft.grep(ft.timers,function(t){return e===t.elem}).length},ft.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,c=ft.css(t,"position"),u=ft(t),d={};"static"===c&&(t.style.position="relative"),s=u.offset(),o=ft.css(t,"top"),l=ft.css(t,"left"),("absolute"===c||"fixed"===c)&&-1<(o+l).indexOf("auto")?(a=(i=u.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),ft.isFunction(e)&&(e=e.call(t,n,ft.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):u.css(d)}},ft.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ft.offset.setOffset(this,e,t)});var t,n,i,r,o=this[0];return o?o.getClientRects().length?(i=o.getBoundingClientRect(),n=(t=o.ownerDocument).documentElement,r=t.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===ft.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),c(t[0],"html")||(i=t.offset()),i={top:i.top+ft.css(t[0],"borderTopWidth",!0),left:i.left+ft.css(t[0],"borderLeftWidth",!0)}),{top:e.top-i.top-ft.css(n,"marginTop",!0),left:e.left-i.left-ft.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===ft.css(t,"position");)t=t.offsetParent;return t||Qt})}}),ft.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var o="pageYOffset"===r;ft.fn[e]=function(t){return It(this,function(t,e,n){var i;return ft.isWindow(t)?i=t:9===t.nodeType&&(i=t.defaultView),void 0===n?i?i[r]:t[e]:void(i?i.scrollTo(o?i.pageXOffset:n,o?n:i.pageYOffset):t[e]=n)},e,t,arguments.length)}}),ft.each(["top","left"],function(t,n){ft.cssHooks[n]=P(ht.pixelPosition,function(t,e){if(e)return e=L(t,n),le.test(e)?ft(t).position()[n]+"px":e})}),ft.each({Height:"height",Width:"width"},function(a,s){ft.each({padding:"inner"+a,content:s,"":"outer"+a},function(i,o){ft.fn[o]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),r=i||(!0===t||!0===e?"margin":"border");return It(this,function(t,e,n){var i;return ft.isWindow(t)?0===o.indexOf("outer")?t["inner"+a]:t.document.documentElement["client"+a]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+a],i["scroll"+a],t.body["offset"+a],i["offset"+a],i["client"+a])):void 0===n?ft.css(t,e,r):ft.style(t,e,n,r)},s,n?t:void 0,n)}})}),ft.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),ft.holdReady=function(t){t?ft.readyWait++:ft.ready(!0)},ft.isArray=Array.isArray,ft.parseJSON=JSON.parse,ft.nodeName=c,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ft});var Je=S.jQuery,Qe=S.$;return ft.noConflict=function(t){return S.$===ft&&(S.$=Qe),t&&S.jQuery===ft&&(S.jQuery=Je),ft},t||(S.jQuery=S.$=ft),ft}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(_){function i(t,e){var n,i,r,o=t.nodeName.toLowerCase();return"area"===o?(i=(n=t.parentNode).name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&(!!(r=_("img[usemap='#"+i+"']")[0])&&a(r))):(/^(input|select|textarea|button|object)$/.test(o)?!t.disabled:"a"===o&&t.href||e)&&a(t)}function a(t){return _.expr.filters.visible(t)&&!_(t).parents().addBack().filter(function(){return"hidden"===_.css(this,"visibility")}).length}var t,r,e,n;_.ui=_.ui||{},_.extend(_.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),_.fn.extend({scrollParent:function(t){var e=this.css("position"),n="absolute"===e,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=_(this);return(!n||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&r.length?r:_(this[0].ownerDocument||document)},uniqueId:(n=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&_(this).removeAttr("id")})}}),_.extend(_.expr[":"],{data:_.expr.createPseudo?_.expr.createPseudo(function(e){return function(t){return!!_.data(t,e)}}):function(t,e,n){return!!_.data(t,n[3])},focusable:function(t){return i(t,!isNaN(_.attr(t,"tabindex")))},tabbable:function(t){var e=_.attr(t,"tabindex"),n=isNaN(e);return(n||0<=e)&&i(t,!n)}}),_("<a>").outerWidth(1).jquery||_.each(["Width","Height"],function(t,n){function i(t,e,n,i){return _.each(r,function(){e-=parseFloat(_.css(t,"padding"+this))||0,n&&(e-=parseFloat(_.css(t,"border"+this+"Width"))||0),i&&(e-=parseFloat(_.css(t,"margin"+this))||0)}),e}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:_.fn.innerWidth,innerHeight:_.fn.innerHeight,outerWidth:_.fn.outerWidth,outerHeight:_.fn.outerHeight};_.fn["inner"+n]=function(t){return void 0===t?a["inner"+n].call(this):this.each(function(){_(this).css(o,i(this,t)+"px")})},_.fn["outer"+n]=function(t,e){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){_(this).css(o,i(this,t,!0,e)+"px")})}}),_.fn.addBack||(_.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),_("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(_.fn.removeData=(e=_.fn.removeData,function(t){return arguments.length?e.call(this,_.camelCase(t)):e.call(this)})),_.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),_.fn.extend({focus:(r=_.fn.focus,function(e,n){return"number"==typeof e?this.each(function(){var t=this;setTimeout(function(){_(t).focus(),n&&n.call(t)},e)}):r.apply(this,arguments)}),disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var e,n,i=_(this[0]);i.length&&i[0]!==document;){if(("absolute"===(e=i.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(i.css("zIndex"),10),!isNaN(n)&&0!==n))return n;i=i.parent()}return 0}}),_.ui.plugin={add:function(t,e,n){var i,r=_.ui[t].prototype;for(i in n)r.plugins[i]=r.plugins[i]||[],r.plugins[i].push([e,n[i]])},call:function(t,e,n,i){var r,o=t.plugins[e];if(o&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;o.length>r;r++)t.options[o[r][0]]&&o[r][1].apply(t.element,n)}};var o,s=0,l=Array.prototype.slice;_.cleanData=(o=_.cleanData,function(t){var e,n,i;for(i=0;null!=(n=t[i]);i++)try{(e=_._data(n,"events"))&&e.remove&&_(n).triggerHandler("remove")}catch(r){}o(t)}),_.widget=function(t,n,e){var i,r,o,a,s={},l=t.split(".")[0];return t=t.split(".")[1],i=l+"-"+t,e||(e=n,n=_.Widget),_.expr[":"][i.toLowerCase()]=function(t){return!!_.data(t,i)},_[l]=_[l]||{},r=_[l][t],o=_[l][t]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},_.extend(o,r,{version:e.version,_proto:_.extend({},e),_childConstructors:[]}),(a=new n).options=_.widget.extend({},a.options),_.each(e,function(e,i){return _.isFunction(i)?void(s[e]=(r=function(){return n.prototype[e].apply(this,arguments)},o=function(t){return n.prototype[e].apply(this,t)},function(){var t,e=this._super,n=this._superApply;return this._super=r,this._superApply=o,t=i.apply(this,arguments),this._super=e,this._superApply=n,t})):void(s[e]=i);var r,o}),o.prototype=_.widget.extend(a,{widgetEventPrefix:r&&a.widgetEventPrefix||t},s,{constructor:o,namespace:l,widgetName:t,widgetFullName:i}),r?(_.each(r._childConstructors,function(t,e){var n=e.prototype;_.widget(n.namespace+"."+n.widgetName,o,e._proto)}),delete r._childConstructors):n._childConstructors.push(o),_.widget.bridge(t,o),o},_.widget.extend=function(t){for(var e,n,i=l.call(arguments,1),r=0,o=i.length;r<o;r++)for(e in i[r])n=i[r][e],i[r].hasOwnProperty(e)&&void 0!==n&&(t[e]=_.isPlainObject(n)?_.isPlainObject(t[e])?_.widget.extend({},t[e],n):_.widget.extend({},n):n);return t},_.widget.bridge=function(o,e){var a=e.prototype.widgetFullName||o;_.fn[o]=function(n){var t="string"==typeof n,i=l.call(arguments,1),r=this;return t?this.each(function(){var t,e=_.data(this,a);return"instance"===n?(r=e,!1):e?_.isFunction(e[n])&&"_"!==n.charAt(0)?(t=e[n].apply(e,i))!==e&&void 0!==t?(r=t&&t.jquery?r.pushStack(t.get()):t,!1):void 0:_.error("no such method '"+n+"' for "+o+" widget instance"):_.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+n+"'")}):(i.length&&(n=_.widget.extend.apply(null,[n].concat(i))),this.each(function(){var t=_.data(this,a);t?(t.option(n||{}),t._init&&t._init()):_.data(this,a,new e(n,this))})),r}},_.Widget=function(){},_.Widget._childConstructors=[],_.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,e){e=_(e||this.defaultElement||this)[0],this.element=_(e),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=_(),this.hoverable=_(),this.focusable=_(),e!==this&&(_.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=_(e.style?e.ownerDocument:e.document||e),this.window=_(this.document[0].defaultView||this.document[0].parentWindow)),this.options=_.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:_.noop,_getCreateEventData:_.noop,_create:_.noop,_init:_.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(_.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:_.noop,widget:function(){return this.element},option:function(t,e){var n,i,r,o=t;if(0===arguments.length)return _.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(n=t.split(".")).shift(),n.length){for(i=o[t]=_.widget.extend({},this.options[t]),r=0;n.length-1>r;r++)i[n[r]]=i[n[r]]||{},i=i[n[r]];if(t=n.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(a,s,t){var l,c=this;"boolean"!=typeof a&&(t=s,s=a,a=!1),t?(s=l=_(s),this.bindings=this.bindings.add(s)):(t=s,s=this.element,l=this.widget()),_.each(t,function(t,e){function n(){return a||!0!==c.options.disabled&&!_(this).hasClass("ui-state-disabled")?("string"==typeof e?c[e]:e).apply(c,arguments):void 0}"string"!=typeof e&&(n.guid=e.guid=e.guid||n.guid||_.guid++);var i=t.match(/^([\w:-]*)\s*(.*)$/),r=i[1]+c.eventNamespace,o=i[2];o?l.delegate(o,r,n):s.bind(r,n)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e),this.bindings=_(this.bindings.not(t).get()),this.focusable=_(this.focusable.not(t).get()),this.hoverable=_(this.hoverable.not(t).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){_(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){_(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){_(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){_(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,e,n){var i,r,o=this.options[t];if(n=n||{},(e=_.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],r=e.originalEvent)for(i in r)i in e||(e[i]=r[i]);return this.element.trigger(e,n),!(_.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}},_.each({show:"fadeIn",hide:"fadeOut"},function(o,a){_.Widget.prototype["_"+o]=function(e,t,n){"string"==typeof t&&(t={effect:t});var i,r=t?!0===t||"number"==typeof t?a:t.effect||a:o;"number"==typeof(t=t||{})&&(t={duration:t}),i=!_.isEmptyObject(t),t.complete=n,t.delay&&e.delay(t.delay),i&&_.effects&&_.effects.effect[r]?e[o](t):r!==o&&e[r]?e[r](t.duration,t.easing,n):e.queue(function(t){_(this)[o](),n&&n.call(e[0]),t()})}}),_.widget;var c=!1;_(document).mouseup(function(){c=!1}),_.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){return!0===_.data(t.target,e.widgetName+".preventClickEvent")?(_.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!c){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,n=1===t.which,i=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&_(t.target).closest(this.options.cancel).length;return n&&!i&&this._mouseCapture(t)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?t.preventDefault():(!0===_.data(t.target,this.widgetName+".preventClickEvent")&&_.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),c=!0)),!0}},_mouseMove:function(t){if(this._mouseMoved){if(_.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&_.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),c=!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function T(t,e,n){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?n/100:1)]}function S(t,e){return parseInt(_.css(t,e),10)||0}function e(t){var e=t[0];return 9===e.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:_.isWindow(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}_.ui=_.ui||{};var r,E,A=Math.max,C=Math.abs,k=Math.round,i=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,n=_.fn.position;_.position={scrollbarWidth:function(){if(void 0!==r)return r;var t,e,n=_("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=n.children()[0];return _("body").append(n),t=i.offsetWidth,n.css("overflow","scroll"),t===(e=i.offsetWidth)&&(e=n[0].clientWidth),n.remove(),r=t-e},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?_.position.scrollbarWidth():0,height:i?_.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=_(t||window),n=_.isWindow(e[0]),i=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:n,isDocument:i,offset:e.offset()||{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:n||i?e.width():e.outerWidth(),height:n||i?e.height():e.outerHeight()}}},_.fn.position=function(d){if(!d||!d.of)return n.apply(this,arguments);d=_.extend({},d);var h,p,f,g,m,t,v=_(d.of),y=_.position.getWithinInfo(d.within),b=_.position.getScrollInfo(y),w=(d.collision||"flip").split(" "),x={};return t=e(v),v[0].preventDefault&&(d.at="left top"),p=t.width,f=t.height,g=t.offset,m=_.extend({},g),_.each(["my","at"],function(){var t,e,n=(d[this]||"").split(" ");1===n.length&&(n=i.test(n[0])?n.concat(["center"]):o.test(n[0])?["center"].concat(n):["center","center"]),n[0]=i.test(n[0])?n[0]:"center",n[1]=o.test(n[1])?n[1]:"center",t=a.exec(n[0]),e=a.exec(n[1]),x[this]=[t?t[0]:0,e?e[0]:0],d[this]=[s.exec(n[0])[0],s.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===d.at[0]?m.left+=p:"center"===d.at[0]&&(m.left+=p/2),"bottom"===d.at[1]?m.top+=f:"center"===d.at[1]&&(m.top+=f/2),h=T(x.at,p,f),m.left+=h[0],m.top+=h[1],this.each(function(){var n,t,a=_(this),s=a.outerWidth(),l=a.outerHeight(),e=S(this,"marginLeft"),i=S(this,"marginTop"),r=s+e+S(this,"marginRight")+b.width,o=l+i+S(this,"marginBottom")+b.height,c=_.extend({},m),u=T(x.my,a.outerWidth(),a.outerHeight());"right"===d.my[0]?c.left-=s:"center"===d.my[0]&&(c.left-=s/2),"bottom"===d.my[1]?c.top-=l:"center"===d.my[1]&&(c.top-=l/2),c.left+=u[0],c.top+=u[1],E||(c.left=k(c.left),c.top=k(c.top)),n={marginLeft:e,marginTop:i},_.each(["left","top"],function(t,e){_.ui.position[w[t]]&&_.ui.position[w[t]][e](c,{targetWidth:p,targetHeight:f,elemWidth:s,elemHeight:l,collisionPosition:n,collisionWidth:r,collisionHeight:o,offset:[h[0]+u[0],h[1]+u[1]],my:d.my,at:d.at,within:y,elem:a})}),d.using&&(t=function(t){var e=g.left-c.left,n=e+p-s,i=g.top-c.top,r=i+f-l,o={target:{element:v,left:g.left,top:g.top,width:p,height:f},element:{element:a,left:c.left,top:c.top,width:s,height:l},horizontal:n<0?"left":0<e?"right":"center",vertical:r<0?"top":0<i?"bottom":"middle"};p<s&&p>C(e+n)&&(o.horizontal="center"),f<l&&f>C(i+r)&&(o.vertical="middle"),o.important=A(C(e),C(n))>A(C(i),C(r))?"horizontal":"vertical",d.using.call(this,t,o)}),a.offset(_.extend(c,{using:t}))})},_.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,a=t.left-e.collisionPosition.marginLeft,s=r-a,l=a+e.collisionWidth-o-r;e.collisionWidth>o?0<s&&l<=0?(n=t.left+s+e.collisionWidth-o-r,t.left+=s-n):t.left=0<l&&s<=0?r:l<s?r+o-e.collisionWidth:r:0<s?t.left+=s:0<l?t.left-=l:t.left=A(t.left-a,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,s=r-a,l=a+e.collisionHeight-o-r;e.collisionHeight>o?0<s&&l<=0?(n=t.top+s+e.collisionHeight-o-r,t.top+=s-n):t.top=0<l&&s<=0?r:l<s?r+o-e.collisionHeight:r:0<s?t.top+=s:0<l?t.top-=l:t.top=A(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,o=r.offset.left+r.scrollLeft,a=r.width,s=r.isWindow?r.scrollLeft:r.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-s,u=l+e.collisionWidth-a-s,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];c<0?((n=t.left+d+h+p+e.collisionWidth-a-o)<0||C(c)>n)&&(t.left+=d+h+p):0<u&&((0<(i=t.left-e.collisionPosition.marginLeft+d+h+p-s)||u>C(i))&&(t.left+=d+h+p))},top:function(t,e){var n,i,r=e.within,o=r.offset.top+r.scrollTop,a=r.height,s=r.isWindow?r.scrollTop:r.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-s,u=l+e.collisionHeight-a-s,d="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];c<0?((i=t.top+d+h+p+e.collisionHeight-a-o)<0||C(c)>i)&&(t.top+=d+h+p):0<u&&((0<(n=t.top-e.collisionPosition.marginTop+d+h+p-s)||u>C(n))&&(t.top+=d+h+p))}},flipfit:{left:function(){_.ui.position.flip.left.apply(this,arguments),_.ui.position.fit.left.apply(this,arguments)},top:function(){_.ui.position.flip.top.apply(this,arguments),_.ui.position.fit.top.apply(this,arguments)}}},function(){var t,e,n,i,r,o=document.getElementsByTagName("body")[0],a=document.createElement("div");for(r in t=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&_.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)t.style[r]=n[r];t.appendChild(a),(e=o||document.documentElement).insertBefore(t,e.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",i=_(a).offset().left,E=10<i&&i<11,t.innerHTML="",e.removeChild(t)}()}(),_.ui.position,_.widget("ui.draggable",_.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return this._blurActiveElement(t),!(this.helper||e.disabled||0<_(t.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blockFrames(!0===e.iframeFix?"iframe":e.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=_(this);return _("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=this.document[0];if(this.handleElement.is(t.target))try{e.activeElement&&"body"!==e.activeElement.nodeName.toLowerCase()&&_(e.activeElement).blur()}catch(s){}},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),_.ui.ddmanager&&(_.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===_(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),_.ui.ddmanager&&!e.dropBehaviour&&_.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),_.ui.ddmanager&&_.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,e){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!e){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",_.ui.ddmanager&&_.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=this,n=!1;return _.ui.ddmanager&&!this.options.dropBehaviour&&(n=_.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||_.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?_(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),_.ui.ddmanager&&_.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),_.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!_(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var e=this.options,n=_.isFunction(e.helper),i=n?_(e.helper.apply(this.element[0],[t])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo),n&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),_.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&_.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(
this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options,r=this.document[0];return this.relativeContainer=null,i.containment?"window"===i.containment?void(this.containment=[_(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,_(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,_(window).scrollLeft()+_(window).width()-this.helperProportions.width-this.margins.left,_(window).scrollTop()+(_(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===i.containment?void(this.containment=[0,0,_(r).width()-this.helperProportions.width-this.margins.left,(_(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):i.containment.constructor===Array?void(this.containment=i.containment):("parent"===i.containment&&(i.containment=this.helper[0].parentNode),void((n=(e=_(i.containment))[0])&&(t=/(scroll|auto)/.test(e.css("overflow")),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=e))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,e,n){return n=n||this._uiHash(),_.ui.plugin.call(this,t,[e,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),_.Widget.prototype._trigger.call(this,t,e,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),_.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,n){var i=_.extend({},t,{item:n.element});n.sortables=[],_(n.options.connectToSortable).each(function(){var t=_(this).sortable("instance");t&&!t.options.disabled&&(n.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,i))})},stop:function(e,t,n){var i=_.extend({},t,{item:n.element});n.cancelHelperRemoval=!1,_.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,i))})},drag:function(n,i,r){_.each(r.sortables,function(){var t=!1,e=this;e.positionAbs=r.positionAbs,e.helperProportions=r.helperProportions,e.offset.click=r.offset.click,e._intersectsWith(e.containerCache)&&(t=!0,_.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==e&&this._intersectsWith(this.containerCache)&&_.contains(e.element[0],this.element[0])&&(t=!1),t})),t?(e.isOver||(e.isOver=1,r._parent=i.helper.parent(),e.currentItem=i.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return i.helper[0]},n.target=e.currentItem[0],e._mouseCapture(n,!0),e._mouseStart(n,!0,!0),e.offset.click.top=r.offset.click.top,e.offset.click.left=r.offset.click.left,e.offset.parent.left-=r.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=r.offset.parent.top-e.offset.parent.top,r._trigger("toSortable",n),r.dropped=e.element,_.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,e.fromOutside=r),e.currentItem&&(e._mouseDrag(n),i.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,e.options.revert=!1,e._trigger("out",n,e._uiHash(e)),e._mouseStop(n,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),i.helper.appendTo(r._parent),r._refreshOffsets(n),i.position=r._generatePosition(n,!0),r._trigger("fromSortable",n),r.dropped=!1,_.each(r.sortables,function(){this.refreshPositions()}))})}}),_.ui.plugin.add("draggable","cursor",{start:function(t,e,n){var i=_("body"),r=n.options;i.css("cursor")&&(r._cursor=i.css("cursor")),i.css("cursor",r.cursor)},stop:function(t,e,n){var i=n.options;i._cursor&&_("body").css("cursor",i._cursor)}}),_.ui.plugin.add("draggable","opacity",{start:function(t,e,n){var i=_(e.helper),r=n.options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(t,e,n){var i=n.options;i._opacity&&_(e.helper).css("opacity",i._opacity)}}),_.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,e,n){var i=n.options,r=!1,o=n.scrollParentNotHidden[0],a=n.document[0];o!==a&&"HTML"!==o.tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=r=o.scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=r=o.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=r=o.scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=r=o.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-_(a).scrollTop()<i.scrollSensitivity?r=_(a).scrollTop(_(a).scrollTop()-i.scrollSpeed):_(window).height()-(t.pageY-_(a).scrollTop())<i.scrollSensitivity&&(r=_(a).scrollTop(_(a).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-_(a).scrollLeft()<i.scrollSensitivity?r=_(a).scrollLeft(_(a).scrollLeft()-i.scrollSpeed):_(window).width()-(t.pageX-_(a).scrollLeft())<i.scrollSensitivity&&(r=_(a).scrollLeft(_(a).scrollLeft()+i.scrollSpeed)))),!1!==r&&_.ui.ddmanager&&!i.dropBehaviour&&_.ui.ddmanager.prepareOffsets(n,t)}}),_.ui.plugin.add("draggable","snap",{start:function(t,e,n){var i=n.options;n.snapElements=[],_(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=_(this),e=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e,n){var i,r,o,a,s,l,c,u,d,h,p=n.options,f=p.snapTolerance,g=e.offset.left,m=g+n.helperProportions.width,v=e.offset.top,y=v+n.helperProportions.height;for(d=n.snapElements.length-1;0<=d;d--)l=(s=n.snapElements[d].left-n.margins.left)+n.snapElements[d].width,u=(c=n.snapElements[d].top-n.margins.top)+n.snapElements[d].height,m<s-f||l+f<g||y<c-f||u+f<v||!_.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)?(n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,_.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(i=f>=Math.abs(c-y),r=f>=Math.abs(u-v),o=f>=Math.abs(s-m),a=f>=Math.abs(l-g),i&&(e.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),r&&(e.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),o&&(e.position.left=n._convertPositionTo("relative",{top:0,left:s-n.helperProportions.width}).left),a&&(e.position.left=n._convertPositionTo("relative",{top:0,left:l}).left)),h=i||r||o||a,"outer"!==p.snapMode&&(i=f>=Math.abs(c-v),r=f>=Math.abs(u-y),o=f>=Math.abs(s-g),a=f>=Math.abs(l-m),i&&(e.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),r&&(e.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),o&&(e.position.left=n._convertPositionTo("relative",{top:0,left:s}).left),a&&(e.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left)),!n.snapElements[d].snapping&&(i||r||o||a||h)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,_.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=i||r||o||a||h)}}),_.ui.plugin.add("draggable","stack",{start:function(t,e,n){var i,r=n.options,o=_.makeArray(_(r.stack)).sort(function(t,e){return(parseInt(_(t).css("zIndex"),10)||0)-(parseInt(_(e).css("zIndex"),10)||0)});o.length&&(i=parseInt(_(o[0]).css("zIndex"),10)||0,_(o).each(function(t){_(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length))}}),_.ui.plugin.add("draggable","zIndex",{start:function(t,e,n){var i=_(e.helper),r=n.options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,e,n){var i=n.options;i._zIndex&&_(e.helper).css("zIndex",i._zIndex)}}),_.ui.draggable,_.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=_.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(t){return arguments.length?void(e=t):e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(t.scope),t.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){_.ui.ddmanager.droppables[t]=_.ui.ddmanager.droppables[t]||[],_.ui.ddmanager.droppables[t].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=_.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,e){if("accept"===t)this.accept=_.isFunction(e)?e:function(t){return t.is(e)};else if("scope"===t){var n=_.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(e)}this._super(t,e)},_activate:function(t){var e=_.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=_.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=_.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=_.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(e)))},_drop:function(e,t){var n=t||_.ui.ddmanager.current,i=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=_(this).droppable("instance");return t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&_.ui.intersect(n,_.extend(t,{offset:t.element.offset()}),t.options.tolerance,e)?!(i=!0):void 0}),!i&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),_.ui.intersect=function(){function h(t,e,n){return e<=t&&t<e+n}return function(t,e,n,i){if(!e.offset)return!1;var r=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,a=r+t.helperProportions.width,s=o+t.helperProportions.height,l=e.offset.left,c=e.offset.top,u=l+e.proportions().width,d=c+e.proportions().height;switch(n){case"fit":return l<=r&&a<=u&&c<=o&&s<=d;case"intersect":return r+t.helperProportions.width/2>l&&u>a-t.helperProportions.width/2&&o+t.helperProportions.height/2>c&&d>s-t.helperProportions.height/2;case"pointer":return h(i.pageY,c,e.proportions().height)&&h(i.pageX,l,e.proportions().width);case"touch":return(c<=o&&o<=d||c<=s&&s<=d||o<c&&d<s)&&(l<=r&&r<=u||l<=a&&a<=u||r<l&&u<a);default:return!1}}}(),_.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,e){var n,i,r=_.ui.ddmanager.droppables[t.options.scope]||[],o=e?e.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(n=0;r.length>n;n++)if(!(r[n].options.disabled||t&&!r[n].accept.call(r[n].element[0],t.currentItem||t.element))){for(i=0;a.length>i;i++)if(a[i]===r[n].element[0]){r[n].proportions().height=0;continue t}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===o&&r[n]._activate.call(r[n],e),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(t,e){var n=!1;return _.each((_.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&_.ui.intersect(t,this,this.options.tolerance,e)&&(n=this._drop.call(this,e)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))}),n},dragStart:function(t,e){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||_.ui.ddmanager.prepareOffsets(t,e)})},drag:function(o,a){o.options.refreshPositions&&_.ui.ddmanager.prepareOffsets(o,a),_.each(_.ui.ddmanager.droppables[o.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var t,e,n,i=_.ui.intersect(o,this,this.options.tolerance,a),r=!i&&this.isover?"isout":i&&!this.isover?"isover":null;r&&(this.options.greedy&&(e=this.options.scope,(n=this.element.parents(":data(ui-droppable)").filter(function(){return _(this).droppable("instance").options.scope===e})).length&&((t=_(n[0]).droppable("instance")).greedyChild="isover"===r)),t&&"isover"===r&&(t.isover=!1,t.isout=!0,t._out.call(t,a)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,a),t&&"isout"===r&&(t.isout=!1,t.isover=!0,t._over.call(t,a)))}})},dragStop:function(t,e){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||_.ui.ddmanager.prepareOffsets(t,e)}},_.ui.droppable,_.widget("ui.selectable",_.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,e=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=_(e.options.filter,e.element[0])).addClass("ui-selectee"),t.each(function(){var t=_(this),e=t.offset();_.data(this,"selectable-item",{element:this,$element:t,left:e.left,top:e.top,right:e.left+t.outerWidth(),bottom:e.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=_("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(n){var i=this,t=this.options;this.opos=[n.pageX,n.pageY],this.options.disabled||(this.selectees=_(t.filter,this.element[0]),this._trigger("start",n),_(t.appendTo).append(this.helper),this.helper.css({left:n.pageX,top:n.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=_.data(this,"selectable-item");t.startselected=!0,n.metaKey||n.ctrlKey||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element}))}),_(n.target).parents().addBack().each(function(){var t,e=_.data(this,"selectable-item");return e?(t=!n.metaKey&&!n.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(t?"ui-unselecting":"ui-selected").addClass(t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?i._trigger("selecting",n,{selecting:e.element}):i._trigger("unselecting",n,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(n){if(this.dragged=!0,!this.options.disabled){var t,i=this,r=this.options,o=this.opos[0],a=this.opos[1],s=n.pageX,l=n.pageY;return s<o&&(t=s,s=o,o=t),l<a&&(t=l,l=a,a=t),this.helper.css({left:o,top:a,width:s-o,height:l-a}),this.selectees.each(function(){var t=_.data(this,"selectable-item"),e=!1;t&&t.element!==i.element[0]&&("touch"===r.tolerance?e=!(t.left>s||o>t.right||t.top>l||a>t.bottom):"fit"===r.tolerance&&(e=t.left>o&&s>t.right&&t.top>a&&l>t.bottom),e?(t.selected&&(t.$element.removeClass("ui-selected"),t.selected=!1),t.unselecting&&(t.$element.removeClass("ui-unselecting"),t.unselecting=!1),t.selecting||(t.$element.addClass("ui-selecting"),t.selecting=!0,i._trigger("selecting",n,{selecting:t.element}))):(t.selecting&&((n.metaKey||n.ctrlKey)&&t.startselected?(t.$element.removeClass("ui-selecting"),t.selecting=!1,t.$element.addClass("ui-selected"),t.selected=!0):(t.$element.removeClass("ui-selecting"),t.selecting=!1,t.startselected&&(t.$element.addClass("ui-unselecting"),t.unselecting=!0),i._trigger("unselecting",n,{unselecting:t.element}))),t.selected&&(n.metaKey||n.ctrlKey||t.startselected||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element})))))}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,_(".ui-unselecting",this.element[0]).each(function(){var t=_.data(this,"selectable-item");t.$element.removeClass("ui-unselecting"),t.unselecting=!1,t.startselected=!1,n._trigger("unselected",e,{unselected:t.element})}),_(".ui-selecting",this.element[0]).each(function(){var t=_.data(this,"selectable-item");t.$element.removeClass("ui-selecting").addClass("ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,n._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),_.widget("ui.sortable",_.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return e<=t&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),_.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var n=null,i=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),_(t.target).parents().each(function(){return _.data(this,r.widgetName+"-item")===r?(n=_(this),!1):void 0}),_.data(t.target,r.widgetName+"-item")===r&&(n=_(t.target)),!!n&&(!(this.options.handle&&!e&&(_(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,n){var i,r,o=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},_.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",o.cursor),this.storedStylesheet=_("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(i=this.containers.length-1;0<=i;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return _.ui.ddmanager&&(_.ui.ddmanager.current=this),_.ui.ddmanager&&!o.dropBehaviour&&_.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,n,i,r,o=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==a&&_.ui.ddmanager&&!o.dropBehaviour&&_.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(i=(n=this.items[e]).item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==i&&!_.contains(this.placeholder[0],i)&&("semi-dynamic"!==this.options.type||!_.contains(this.element[0],i))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),_.ui.ddmanager&&_.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(_.ui.ddmanager&&!this.options.dropBehaviour&&_.ui.ddmanager.drop(this,t),this.options.revert){var n=this,i=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,_(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),_.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?_(this.domPosition.prev).after(this.currentItem):_(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},_(t).each(function(){var t=(_(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&n.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e.each(function(){n.push(_(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=t.left,a=o+t.width,s=t.top,l=s+t.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s<i+c&&i+c<l,h="y"===this.options.axis||o<e+u&&e+u<a,p=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>n-this.helperProportions.width/2&&i+this.helperProportions.height/2>s&&l>r-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=e&&n,r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!i&&(this.floating?o&&"right"===o||"down"===r?2:1:r&&("down"===r?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){function e(){a.push(this)}var n,i,r,o,a=[],s=[],l=this._connectWith();if(l&&t)for(n=l.length-1;0<=n;n--)for(i=(r=_(l[n],this.document[0])).length-1;0<=i;i--)(o=_.data(r[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&s.push([_.isFunction(o.options.items)?o.options.items.call(o.element):_(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(s.push([_.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):_(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;0<=n;n--)s[n][0].each(e);return _(a)},_removeCurrentsFromItems:function(){var n=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=_.grep(this.items,function(t){for(var e=0;n.length>e;e++)if(n[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,n,i,r,o,a,
s,l,c=this.items,u=[[_.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):_(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(e=d.length-1;0<=e;e--)for(n=(i=_(d[e],this.document[0])).length-1;0<=n;n--)(r=_.data(i[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(u.push([_.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):_(r.options.items,r.element),r]),this.containers.push(r));for(e=u.length-1;0<=e;e--)for(o=u[e][1],n=0,l=(a=u[e][0]).length;n<l;n++)(s=_(a[n])).data(this.widgetName+"-item",o),c.push({item:s,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,n,i,r;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(n=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?_(this.options.toleranceElement,n.item):n.item,t||(n.width=i.outerWidth(),n.height=i.outerHeight()),r=i.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)r=this.containers[e].element.offset(),this.containers[e].containerCache.left=r.left,this.containers[e].containerCache.top=r.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(n){var i,r=(n=n||this).options;r.placeholder&&r.placeholder.constructor!==String||(i=r.placeholder,r.placeholder={element:function(){var t=n.currentItem[0].nodeName.toLowerCase(),e=_("<"+t+">",n.document[0]).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===t?n._createTrPlaceholder(n.currentItem.find("tr").eq(0),_("<tr>",n.document[0]).appendTo(e)):"tr"===t?n._createTrPlaceholder(n.currentItem,e):"img"===t&&e.attr("src",n.currentItem.attr("src")),i||e.css("visibility","hidden"),e},update:function(t,e){(!i||r.forcePlaceholderSize)&&(e.height()||e.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}),n.placeholder=_(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_createTrPlaceholder:function(t,e){var n=this;t.children().each(function(){_("<td>&#160;</td>",n.document[0]).attr("colspan",_(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,n,i,r,o,a,s,l,c,u,d=null,h=null;for(e=this.containers.length-1;0<=e;e--)if(!_.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(d&&_.contains(this.containers[e].element[0],d.element[0]))continue;d=this.containers[e],h=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[h].containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1);else{for(i=1e4,r=null,o=(c=d.floating||this._isFloating(this.currentItem))?"left":"top",a=c?"width":"height",u=c?"clientX":"clientY",n=this.items.length-1;0<=n;n--)_.contains(this.containers[h].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(s=this.items[n].item.offset()[o],l=!1,t[u]-s>this.items[n][a]/2&&(l=!0),i>Math.abs(t[u]-s)&&(i=Math.abs(t[u]-s),r=this.items[n],this.direction=l?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[h])return void(this.currentContainer.containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[h],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var e=this.options,n=_.isFunction(e.helper)?_(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||_("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||e.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||e.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),_.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&_.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&_.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=_(i.containment)[0],e=_(i.containment).offset(),n="hidden"!==_(t).css("overflow"),this.containment=[e.left+(parseInt(_(t).css("borderLeftWidth"),10)||0)+(parseInt(_(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(_(t).css("borderTopWidth"),10)||0)+(parseInt(_(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(_(t).css("borderLeftWidth"),10)||0)-(parseInt(_(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(_(t).css("borderTopWidth"),10)||0)-(parseInt(_(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&_.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop())*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())*n}},_generatePosition:function(t){var e,n,i=this.options,r=t.pageX,o=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&_.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(e=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-i.grid[1]:e+i.grid[1]:e,n=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-i.grid[0]:n+i.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:a.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){function n(e,n,i){return function(t){i._trigger(e,t,n._uiHash(n))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;0<=i;i--)e||r.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;r.length>i;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===_.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||_([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}})}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,n,i,r){return jQuery.easing[jQuery.easing.def](t,e,n,i,r)},easeInQuad:function(t,e,n,i,r){return i*(e/=r)*e+n},easeOutQuad:function(t,e,n,i,r){return-i*(e/=r)*(e-2)+n},easeInOutQuad:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,i,r){return i*(e/=r)*e*e+n},easeOutCubic:function(t,e,n,i,r){return i*((e=e/r-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e+n:i/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,i,r){return i*(e/=r)*e*e*e+n},easeOutQuart:function(t,e,n,i,r){return-i*((e=e/r-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e*e+n:-i/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,i,r){return i*(e/=r)*e*e*e*e+n},easeOutQuint:function(t,e,n,i,r){return i*((e=e/r-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e*e*e+n:i/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,i,r){return-i*Math.cos(e/r*(Math.PI/2))+i+n},easeOutSine:function(t,e,n,i,r){return i*Math.sin(e/r*(Math.PI/2))+n},easeInOutSine:function(t,e,n,i,r){return-i/2*(Math.cos(Math.PI*e/r)-1)+n},easeInExpo:function(t,e,n,i,r){return 0==e?n:i*Math.pow(2,10*(e/r-1))+n},easeOutExpo:function(t,e,n,i,r){return e==r?n+i:i*(1-Math.pow(2,-10*e/r))+n},easeInOutExpo:function(t,e,n,i,r){return 0==e?n:e==r?n+i:(e/=r/2)<1?i/2*Math.pow(2,10*(e-1))+n:i/2*(2-Math.pow(2,-10*--e))+n},easeInCirc:function(t,e,n,i,r){return-i*(Math.sqrt(1-(e/=r)*e)-1)+n},easeOutCirc:function(t,e,n,i,r){return i*Math.sqrt(1-(e=e/r-1)*e)+n},easeInOutCirc:function(t,e,n,i,r){return(e/=r/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+n:i/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,i,r){var o=1.70158,a=0,s=i;if(0==e)return n;if(1==(e/=r))return n+i;if(a||(a=.3*r),s<Math.abs(i)){s=i;o=a/4}else o=a/(2*Math.PI)*Math.asin(i/s);return-s*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/a)+n},easeOutElastic:function(t,e,n,i,r){var o=1.70158,a=0,s=i;if(0==e)return n;if(1==(e/=r))return n+i;if(a||(a=.3*r),s<Math.abs(i)){s=i;o=a/4}else o=a/(2*Math.PI)*Math.asin(i/s);return s*Math.pow(2,-10*e)*Math.sin((e*r-o)*(2*Math.PI)/a)+i+n},easeInOutElastic:function(t,e,n,i,r){var o=1.70158,a=0,s=i;if(0==e)return n;if(2==(e/=r/2))return n+i;if(a||(a=r*(.3*1.5)),s<Math.abs(i)){s=i;o=a/4}else o=a/(2*Math.PI)*Math.asin(i/s);return e<1?s*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/a)*-.5+n:s*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/a)*.5+i+n},easeInBack:function(t,e,n,i,r,o){return o==undefined&&(o=1.70158),i*(e/=r)*e*((o+1)*e-o)+n},easeOutBack:function(t,e,n,i,r,o){return o==undefined&&(o=1.70158),i*((e=e/r-1)*e*((o+1)*e+o)+1)+n},easeInOutBack:function(t,e,n,i,r,o){return o==undefined&&(o=1.70158),(e/=r/2)<1?i/2*(e*e*((1+(o*=1.525))*e-o))+n:i/2*((e-=2)*e*((1+(o*=1.525))*e+o)+2)+n},easeInBounce:function(t,e,n,i,r){return i-jQuery.easing.easeOutBounce(t,r-e,0,i,r)+n},easeOutBounce:function(t,e,n,i,r){return(e/=r)<1/2.75?i*(7.5625*e*e)+n:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+n:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+n:i*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(t,e,n,i,r){return e<r/2?.5*jQuery.easing.easeInBounce(t,2*e,0,i,r)+n:.5*jQuery.easing.easeOutBounce(t,2*e-r,0,i,r)+.5*i+n}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(h){function e(t){var e=t||window.event,n=v.call(arguments,1),i=0,r=0,o=0,a=0,s=0,l=0;if((t=h.event.fix(e)).type="mousewheel","detail"in e&&(o=-1*e.detail),"wheelDelta"in e&&(o=e.wheelDelta),"wheelDeltaY"in e&&(o=e.wheelDeltaY),"wheelDeltaX"in e&&(r=-1*e.wheelDeltaX),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(r=-1*o,o=0),i=0===o?r:o,"deltaY"in e&&(i=o=-1*e.deltaY),"deltaX"in e&&(r=e.deltaX,0===o&&(i=-1*r)),0!==o||0!==r){if(1===e.deltaMode){var c=h.data(this,"mousewheel-line-height");i*=c,o*=c,r*=c}else if(2===e.deltaMode){var u=h.data(this,"mousewheel-page-height");i*=u,o*=u,r*=u}if(a=Math.max(Math.abs(o),Math.abs(r)),(!m||a<m)&&(f(e,m=a)&&(m/=40)),f(e,a)&&(i/=40,r/=40,o/=40),i=Math[1<=i?"floor":"ceil"](i/m),r=Math[1<=r?"floor":"ceil"](r/m),o=Math[1<=o?"floor":"ceil"](o/m),y.settings.normalizeOffset&&this.getBoundingClientRect){var d=this.getBoundingClientRect();s=t.clientX-d.left,l=t.clientY-d.top}return t.deltaX=r,t.deltaY=o,t.deltaFactor=m,t.offsetX=s,t.offsetY=l,t.deltaMode=0,n.unshift(t,i,r,o),g&&clearTimeout(g),g=setTimeout(p,200),(h.event.dispatch||h.event.handle).apply(this,n)}}function p(){m=null}function f(t,e){return y.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var g,m,t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],v=Array.prototype.slice;if(h.event.fixHooks)for(var i=t.length;i;)h.event.fixHooks[t[--i]]=h.event.mouseHooks;var y=h.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],e,!1);else this.onmousewheel=e;h.data(this,"mousewheel-line-height",y.getLineHeight(this)),h.data(this,"mousewheel-page-height",y.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=n.length;t;)this.removeEventListener(n[--t],e,!1);else this.onmousewheel=null;h.removeData(this,"mousewheel-line-height"),h.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var e=h(t),n=e["offsetParent"in h.fn?"offsetParent":"parent"]();return n.length||(n=h("body")),parseInt(n.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(t){return h(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};h.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(h){function e(t){var e=t||window.event,n=v.call(arguments,1),i=0,r=0,o=0,a=0,s=0,l=0;if((t=h.event.fix(e)).type="mousewheel","detail"in e&&(o=-1*e.detail),"wheelDelta"in e&&(o=e.wheelDelta),"wheelDeltaY"in e&&(o=e.wheelDeltaY),"wheelDeltaX"in e&&(r=-1*e.wheelDeltaX),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(r=-1*o,o=0),i=0===o?r:o,"deltaY"in e&&(i=o=-1*e.deltaY),"deltaX"in e&&(r=e.deltaX,0===o&&(i=-1*r)),0!==o||0!==r){if(1===e.deltaMode){var c=h.data(this,"mousewheel-line-height");i*=c,o*=c,r*=c}else if(2===e.deltaMode){var u=h.data(this,"mousewheel-page-height");i*=u,o*=u,r*=u}if(a=Math.max(Math.abs(o),Math.abs(r)),(!m||a<m)&&(f(e,m=a)&&(m/=40)),f(e,a)&&(i/=40,r/=40,o/=40),i=Math[1<=i?"floor":"ceil"](i/m),r=Math[1<=r?"floor":"ceil"](r/m),o=Math[1<=o?"floor":"ceil"](o/m),y.settings.normalizeOffset&&this.getBoundingClientRect){var d=this.getBoundingClientRect();s=t.clientX-d.left,l=t.clientY-d.top}return t.deltaX=r,t.deltaY=o,t.deltaFactor=m,t.offsetX=s,t.offsetY=l,t.deltaMode=0,n.unshift(t,i,r,o),g&&clearTimeout(g),g=setTimeout(p,200),(h.event.dispatch||h.event.handle).apply(this,n)}}function p(){m=null}function f(t,e){return y.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var g,m,t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],v=Array.prototype.slice;if(h.event.fixHooks)for(var i=t.length;i;)h.event.fixHooks[t[--i]]=h.event.mouseHooks;var y=h.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],e,!1);else this.onmousewheel=e;h.data(this,"mousewheel-line-height",y.getLineHeight(this)),h.data(this,"mousewheel-page-height",y.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=n.length;t;)this.removeEventListener(n[--t],e,!1);else this.onmousewheel=null;h.removeData(this,"mousewheel-line-height"),h.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var e=h(t),n=e["offsetParent"in h.fn?"offsetParent":"parent"]();return n.length||(n=h("body")),parseInt(n.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(t){return h(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};h.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t:t(jQuery,window,document)}(function(at){var t,e,n,i,r;t=function(){var j,p="mCustomScrollbar",F="mCS",i=".mCustomScrollbar",r={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},s=0,o={},m=window.attachEvent&&!window.addEventListener?1:0,B=!1,x=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],f={init:function(a){a=at.extend(!0,{},r,a);var t=c.call(this);if(a.live){var e=a.liveSelector||this.selector||i,n=at(e);if("off"===a.live)return void u(e);o[e]=setTimeout(function(){n.mCustomScrollbar(a),"once"===a.live&&n.length&&u(e)},500)}else u(e);return a.setWidth=a.set_width?a.set_width:a.setWidth,a.setHeight=a.set_height?a.set_height:a.setHeight,a.axis=a.horizontalScroll?"x":d(a.axis),a.scrollInertia=0<a.scrollInertia&&a.scrollInertia<17?17:a.scrollInertia,"object"!=typeof a.mouseWheel&&1==a.mouseWheel&&(a.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),a.mouseWheel.scrollAmount=a.mouseWheelPixels?a.mouseWheelPixels:a.mouseWheel.scrollAmount,a.mouseWheel.normalizeDelta=a.advanced.normalizeMouseWheelDelta?a.advanced.normalizeMouseWheelDelta:a.mouseWheel.normalizeDelta,a.scrollButtons.scrollType=h(a.scrollButtons.scrollType),l(a),at(t).each(function(){var t=at(this);if(!t.data(F)){t.data(F,{idx:++s,opt:a,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:t.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var e=t.data(F),n=e.opt,i=t.data("mcs-axis"),r=t.data("mcs-scrollbar-position"),o=t.data("mcs-theme");i&&(n.axis=i),r&&(n.scrollbarPosition=r),o&&(n.theme=o,l(n)),g.call(this),e&&n.callbacks.onCreate&&"function"==typeof n.callbacks.onCreate&&n.callbacks.onCreate.call(this),at("#mCSB_"+e.idx+"_container img:not(."+x[2]+")").addClass(x[2]),f.update.call(null,t)}})},update:function(t,s){var e=t||c.call(this);return at(e).each(function(){var t=at(this);if(t.data(F)){var e=t.data(F),n=e.opt,i=at("#mCSB_"+e.idx+"_container"),r=at("#mCSB_"+e.idx),o=[at("#mCSB_"+e.idx+"_dragger_vertical"),at("#mCSB_"+e.idx+"_dragger_horizontal")];if(!i.length)return;e.tweenRunning&&$(t),s&&e&&n.callbacks.onBeforeUpdate&&"function"==typeof n.callbacks.onBeforeUpdate&&n.callbacks.onBeforeUpdate.call(this),t.hasClass(x[3])&&t.removeClass(x[3]),t.hasClass(x[4])&&t.removeClass(x[4]),r.css("max-height","none"),r.height()!==t.height()&&r.css("max-height",t.height()),y.call(this),"y"===n.axis||n.advanced.autoExpandHorizontalScroll||i.css("width",v(i)),e.overflowed=S.call(this),_.call(this),n.autoDraggerLength&&w.call(this),T.call(this),C.call(this);var a=[Math.abs(i[0].offsetTop),Math.abs(i[0].offsetLeft)];"x"!==n.axis&&(e.overflowed[0]?o[0].height()>o[0].parent().height()?E.call(this):(J(t,a[0].toString(),{dir:"y",dur:0,overwrite:"none"}),e.contentReset.y=null):(E.call(this),"y"===n.axis?k.call(this):"yx"===n.axis&&e.overflowed[1]&&J(t,a[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==n.axis&&(e.overflowed[1]?o[1].width()>o[1].parent().width()?E.call(this):(J(t,a[1].toString(),{dir:"x",dur:0,overwrite:"none"}),e.contentReset.x=null):(E.call(this),"x"===n.axis?k.call(this):"yx"===n.axis&&e.overflowed[0]&&J(t,a[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),s&&e&&(2===s&&n.callbacks.onImageLoad&&"function"==typeof n.callbacks.onImageLoad?n.callbacks.onImageLoad.call(this):3===s&&n.callbacks.onSelectorChange&&"function"==typeof n.callbacks.onSelectorChange?n.callbacks.onSelectorChange.call(this):n.callbacks.onUpdate&&"function"==typeof n.callbacks.onUpdate&&n.callbacks.onUpdate.call(this)),Y.call(this)}})},scrollTo:function(s,l){if(void 0!==s&&null!=s){var t=c.call(this);return at(t).each(function(){var t=at(this);if(t.data(F)){var e=t.data(F),n=e.opt,i={trigger:"external",scrollInertia:n.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},r=at.extend(!0,{},i,l),o=V.call(this,s),a=0<r.scrollInertia&&r.scrollInertia<17?17:r.scrollInertia;o[0]=K.call(this,o[0],"y"),o[1]=K.call(this,o[1],"x"),r.moveDragger&&(o[0]*=e.scrollRatio.y,o[1]*=e.scrollRatio.x),r.dur=ot()?0:a,setTimeout(function(){null!==o[0]&&"undefined"!=typeof o[0]&&"x"!==n.axis&&e.overflowed[0]&&(r.dir="y",r.overwrite="all",J(t,o[0].toString(),r)),null!==o[1]&&"undefined"!=typeof o[1]&&"y"!==n.axis&&e.overflowed[1]&&(r.dir="x",r.overwrite="none",J(t,o[1].toString(),r))},r.timeout)}})}},stop:function(){var t=c.call(this);return at(t).each(function(){var t=at(this);t.data(F)&&$(t)})},disable:function(e){var t=c.call(this);return at(t).each(function(){var t=at(this);t.data(F)&&(t.data(F),Y.call(this,"remove"),k.call(this),e&&E.call(this),_.call(this,!0),t.addClass(x[3]))})},destroy:function(){var a=c.call(this);return at(a).each(function(){var t=at(this);if(t.data(F)){var e=t.data(F),n=e.opt,i=at("#mCSB_"+e.idx),r=at("#mCSB_"+e.idx+"_container"),o=at(".mCSB_"+e.idx+"_scrollbar");n.live&&u(n.liveSelector||at(a).selector),Y.call(this,"remove"),k.call(this),E.call(this),t.removeData(F),tt(this,"mcs"),o.remove(),r.find("img."+x[2]).removeClass(x[2]),i.replaceWith(r.contents()),t.removeClass(p+" _"+F+"_"+e.idx+" "+x[6]+" "+x[7]+" "+x[5]+" "+x[3]).addClass(x[4])}})}},c=function(){return"object"!=typeof at(this)||at(this).length<1?i:this},l=function(t){var e=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],n=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],i=["minimal","minimal-dark"],r=["minimal","minimal-dark"],o=["minimal","minimal-dark"];t.autoDraggerLength=!(-1<at.inArray(t.theme,e))&&t.autoDraggerLength,t.autoExpandScrollbar=!(-1<at.inArray(t.theme,n))&&t.autoExpandScrollbar,t.scrollButtons.enable=!(-1<at.inArray(t.theme,i))&&t.scrollButtons.enable,t.autoHideScrollbar=-1<at.inArray(t.theme,r)||t.autoHideScrollbar,t.scrollbarPosition=-1<at.inArray(t.theme,o)?"outside":t.scrollbarPosition},u=function(t){o[t]&&(clearTimeout(o[t]),tt(o,t))},d=function(t){return"yx"===t||"xy"===t||"auto"===t?"yx":"x"===t||"horizontal"===t?"x":"y"},h=function(t){return"stepped"===t||"pixels"===t||"step"===t||"click"===t?"stepped":"stepless"},g=function(){var t=at(this),e=t.data(F),n=e.opt,i=n.autoExpandScrollbar?" "+x[1]+"_expand":"",r=["<div id='mCSB_"+e.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+e.idx+"_scrollbar mCS-"+n.theme+" mCSB_scrollTools_vertical"+i+"'><div class='"+x[12]+"'><div id='mCSB_"+e.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+e.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+e.idx+"_scrollbar mCS-"+n.theme+" mCSB_scrollTools_horizontal"+i+"'><div class='"+x[12]+"'><div id='mCSB_"+e.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],o="yx"===n.axis?"mCSB_vertical_horizontal":"x"===n.axis?"mCSB_horizontal":"mCSB_vertical",a="yx"===n.axis?r[0]+r[1]:"x"===n.axis?r[1]:r[0],s="yx"===n.axis?"<div id='mCSB_"+e.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",l=n.autoHideScrollbar?" "+x[6]:"",c="x"!==n.axis&&"rtl"===e.langDir?" "+x[7]:"";n.setWidth&&t.css("width",n.setWidth),n.setHeight&&t.css("height",n.setHeight),n.setLeft="y"!==n.axis&&"rtl"===e.langDir?"989999px":n.setLeft,t.addClass(p+" _"+F+"_"+e.idx+l+c).wrapInner("<div id='mCSB_"+e.idx+"' class='mCustomScrollBox mCS-"+n.theme+" "+o+"'><div id='mCSB_"+e.idx+"_container' class='mCSB_container' style='position:relative; top:"+n.setTop+"; left:"+n.setLeft+";' dir='"+e.langDir+"' /></div>");var u=at("#mCSB_"+e.idx),d=at("#mCSB_"+e.idx+"_container");"y"===n.axis||n.advanced.autoExpandHorizontalScroll||d.css("width",v(d)),"outside"===n.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),u.addClass("mCSB_outside").after(a)):(u.addClass("mCSB_inside").append(a),d.wrap(s)),b.call(this);var h=[at("#mCSB_"+e.idx+"_dragger_vertical"),at("#mCSB_"+e.idx+"_dragger_horizontal")];h[0].css("min-height",h[0].height()),h[1].css("min-width",h[1].width())},v=function(t){var e=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return at(this).outerWidth(!0)}).get())],n=t.parent().width();return e[0]>n?e[0]:e[1]>n?e[1]:"100%"},y=function(){var t=at(this).data(F),e=t.opt,n=at("#mCSB_"+t.idx+"_container");if(e.advanced.autoExpandHorizontalScroll&&"y"!==e.axis){n.css({width:"auto","min-width":0,"overflow-x":"scroll"});var i=Math.ceil(n[0].scrollWidth);3===e.advanced.autoExpandHorizontalScroll||2!==e.advanced.autoExpandHorizontalScroll&&i>n.parent().width()?n.css({width:i,"min-width":"100%","overflow-x":"inherit"}):n.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(n[0].getBoundingClientRect().right+.4)-Math.floor(n[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},b=function(){var t=at(this).data(F),e=t.opt,n=at(".mCSB_"+t.idx+"_scrollbar:first"),i=it(e.scrollButtons.tabindex)?"tabindex='"+e.scrollButtons.tabindex+"'":"",r=["<a href='#' class='"+x[13]+"' "+i+" />","<a href='#' class='"+x[14]+"' "+i+" />","<a href='#' class='"+x[15]+"' "+i+" />","<a href='#' class='"+x[16]+"' "+i+" />"],o=["x"===e.axis?r[2]:r[0],"x"===e.axis?r[3]:r[1],r[2],r[3]];e.scrollButtons.enable&&n.prepend(o[0]).append(o[1]).next(".mCSB_scrollTools").prepend(o[2]).append(o[3])},w=function(){var t=at(this).data(F),e=at("#mCSB_"+t.idx),n=at("#mCSB_"+t.idx+"_container"),i=[at("#mCSB_"+t.idx+"_dragger_vertical"),at("#mCSB_"+t.idx+"_dragger_horizontal")],r=[e.height()/n.outerHeight(!1),e.width()/n.outerWidth(!1)],o=[parseInt(i[0].css("min-height")),Math.round(r[0]*i[0].parent(
).height()),parseInt(i[1].css("min-width")),Math.round(r[1]*i[1].parent().width())],a=m&&o[1]<o[0]?o[0]:o[1],s=m&&o[3]<o[2]?o[2]:o[3];i[0].css({height:a,"max-height":i[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":o[0]+"px"}),i[1].css({width:s,"max-width":i[1].parent().width()-10})},T=function(){var t=at(this).data(F),e=at("#mCSB_"+t.idx),n=at("#mCSB_"+t.idx+"_container"),i=[at("#mCSB_"+t.idx+"_dragger_vertical"),at("#mCSB_"+t.idx+"_dragger_horizontal")],r=[n.outerHeight(!1)-e.height(),n.outerWidth(!1)-e.width()],o=[r[0]/(i[0].parent().height()-i[0].height()),r[1]/(i[1].parent().width()-i[1].width())];t.scrollRatio={y:o[0],x:o[1]}},A=function(t,e,n){var i=n?x[0]+"_expanded":"",r=t.closest(".mCSB_scrollTools");"active"===e?(t.toggleClass(x[0]+" "+i),r.toggleClass(x[1]),t[0]._draggable=t[0]._draggable?0:1):t[0]._draggable||("hide"===e?(t.removeClass(x[0]),r.removeClass(x[1])):(t.addClass(x[0]),r.addClass(x[1])))},S=function(){var t=at(this).data(F),e=at("#mCSB_"+t.idx),n=at("#mCSB_"+t.idx+"_container"),i=null==t.overflowed?n.height():n.outerHeight(!1),r=null==t.overflowed?n.width():n.outerWidth(!1),o=n[0].scrollHeight,a=n[0].scrollWidth;return i<o&&(i=o),r<a&&(r=a),[i>e.height(),r>e.width()]},E=function(){var t=at(this),e=t.data(F),n=e.opt,i=at("#mCSB_"+e.idx),r=at("#mCSB_"+e.idx+"_container"),o=[at("#mCSB_"+e.idx+"_dragger_vertical"),at("#mCSB_"+e.idx+"_dragger_horizontal")];if($(t),("x"!==n.axis&&!e.overflowed[0]||"y"===n.axis&&e.overflowed[0])&&(o[0].add(r).css("top",0),J(t,"_resetY")),"y"!==n.axis&&!e.overflowed[1]||"x"===n.axis&&e.overflowed[1]){var a=dx=0;"rtl"===e.langDir&&(a=i.width()-r.outerWidth(!1),dx=Math.abs(a/e.scrollRatio.x)),r.css("left",a),o[1].css("left",dx),J(t,"_resetX")}},C=function(){function t(){r=setTimeout(function(){at.event.special.mousewheel?(clearTimeout(r),L.call(e[0])):t()},100)}var e=at(this),n=e.data(F),i=n.opt;if(!n.bindEvents){var r;if(a.call(this),i.contentTouchScroll&&R.call(this),D.call(this),i.mouseWheel.enable)t();N.call(this),q.call(this),i.advanced.autoScrollOnFocus&&M.call(this),i.scrollButtons.enable&&W.call(this),i.keyboard.enable&&G.call(this),n.bindEvents=!0}},k=function(){var t=at(this),e=t.data(F),n=e.opt,i=F+"_"+e.idx,r=".mCSB_"+e.idx+"_scrollbar",o=at("#mCSB_"+e.idx+",#mCSB_"+e.idx+"_container,#mCSB_"+e.idx+"_container_wrapper,"+r+" ."+x[12]+",#mCSB_"+e.idx+"_dragger_vertical,#mCSB_"+e.idx+"_dragger_horizontal,"+r+">a"),a=at("#mCSB_"+e.idx+"_container");n.advanced.releaseDraggableSelectors&&o.add(at(n.advanced.releaseDraggableSelectors)),n.advanced.extraDraggableSelectors&&o.add(at(n.advanced.extraDraggableSelectors)),e.bindEvents&&(at(document).add(at(!H()||top.document)).unbind("."+i),o.each(function(){at(this).unbind("."+i)}),clearTimeout(t[0]._focusTimeout),tt(t[0],"_focusTimeout"),clearTimeout(e.sequential.step),tt(e.sequential,"step"),clearTimeout(a[0].onCompleteTimeout),tt(a[0],"onCompleteTimeout"),e.bindEvents=!1)},_=function(t){var e=at(this),n=e.data(F),i=n.opt,r=at("#mCSB_"+n.idx+"_container_wrapper"),o=r.length?r:at("#mCSB_"+n.idx+"_container"),a=[at("#mCSB_"+n.idx+"_scrollbar_vertical"),at("#mCSB_"+n.idx+"_scrollbar_horizontal")],s=[a[0].find(".mCSB_dragger"),a[1].find(".mCSB_dragger")];"x"!==i.axis&&(n.overflowed[0]&&!t?(a[0].add(s[0]).add(a[0].children("a")).css("display","block"),o.removeClass(x[8]+" "+x[10])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&s[0].css("display","none"),o.removeClass(x[10])):(a[0].css("display","none"),o.addClass(x[10])),o.addClass(x[8]))),"y"!==i.axis&&(n.overflowed[1]&&!t?(a[1].add(s[1]).add(a[1].children("a")).css("display","block"),o.removeClass(x[9]+" "+x[11])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&s[1].css("display","none"),o.removeClass(x[11])):(a[1].css("display","none"),o.addClass(x[11])),o.addClass(x[9]))),n.overflowed[0]||n.overflowed[1]?e.removeClass(x[5]):e.addClass(x[5])},U=function(t){var e=t.type,n=t.target.ownerDocument!==document&&null!==frameElement?[at(frameElement).offset().top,at(frameElement).offset().left]:null,i=H()&&t.target.ownerDocument!==top.document&&null!==frameElement?[at(t.view.frameElement).offset().top,at(t.view.frameElement).offset().left]:[0,0];switch(e){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return n?[t.originalEvent.pageY-n[0]+i[0],t.originalEvent.pageX-n[1]+i[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var r=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],o=t.originalEvent.touches.length||t.originalEvent.changedTouches.length;return t.target.ownerDocument!==document?[r.screenY,r.screenX,1<o]:[r.pageY,r.pageX,1<o];default:return n?[t.pageY-n[0]+i[0],t.pageX-n[1]+i[1],!1]:[t.pageY,t.pageX,!1]}},a=function(){function r(t,e,n,i){if(p[0].idleTimer=d.scrollInertia<233?250:0,a.attr("id")===h[1])var r="x",o=(a[0].offsetLeft-e+i)*u.scrollRatio.x;else r="y",o=(a[0].offsetTop-t+n)*u.scrollRatio.y;J(c,o.toString(),{dir:r,drag:!0})}var a,s,l,c=at(this),u=c.data(F),d=u.opt,t=F+"_"+u.idx,h=["mCSB_"+u.idx+"_dragger_vertical","mCSB_"+u.idx+"_dragger_horizontal"],p=at("#mCSB_"+u.idx+"_container"),e=at("#"+h[0]+",#"+h[1]),n=d.advanced.releaseDraggableSelectors?e.add(at(d.advanced.releaseDraggableSelectors)):e,i=d.advanced.extraDraggableSelectors?at(!H()||top.document).add(at(d.advanced.extraDraggableSelectors)):at(!H()||top.document);e.bind("contextmenu."+t,function(t){t.preventDefault()}).bind("mousedown."+t+" touchstart."+t+" pointerdown."+t+" MSPointerDown."+t,function(t){if(t.stopImmediatePropagation(),t.preventDefault(),et(t)){B=!0,m&&(document.onselectstart=function(){return!1}),I.call(p,!1),$(c);var e=(a=at(this)).offset(),n=U(t)[0]-e.top,i=U(t)[1]-e.left,r=a.height()+e.top,o=a.width()+e.left;n<r&&0<n&&i<o&&0<i&&(s=n,l=i),A(a,"active",d.autoExpandScrollbar)}}).bind("touchmove."+t,function(t){t.stopImmediatePropagation(),t.preventDefault();var e=a.offset(),n=U(t)[0]-e.top,i=U(t)[1]-e.left;r(s,l,n,i)}),at(document).add(i).bind("mousemove."+t+" pointermove."+t+" MSPointerMove."+t,function(t){if(a){var e=a.offset(),n=U(t)[0]-e.top,i=U(t)[1]-e.left;if(s===n&&l===i)return;r(s,l,n,i)}}).add(n).bind("mouseup."+t+" touchend."+t+" pointerup."+t+" MSPointerUp."+t,function(){a&&(A(a,"active",d.autoExpandScrollbar),a=null),B=!1,m&&(document.onselectstart=null),I.call(p,!0)})},R=function(){function e(t){if(!nt(t)||B||U(t)[2])j=0;else{E=S=0,h=j=1,A.removeClass("mCS_touch_action");var e=R.offset();c=U(t)[0]-e.top,p=U(t)[1]-e.left,N=[U(t)[0],U(t)[1]]}}function n(t){if(nt(t)&&!B&&!U(t)[2]&&(k.documentTouchScroll||t.preventDefault(),t.stopImmediatePropagation(),(!E||S)&&h)){v=Z();var e=_.offset(),n=U(t)[0]-e.top,i=U(t)[1]-e.left,r="mcsLinearOut";if(L.push(n),P.push(i),N[2]=Math.abs(U(t)[0]-N[0]),N[3]=Math.abs(U(t)[1]-N[1]),C.overflowed[0])var o=D[0].parent().height()-D[0].height(),a=0<c-n&&n-c>-o*C.scrollRatio.y&&(2*N[3]<N[2]||"yx"===k.axis);if(C.overflowed[1])var s=D[1].parent().width()-D[1].width(),l=0<p-i&&i-p>-s*C.scrollRatio.x&&(2*N[2]<N[3]||"yx"===k.axis);a||l?(M||t.preventDefault(),S=1):(E=1,A.addClass("mCS_touch_action")),M&&t.preventDefault(),x="yx"===k.axis?[c-n,p-i]:"x"===k.axis?[null,p-i]:[c-n,null],R[0].idleTimer=250,C.overflowed[0]&&d(x[0],I,r,"y","all",!0),C.overflowed[1]&&d(x[1],I,r,"x",O,!0)}}function i(t){if(!nt(t)||B||U(t)[2])j=0;else{j=1,t.stopImmediatePropagation(),$(A),m=Z();var e=_.offset();f=U(t)[0]-e.top,g=U(t)[1]-e.left,L=[],P=[]}}function r(t){if(nt(t)&&!B&&!U(t)[2]){h=0,t.stopImmediatePropagation(),E=S=0,y=Z();var e=_.offset(),n=U(t)[0]-e.top,i=U(t)[1]-e.left;if(!(30<y-v)){var r="mcsEaseOut",o=(w=1e3/(y-m))<2.5,a=o?[L[L.length-2],P[P.length-2]]:[0,0];b=o?[n-a[0],i-a[1]]:[n-f,i-g];var s=[Math.abs(b[0]),Math.abs(b[1])];w=o?[Math.abs(b[0]/4),Math.abs(b[1]/4)]:[w,w];var l=[Math.abs(R[0].offsetTop)-b[0]*u(s[0]/w[0],w[0]),Math.abs(R[0].offsetLeft)-b[1]*u(s[1]/w[1],w[1])];x="yx"===k.axis?[l[0],l[1]]:"x"===k.axis?[null,l[1]]:[l[0],null],T=[4*s[0]+k.scrollInertia,4*s[1]+k.scrollInertia];var c=parseInt(k.contentTouchScroll)||0;x[0]=s[0]>c?x[0]:0,x[1]=s[1]>c?x[1]:0,C.overflowed[0]&&d(x[0],T[0],r,"y",O,!1),C.overflowed[1]&&d(x[1],T[1],r,"x",O,!1)}}}function u(t,e){var n=[1.5*e,2*e,e/1.5,e/2];return 90<t?4<e?n[0]:n[3]:60<t?3<e?n[3]:n[2]:30<t?8<e?n[1]:6<e?n[0]:4<e?e:n[2]:8<e?e:n[3]}function d(t,e,n,i,r,o){t&&J(A,t.toString(),{dur:e,scrollEasing:n,dir:i,overwrite:r,drag:o})}var h,c,p,f,g,m,v,y,b,w,x,T,S,E,A=at(this),C=A.data(F),k=C.opt,t=F+"_"+C.idx,_=at("#mCSB_"+C.idx),R=at("#mCSB_"+C.idx+"_container"),D=[at("#mCSB_"+C.idx+"_dragger_vertical"),at("#mCSB_"+C.idx+"_dragger_horizontal")],L=[],P=[],I=0,O="yx"===k.axis?"none":"all",N=[],o=R.find("iframe"),a=["touchstart."+t+" pointerdown."+t+" MSPointerDown."+t,"touchmove."+t+" pointermove."+t+" MSPointerMove."+t,"touchend."+t+" pointerup."+t+" MSPointerUp."+t],M=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;R.bind(a[0],function(t){e(t)}).bind(a[1],function(t){n(t)}),_.bind(a[0],function(t){i(t)}).bind(a[2],function(t){r(t)}),o.length&&o.each(function(){at(this).bind("load",function(){H(this)&&at(this.contentDocument||this.contentWindow.document).bind(a[0],function(t){e(t),i(t)}).bind(a[1],function(t){n(t)}).bind(a[2],function(t){r(t)})})})},D=function(){function r(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function o(t,e,n){c.type=n&&a?"stepped":"stepless",c.scrollAmount=10,z(i,t,e,"mcsLinearOut",n?60:null)}var a,i=at(this),s=i.data(F),l=s.opt,c=s.sequential,t=F+"_"+s.idx,u=at("#mCSB_"+s.idx+"_container"),d=u.parent();u.bind("mousedown."+t,function(){j||a||(a=1,B=!0)}).add(document).bind("mousemove."+t,function(t){if(!j&&a&&r()){var e=u.offset(),n=U(t)[0]-e.top+u[0].offsetTop,i=U(t)[1]-e.left+u[0].offsetLeft;0<n&&n<d.height()&&0<i&&i<d.width()?c.step&&o("off",null,"stepped"):("x"!==l.axis&&s.overflowed[0]&&(n<0?o("on",38):n>d.height()&&o("on",40)),"y"!==l.axis&&s.overflowed[1]&&(i<0?o("on",37):i>d.width()&&o("on",39)))}}).bind("mouseup."+t+" dragend."+t,function(){j||(a&&(a=0,o("off",null)),B=!1)})},L=function(){function n(t,e){if($(d),!O(d,t.target)){var n="auto"!==p.mouseWheel.deltaFactor?parseInt(p.mouseWheel.deltaFactor):m&&t.deltaFactor<100?100:t.deltaFactor||100,i=p.scrollInertia;if("x"===p.axis||"x"===p.mouseWheel.axis)var r="x",o=[Math.round(n*h.scrollRatio.x),parseInt(p.mouseWheel.scrollAmount)],a="auto"!==p.mouseWheel.scrollAmount?o[1]:o[0]>=f.width()?.9*f.width():o[0],s=Math.abs(at("#mCSB_"+h.idx+"_container")[0].offsetLeft),l=g[1][0].offsetLeft,c=g[1].parent().width()-g[1].width(),u="y"===p.mouseWheel.axis?t.deltaY||e:t.deltaX;else r="y",o=[Math.round(n*h.scrollRatio.y),parseInt(p.mouseWheel.scrollAmount)],a="auto"!==p.mouseWheel.scrollAmount?o[1]:o[0]>=f.height()?.9*f.height():o[0],s=Math.abs(at("#mCSB_"+h.idx+"_container")[0].offsetTop),l=g[0][0].offsetTop,c=g[0].parent().height()-g[0].height(),u=t.deltaY||e;"y"===r&&!h.overflowed[0]||"x"===r&&!h.overflowed[1]||((p.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(u=-u),p.mouseWheel.normalizeDelta&&(u=u<0?-1:1),(0<u&&0!==l||u<0&&l!==c||p.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<5&&!p.mouseWheel.normalizeDelta&&(a=t.deltaFactor,i=17),J(d,(s-u*a).toString(),{dir:r,dur:i}))}}if(at(this).data(F)){var d=at(this),h=d.data(F),p=h.opt,t=F+"_"+h.idx,f=at("#mCSB_"+h.idx),g=[at("#mCSB_"+h.idx+"_dragger_vertical"),at("#mCSB_"+h.idx+"_dragger_horizontal")],e=at("#mCSB_"+h.idx+"_container").find("iframe");e.length&&e.each(function(){at(this).bind("load",function(){H(this)&&at(this.contentDocument||this.contentWindow.document).bind("mousewheel."+t,function(t,e){n(t,e)})})}),f.bind("mousewheel."+t,function(t,e){n(t,e)})}},P=new Object,H=function(t){var e=!1,n=!1,i=null;if(void 0===t?n="#empty":void 0!==at(t).attr("id")&&(n=at(t).attr("id")),!1!==n&&void 0!==P[n])return P[n];if(t){try{i=(t.contentDocument||t.contentWindow.document).body.innerHTML}catch(s){}e=null!==i}else{try{i=top.document.body.innerHTML}catch(s){}e=null!==i}return!1!==n&&(P[n]=e),e},I=function(t){var e=this.find("iframe");if(e.length){var n=t?"auto":"none";e.css("pointer-events",n)}},O=function(t,e){var n=e.nodeName.toLowerCase(),i=t.data(F).opt.mouseWheel.disableOver,r=["select","textarea"];return-1<at.inArray(n,i)&&!(-1<at.inArray(n,r)&&!at(e).is(":focus"))},N=function(){var a,s=at(this),l=s.data(F),t=F+"_"+l.idx,c=at("#mCSB_"+l.idx+"_container"),u=c.parent();at(".mCSB_"+l.idx+"_scrollbar ."+x[12]).bind("mousedown."+t+" touchstart."+t+" pointerdown."+t+" MSPointerDown."+t,function(t){B=!0,at(t.target).hasClass("mCSB_dragger")||(a=1)}).bind("touchend."+t+" pointerup."+t+" MSPointerUp."+t,function(){B=!1}).bind("click."+t,function(t){if(a&&(a=0,at(t.target).hasClass(x[12])||at(t.target).hasClass("mCSB_draggerRail"))){$(s);var e=at(this),n=e.find(".mCSB_dragger");if(0<e.parent(".mCSB_scrollTools_horizontal").length){if(!l.overflowed[1])return;var i="x",r=t.pageX>n.offset().left?-1:1,o=Math.abs(c[0].offsetLeft)-r*(.9*u.width())}else{if(!l.overflowed[0])return;i="y",r=t.pageY>n.offset().top?-1:1,o=Math.abs(c[0].offsetTop)-r*(.9*u.height())}J(s,o.toString(),{dir:i,scrollEasing:"mcsEaseInOut"})}})},M=function(){var a=at(this),t=a.data(F),s=t.opt,e=F+"_"+t.idx,l=at("#mCSB_"+t.idx+"_container"),c=l.parent();l.bind("focusin."+e,function(){var r=at(document.activeElement),t=l.find(".mCustomScrollBox").length,o=0;r.is(s.advanced.autoScrollOnFocus)&&($(a),clearTimeout(a[0]._focusTimeout),a[0]._focusTimer=t?(o+17)*t:0,a[0]._focusTimeout=setTimeout(function(){var t=[rt(r)[0],rt(r)[1]],e=[l[0].offsetTop,l[0].offsetLeft],n=[0<=e[0]+t[0]&&e[0]+t[0]<c.height()-r.outerHeight(!1),0<=e[1]+t[1]&&e[0]+t[1]<c.width()-r.outerWidth(!1)],i="yx"!==s.axis||n[0]||n[1]?"all":"none";"x"===s.axis||n[0]||J(a,t[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:i,dur:o}),"y"===s.axis||n[1]||J(a,t[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:i,dur:o})},a[0]._focusTimer))})},q=function(){var t=at(this).data(F),e=F+"_"+t.idx,n=at("#mCSB_"+t.idx+"_container").parent();n.bind("scroll."+e,function(){0===n.scrollTop()&&0===n.scrollLeft()||at(".mCSB_"+t.idx+"_scrollbar").css("visibility","hidden")})},W=function(){var i=at(this),r=i.data(F),o=r.opt,a=r.sequential,t=F+"_"+r.idx,e=".mCSB_"+r.idx+"_scrollbar";at(e+">a").bind("contextmenu."+t,function(t){t.preventDefault()}).bind("mousedown."+t+" touchstart."+t+" pointerdown."+t+" MSPointerDown."+t+" mouseup."+t+" touchend."+t+" pointerup."+t+" MSPointerUp."+t+" mouseout."+t+" pointerout."+t+" MSPointerOut."+t+" click."+t,function(t){function e(t,e){a.scrollAmount=o.scrollButtons.scrollAmount,z(i,t,e)}if(t.preventDefault(),et(t)){var n=at(this).attr("class");switch(a.type=o.scrollButtons.scrollType,t.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===a.type)return;B=!0,r.tweenRunning=!1,e("on",n);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===a.type)return;B=!1,a.dir&&e("off",n);break;case"click":if("stepped"!==a.type||r.tweenRunning)return;e("on",n)}}})},G=function(){function e(t){function e(t,e){u.type=c.keyboard.scrollType,u.scrollAmount=c.keyboard.scrollAmount,"stepped"===u.type&&l.tweenRunning||z(s,t,e)}switch(t.type){case"blur":l.tweenRunning&&u.dir&&e("off",null);break;case"keydown":case"keyup":var n=t.keyCode?t.keyCode:t.which,i="on";if("x"!==c.axis&&(38===n||40===n)||"y"!==c.axis&&(37===n||39===n)){if((38===n||40===n)&&!l.overflowed[0]||(37===n||39===n)&&!l.overflowed[1])return;"keyup"===t.type&&(i="off"),at(document.activeElement).is(p)||(t.preventDefault(),t.stopImmediatePropagation(),e(i,n))}else if(33===n||34===n){if((l.overflowed[0]||l.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){$(s);var r=34===n?-1:1;if("x"===c.axis||"yx"===c.axis&&l.overflowed[1]&&!l.overflowed[0])var o="x",a=Math.abs(d[0].offsetLeft)-r*(.9*h.width());else o="y",a=Math.abs(d[0].offsetTop)-r*(.9*h.height());J(s,a.toString(),{dir:o,scrollEasing:"mcsEaseInOut"})}}else if((35===n||36===n)&&!at(document.activeElement).is(p)&&((l.overflowed[0]||l.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===c.axis||"yx"===c.axis&&l.overflowed[1]&&!l.overflowed[0])o="x",a=35===n?Math.abs(h.width()-d.outerWidth(!1)):0;else o="y",a=35===n?Math.abs(h.height()-d.outerHeight(!1)):0;J(s,a.toString(),{dir:o,scrollEasing:"mcsEaseInOut"})}}}var s=at(this),l=s.data(F),c=l.opt,u=l.sequential,t=F+"_"+l.idx,n=at("#mCSB_"+l.idx),d=at("#mCSB_"+l.idx+"_container"),h=d.parent(),p="input,textarea,select,datalist,keygen,[contenteditable='true']",i=d.find("iframe"),r=["blur."+t+" keydown."+t+" keyup."+t];i.length&&i.each(function(){at(this).bind("load",function(){H(this)&&at(this.contentDocument||this.contentWindow.document).bind(r[0],function(t){e(t)})})}),n.attr("tabindex","0").bind(r[0],function(t){e(t)})},z=function(d,t,e,h,p){function f(t){m.snapAmount&&(v.scrollAmount=m.snapAmount instanceof Array?"x"===v.dir[0]?m.snapAmount[1]:m.snapAmount[0]:m.snapAmount);var e="stepped"!==v.type,n=p||(t?e?b/1.5:w:1e3/60),i=t?e?7.5:40:2.5,r=[Math.abs(y[0].offsetTop),Math.abs(y[0].offsetLeft)],o=[10<g.scrollRatio.y?10:g.scrollRatio.y,10<g.scrollRatio.x?10:g.scrollRatio.x],a="x"===v.dir[0]?r[1]+v.dir[1]*(o[1]*i):r[0]+v.dir[1]*(o[0]*i),s="x"===v.dir[0]?r[1]+v.dir[1]*parseInt(v.scrollAmount):r[0]+v.dir[1]*parseInt(v.scrollAmount),l="auto"!==v.scrollAmount?s:a,c=h||(t?e?"mcsLinearOut":"mcsEaseInOut":"mcsLinear"),u=!!t;return t&&n<17&&(l="x"===v.dir[0]?r[1]:r[0]),J(d,l.toString(),{dir:v.dir[0],scrollEasing:c,dur:n,onComplete:u}),t?void(v.dir=!1):(clearTimeout(v.step),void(v.step=setTimeout(function(){f()},n)))}function n(){clearTimeout(v.step),tt(v,"step"),$(d)}var g=d.data(F),m=g.opt,v=g.sequential,y=at("#mCSB_"+g.idx+"_container"),i="stepped"===v.type,b=m.scrollInertia<26?26:m.scrollInertia,w=m.scrollInertia<1?17:m.scrollInertia;switch(t){case"on":if(v.dir=[e===x[16]||e===x[15]||39===e||37===e?"x":"y",e===x[13]||e===x[15]||38===e||37===e?-1:1],$(d),it(e)&&"stepped"===v.type)return;f(i);break;case"off":n(),(i||g.tweenRunning&&v.dir)&&f(!0)}},V=function(t){var e=at(this).data(F).opt,n=[];return"function"==typeof t&&(t=t()),t instanceof Array?n=1<t.length?[t[0],t[1]]:"x"===e.axis?[null,t[0]]:[t[0],null]:(n[0]=t.y?t.y:t.x||"x"===e.axis?null:t,n[1]=t.x?t.x:t.y||"y"===e.axis?null:t),"function"==typeof n[0]&&(n[0]=n[0]()),"function"==typeof n[1]&&(n[1]=n[1]()),n},K=function(t,e){if(null!=t&&void 0!==t){var n=at(this),i=n.data(F),r=i.opt,o=at("#mCSB_"+i.idx+"_container"),a=o.parent(),s=typeof t;e||(e="x"===r.axis?"x":"y");var l="x"===e?o.outerWidth(!1)-a.width():o.outerHeight(!1)-a.height(),c="x"===e?o[0].offsetLeft:o[0].offsetTop,u="x"===e?"left":"top";switch(s){case"function":return t();case"object":if(!(h=t.jquery?t:at(t)).length)return;return"x"===e?rt(h)[1]:rt(h)[0];case"string":case"number":if(it(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(l*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(c-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var d=c+parseInt(t.split("+=")[1]);return 0<=d?0:Math.abs(d)}if(-1!==t.indexOf("px")&&it(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(a.height()-o.outerHeight(!1));if("right"===t)return Math.abs(a.width()-o.outerWidth(!1));if("first"===t||"last"===t){var h=o.find(":"+t);return"x"===e?rt(h)[1]:rt(h)[0]}return at(t).length?"x"===e?rt(at(t))[1]:rt(at(t))[0]:(o.css(u,t),void f.update.call(null,n[0]))}}},Y=function(t){function e(){return clearTimeout(l[0].autoUpdate),0===o.parents("html").length?void(o=null):void(l[0].autoUpdate=setTimeout(function(){return s.advanced.updateOnSelectorChange&&(a.poll.change.n=i(),a.poll.change.n!==a.poll.change.o)?(a.poll.change.o=a.poll.change.n,void r(3)):s.advanced.updateOnContentResize&&(a.poll.size.n=o[0].scrollHeight+o[0].scrollWidth+l[0].offsetHeight+o[0].offsetHeight+o[0].offsetWidth,a.poll.size.n!==a.poll.size.o)?(a.poll.size.o=a.poll.size.n,void r(1)):!s.advanced.updateOnImageLoad||"auto"===s.advanced.updateOnImageLoad&&"y"===s.axis||(a.poll.img.n=l.find("img").length,a.poll.img.n===a.poll.img.o)?void((s.advanced.updateOnSelectorChange||s.advanced.updateOnContentResize||s.advanced.updateOnImageLoad)&&e()):(a.poll.img.o=a.poll.img.n,void l.find("img").each(function(){n(this)}))},s.advanced.autoUpdateTimeout))}function n(t){function e(t,e){return function(){return e.apply(t,arguments)}}function n(){this.onload=null,at(t).addClass(x[2]),r(2)}if(at(t).hasClass(x[2]))r();else{var i=new Image;i.onload=e(i,n),i.src=t.src}}function i(){!0===s.advanced.updateOnSelectorChange&&(s.advanced.updateOnSelectorChange="*");var t=0,e=l.find(s.advanced.updateOnSelectorChange);return s.advanced.updateOnSelectorChange&&0<e.length&&e.each(function(){t+=this.offsetHeight+this.offsetWidth}),t}function r(t){clearTimeout(l[0].autoUpdate),f.update.call(null,o[0],t)}var o=at(this),a=o.data(F),s=a.opt,l=at("#mCSB_"+a.idx+"_container");return t?(clearTimeout(l[0].autoUpdate),void tt(l[0],"autoUpdate")):void e()},X=function(t,e,n){return Math.round(t/e)*e-n},$=function(t){var e=t.data(F);at("#mCSB_"+e.idx+"_container,#mCSB_"+e.idx+"_container_wrapper,#mCSB_"+e.idx+"_dragger_vertical,#mCSB_"+e.idx+"_dragger_horizontal").each(function(){n.call(this)})},J=function(r,t,o){function e(t){return a&&s.callbacks[t]&&"function"==typeof s.callbacks[t]}function n(){return[s.callbacks.alwaysTriggerOffsets||y>=b[0]+x,s.callbacks.alwaysTriggerOffsets||y<=-T]}function i(){var t=[d[0].offsetTop,d[0].offsetLeft],e=[m[0].offsetTop,m[0].offsetLeft],n=[d.outerHeight(!1),d.outerWidth(!1)],i=[u.height(),u.width()];r[0].mcs={content:d,top:t[0],left:t[1],draggerTop:e[0],draggerLeft:e[1],topPct:Math.round(100*Math.abs(t[0])/(Math.abs(n[0])-i[0])),leftPct:Math.round(100*Math.abs(t[1])/(Math.abs(n[1])-i[1])),direction:o.dir}}var a=r.data(F),s=a.opt,l={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:s.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},c=[(o=at.extend(l,o)).dur,o.drag?0:o.dur],u=at("#mCSB_"+a.idx),d=at("#mCSB_"+a.idx+"_container"),h=d.parent(),p=s.callbacks.onTotalScrollOffset?V.call(r,s.callbacks.onTotalScrollOffset):[0,0],f=s.callbacks.onTotalScrollBackOffset?V.call(r,s.callbacks.onTotalScrollBackOffset):[0,0];if(a.trigger=o.trigger,0===h.scrollTop()&&0===h.scrollLeft()||(at(".mCSB_"+a.idx+"_scrollbar").css("visibility","visible"),h.scrollTop(0).scrollLeft(0)),"_resetY"!==t||a.contentReset.y||(e("onOverflowYNone")&&s.callbacks.onOverflowYNone.call(r[0]),a.contentReset.y=1),"_resetX"!==t||a.contentReset.x||(e("onOverflowXNone")&&s.callbacks.onOverflowXNone.call(r[0]),a.contentReset.x=1),"_resetY"!==t&&"_resetX"!==t){if(!a.contentReset.y&&r[0].mcs||!a.overflowed[0]||(e("onOverflowY")&&s.callbacks.onOverflowY.call(r[0]),a.contentReset.x=null),!a.contentReset.x&&r[0].mcs||!a.overflowed[1]||(e("onOverflowX")&&s.callbacks.onOverflowX.call(r[0]),a.contentReset.x=null),s.snapAmount){var g=s.snapAmount instanceof Array?"x"===o.dir?s.snapAmount[1]:s.snapAmount[0]:s.snapAmount;t=X(t,g,s.snapOffset)}switch(o.dir){case"x":var m=at("#mCSB_"+a.idx+"_dragger_horizontal"),v="left",y=d[0].offsetLeft,b=[u.width()-d.outerWidth(!1),m.parent().width()-m.width()],w=[t,0===t?0:t/a.scrollRatio.x],x=p[1],T=f[1],S=0<x?x/a.scrollRatio.x:0,E=0<T?T/a.scrollRatio.x:0;break;case"y":m=at("#mCSB_"+a.idx+"_dragger_vertical"),v="top",y=d[0].offsetTop,b=[u.height()-d.outerHeight(!1),m.parent().height()-m.height()],w=[t,0===t?0:t/a.scrollRatio.y],x=p[0],T=f[0],S=0<x?x/a.scrollRatio.y:0,E=0<T?T/a.scrollRatio.y:0}w[1]<0||0===w[0]&&0===w[1]?w=[0,0]:w[1]>=b[1]?w=[b[0],b[1]]:w[0]=-w[0],r[0].mcs||(i(),e("onInit")&&s.callbacks.onInit.call(r[0])),clearTimeout(d[0].onCompleteTimeout),Q(m[0],v,Math.round(w[1]),c[1],o.scrollEasing),!a.tweenRunning&&(0===y&&0<=w[0]||y===b[0]&&w[0]<=b[0])||Q(d[0],v,Math.round(w[0]),c[0],o.scrollEasing,o.overwrite,{onStart:function(){o.callbacks&&o.onStart&&!a.tweenRunning&&(e("onScrollStart")&&(i(),s.callbacks.onScrollStart.call(r[0])),a.tweenRunning=!0,A(m),a.cbOffsets=n())},onUpdate:function(){o.callbacks&&o.onUpdate&&e("whileScrolling")&&(i(),s.callbacks.whileScrolling.call(r[0]))},onComplete:function(){if(o.callbacks&&o.onComplete){"yx"===s.axis&&clearTimeout(d[0].onCompleteTimeout);var t=d[0].idleTimer||0;d[0].onCompleteTimeout=setTimeout(function(){e("onScroll")&&(i(),s.callbacks.onScroll.call(r[0])),e("onTotalScroll")&&w[1]>=b[1]-S&&a.cbOffsets[0]&&(i(),s.callbacks.onTotalScroll.call(r[0])),e("onTotalScrollBack")&&w[1]<=E&&a.cbOffsets[1]&&(i(),s.callbacks.onTotalScrollBack.call(r[0])),a.tweenRunning=!1,d[0].idleTimer=0,A(m,"hide")},t)}}})}},Q=function(t,e,n,i,r,o,a){function s(){x.stop||(y||f.call(),y=Z()-v,l(),y>=x.time&&(x.time=y>x.time?y+h-(y-x.time):y+h-1,x.time<y+1&&(x.time=y+1)),x.time<i?x.id=p(s):m.call())}function l(){0<i?(x.currVal=d(x.time,b,T,i,r),w[e]=Math.round(x.currVal)+"px"):w[e]=n+"px",g.call()}function c(){h=1e3/60,x.time=y+h,p=window.requestAnimationFrame?window.requestAnimationFrame:function(t){return l(),setTimeout(t,.01)},x.id=p(s)}function u(){null!=x.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(x.id):clearTimeout(x.id),x.id=null)}function d(t,e,n,i,r){switch(r){case"linear":case"mcsLinear":return n*t/i+e;case"mcsLinearOut":return t/=i,t--,n*Math.sqrt(1-t*t)+e;case"easeInOutSmooth":return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e;case"easeInOutStrong":return(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:(t--,n/2*(2-Math.pow(2,-10*t))+e);case"easeInOut":case"mcsEaseInOut":return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e;case"easeOutSmooth":return t/=i,-n*(--t*t*t*t-1)+e;case"easeOutStrong":return n*(1-Math.pow(2,-10*t/i))+e;case"easeOut":case"mcsEaseOut":default:var o=(t/=i)*t,a=o*t;return e+n*(.499999999999997*a*o+-2.5*o*o+5.5*a+-6.5*o+4*t)}}t._mTween||(t._mTween={top:{},left:{}});var h,p,f=(a=a||{}).onStart||function(){},g=a.onUpdate||function(){},m=a.onComplete||function(){},v=Z(),y=0,b=t.offsetTop,w=t.style,x=t._mTween[e];"left"===e&&(b=t.offsetLeft);var T=n-b;x.stop=0,"none"!==o&&u(),c()},Z=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},n=function(){var t=this;t._mTween||(t._mTween={top:{},left:{}});for(var e=["top","left"],n=0;n<e.length;n++){var i=e[n];t._mTween[i].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(t._mTween[i].id):clearTimeout(t._mTween[i].id),t._mTween[i].id=null,t._mTween[i].stop=1)}},tt=function(t,e){try{delete t[e]}catch(p){t[e]=null}},et=function(t){return!(t.which&&1!==t.which)},nt=function(t){var e=t.originalEvent.pointerType;return!(e&&"touch"!==e&&2!==e)},it=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},rt=function(t){var e=t.parents(".mCSB_container");return[t.offset().top-e.offset().top,t.offset().left-e.offset().left]},ot=function(){function t(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null}var e=t();return!!e&&document[e]};at.fn[p]=function(t){return f[t]?f[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void at.error("Method "+t+" does not exist"):f.init.apply(this,arguments)},at[p]=function(t){return f[t]?f[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void at.error("Method "+t+" does not exist"):f.init.apply(this,arguments)},at[p].defaults=r,window[p]=!0,at(window).bind("load",function(){at(i)[p](),at.extend(at.expr[":"],{mcsInView:at.expr[":"].mcsInView||function(t){var e,n,i=at(t),r=i.parents(".mCSB_container");if(r.length)return e=r.parent(),0<=(n=[r[0].offsetTop,r[0].offsetLeft])[0]+rt(i)[0]&&n[0]+rt(i)[0]<e.height()-i.outerHeight(!1)&&0<=n[1]+rt(i)[1]&&n[1]+rt(i)[1]<e.width()-i.outerWidth(!1)},mcsInSight:at.expr[":"].mcsInSight||function(t,e,n){var i,r,o,a,s=at(t),l=s.parents(".mCSB_container"),c="exact"===n[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(l.length)return i=[s.outerHeight(!1),s.outerWidth(!1)],o=[l[0].offsetTop+rt(s)[0],l[0].offsetLeft+rt(s)[1]],r=[l.parent()[0].offsetHeight,l.parent()[0].offsetWidth],a=[i[0]<r[0]?c[0]:c[1],i[1]<r[1]?c[0]:c[1]],o[0]-r[0]*a[0][0]<0&&0<=o[0]+i[0]-r[0]*a[0][1]&&o[1]-r[1]*a[1][0]<0&&0<=o[1]+i[1]-r[1]*a[1][1]},mcsOverflow:at.expr[":"].mcsOverflow||function(t){var e=at(t).data(F);if(e)return e.overflowed[0]||e.overflowed[1]}})})},e="function"==typeof define&&define.amd,n="undefined"!=typeof module&&module.exports,i="https:"==document.location.protocol?"https:":"http:",r="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js",e||(n?require("jquery-mousewheel")(at):at.event.special.mousewheel||at("head").append(decodeURI("%3Cscript src="+i+"//"+r+"%3E%3C/script%3E"))),t()}),function(e){function n(t,e){if(!(1<t.originalEvent.touches.length)){t.preventDefault();var n=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}}if(e.support.touch="ontouchend"in document,e.support.touch){var i,t=e.ui.mouse.prototype,r=t._mouseInit,o=t._mouseDestroy;t._touchStart=function(t){var e=this;!i&&e._mouseCapture(t.originalEvent.changedTouches[0])&&(i=!0,e._touchMoved=!1,n(t,"mouseover"),n(t,"mousemove"),n(t,"mousedown"))},t._touchMove=function(t){i&&(this._touchMoved=!0,n(t,"mousemove"))},t._touchEnd=function(t){i&&(n(t,"mouseup"),n(t,"mouseout"),this._touchMoved||n(t,"click"),i=!1)},t._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),r.call(t)},t._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),o.call(t)}}}(jQuery),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).jsmediatags=t()}(function(){return function l(i,r,o){function a(n,t){if(!r[n]){if(!i[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(s)return s(n,!0);throw(e=Error("Cannot find module '"+n+"'")).code="MODULE_NOT_FOUND",e}e=r[n]={exports:{}},i[n][0].call(e.exports,function(t){var e=i[n][1][t];return a(e||t)},e,e.exports,l,i,r,o)}return r[n].exports}for(var s="function"==typeof require&&require,t=0;t<o.length;t++)a(o[t]);return a}({1:[function(){},{}],2:[function(t,e){e.exports=XMLHttpRequest},{}],3:[function(t,e){function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();t=function(){function n(t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var e;if(e=Object.getPrototypeOf(n).call(this),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(e=!e||"object"!=typeof e&&"function"!=typeof e?this:e)._array=t,e._size=t.length,e._isInitialized=!0,e}return i(n,t("./MediaFileReader")),r(n,[{key:"init",value:function(t){setTimeout(t.onSuccess,0)}},{key:"loadRange",value:function(t,e){setTimeout(e.onSuccess,0)}},{key:"getByteAt",value:function(t){return this._array[t]}}],[{key:"canReadFile",value:function(t){return Array.isArray(t)||"function"==typeof Buffer&&Buffer.isBuffer(t)}}]),n}(),e.exports=t},{"./MediaFileReader":10}],4:[function(t,e){function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0
),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),o=t("./ChunkedFileData");t=function(){function n(t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var e;if(e=Object.getPrototypeOf(n).call(this),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(e=!e||"object"!=typeof e&&"function"!=typeof e?this:e)._blob=t,e._fileData=new o,e}return i(n,t("./MediaFileReader")),r(n,[{key:"_init",value:function(t){this._size=this._blob.size,setTimeout(t.onSuccess,1)}},{key:"loadRange",value:function(e,n){var i=this,t=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,e[0],e[1]+1),r=new FileReader;r.onloadend=function(t){t=new Uint8Array(r.result),i._fileData.addData(e[0],t),n.onSuccess()},r.onerror=r.onabort=function(){n.onError&&n.onError({type:"blob",info:r.error})},r.readAsArrayBuffer(t)}},{key:"getByteAt",value:function(t){return this._fileData.getByteAt(t)}}],[{key:"canReadFile",value:function(t){return"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof File&&t instanceof File}}]),n}(),e.exports=t},{"./ChunkedFileData":5,"./MediaFileReader":10}],5:[function(t,e){var n=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._fileData=[]}return n(t,null,[{key:"NOT_FOUND",get:function(){return-1}}]),n(t,[{key:"addData",value:function(t,e){var n=t+e.length-1,i=this._getChunkRange(t,n);if(-1===i.startIx)this._fileData.splice(i.insertIx||0,0,{offset:t,data:e});else{var r=this._fileData[i.startIx],o=this._fileData[i.endIx],a=(n=n<o.offset+o.data.length-1,{offset:Math.min(t,r.offset),data:e});t>r.offset&&(r=this._sliceData(r.data,0,t-r.offset),a.data=this._concatData(r,e)),n&&(r=this._sliceData(a.data,0,o.offset-a.offset),a.data=this._concatData(r,o.data)),this._fileData.splice(i.startIx,i.endIx-i.startIx+1,a)}}},{key:"_concatData",value:function(t,e){if("undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(t)){var n=new t.constructor(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}return t.concat(e)}},{key:"_sliceData",value:function(t,e,n){return t.slice?t.slice(e,n):t.subarray(e,n)}},{key:"_getChunkRange",value:function(t,e){for(var n=-1,i=-1,r=0,o=0;o<this._fileData.length;r=++o){var a=this._fileData[o].offset,s=a+this._fileData[o].data.length;if(e<a-1)break;if(t<=s+1&&a-1<=e){n=o;break}}if(-1===n)return{startIx:-1,endIx:-1,insertIx:r};for(o=n;o<this._fileData.length&&((a=this._fileData[o].offset)-1<=e&&(i=o),!(e<=(s=a+this._fileData[o].data.length)+1));o++);return-1===i&&(i=n),{startIx:n,endIx:i}}},{key:"hasDataRange",value:function(t,e){for(var n=0;n<this._fileData.length;n++){var i=this._fileData[n];if(e<i.offset)break;if(t>=i.offset&&e<i.offset+i.data.length)return!0}return!1}},{key:"getByteAt",value:function(t){for(var e,n=0;n<this._fileData.length;n++){var i=this._fileData[n].offset,r=i+this._fileData[n].data.length-1;if(i<=t&&t<=r){e=this._fileData[n];break}}if(e)return e.data[t-e.offset];throw Error("Offset "+t+" hasn't been loaded yet.")}}]),t}(),e.exports=t},{}],6:[function(t,e,n){function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();n=t("./MediaTagReader"),t("./MediaFileReader"),t=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=Object.getPrototypeOf(e).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?this:t}return i(e,n),r(e,[{key:"_loadData",value:function(t,e){var n=t.getSize();t.loadRange([n-128,n-1],e)}},{key:"_parseData",value:function(t){var e=t.getSize()-128,n=t.getStringWithCharsetAt(e+3,30).toString(),i=t.getStringWithCharsetAt(e+33,30).toString(),r=t.getStringWithCharsetAt(e+63,30).toString(),o=t.getStringWithCharsetAt(e+93,4).toString(),a=t.getByteAt(e+97+28),s=t.getByteAt(e+97+29);if(0==a&&0!=s){a="1.1";var l=t.getStringWithCharsetAt(e+97,28).toString()}else a="1.0",l=t.getStringWithCharsetAt(e+97,30).toString(),s=0;return n={type:"ID3",version:a,tags:{title:n,artist:i,album:r,year:o,comment:l,genre:(e=t.getByteAt(e+97+30))<255?c[e]:""}},s&&(n.tags.track=s),n}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(t){return"TAG"===String.fromCharCode.apply(String,t.slice(0,3))}}]),e}();var c="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");e.exports=t},{"./MediaFileReader":10,"./MediaTagReader":11}],7:[function(t,e){function s(t){var e;switch(t){case 0:e="iso-8859-1";break;case 1:e="utf-16";break;case 2:e="utf-16be";break;case 3:e="utf-8"}return e}t("./MediaFileReader");var r={APIC:function(t,e,n,i,r){r=r||"3",i=t;var o=s(n.getByteAt(t));switch(r){case"2":r=n.getStringAt(t+1,3),t+=4;break;case"3":case"4":t+=1+(r=n.getStringWithCharsetAt(t+1,e-1)).bytesReadCount;break;default:throw Error("Couldn't read ID3v2 major version.")}var a=n.getByteAt(t,1);a=l[a];return t+=1+(o=n.getStringWithCharsetAt(t+1,e-(t-i)-1,o)).bytesReadCount,{format:r.toString(),type:a,description:o.toString(),data:n.getBytesAt(t,i+e-t)}},COMM:function(t,e,n,i,r){var o=t,a=s(n.getByteAt(t));return i=n.getStringAt(t+1,3),t+=4+(r=n.getStringWithCharsetAt(t+4,e-4,a)).bytesReadCount,t=n.getStringWithCharsetAt(t,o+e-t,a),{language:i,short_description:r.toString(),text:t.toString()}}};r.COM=r.COMM,r.PIC=function(t,e,n,i){return r.APIC(t,e,n,i,"2")},r.PCNT=function(t,e,n){return n.getLongAt(t,!1)},r.CNT=r.PCNT,r["T*"]=function(t,e,n,i){return i=s(n.getByteAt(t)),n.getStringWithCharsetAt(t+1,e-1,i).toString()},r["W*"]=function(t,e,n,i){return void 0!==(i=s(n.getByteAt(t)))?n.getStringWithCharsetAt(t+1,e-1,i).toString():n.getStringWithCharsetAt(t,e,i).toString()},r.TCON=function(t,e,n,i){return r["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")},r.TCO=r.TCON,r.USLT=function(t,e,n,i,r){var o=t,a=s(n.getByteAt(t));return i=n.getStringAt(t+1,3),t+=4+(r=n.getStringWithCharsetAt(t+4,e-4,a)).bytesReadCount,t=n.getStringWithCharsetAt(t,o+e-t,a),{language:i,descriptor:r.toString(),lyrics:t.toString()}},r.ULT=r.USLT;var l="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");e.exports={getFrameReaderFunction:function(t){return t in r?r[t]:"T"===t[0]?r["T*"]:"W"===t[0]?r["W*"]:null}}},{"./MediaFileReader":10}],8:[function(t,e,n){function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();n=t("./MediaTagReader"),t("./MediaFileReader");var o=t("./ArrayFileReader"),h=t("./ID3v2FrameReader");t=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=Object.getPrototypeOf(e).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?this:t}return i(e,n),r(e,[{key:"_loadData",value:function(t,e){t.loadRange([6,9],{onSuccess:function(){t.loadRange([0,10+t.getSynchsafeInteger32At(6)-1],e)},onError:e.onError})}},{key:"_parseData",value:function(t,e){var n=0;if(4<(c=t.getByteAt(n+3)))return{type:"ID3",version:">2.4",tags:{}};var i=t.getByteAt(n+4),r=t.isBitSetAt(n+5,7),o=t.isBitSetAt(n+5,6),a=t.isBitSetAt(n+5,5),s=t.getSynchsafeInteger32At(n+6);n+=10;if(o)n=n+(t.getLongAt(n,!0)+4);var l,c={type:"ID3",version:"2."+c+"."+i,major:c,revision:i,flags:{unsynchronisation:r,extended_header:o,experimental_indicator:a,footer_present:!1},size:s,tags:{}};n=this._readFrames(n,s-10,t,c,e);for(l in d)d.hasOwnProperty(l)&&(s=this._getFrameData(n,d[l]))&&(c.tags[l]=s);for(var u in n)n.hasOwnProperty(u)&&(c.tags[u]=n[u]);return c}},{key:"_getUnsyncFileReader",value:function(t,e,n){for(t=t.getBytesAt(e,n),e=0;e<t.length-1;e++)255===t[e]&&0===t[e+1]&&t.splice(e+1,1);return new o(t)}},{key:"_readFrames",value:function(t,e,n,i,r){var o={};for(r&&(r=this._expandShortcutTags(r));t<e;){var a=this._readFrameHeader(n,t,i),s=a.id;if(0===a.size)break;if(!s)break;var l=a.flags,c=a.size,u=t+a.headerSize,d=n;t+=a.headerSize+a.size,r&&-1===r.indexOf(s)||((i.flags.unsynchronisation||l&&l.format.unsynchronisation)&&(d=this._getUnsyncFileReader(d,u,c),u=0,c=d.getSize()),l&&l.format.data_length_indicator&&(u+=4,c-=4),l=(a=h.getFrameReaderFunction(s))?a(u,c,d,l):null,c={id:s,size:c,description:u=this._getFrameDescription(s),data:l},s in o?(o[s].id&&(o[s]=[o[s]]),o[s].push(c)):o[s]=c)}return o}},{key:"_readFrameHeader",value:function(t,e,n){var i=null;switch(n=n.major){case 2:var r=t.getStringAt(e,3),o=t.getInteger24At(e+3,!0),a=6;break;case 3:r=t.getStringAt(e,4),o=t.getLongAt(e+4,!0),a=10;break;case 4:r=t.getStringAt(e,4),o=t.getSynchsafeInteger32At(e+4),a=10}return r&&2<n&&(i=this._readFrameFlags(t,e+8)),{id:r||"",size:o||0,headerSize:a||0,flags:i}}},{key:"_readFrameFlags",value:function(t,e){return{message:{tag_alter_preservation:t.isBitSetAt(e,6),file_alter_preservation:t.isBitSetAt(e,5),read_only:t.isBitSetAt(e,4)},format:{grouping_identity:t.isBitSetAt(e+1,7),compression:t.isBitSetAt(e+1,3),encryption:t.isBitSetAt(e+1,2),unsynchronisation:t.isBitSetAt(e+1,1),data_length_indicator:t.isBitSetAt(e+1,0)}}}},{key:"_getFrameData",value:function(t,e){for(var n,i=0;n=e[i];i++)if(n in t)return t[n].data}},{key:"_getFrameDescription",value:function(t){return t in a?a[t]:"Unknown"}},{key:"getShortcuts",value:function(){return d}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(t){return"ID3"===String.fromCharCode.apply(String,t.slice(0,3))}}]),e}();var a={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},d={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};e.exports=t},{"./ArrayFileReader":3,"./ID3v2FrameReader":7,"./MediaFileReader":10,"./MediaTagReader":11}],9:[function(t,e,n){function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();n=t("./MediaTagReader"),t("./MediaFileReader"),t=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=Object.getPrototypeOf(e).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?this:t}return i(e,n),r(e,[{key:"_loadData",value:function(t,e){var n=this;t.loadRange([0,16],{onSuccess:function(){n._loadAtom(t,0,"",e)},onError:e.onError})}},{key:"_loadAtom",value:function(t,e,n,i){if(e>=t.getSize())i.onSuccess();else{var r=this,o=t.getLongAt(e,!0);if(0==o||isNaN(o))i.onSuccess();else{var a=t.getStringAt(e+4,4);if(this._isContainerAtom(a)){"meta"==a&&(e+=4);var s=(n?n+".":"")+a;"moov.udta.meta.ilst"===s?t.loadRange([e,e+o],i):t.loadRange([e+8,e+8+8],{onSuccess:function(){r._loadAtom(t,e+8,s,i)},onError:i.onError})}else t.loadRange([e+o,e+o+8],{onSuccess:function(){r._loadAtom(t,e+o,n,i)},onError:i.onError})}}}},{key:"_isContainerAtom",value:function(t){return 0<=["moov","udta","meta","ilst"].indexOf(t)}},{key:"_canReadAtom",value:function(t){return"----"!==t}},{key:"_parseData",value:function(t,e){var n={};for(var i in e=this._expandShortcutTags(e),this._readAtom(n,t,0,t.getSize(),e),o)if(o.hasOwnProperty(i)){var r=n[o[i]];r&&(n[i]="track"===i?r.data.track:r.data)}return{type:"MP4",ftyp:t.getStringAt(8,4),version:t.getLongAt(12,!0),tags:n}}},{key:"_readAtom",value:function(t,e,n,i,r,o,a){a=void 0===a?"":a+"  ";for(var s=n;s<n+i;){var l=e.getLongAt(s,!0);if(0==l)break;var c=e.getStringAt(s+4,4);if(this._isContainerAtom(c)){"meta"==c&&(s+=4),this._readAtom(t,e,s+8,l-8,r,(o?o+".":"")+c,a);break}(!r||0<=r.indexOf(c))&&"moov.udta.meta.ilst"===o&&this._canReadAtom(c)&&(t[c]=this._readMetadataAtom(e,s)),s+=l}}},{key:"_readMetadataAtom",value:function(t,e){var n,i=t.getLongAt(e,!0),r=t.getStringAt(e+4,4),o=t.getInteger24At(e+16+1,!0);o=l[o];if("trkn"==r)n={track:t.getByteAt(e+16+11),total:t.getByteAt(e+16+13)};else{var a=e+24,s=i-24;switch(o){case"text":n=t.getStringWithCharsetAt(a,s,"utf-8").toString();break;case"uint8":n=t.getShortAt(a,!1);break;case"jpeg":case"png":n={format:"image/"+o,data:t.getBytesAt(a,s)}}}return{id:r,size:i,description:c[r]||"Unknown",data:n}}},{key:"getShortcuts",value:function(){return o}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(t){return"ftyp"===String.fromCharCode.apply(String,t.slice(4,8))}}]),e}();var l={0:"uint8",1:"text",13:"jpeg",14:"png",21:"uint8"},c={"\xa9alb":"Album","\xa9ART":"Artist",aART:"Album Artist","\xa9day":"Release Date","\xa9nam":"Title","\xa9gen":"Genre",gnre:"Genre",trkn:"Track Number","\xa9wrt":"Composer","\xa9too":"Encoding Tool","\xa9enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","\xa9grp":"Grouping",keyw:"Keywords","\xa9lyr":"Lyrics","\xa9cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code"},o={title:"\xa9nam",artist:"\xa9ART",album:"\xa9alb",year:"\xa9day",comment:"\xa9cmt",track:"trkn",genre:"\xa9gen",picture:"covr",lyrics:"\xa9lyr"};e.exports=t},{"./MediaFileReader":10,"./MediaTagReader":11}],10:[function(t,e){var n=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),i=t("./StringUtils");t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._isInitialized=!1,this._size=0}return n(t,[{key:"init",value:function(t){var e=this;if(!this._isInitialized)return this._init({onSuccess:function(){e._isInitialized=!0,t.onSuccess()},onError:t.onError});setTimeout(t.onSuccess,1)}},{key:"_init",value:function(){throw Error("Must implement init function")}},{key:"loadRange",value:function(){throw Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(){throw Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(t,e){for(var n=Array(e),i=0;i<e;i++)n[i]=this.getByteAt(t+i);return n}},{key:"isBitSetAt",value:function(t,e){return 0!=(this.getByteAt(t)&1<<e)}},{key:"getSByteAt",value:function(t){return 127<(t=this.getByteAt(t))?t-256:t}},{key:"getShortAt",value:function(t,e){var n=e?(this.getByteAt(t)<<8)+this.getByteAt(t+1):(this.getByteAt(t+1)<<8)+this.getByteAt(t);return n<0&&(n+=65536),n}},{key:"getSShortAt",value:function(t,e){var n=this.getShortAt(t,e);return 32767<n?n-65536:n}},{key:"getLongAt",value:function(t,e){var n=this.getByteAt(t),i=this.getByteAt(t+1),r=this.getByteAt(t+2),o=this.getByteAt(t+3);return(n=e?(((n<<8)+i<<8)+r<<8)+o:(((o<<8)+r<<8)+i<<8)+n)<0&&(n+=4294967296),n}},{key:"getSLongAt",value:function(t,e){var n=this.getLongAt(t,e);return 2147483647<n?n-4294967296:n}},{key:"getInteger24At",value:function(t,e){var n=this.getByteAt(t),i=this.getByteAt(t+1),r=this.getByteAt(t+2);return(n=e?((n<<8)+i<<8)+r:((r<<8)+i<<8)+n)<0&&(n+=16777216),n}},{key:"getStringAt",value:function(t,e){for(var n=[],i=t,r=0;i<t+e;i++,r++)n[r]=String.fromCharCode(this.getByteAt(i));return n.join("")}},{key:"getStringWithCharsetAt",value:function(t,e,n){switch(t=this.getBytesAt(t,e),(n||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":n=i.readUTF16String(t,"utf-16be"===n);break;case"utf-8":n=i.readUTF8String(t);break;default:n=i.readNullTerminatedString(t)}return n}},{key:"getCharAt",value:function(t){return String.fromCharCode(this.getByteAt(t))}},{key:"getSynchsafeInteger32At",value:function(t){var e=this.getByteAt(t),n=this.getByteAt(t+1),i=this.getByteAt(t+2);return 127&this.getByteAt(t+3)|(127&i)<<7|(127&n)<<14|(127&e)<<21}}],[{key:"canReadFile",value:function(){throw Error("Must implement canReadFile function")}}]),t}(),e.exports=t},{"./StringUtils":12}],11:[function(t,e){var n=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();t("./MediaFileReader"),t=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._mediaFileReader=t,this._tags=null}return n(e,[{key:"setTagsToRead",value:function(t){return this._tags=t,this}},{key:"read",value:function(e){var n=this;this._mediaFileReader.init({onSuccess:function(){n._loadData(n._mediaFileReader,{onSuccess:function(){var t=n._parseData(n._mediaFileReader,n._tags);e.onSuccess(t)},onError:e.onError})},onError:e.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(){throw Error("Must implement _loadData function")}},{key:"_parseData",value:function(){throw Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(t){if(!t)return null;for(var e,n=[],i=this.getShortcuts(),r=0;e=t[r];r++)n=n.concat(i[e]||[e]);return n}}],[{key:"getTagIdentifierByteRange",value:function(){throw Error("Must implement")}},{key:"canReadTagFormat",value:function(){throw Error("Must implement")}}]),e}(),e.exports=t},{"./MediaFileReader":10}],12:[function(t,e){var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),c=function(){function n(t,e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._value=t,this.bytesReadCount=e,this.length=t.length}return i(n,[{key:"toString",value:function(){return this._value}}]),n}();e.exports={readUTF16String:function(t,e,n){var i=0,r=1,o=0;n=Math.min(n||t.length,t.length),254==t[0]&&255==t[1]?(e=!0,i=2):255==t[0]&&254==t[1]&&(e=!1,i=2),e&&(r=0,o=1),e=[];for(var a=0;i<n;a++){var s=t[i+r],l=(s<<8)+t[i+o];i=i+2;if(0==l)break;s<216||224<=s?e[a]=String.fromCharCode(l):(s=(t[i+r]<<8)+t[i+o],i+=2,e[a]=String.fromCharCode(l,s))}return new c(e.join(""),i)},readUTF8String:function(t,e){var n=0;e=Math.min(e||t.length,t.length),239==t[0]&&187==t[1]&&191==t[2]&&(n=3);for(var i=[],r=0;n<e;r++){if(0==(s=t[n++]))break;if(s<128)i[r]=String.fromCharCode(s);else if(194<=s&&s<224){var o=t[n++];i[r]=String.fromCharCode(((31&s)<<6)+(63&o))}else if(224<=s&&s<240){o=t[n++];var a=t[n++];i[r]=String.fromCharCode(((255&s)<<12)+((63&o)<<6)+(63&a))}else if(240<=s&&s<245){var s=((7&s)<<18)+((63&(o=t[n++]))<<12)+((63&(a=t[n++]))<<6)+(63&t[n++])-65536;i[r]=String.fromCharCode(55296+(s>>10),56320+(1023&s))}}return new c(i.join(""),n)},readNullTerminatedString:function(t,e){var n=[];e=e||t.length;for(var i=0;i<e;){var r=t[i++];if(0==r)break;n[i-1]=String.fromCharCode(r)}return new c(n.join(""),i)}}},{}],13:[function(t,e,n){function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=t("./ChunkedFileData");(n=function(){function o(t){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");var e;if(e=Object.getPrototypeOf(o).call(this),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(e=!e||"object"!=typeof e&&"function"!=typeof e?this:e)._url=t,e._fileData=new a,e}return i(o,t("./MediaFileReader")),r(o,[{key:"_init",value:function(t){o._config.avoidHeadRequests?this._fetchSizeWithGetRequest(t):this._fetchSizeWithHeadRequest(t)}},{key:"_fetchSizeWithHeadRequest",value:function(e){var n=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(t){(t=n._parseContentLength(t))?(n._size=t,e.onSuccess()):n._fetchSizeWithGetRequest(e)},onError:e.onError})}},{key:"_fetchSizeWithGetRequest",value:function(n){var i=this,t=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",t,{onSuccess:function(t){var e=i._parseContentRange(t);if(t=i._getXhrResponseContent(t),e){if(null==e.instanceLength)return void i._fetchEntireFile(n);i._size=e.instanceLength}else i._size=t.length;i._fileData.addData(0,t),n.onSuccess()},onError:n.onError})}},{key:"_fetchEntireFile",value:function(e){var n=this;this._makeXHRRequest("GET",null,{onSuccess:function(t){t=n._getXhrResponseContent(t),n._size=t.length,n._fileData.addData(0,t),e.onSuccess()},onError:e.onError})}},{key:"_getXhrResponseContent",value:function(t){return t.responseBody||t.responseText||""}},{key:"_parseContentLength",value:function(t){return null==(t=this._getResponseHeader(t,"Content-Length"))?t:parseInt(t,10)}},{key:"_parseContentRange",value:function(t){if(t=this._getResponseHeader(t,"Content-Range")){var e=t.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!e)throw Error("FIXME: Unknown Content-Range syntax: ",t);return{firstBytePosition:parseInt(e[1],10),lastBytePosition:parseInt(e[2],10),instanceLength:e[3]?parseInt(e[3],10):null}}return null}},{key:"loadRange",value:function(e,n){var i=this;i._fileData.hasDataRange(e[0],Math.min(i._size,e[1]))?setTimeout(n.onSuccess,1):((e=this._roundRangeToChunkMultiple(e))[1]=Math.min(i._size,e[1]),this._makeXHRRequest("GET",e,{onSuccess:function(t){t=i._getXhrResponseContent(t),i._fileData.addData(e[0],t),n.onSuccess()},onError:n.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(t){return[t[0],t[0]+1024*Math.ceil((t[1]-t[0]+1)/1024)-1]}},{key:"_makeXHRRequest",value:function(t,e,n){var i=this._createXHRObject(),r=function(){200===i.status||206===i.status?n.onSuccess(i):n.onError&&n.onError({type:"xhr",info:"Unexpected HTTP status "+i.status+".",xhr:i}),i=null};"undefined"!=typeof i.onload?(i.onload=r,i.onerror=function(){n.onError&&n.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:i})}):i.onreadystatechange=function(){4===i.readyState&&r()},o._config.timeoutInSec&&(i.timeout=1e3*o._config.timeoutInSec,i.ontimeout=function(){n.onError&&n.onError({type:"xhr",info:"Timeout after "+i.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:i})}),i.open(t,this._url),i.overrideMimeType("text/plain; charset=x-user-defined"),e&&this._setRequestHeader(i,"Range","bytes="+e[0]+"-"+e[1]),this._setRequestHeader(i,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),i.send(null)}},{key:"_setRequestHeader",value:function(t,e,n){o._config.disallowedXhrHeaders.indexOf(e.toLowerCase())<0&&t.setRequestHeader(e,n)}},{key:"_hasResponseHeader",value:function(t,e){if(!(n=t.getAllResponseHeaders()))return!1;for(var n=n.split("\r\n"),i=[],r=0;r<n.length;r++)i[r]=n[r].split(":")[0].toLowerCase();return 0<=i.indexOf(e.toLowerCase())}},{key:"_getResponseHeader",value:function(t,e){return this._hasResponseHeader(t,e)?t.getResponseHeader(e):null}},{key:"getByteAt",value:function(t){return 255&this._fileData.getByteAt(t).charCodeAt(0)}},{key:"_createXHRObject",value:function(){if("undefined"==typeof window)return new(t("xhr2").XMLHttpRequest);if(window.XMLHttpRequest)return new window.XMLHttpRequest;throw Error("XMLHttpRequest is not supported")}}],[{key:"canReadFile",value:function(t){return"string"==typeof t&&/^[a-z]+:\/\//i.test(t)}},{key:"setConfig",value:function(t){for(var e in t)t.hasOwnProperty(e)&&(this._config[e]=t[e]);for(t=this._config.disallowedXhrHeaders,e=0;e<t.length;e++)t[e]=t[e].toLowerCase()}}]),o}())._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},e.exports=n},{"./ChunkedFileData":5,"./MediaFileReader":10,xhr2:2}],14:[function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();t("./MediaFileReader"),n=t("./NodeFileReader");var o=t("./XhrFileReader"),a=t("./BlobFileReader"),s=t("./ArrayFileReader");t("./MediaTagReader");var l=t("./ID3v1TagReader"),c=t("./ID3v2TagReader");t=t("./MP4TagReader");var u=[],d=[],h=function(){function e(t){i(this,e),this._file=t}return r(e,[{key:"setTagsToRead",value:function(t){return this._tagsToRead=t,this}},{key:"setFileReader",value:function(t){return this._fileReader=t,this}},{key:"setTagReader",value:function(t){return this._tagReader=t,this}},{key:"read",value:function(e){var n=new(this._getFileReader())(this._file),i=this;n.init({
onSuccess:function(){i._getTagReader(n,{onSuccess:function(t){new t(n).setTagsToRead(i._tagsToRead).read(e)},onError:e.onError})},onError:e.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var t=0;t<u.length;t++)if(u[t].canReadFile(this._file))return u[t];throw Error("No suitable file reader found for ",this._file)}},{key:"_getTagReader",value:function(t,e){if(this._tagReader){var n=this._tagReader;setTimeout(function(){e.onSuccess(n)},1)}else this._findTagReader(t,e)}},{key:"_findTagReader",value:function(n,i){for(var t=[],e=[],r=n.getSize(),o=0;o<d.length;o++){var a=d[o].getTagIdentifierByteRange();0<=a.offset&&a.offset<r/2||a.offset<0&&a.offset<-r/2?t.push(d[o]):e.push(d[o])}var s=!1;o={onSuccess:function(){if(s){for(var t=0;t<d.length;t++){var e=d[t].getTagIdentifierByteRange();e=n.getBytesAt(0<=e.offset?e.offset:e.offset+r,e.length);if(d[t].canReadTagFormat(e))return void i.onSuccess(d[t])}i.onError&&i.onError({type:"tagFormat",info:"No suitable tag reader found"})}else s=!0},onError:i.onError};this._loadTagIdentifierRanges(n,t,o),this._loadTagIdentifierRanges(n,e,o)}},{key:"_loadTagIdentifierRanges",value:function(t,e,n){if(0===e.length)setTimeout(n.onSuccess,1);else{for(var i=[Number.MAX_VALUE,0],r=t.getSize(),o=0;o<e.length;o++){var a=0<=(s=e[o].getTagIdentifierByteRange()).offset?s.offset:s.offset+r,s=a+s.length-1;i[0]=Math.min(a,i[0]),i[1]=Math.max(s,i[1])}t.loadRange(i,n)}}}]),e}(),p=function(){function e(){i(this,e)}return r(e,null,[{key:"addFileReader",value:function(t){return u.push(t),e}},{key:"addTagReader",value:function(t){return d.push(t),e}},{key:"removeTagReader",value:function(t){return 0<=(t=d.indexOf(t))&&d.splice(t,1),e}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){o.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(t){o.setConfig({disallowedXhrHeaders:t})}},{key:"setXhrTimeoutInSec",value:function(t){o.setConfig({timeoutInSec:t})}}]),e}();p.addFileReader(o).addFileReader(a).addFileReader(s).addTagReader(c).addTagReader(l).addTagReader(t),"undefined"!=typeof process&&p.addFileReader(n),e.exports={read:function(t,e){new h(t).read(e)},Reader:h,Config:p}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./ID3v1TagReader":6,"./ID3v2TagReader":8,"./MP4TagReader":9,"./MediaFileReader":10,"./MediaTagReader":11,"./NodeFileReader":1,"./XhrFileReader":13}]},{},[14])(14)}),function(wn){wn.fn.hap=function(c){function t(t){var e,n,i,r;e=document,n="script",i="facebook-jssdk",r=e.getElementsByTagName(n)[0],e.getElementById(i)||((e=e.createElement(n)).id=i,e.src="//connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(e,r)),window.fbAsyncInit=function(){FB.init({appId:t,xfbml:!0,version:"v2.9"})}}function e(t){if(dt){if(!Je){if("touchstart"==t.type){if(!((t=t.originalEvent.touches)&&0<t.length))return!1}else t.preventDefault();Je=!0,zt.on(Xe,function(t){t:{if("touchmove"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),n(e)}}).on($e,function(t){t:if(Je){if(Je=!1,zt.off(Xe).off($e),"touchend"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),n(e)}})}return!1}}function n(t){if(Ve?t=Ke.setProgress(t):((t=t.pageX-Ze.offset().left)<0?t=0:Qe<t&&(t=Qe),t=Math.max(0,Math.min(1,t/Qe))),Qt&&we)try{Qt.currentTime=t*Qt.duration}catch(e){console.log(e)}}function i(t){if(Ve)e=Ke.trackTooltip(t),n=K[0].getBoundingClientRect(),i=nn[0].getBoundingClientRect(),t=parseInt(i.top-n.top-ze.outerHeight()-10),r=parseInt(i.left-n.left-ze.outerWidth()/2+nn.outerWidth()/2);else{if(e=t.pageX-Ze.offset().left,!HAPUtils.isNumber(e))return!1;e<0?e=0:Qe<e&&(e=Qe);var e=Math.max(0,Math.min(1,e/Qe)),n=K[0].getBoundingClientRect(),i=nn[0].getBoundingClientRect(),r=parseInt(t.pageX-Gt.scrollLeft()-n.left-ze.outerWidth()/2);t=parseInt(i.top-n.top-5-ze.outerHeight(),10)}if(r+ze.outerWidth()>K.width()?r=K.width()-ze.outerWidth():r<0&&(r=0),t+n.top<0&&(t=parseInt(i.top-n.top+ze.outerHeight()+15)),ze.css({left:r+"px",top:t+"px"}).show(),!HAPUtils.isNumber(e))return!1;Qt&&(t=e*(n=Qt.duration),HAPUtils.isNumber(t)&&HAPUtils.isNumber(n)&&ze.find("p").html(HAPUtils.formatCurrentTime(t)+" / "+HAPUtils.formatDuration(n)))}function r(t){if(dt){if(!on){if("touchstart"==t.type){if(!((t=t.originalEvent.touches)&&0<t.length))return!1}else t.preventDefault();on=!0,zt.on(Xe,function(t){t:{if("touchmove"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),o(e)}}).on($e,function(t){t:if(on){if(on=!1,zt.off(Xe).off($e),"touchend"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),o(e)}})}return!1}}function u(){if(!dt)return!1;0<Dt?(an=Dt,Dt=0):Dt=an,a()}function o(t){dn?Dt=1-(Dt=Math.max(0,Math.min(1,(t.pageY-cn.offset().top)/hn))):Dt=Math.max(0,Math.min(1,(t.pageX-cn.offset().left)/hn)),a()}function a(t){void 0!==t&&(Dt=t),Qt&&(Qt.volume=Dt),t=dn?"height":"width",HAPUtils.isNumber(hn)||(hn=volumeVertical?cn.height():cn.width()),un.css(t,Dt*hn+"px"),0==Dt?sn.find("i").removeClass("fa-volume-up fa-volume-down").addClass("fa-volume-off"):0<Dt&&Dt<.5?sn.find("i").removeClass("fa-volume-off fa-volume-up").addClass("fa-volume-down"):sn.find("i").removeClass("fa-volume-off fa-volume-down").addClass("fa-volume-up"),wn(qt).trigger("volumeChange",{instance:qt,instanceName:vt,volume:Dt})}function s(t){var e=dn?t.pageY-cn.offset().top:t.pageX-cn.offset().left;if(e<0?e=0:hn<e&&(e=hn),e=Math.max(0,Math.min(1,e/hn)),!HAPUtils.isNumber(e))return!1;dn&&(e=1-e),e=parseInt(100*e,10),ze.find("p").text(e+" %"),e=K[0].getBoundingClientRect();var n=ln[0].getBoundingClientRect();if(dn){var i=parseInt(n.left-e.left-ze.outerWidth()/2+ln.outerWidth()/2);t=parseInt(t.pageY-Gt.scrollTop()-e.top-ze.outerHeight()-10)}else i=parseInt(t.pageX-Gt.scrollLeft()-e.left-ze.outerWidth()/2),t=parseInt(n.top-e.top-ze.outerHeight());i+ze.outerWidth()>K.width()?i=K.width()-ze.outerWidth():i<0&&(i=0),t+e.top<0&&(t=parseInt(n.top-e.top+ze.outerHeight()+15)),ze.css({left:i+"px",top:t+"px"}).show()}function d(t){return t.preventDefault(),!!dt&&(t=wn(t.currentTarget),(!be||!be.is(t))&&(de=!0,Ge.processPlaylistRequest(t.closest(".hap-playlist-item").index()),void wn(qt).trigger("clickPlaylistItem",{instance:qt,instanceName:vt})))}function h(t){return t.preventDefault(),!!dt&&(t=wn(t.currentTarget),(!be||!be.is(t))&&(t.removeClass("hap-playlist-non-selected").addClass("hap-playlist-selected"),void wn(qt).trigger("overPlaylistItem",{instance:qt,instanceName:vt,item:t})))}function p(t){return t.preventDefault(),!!dt&&(t=wn(t.currentTarget),(!be||!be.is(t))&&(t.removeClass("hap-playlist-selected").addClass("hap-playlist-non-selected"),void wn(qt).trigger("outPlaylistItem",{instance:qt,instanceName:vt,item:t})))}function l(t){if(!dt)return!1;if((t=wn(t.currentTarget)).hasClass("hap-prev-toggle"))qt.previousMedia();else if(t.hasClass("hap-playback-toggle"))qt.togglePlayback();else if(t.hasClass("hap-next-toggle"))qt.nextMedia();else if(t.hasClass("hap-volume-toggle"))u();else if(t.hasClass("hap-loop-toggle"))xt=!xt,Ge.setLooping(xt),xt?ct.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):ct.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color");else if(t.hasClass("hap-random-toggle"))Tt=!Tt,Ge.setRandom(Tt),Tt?ut.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):ut.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color");else if(t.hasClass("hap-sort-alpha"))qt.sort("title",Ce);else if(t.hasClass("hap-popup-toggle"))hapOpenPopup(qt,c);else if(t.hasClass("hap-share-toggle"))Z.toggle();else if(t.hasClass("hap-share-item")){t=t.attr("data-type").toLowerCase();var e,n="https:"==window.location.protocol?"https:":"http:",i=(window.screen.width-600)/2,r=(window.screen.height-300)/2,o=Ee.title||"",a=Ee.description||"",s=Ee.thumb||"",l=Ee.share||window.location.href;HAPUtils.relativePath(s)||(s=HAPUtils.qualifyURL(s)),"facebook"==t?window.FB&&FB.ui({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:{"og:url":l,"og:title":o,"og:description":a,"og:image":s}})}):"twitter"==t?e=n+"//twitter.com/share?url="+encodeURIComponent(l)+"&text="+encodeURIComponent(o):"googleplus"==t?e=n+"//plus.google.com/share?url="+encodeURIComponent(l):"tumblr"==t&&(e=n+"//www.tumblr.com/share/link?url="+encodeURIComponent(l)+"&amp;name="+encodeURIComponent(o)+"&amp;description="+encodeURIComponent(a)),e&&window.open(e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=600,height=300,left="+i+",top="+r)}}function f(t){if(!dt||on||Je)return!1;(t=wn(t.currentTarget).find("i")).hasClass("hap-icon-color")&&t.removeClass("hap-icon-color").addClass("hap-icon-rollover-color")}function g(t){if(!dt)return!1;var e=(t=wn(t.currentTarget)).find("i");t.hasClass("hap-random-toggle")&&Tt||t.hasClass("hap-loop-toggle")&&xt||e.hasClass("hap-icon-rollover-color")&&e.removeClass("hap-icon-rollover-color").addClass("hap-icon-color")}function m(){be&&(wn(qt).trigger("playlistItemEnabled",{instance:qt,instanceName:vt,item:be}),be.removeClass("hap-playlist-selected").addClass("hap-playlist-non-selected"),be=null)}function v(t){ht=!0,et.show(),ye?W():J.empty();var e,n,i,r=wn(t);if(0==r.length)return alert("Failed playlist selection! Playlist - "+t+" does not exist. Check activePlaylist option in settings!"),O(),!1;(yt=t,wn(qt).trigger("playlistStartLoad",{instance:qt,instanceName:vt}),null!=r.attr("data-type")&&"xml"==r.attr("data-type"))?S(b(r)):(r.children(".hap-playlist-item").each(function(){n=wn(this),i=n.attr("data-type"),RegExp(/^audio$/).test(i)?Be.push(n.clone()):RegExp(/^hls$/).test(i)?Be.push(n.clone()):RegExp(/^radio$/).test(i)?Be.push(n.clone()):(e=b(n),Be.push(e))}),Ue=Be.length,y())}function y(){if(Ue-1<++je)D();else{var t=Be[je],e=t.type;e?RegExp(/^soundcloud$/).test(e)?(te=t.limit||1e3,Le=[],Zt?k(!0,t.path):C(t.path)):RegExp(/^podcast$/).test(e)?E(t):RegExp(/^itunes_podcast_music$/).test(e)?A(t):RegExp(/^folder$/).test(e)?w(t):/^gdrive-folder$/.test(e)?x(t):RegExp(/^audio$/).test(e)?(Fe.push(t),y()):RegExp(/^hls$/).test(e)&&(Fe.push(t),y()):(Fe.push(t),y())}}function b(t){var e={};if(e.origclasses=t.attr("class"),e.type=t.attr("data-type"),t.attr("data-hls")&&!HAPUtils.isEmpty(t.attr("data-hls"))&&(e.hls=t.attr("data-hls")),t.attr("data-mp3")&&!HAPUtils.isEmpty(t.attr("data-mp3"))&&(e.mp3=t.attr("data-mp3")),t.attr("data-wav")&&!HAPUtils.isEmpty(t.attr("data-wav"))&&(e.wav=t.attr("data-wav")),"audio"==e.type){if(null!=t.attr("data-path")&&!HAPUtils.isEmpty(t.attr("data-path"))){var n=t.attr("data-path"),i=n.substr(n.lastIndexOf(".")+1);"mp3"==i.toLowerCase()||"wav"==i.toLowerCase()?e[i.toLowerCase()]=n:e.mp3=n}}else null==t.attr("data-path")||HAPUtils.isEmpty(t.attr("data-path"))||(e.path=e.id=t.attr("data-path"));return null!=t.attr("data-limit")&&!HAPUtils.isEmpty(t.attr("data-limit"))&&HAPUtils.isNumber(t.attr("data-limit"))&&0!=Math.abs(parseInt(t.attr("data-limit"),10))&&(e.limit=Math.abs(parseInt(t.attr("data-limit"),10))),null==t.attr("data-artwork")||HAPUtils.isEmpty(t.attr("data-artwork"))||(e.artwork=t.data("artwork")),null==t.attr("data-thumb")||HAPUtils.isEmpty(t.attr("data-thumb"))?t.find(".hap-playlist-thumb img").length?e.thumb=t.find(".hap-playlist-thumb img").attr("src"):null==t.attr("data-thumb-default")||HAPUtils.isEmpty(t.attr("data-thumb-default"))||(e.thumbDefault=t.attr("data-thumb-default")):e.thumb=t.attr("data-thumb"),null==t.attr("data-thumb-quality")||HAPUtils.isEmpty(t.attr("data-thumb-quality"))||(e.thumbQuality=t.attr("data-thumb-quality")),null==t.attr("data-title")||HAPUtils.isEmpty(t.attr("data-title"))?t.find(".hap-playlist-title").length&&(e.title=t.find(".hap-playlist-title").html()):e.title=t.attr("data-title"),null==t.attr("data-description")||HAPUtils.isEmpty(t.attr("data-description"))||(e.description=t.attr("data-description")),null==t.attr("data-artist")||HAPUtils.isEmpty(t.attr("data-artist"))||(e.artist=t.attr("data-artist")),null==t.attr("data-album")||HAPUtils.isEmpty(t.attr("data-album"))||(e.album=t.attr("data-album")),null==t.attr("data-download")||HAPUtils.isEmpty(t.attr("data-download"))||(e.download=t.attr("data-download")),null!=t.attr("data-id3")&&(e.id3=!0),null==t.attr("data-start")||HAPUtils.isEmpty(t.attr("data-start"))||(e.start=Math.abs(t.attr("data-start"))),null==t.attr("data-end")||HAPUtils.isEmpty(t.attr("data-end"))||(e.end=Math.abs(t.attr("data-end"))),null!=t.attr("data-playback-rate")&&(e.playbackRate=1,HAPUtils.isEmpty(t.attr("data-playback-rate"))||(e.playbackRate=Math.abs(t.attr("data-playback-rate")))),null==t.attr("data-link")||HAPUtils.isEmpty(t.attr("data-link"))||(e.link=t.attr("data-link"),e.target="_blank",null==t.attr("data-target")||HAPUtils.isEmpty(t.attr("data-target"))||(e.target=t.attr("data-target"))),null==t.attr("data-share")||HAPUtils.isEmpty(t.attr("data-share"))||(e.share=t.attr("data-share")),t.is(":empty")||(e.content=t.html()),e}function w(a){if("file:"==window.location.protocol)return alert("Reading files from folders locally is not possible! This requires online server connection."),y(),!1;var t=a.path.replace(/\/\//g,"/"),e=mt+"includes/folder_parser.php";t={dir:t},a.id3&&(Xt=Yt=Fe.length-1),wn.ajax({type:"GET",url:e,data:t,dataType:"json"}).done(function(t){var e,n=t.length;for(HAPUtils.keysrt(t,"filename"),e=0;e<n;e++){var i=t[e],r=wn.extend(!0,{},a);r.type="audio";var o=i.fullpath;r[i.extension]=o,delete r.path,"undefined"==typeof r.download&&(r.download=o),"undefined"==typeof r.share&&(r.share=o),r.title||(r.title=i.filename),Fe.push(r),Yt++}a.id3?T():y()}).fail(function(t,e,n){console.log("Error processFolder: "+t,e,n),y()})}function x(a){return"file:"==window.location.protocol?(alert("Reading files from folders locally is not possible! This requires online server connection."),y(),!1):HAPUtils.isEmpty(Rt)?(alert("gDriveAppId has not been set in settings!"),y(),!1):void wn.ajax({url:"https://www.googleapis.com/drive/v3/files?q='"+a.path+"'+in+parents&key="+Rt,dataType:"jsonp"}).done(function(t){var e,n=t.files.length,i=[],r=[];for(e=0;e<n;e++){var o=t.files[e];/mp3|mpeg|mpeg3|wav/.test(o.mimeType)?r.push(o):/jpg|jpeg|png/.test(o.mimeType)&&i.push(o)}for(HAPUtils.keysrt(r,"name"),HAPUtils.keysrt(i,"name"),n=r.length,e=0;e<n;e++){o=r[e],(t=wn.extend(!0,{},a)).type="audio",t[o.name.substr(o.name.lastIndexOf(".")+1).toLowerCase()]="https://drive.google.com/uc?export=view&id="+o.id,delete t.path,"undefined"==typeof t.download&&(t.download="https://drive.google.com/uc?export=download&id="+o.id),"undefined"==typeof t.share&&(t.share="https://drive.google.com/open?id="+o.id),!t.thumb&&i[e]&&(t.thumb="https://drive.google.com/uc?export=view&id="+i[e].id),t.title||(t.title=o.name.substr(0,o.name.lastIndexOf("."))),Fe.push(t)}y()}).fail(function(t,e,n){console.log("Error processGdriveFolder: "+t,e,n),y()})}function T(){var r=Fe[Yt];jsmediatags.read(r.mp3||r.wav,{onSuccess:function(t){var e=t.tags;if(t=e.picture,e.artist&&(r.artist=e.artist),e.title&&(r.title=e.title),e.album&&(r.album=e.album),t){e="";var n,i=t.data.length;for(n=0;n<i;n++)e+=String.fromCharCode(t.data[n]);r.thumb="data:"+t.format+";base64,"+window.btoa(e)}Xt<--Yt?T():y()},onError:function(t){console.log("ID3 error: ",t.type,t.info),Xt<--Yt?T():y()}})}function S(t){wn.ajax({type:"GET",url:t.path,dataType:"html"}).done(function(t){var e,n,i;wn(t).children(".hap-playlist-item").each(function(){e=wn(this),n=e.attr("data-type"),RegExp(/^audio/).test(n)?Be.push(e):RegExp(/^hls/).test(n)?Be.push(e):(i=b(e),Be.push(i))}),Ue=Be.length,y()}).fail(function(t,e,n){console.log("Error processXml: "+t,e,n),y()})}function E(s){if("file:"==window.location.protocol)alert("Using Podcast locally is not possible! This requires online server connection!"),y();else{var t=De+"?url="+encodeURIComponent(s.path);wn.ajax({url:t,dataType:"json",cache:!1}).done(function(t){var e,n,i,r=HAPUtils.parseXML(t.contents),o=0,a=s.limit||1e3;wn(r).find("image").length&&wn(r).find("image").attr("href")?i=wn(r).find("image").attr("href"):wn(t.contents).find("itunes\\:image").length&&wn(t.contents).find("itunes\\:image").attr("href")&&(i=wn(t.contents).find("itunes\\:image").attr("href")),wn(r).find("item").each(function(){if(a<=o)return!1;e=wn(this),(n=wn.extend(!0,{},s)).type="audio",n.path=e.find("enclosure").attr("url"),"undefined"==typeof n.download&&(n.download=n.path),!n.title&&e.find("title").length&&(n.title=e.find("title").text()),!n.artist&&e.find("author").length&&(n.artist=e.find("author").text()),!n.description&&e.find("description").length&&(n.description=e.find("description").text()),!n.duration&&e.find("duration").length&&(n.duration=e.find("duration").text()),n.thumb||(e.find("image").length&&e.find("image").attr("href")?n.thumb=e.find("image").attr("href"):i&&(n.thumb=i)),"undefined"==typeof n.share&&e.find("link").length&&(n.share=e.find("link").text()),Fe.push(n),o++}),y()}).fail(function(t,e,n){console.log("Error processPodcast: "+t,e,n),y()})}}function A(s){"file:"==window.location.protocol?(alert("Using Podcast locally is not possible! This requires online server connection!"),y()):(encodeURIComponent(s.path),wn.ajax({url:s.path}).done(function(t){t=wn("<div></div>").html(t);var e,n,i,r=0,o=s.limit||500;if(t.find(".lockup.product.podcast").length){var a=t.find(".lockup.product.podcast").find("img");a.length&&(a.attr("src-swap-high-dpi").length?i=a.attr("src-swap-high-dpi"):a.attr("src-swap").length&&(i=a.attr("src-swap")))}t.find("tr.podcast-episode").each(function(){if(o<=r)return!1;e=wn(this),(n=wn.extend(!0,{},s)).type="audio",n.path=e.attr("audio-preview-url"),!n.title&&e.attr("preview-title").length&&(n.title=e.attr("preview-title")),!n.artist&&e.attr("preview-artist").length&&(n.artist=e.attr("preview-artist")),!n.description&&e.find(".episode-info").length&&(n.description=e.find(".episode-info").next().text()),!n.thumb&&i&&(n.thumb=i),"undefined"==typeof n.share&&(n.share=s.path),Fe.push(n),r++}),y()}).fail(function(t,e,n){console.log("Error processPodcast: "+t,e,n),y()}))}function C(t){if("file:"==window.location.protocol)alert("Using SoundCloud locally is not possible! This requires online server connection!"),y();else{if(HAPUtils.isEmpty(_t))return alert("soundCloudAppId has not been set! Skipping Soundcloud url: "+t),y(),!1;var e=document.createElement("script");e.src="https://connect.soundcloud.com/sdk.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n);var i=setInterval(function(){window.SC&&(i&&clearInterval(i),SC.initialize({client_id:_t}),k(Zt=!0,t))},100)}}function k(t,o){SC.get(t?"https://api.soundcloud.com/resolve.json?url="+o+"&client_id="+_t:o,{limit:200,linked_partitioning:1},function(t,e){if(console.log(t),e){for(console.log("Error getSoundCloudPage: "+e);Le.length;)Fe.push(Le.splice(0,1)[0]);y()}else{if("track"==t.kind)_(t);else if("playlist"==t.kind){var n,i=t.tracks.length;if(Le.length+i>=te){i=te-Le.length;var r=!0}for(n=0;n<i;n++)_(t.tracks[n])}else if(t.collection)for(i=t.collection.length,Le.length+i>=te&&(i=te-Le.length,r=!0),n=0;n<i;n++)_(t.collection[n]);else{if(t.username)return n=t.uri,void k(!1,n=/likes/.test(o)?n+"/likes":/favorites/.test(o)?n+"/favorites":n+"/tracks");if(wn.isArray(t))for(i=t.length,Le.length+i>=te&&(i=te-Le.length,r=!0),n=0;n<i;n++)_(t[n])}if(t.next_href&&!r)k(!1,t.next_href);else{for(;Le.length;)Fe.push(Le.splice(0,1)[0]);y()}}})}function _(t){if(t.streamable&&t.stream_url){var e=wn.extend(!0,{},Be[je]);e.type="audio",t.duration&&(e.duration=t.duration),e.path=t.stream_url+"?client_id="+_t,"undefined"==typeof e.download&&(t.downloadable&&t.download_url?e.download=e.path.replace(/\/stream\\?/,"/download"):delete e.download),!e.title&&t.title&&(e.title=t.title),!e.description&&t.description&&(e.description=t.description),!e.thumb&&t.artwork_url&&(e.thumb=t.artwork_url,e.thumbQuality&&(e.thumb=e.thumb.replace("large.jpg",e.thumbQuality))),e.favoritingsCount=parseInt(t.favoritings_count?t.favoritings_count:0,10),e.playbackCount=parseInt(t.playback_count?t.playback_count:0,10),e.hotness=e.favoritingsCount+e.playbackCount,"undefined"==typeof e.share&&t.permalink_url&&(e.share=t.permalink_url),Le.push(e)}}function R(t){Ie.empty();var e,n=t.length;for(e=0;e<n;e++){var i=t[e],r=wn('<div class="hap-playlist-item"/>'),o=i.thumb;if(o){var a=new Image;a.className="hap-hidden",a.onload=function(){this.className="hap-visible"},a.src=o,0==e&&(oe=o),wn('<span class="hap-playlist-thumb"></span>').append(a).appendTo(r)}o=wn('<span class="hap-playlist-info"></span>').appendTo(r),wn('<span class="hap-playlist-title">'+i.title+"</span>").appendTo(o),wn('<span class="hap-playlist-artist">'+i.artist+"</span>").appendTo(o),r.appendTo(Ie)}ie||(ie=!0,I(Pe)),re||(re=!0,wn(qt).trigger("historyEndLoad"))}function D(){var t,e,n=Fe.length,i=0;for(t=0;t<n;t++){fe&&i++;var r=Fe[t],o=r.type;if(pt){if(r instanceof wn&&r.hasClass("hap-playlist-item")){if(o=r,fe){a?a.after(o):he?o.appendTo(J):J.children("div").eq(pe).before(o);var a=o}else o.appendTo(J);var s=o.find(".hap-playlist-non-selected, .hap-playlist-selected")}else{if(r.origclasses||(r.origclasses="hap-playlist-item"),o=wn('<div class="'+r.origclasses+'"/>').attr("data-type",o),fe?(a?a.after(o):he?o.appendTo(J):J.children("div").eq(pe).before(o),a=o):o.appendTo(J),s=wn('<a class="hap-playlist-non-selected" href="#"/>').appendTo(o),-1!=wn.inArray("thumb",It)&&(e=r.thumb||r.thumbDefault)){var l=new Image;l.className="hap-hidden",l.onload=function(){this.className="hap-visible"},l.src=e,wn('<span class="hap-playlist-thumb"></span>').append(l).appendTo(s),o.attr("data-thumb",e)}-1!=wn.inArray("title",It)&&(e=z(r),wn('<span class="hap-playlist-title">'+e+"</span>").appendTo(s),o.attr("data-title",r.title)),(r.path||r.mp3)&&o.attr("data-mp3",r.path||r.mp3),r.hls&&o.attr("data-hls",r.hls),r.description&&o.attr("data-description",r.description),r.share&&o.attr("data-share",r.share),r.download&&o.attr("data-download",r.download),r.album&&o.attr("data-album",r.album),r.id3&&o.attr("data-id3",r.id3),r.start&&o.attr("data-start",r.start),r.end&&o.attr("data-end",r.end),r.playbackRate&&o.attr("data-playback-rate",r.playbackRate),r.link&&(o.attr("data-link",r.link),r.target&&o.attr("data-target",r.target)),Ft&&r.link&&(e=wn('<a class="hap-link" href="'+r.link+'" target="'+r.target+'"><i class="fa fa-link"></i></a>'),s.after(e)),Vt&&jt&&r.download&&(e=wn('<a class="hap-download" href="'+r.download+'" download title="Download"><i class="fa fa-download"></i></a>'),s.after(e)),r.content&&(o.append(r.content),delete r.content)}r.thumb&&!r.artwork&&(r.artwork=[{src:r.thumb}]),s.on("click",d),ft||s.on("mouseenter",h).on("mouseleave",p)}}ye=J,L(),console.log("playlistLength = ",Ue),fe?(t=Ge.getCounter(),Ge.setPlaylistItems(Ue,!1),pe<=t&&(he||Ge.reSetCounter(t+i)),me?(me=!1,ge&&!ft&&(wt=!0),Ge.setCounter(pe,!1)):ge&&Ge.setCounter(pe,!1)):Ge.setPlaylistItems(Ue),O(),wn(qt).trigger("playlistEndLoad",{instance:qt,instanceName:vt})}function L(){if(Ue=J.children(".hap-playlist-item").length,pt){var t,e,n,i,r=0;He=[],J.find(".hap-playlist-item").each(function(){e=wn(this).find(".hap-playlist-non-selected, .hap-playlist-selected"),(n=e.find(".hap-playlist-title")).length&&(t=n.html(),He.push(t),St&&(i=HAPUtils.formatNumber(r)+Ut,e.find(".hap-playlist-title-num").length?e.find(".hap-playlist-title-num").html(i):n.before(wn('<span class="hap-playlist-title-num">'+i+"</span>")))),r++})}}function P(){if(pt){var t,e,n=0;J.find(".hap-playlist-item").each(function(){t=wn(this).find(".hap-playlist-non-selected, .hap-playlist-selected"),e=HAPUtils.formatNumber(n)+Ut,t.find(".hap-playlist-title-num").length?t.find(".hap-playlist-title-num").html(e):title_node.before(wn('<span class="hap-playlist-title-num">'+e+"</span>")),n++})}}function I(t){console.log("checkPlaylistScroll"),t.mCustomScrollbar({axis:"horizontal"==At?"x":"y",theme:c.playlistScrollTheme,scrollInertia:0,mouseWheel:{normalizeDelta:!0,deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){t.find(".mCSB_container").addClass("hap-mCSB_full")},onOverflowY:function(){t.find(".mCSB_container").removeClass("hap-mCSB_full")}}})}function O(){if(et.hide(),ht=!1,dt||(dt=!0,Et&&!ue&&(I($),ue=!0),G(),K.css("opacity",1),a(Dt),c.autoOpenPopup&&!c.isPopup&&hapOpenPopup(qt,c),wn(qt).trigger("setupDone",{instance:qt,instanceName:vt})),Ct&&!ce&&(J.sortable({update:function(){if(be){var t=be.closest(".hap-playlist-item").index();Ge.reSetCounter(t)}St&&P()}}),ce=!0),!ve&&!fe&&0<Ue){var t=c.activeItem;Ue-1<t&&(t=Ue-1),-1<t&&Ge.setCounter(t,!1),ve=!0}fe=!1}function N(){var e,n,i,r=0;He=[],J.find(".hap-playlist-item").each(function(){wn(this).find(".hap-playlist-non-selected").each(function(){var t=wn(this).on("click",d);ft||t.on("mouseenter",h).on("mouseleave",p),(n=t.find(".hap-playlist-title")).length&&(e=n.html(),He.push(e),St&&(i=HAPUtils.formatNumber(r)+Ut,t.find(".hap-playlist-title-num").length?t.find(".hap-playlist-title-num").html(i):n.before(wn('<span class="hap-playlist-title-num">'+i+"</span>"))))}),r++}),Ue=r,Ge.setPlaylistItems(Ue),ye=J,dt||(dt=!0,Et&&!ue&&(I($),ue=!0),a(Dt),K.css("opacity",1),c.autoOpenPopup&&!c.isPopup&&hapOpenPopup(qt,c),wn(qt).trigger("setupDone",{instance:qt,instanceName:vt})),et.hide(),ht=!1,wn(qt).trigger("playlistEndLoad",{instance:qt,instanceName:vt});var t=c.activeItem;Ue-1<t&&(t=Ue-1),-1<t&&Ge.setCounter(t,!1)}function M(){++ae==se?F():ne.artist.getInfo({artist:Ne[ae].artist},{success:function(t){Oe||(t=""!=t.artist.image[3]["#text"].trim()?t.artist.image[3]["#text"].trim():Ee.thumbDefault,Ne[ae]&&(Ne[ae].thumb=t,M()))},error:function(){Oe||(Ne[ae].thumb=Ee.thumbDefault,M())}})}function j(){Ne=[],ae=-1;var t=Te;";"==t.substring(t.length-1)&&(t=t.substring(0,t.length-1));var r=new XMLHttpRequest;r.open("GET","https://cors-anywhere.herokuapp.com/"+t+"played.html"),r.onload=function(){var t,e=r.responseText,n=e.indexOf("Song Title")+12;for((e=(e=e.substr(n,e.length)).split("</td><td>")).shift(),se=e.length,t=0;t<se;t++){n=e[t].indexOf("</"),e[t]=e[t].substr(0,n),e[t]=e[t].replace(/<\/?[^>]+(>|$)/g,"");var i=e[t].split(" - ");n=i[0].trim(),i=i[1]?i[1].trim():"",0==t&&(i=i.substr(0,i.length-12)),Ne.push({title:i,artist:n})}Oe=!1,M()},r.onerror=function(){console.log("Radio history Error: ",r.status+" "+r.statusText),le&&clearInterval(le),le=setInterval(function(){j()},Me)},/^POST/i.test("GET")&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send()}function F(){var t=Ne.shift();if(it.find("img").attr("src")!=t.thumb){var e=new Image;e.className="hap-hidden",e.onload=function(){this.className="hap-visible"},it.empty(),it[0].appendChild(e),e.src=t.thumb}rt.html(t.title),ot.html(t.artist),c.generateHistory?oe!=Ne[0].thumb&&R(Ne):re||(re=!0,wn(qt).trigger("historyEndLoad")),le&&clearInterval(le),le=setInterval(function(){j()},Me)}function B(){var t;if($t||(Jt=wn(document.createElement("audio")).attr("preload",bt),Qt=Jt[0],$t=!0),Te=t=(Re||Qt.canPlayType("application/vnd.apple.mpegurl"))&&Ee.hls?Ee.hls:ke&&Ee.mp3?Ee.mp3:_e&&Ee.wav?Ee.wav:Ee.path,Qt.src=t,Jt.on("ended",function(){H()}).on("canplay",function(){}).on("canplaythrough",function(){}).on("loadedmetadata",function(){Ee.playbackRate&&(Qt.playbackRate=Number(Ee.playbackRate)),c.resumeTime?(Qt.currentTime=c.resumeTime,delete c.resumeTime):Ee.start&&(Qt.currentTime=Ee.start)}).on("play",function(){if(we||(we=!0,Qe=Ze.width(),Ae&&cancelAnimationFrame(Ae),Ae=requestAnimationFrame(U),wn(qt).trigger("soundStart",{instance:qt,instanceName:vt,counter:Ge.getCounter()})),Bt&&1<hap_mediaArr.length){var t,e=hap_mediaArr.length;for(t=0;t<e;t++)qt!=hap_mediaArr[t].inst&&hap_mediaArr[t].inst.pauseMedia()}lt.find("i").removeClass("fa-play").addClass("fa-pause"),Se=!0,wn(qt).trigger("soundPlay",{instance:qt,instanceName:vt,counter:Ge.getCounter()})}).on("pause",function(){lt.find("i").removeClass("fa-pause").addClass("fa-play"),Se=!1,wn(qt).trigger("soundPause",{instance:qt,instanceName:vt,counter:Ge.getCounter()})}).on("error",function(){wn(qt).trigger("soundError",{instance:qt,instanceName:vt,counter:Ge.getCounter()})}),Re&&"hls"==xe){if("file:"==window.location.protocol)return alert("Playing HLS requires server connection!"),!1;yn.attachMedia(Qt),wt&&Qt.play()}else wt&&(Qt.load(),Qt.play());Qt.volume=Dt,wt=!0,"radio"==xe&&((HAPUtils.isEmpty(c.lastFmApiKey)||HAPUtils.isEmpty(c.lastFmApiSecret))&&alert("Last.fm API credentials missing!"),ee||(ee=new LastFMCache,ne=new LastFM({apiKey:c.lastFmApiKey,apiSecret:c.lastFmApiSecret,cache:ee})),j())}function U(){if(Qt){var t=Qt.currentTime,e=Qt.duration;if(HAPUtils.isNumber(t)&&HAPUtils.isNumber(e)){if(at.html(HAPUtils.formatCurrentTime(t)),st.html(HAPUtils.formatDuration(e)),"undefined"!=typeof Qt.buffered&&0!=Qt.buffered.length){try{var n=Qt.buffered.end(Qt.buffered.length-1)}catch(r){}if(!isNaN(n))var i=n/e}Ve?Ke.drawSeekbar(i,t,e):(en.width(t/e*Qe),i&&tn.width(i*Qe)),Ee.end&&t>=Ee.end&&H()}}Ae=requestAnimationFrame(U)}function H(){wn(qt).trigger("soundEnd",{instance:qt,instanceName:vt,counter:Ge.getCounter()});var t=Ee.start||0;"next"==Pt?qt.nextMedia():"loop"==Pt?(Qt.currentTime=t,Qt.play()):"rewind"==Pt?(Qt.currentTime=t,Qt.pause()):"stop"==Pt&&Qt.pause()}function q(){Ae&&cancelAnimationFrame(Ae),le&&clearInterval(le),le=null,Re&&"hls"==xe&&yn.detachMedia(),Qt&&(Qt.pause(),Qt.src=""),Jt&&Jt.off("ended canplay canplaythrough loadedmetadata pause play error"),at.html("0:00"),st.html("0:00"),it.empty(),rt.html(""),ot.html(""),en.width(0),tn.width(0),xe=null,ge=we=Se=!1,lt.find("i").removeClass("fa-pause").addClass("fa-play")}function W(){xe&&(q(),m()),pt&&(Ct&&(J.sortable("destroy"),ce=!1),J.find(".hap-playlist-item").remove()),Ie.empty(),yt=ye=oe=null,ve=me=fe=!(Oe=!(re=!1)),Ue=0,je=-1,Fe=[],Be=[],He=[],Ge.reSetCounter(),qe.val(We),Ce=!1,tt.find("i").removeClass("fa-sort-alpha-up").addClass("fa-sort-alpha-down")}function G(){Qe=Ze.width()}function z(t){if("undefined"==typeof t.artist||HAPUtils.isEmpty(t.artist)||"undefined"==typeof t.title||HAPUtils.isEmpty(t.title))"undefined"!=typeof t.artist||"undefined"==typeof t.title||HAPUtils.isEmpty(t.title)?"undefined"==typeof t.artist||HAPUtils.isEmpty(t.artist)||"undefined"!=typeof t.title||(e=t.artist):e=t.title;else var e=t.artist+Ht+t.title;return e}function V(){if(it.length){var t=new Image;t.className="hap-hidden",t.onload=function(){this.className="hap-visible"},it.empty(),it[0].appendChild(t),t.src=Ee.thumb||Ee.thumbDefault}Ee.title&&rt.html(Ee.title),Ee.artist&&ot.html(Ee.artist)}var K=wn(this),Y=wn(c.playlistList).hide(),X=K.find(".hap-playlist-holder"),$=K.find(".hap-playlist-inner"),J=K.find(".hap-playlist-content"),Q=K.find(".hap-playlist-filter-msg"),Z=K.find(".hap-share-holder"),tt=K.find(".hap-sort-alpha"),et=K.find(".hap-preloader"),nt=K.find(".hap-popup-toggle");K.find(".hap-player-holder");var it=K.find(".hap-player-thumb"),rt=K.find(".hap-player-title"),ot=K.find(".hap-player-artist"),at=K.find(".hap-media-time-current"),st=K.find(".hap-media-time-total"),lt=K.find(".hap-playback-toggle"),ct=K.find(".hap-loop-toggle"),ut=K.find(".hap-random-toggle");et=K.find(".hap-preloader");var dt,ht,pt=X.length,ft=HAPUtils.isMobile(),gt=HAPUtils.hasLocalStorage(),mt=c.sourcePath,vt=c.instanceName,yt=c.activePlaylist,bt=c.preload,wt=c.autoPlay,xt=c.loopingOn,Tt=c.randomPlay,St=c.useNumbersInPlaylist,Et=c.usePlaylistScroll,At=c.playlistScrollOrientation,Ct=!ft&&c.sortableTracks,kt=c.facebookAppId,_t=c.soundCloudAppId,Rt=c.gDriveAppId,Dt=c.volume,Lt=c.useKeyboardNavigationForPlayback,Pt=c.mediaEndAction,It=c.playlistItemContent.split(","),Ot=c.useContinousPlayback&&gt,Nt=c.continousKey,Mt=c.useMediaSession&&"mediaSession"in navigator,jt=c.createDownloadIconsInPlaylist,Ft=c.createLinkIconsInPlaylist,Bt=c.togglePlaybackOnMultipleInstances,Ut=c.numberTitleSeparator||".  ",
Ht=c.artistTitleSeparator||" - ",qt=this;wn("body");var Wt,Gt=wn(window),zt=wn(document),Vt=HAPUtils.hasDownloadSupport(),Kt=HAPUtils.isIOS();HAPUtils.isAndroid();var Yt,Xt,$t,Jt,Qt,Zt,te,ee,ne,ie,re,oe,ae,se,le,ce,ue,de,he,pe,fe,ge,me,ve,ye,be,we,xe,Te,Se,Ee,Ae,Ce,ke=HAPUtils.canPlayMp3(),_e=HAPUtils.canPlayWav(),Re=window.Hls&&Hls.isSupported(),De=mt+"includes/ba-simple-proxy.php",Le=[],Pe=K.find(".hap-history-inner"),Ie=K.find(".hap-history-content"),Oe=!0,Ne=[],Me=c.lastPlayedInterval,je=-1,Fe=[],Be=[],Ue=0,He=[];"undefined"==typeof window.hap_mediaArr&&(window.hap_mediaArr=[]),window.hap_mediaArr.push({inst:qt,id:vt}),ft&&(wt=!1),xt&&ct.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"),Tt&&ut.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"),K.find(".hap-select").change(function(){qt.loadPlaylist(wn(this).val())});var qe=K.find(".hap-search-filter"),We=qe.val();qe.on("focus",function(){wn(this).val()==We&&wn(this).val("")}).on("blur",function(){HAPUtils.isEmpty(wn(this).val())&&wn(this).val(We)}).on("keyup.apfilter",function(){if(0==He.length)return!1;var t=wn(this).val();t=He.filter(/./.test.bind(new RegExp(t,"i")));var e,n=0;for(e=0;e<Ue;e++){var i=J.children(".hap-playlist-item").eq(e).find(".hap-playlist-title").html();-1<wn.inArray(i,t)?J.children(".hap-playlist-item").eq(e).show():(J.children(".hap-playlist-item").eq(e).hide(),n++)}n==Ue?Q.show():Q.hide()}),HAPUtils.isEmpty(kt)||"file:"==window.location.protocol?console.log("facebookAppId has not been set in settings!"):t(kt);var Ge=new HAPPlaylistManager(c);wn(Ge).on("HAPPlaylistManager.COUNTER_READY",function(){xe&&q();var t=Ge.getCounter(),e=J.children(".hap-playlist-item").eq(t);Ee=b(e),xe=Ee.type,be&&m(),(be=J.children(".hap-playlist-item").eq(t).find(".hap-playlist-non-selected, .hap-playlist-selected")).length&&(be.removeClass("hap-playlist-non-selected").addClass("hap-playlist-selected"),Et&&0<Ue&&(de||("horizontal"==At?$.mCustomScrollbar("scrollTo",parseInt(be.closest(".hap-playlist-item").position().left),{scrollInertia:500}):$.mCustomScrollbar("scrollTo",parseInt(be.closest(".hap-playlist-item").position().top),{scrollInertia:500})),de=!1),wn(qt).trigger("playlistItemDisabled",{instance:qt,instanceName:vt,item:be})),V(),Mt&&(navigator.mediaSession.metadata=new MediaMetadata({title:Ee.title,artist:Ee.artist||"",album:Ee.album||"",artwork:Ee.artwork})),B(),wn(qt).trigger("soundRequest",{instance:qt,instanceName:vt,counter:t})}),Ot&&(window.attachEvent||window.addEventListener)(Kt?"pagehide":"beforeunload",function(t){if(window.event&&(window.event.cancelBubble=!0),!dt||!xe)return!1;t={volume:Dt,activeItem:Ge.getCounter(),resumeTime:qt.getCurrentTime(),autoPlay:Se},localStorage.setItem(Nt,JSON.stringify(t))}),Mt&&(navigator.mediaSession.setActionHandler("play",function(){qt.playMedia()}),navigator.mediaSession.setActionHandler("pause",function(){qt.pauseMedia()}),navigator.mediaSession.setActionHandler("previoustrack",function(){qt.previousMedia()}),navigator.mediaSession.setActionHandler("nexttrack",function(){qt.nextMedia()}),navigator.mediaSession.setActionHandler("seekbackward",function(){qt.seekBackward()}),navigator.mediaSession.setActionHandler("seekforward",function(){qt.seekForward()}));var ze=K.find(".hap-tooltip");ft||K.find("[data-tooltip]").on("mouseenter",function(t){var e=wn(this);t=K[0].getBoundingClientRect();var n=e[0].getBoundingClientRect();ze.find("p").text(e.attr("data-tooltip"));var i=parseInt(n.top-t.top-ze.outerHeight());(e=parseInt(n.left-t.left-ze.outerWidth()/2+e.outerWidth()/2))+ze.outerWidth()>K.width()?e=K.width()-ze.outerWidth():e<0&&(e=0),i+t.top<0&&(i=parseInt(n.top-t.top+ze.outerHeight()+15)),ze.css({left:e+"px",top:i+"px"}).show()}).on("mouseleave",function(){ze.hide()});var Ve=K.find(".hap-circle-player").length;if(Ve&&HAPUtils.hasCanvas())var Ke=new HAPCirclePlayer({settings:c,parent:K});if("ontouchstart"in window)var Ye="touchstart.ap mousedown.ap",Xe="touchmove.ap mousemove.ap",$e="touchend.ap mouseup.ap";else window.PointerEvent?(Ye="pointerdown.ap",Xe="pointermove.ap",$e="pointerup.ap"):(Ye="mousedown.ap",Xe="mousemove.ap",$e="mouseup.ap");var Je,Qe,Ze=K.find(".hap-progress-bg"),tn=K.find(".hap-load-level"),en=K.find(".hap-progress-level"),nn=Ve?K.find(".hap-progress-canvas"):K.find(".hap-seekbar");if(nn.on(Ye,function(t){return e(t),!1}),!ft){var rn=function(){we&&(nn.off(Xe,i).off("mouseout",rn),zt.off("mouseout",rn),ze.hide())};nn.on("mouseover",function(){we&&(nn.on(Xe,i).on("mouseout",rn),zt.on("mouseout",rn))})}var on,an=.5,sn=K.find(".hap-volume-toggle"),ln=K.find(".hap-volume-seekbar"),cn=K.find(".hap-volume-bg"),un=K.find(".hap-volume-level"),dn=null!=ln.attr("data-is-vertical"),hn=dn?cn.height():cn.width();if(Dt<0?Dt=0:1<Dt&&(Dt=1),0!=Dt&&(an=Dt),ln.on(Ye,function(t){return r(t),!1}),!ft){var pn=function(){ln.off(Xe,s).off("mouseout",pn),zt.off("mouseout",pn),ze.hide()};ln.on("mouseover",function(){ln.on(Xe,s).on("mouseout",pn),zt.on("mouseout",pn)})}c.disableRightClickOverPlayer&&K.on("contextmenu",function(){return!1}),Lt&&zt.on("keyup.apnav",function(t){if(!dt)return!1;var e=t.keyCode;if(t=wn(t.target),37==e)qt.previousMedia();else if(39==e)qt.nextMedia();else if(32==e){if(t.hasClass("hap-search-filter"))return!1;qt.togglePlayback()}else if(77==e){if(t.hasClass("hap-search-filter"))return!1;u()}});var fn,gn=[K.find(".hap-next-toggle"),K.find(".hap-prev-toggle"),K.find(".hap-share-toggle"),K.find(".hap-playlist-toggle"),K.find(".hap-share-item"),sn,nt,tt,lt,ct,ut],mn=gn.length;for(fn=0;fn<mn;fn++){var vn=wn(gn[fn]).css("cursor","pointer").on("click",l);ft||vn.on("mouseenter",f).on("mouseleave",g)}if(Re){var yn=new Hls;yn.on(Hls.Events.MEDIA_ATTACHED,function(){yn.loadSource(Te)}),yn.on(Hls.Events.ERROR,function(t,e){if(e.fatal)switch(e.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover"),yn.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),yn.recoverMediaError();break;default:yn.destroy()}})}if(Gt.on("resize",function(){if(!dt)return!1;Wt&&clearTimeout(Wt),Wt=setTimeout(G,150)}),this.playMedia=function(){if(!dt||!xe||Se)return!1;Qt&&Qt.play()},this.pauseMedia=function(){if(!dt||!xe||!Se)return!1;Qt&&Qt.pause()},this.checkMedia=function(t){if(!dt||!xe)return!1;t=t.toLowerCase(),Se&&"pause"==t&&Qt&&Qt.pause()},this.togglePlayback=function(){if(!dt||!xe)return!1;Qt&&(Qt.paused?Qt.play():Qt.pause())},this.nextMedia=function(){if(!dt)return!1;0!=Ue&&Ge.advanceHandler(1,!0)},this.previousMedia=function(){if(!dt)return!1;0!=Ue&&Ge.advanceHandler(-1,!0)},this.loadMedia=function(t){if(!dt||ht)return!1;if(0!=Ue){if(void 0===t)return alert("loadMedia method requires either a track number or a track title to load. LoadMedia failed."),!1;if("string"==typeof t){var e;if(J.find(".hap-playlist-item").each(function(){if(wn(this).find(".hap-playlist-title").html()==t)return t=wn(this).index(),!(e=!0)}),!e)return alert('Track with title "'+t+'" doesnt exist. LoadMedia failed.'),!1}else{if("number"!=typeof t)return alert("loadMedia method requires either a track number or a track title to load. LoadMedia failed."),!1;if(t<0||Ue-1<t)return alert('Invalid track number. Track number  "'+t+'" doesnt exist. LoadMedia failed.'),!1}Ge.processPlaylistRequest(t)}},this.loadPlaylist=function(t){return!(!dt||ht)&&(void 0===t||HAPUtils.isEmpty(t)?(alert("loadPlaylist method requires id parameter. loadPlaylist failed."),!1):yt!=t&&void v(t))},this.addTrack=function(t,e,n,i){if(!dt||ht)return!1;if(void 0===t)return alert("addTrack method requires format parameter. AddTrack failed."),!1;if(void 0===e)return alert("addTrack method requires track parameter. AddTrack failed."),!1;ge=!1,void 0!==n&&(ge=n);var r=!(n=1);if("string"!=typeof e&&"[object Object]"!==Object.prototype.toString.call(e)){if("[object Array]"!==Object.prototype.toString.call(e))return alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),!1;n=e.length,r=!0}if(pe=i,fe=!(he=!1),ye)if(void 0!==pe){if(pe<0||Ue<pe)return alert('Invalid position to insert track to. Position number "'+i+'" doesnt exist. AddTrack failed.'),!1;pe==Ue&&(he=!0)}else he=!0,pe=Ue;else{if(void 0!==pe){if(0!=pe)return alert('Invalid position to insert track to. Position number "'+i+'" doesnt exist. AddTrack failed.'),!1}else pe=0;he=!0}for(ht=!0,et.show(),je=-1,Fe=[],Be=[],i=0;i<n;i++){var o=r?e[i]:e;o="html"==t?wn(wn.parseHTML(o)):o,Be.push(o)}Ue=Be.length,me=!1,ye||(me=!0),ye=J,y()},this.inputAudio=function(t){return!(!dt||ht)&&(void 0===t?(alert("inputAudio method requires data parameter. inputAudio failed."),!1):(m(),Ge.reSetCounter(),Ee=t,xe="audio",V(),wt=!0,void B()))},this.removeTrack=function(t){if(!dt||ht)return!1;if(0!=Ue){if(void 0===t)return alert("removeTrack method requires id parameter. removeTrack failed."),!1;if("string"==typeof t){var e=!1;if(J.find(".hap-playlist-item").each(function(){if(wn(this).find(".hap-playlist-title").html()==t)return n=wn(this),t=n.index(),!(e=!0)}),!e)return alert('Track with title "'+t+'" doesnt exist. RemoveTrack failed.'),!1}else{if("number"!=typeof t)return alert("removeTrack method requires either a id number or a track title to remove. removeTrack failed."),!1;if((t=parseInt(t,10))<0||Ue-1<t)return alert('Invalid id number. Track number  "'+t+'" doesnt exist. RemoveTrack failed.'),!1;var n=J.find(".hap-playlist-item").eq(t)}if(n.remove(),L(),0<Ue){var i=Ge.getCounter();t==i?(q(),Ge.setPlaylistItems(Ue)):(Ge.setPlaylistItems(Ue,!1),t<i&&Ge.reSetCounter(Ge.getCounter()-1))}else W()}},this.sort=function(t,e){if(!dt)return!1;if(0!=Ue){if(void 0===t)return console.log("Sort method requires type parameter. Sort method failed."),!1;var n=t.toLowerCase();if("title"==n)e?(J.children(".hap-playlist-item").sort(function(t,e){return wn(e).find(".hap-playlist-title").html()>wn(t).find(".hap-playlist-title").html()?1:-1}).appendTo(J),Ce=!1):(J.children(".hap-playlist-item").sort(function(t,e){return wn(e).find(".hap-playlist-title").html()<wn(t).find(".hap-playlist-title").html()?1:-1}).appendTo(J),Ce=!0);else{if("random"!=n)return console.log("Sort method requires type parameter. Sort method failed."),!1;for(n=J.children();n.length;)J.append(n.splice(Math.floor(Math.random()*n.length),1));Ce=!1}Ce?tt.find("i").removeClass("fa-sort-alpha-up").addClass("fa-sort-alpha-down"):tt.find("i").removeClass("fa-sort-alpha-down").addClass("fa-sort-alpha-up"),be&&(n=be.closest(".hap-playlist-item").index(),Ge.reSetCounter(n)),St&&P()}},this.destroyInstance=function(){Gt&&Gt.off(),ln&&ln.off(),nn&&nn.off(),q(),$.mCustomScrollbar("destroy"),ue=!1,Ct&&(J.sortable("destroy"),ce=!1)},this.destroyMedia=function(){if(!dt)return!1;dt&&xe&&(be&&m(),q(),Ge.reSetCounter())},this.destroyPlaylist=function(){if(!dt)return!1;W()},this.setPlaybackRate=function(t){if(!dt||!xe)return!1;Qt&&(Qt.playbackRate=Number(t))},this.toggleRandom=function(t){if(!dt||void 0===Ge)return!1;Tt=void 0!==t?t:!Tt,Ge.setRandom(Tt),Tt?ut.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):ut.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color")},this.toggleLoop=function(t){if(!dt||void 0===Ge)return!1;xt=void 0!==t?t:!xt,Ge.setLooping(xt),xt?ct.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):ct.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color")},this.getVolume=function(){return Dt},this.getVolumeSize=function(){return!!dt&&hn},this.getVolumeOrientation=function(){return!!dt&&dn},this.setVolume=function(t){if(!dt)return!1;t<0?t=0:1<t&&(t=1),a(t)},this.toggleMute=function(){if(!dt)return!1;u()},this.seek=function(t){if(!dt||!xe)return!1;try{Qt.currentTime=t}catch(e){console.log(e)}},this.seekBackward=function(){if(!dt||!xe)return!1;if(Qt)try{Qt.currentTime=Math.max(Qt.currentTime-10,0)}catch(t){console.log(t)}},this.seekForward=function(){if(!dt||!xe)return!1;if(Qt)try{Qt.currentTime=Math.min(Qt.currentTime+10,Qt.duration)}catch(t){console.log(t)}},this.getCurrentTime=function(){if(!dt||!xe)return!1;var t=0;return Qt&&(t=Qt.currentTime),t},this.getDuration=function(){if(!dt||!xe)return!1;if(Qt)var t=Qt.duration;return t},this.destroyPlaylistScroll=function(){if(!dt)return!1;$.mCustomScrollbar("destroy"),ue=!1},this.getPlaylistList=function(){return!!dt&&Y},this.getSetupDone=function(){return dt},this.getMediaPlaying=function(){return!!dt&&Se},this.getCounter=function(){return!!dt&&(void 0!==Ge?Ge.getCounter():-1)},this.getPlaylistLength=function(){return!!dt&&(HAPUtils.isNumber(Ue)?Ue:0)},this.getSettings=function(){return c},this.getCurrMediaData=function(){return!!dt&&Ee},this.getWrapper=function(){return K},this.getActivePlaylistItem=function(){return be},gt&&localStorage.getItem(Nt)){var bn=JSON.parse(localStorage.getItem(Nt));c.resumeTime=bn.resumeTime,Dt=bn.volume,wt=bn.autoPlay,c.activeItem=bn.activeItem,localStorage.removeItem(Nt)}return c.activePlaylist&&!HAPUtils.isEmpty(c.activePlaylist)?v(c.activePlaylist):N(),this}}(jQuery),function(n){var t=function(){};t.isEmpty=function(t){return 0==t.replace(/^\s+|\s+$/g,"").length},t.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},t.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)},t.isIE=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,n=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=n.exec(e)&&(t=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(e=navigator.userAgent,null!=(n=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/).exec(e)&&(t=parseFloat(RegExp.$1)));return-1!=t},t.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)},t.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")},t.hasDownloadSupport=function(){return"download"in document.createElement("a")},t.qualifyURL=function(t){var e=document.createElement("a");return e.href=t,e.href},t.relativePath=function(t){return/^(?:[a-z]+:)?\/\//i.test(t)},t.hasLocalStorage=function(){try{return"localStorage"in n&&null!==n.localStorage}catch(t){return!1}},t.randomiseArray=function(t){var e,n=[],i=[];for(e=0;e<t;e++)n[e]=e;for(e=0;e<t;e++){var r=Math.round(Math.random()*(n.length-1));i[e]=n[r],n.splice(r,1)}return i},t.sortArray=function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)r[n]=t[e[n]];return r},t.keysrt=function(t,r,e){var o=1;return e&&(o=-1),t.sort(function(t,e){var n=t[r],i=e[r];return o*(n<i?-1:i<n?1:0)})},t.parseXML=function(t){if(n.ActiveXObject&&n.GetObject){var e=new ActiveXObject("Microsoft.XMLDOM");return e.loadXML(t),e}if(n.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");throw Error("No XML parser available")},t.formatCurrentTime=function(t){t=Math.round(t);var e=Math.floor(t/60);return(10<=e?e:""+e)+":"+(10<=(t=Math.floor(t%60))?t:"0"+t)},t.formatDuration=function(t){t=Math.round(t);var e=Math.floor(t/60);return(10<=e?e:""+e)+":"+(10<=(t=Math.floor(t%60))?t:"0"+t)},t.formatNumber=function(t){return t<9?"0"+(t+1):t+1},t.nFormatter=function(t,e){var n,i=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"G"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}],r=/\.0+$|(\.[0-9]*[1-9])0+$/;for(n=0;n<i.length;n++)if(t>=i[n].value)return(t/i[n].value).toFixed(e).replace(r,"$1")+i[n].symbol;return t.toFixed(e).replace(r,"$1")},t.canPlayMp3=function(){var t=document.createElement("audio");return!(!t.canPlayType||!t.canPlayType("audio/mpeg;").replace(/no/,""))},t.canPlayWav=function(){var t=document.createElement("audio");return!(!t.canPlayType||!t.canPlayType("audio/wav;").replace(/no/,""))},t.canPlayOgg=function(){var t=document.createElement("audio");return!(!t.canPlayType||!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""))},t.hasCanvas=function(){return!!document.createElement("canvas")},n.HAPUtils=t}(window),function(t,p){t.HAPPlaylistManager=function(t){function i(){d=HAPUtils.randomiseArray(r)}var r,n,e,o=this,a=t.loopingOn,s=t.randomPlay,l=!1,c=-1,u=!1,d=[],h=!1;this.setCounter=function(t,e){if(void 0===e&&(e=!0),c=e?c+parseInt(t,10):parseInt(t,10),isNaN(c))alert("HAPPlaylistManager message: No active media, counter = "+c);else if(l=!1,a){if(s)if(r-1<c){if(c=d[r-1],i(),d[0]==c){var n=d.splice(0,1);d.push(n)}c=0,p(o).trigger("HAPPlaylistManager.PLAYLIST_END_ALERT")}else c<0&&(c=d[0],i(),d[r-1]==c&&(n=d.splice(r-1,1),d.unshift(n)),c=r-1);else r-1<c?(c=0,p(o).trigger("HAPPlaylistManager.PLAYLIST_END_ALERT")):c<0&&(c=r-1);p(o).trigger("HAPPlaylistManager.COUNTER_READY")}else r-1<c?(c=r-1,l=!0):c<0&&(c=0),l?p(o).trigger("HAPPlaylistManager.PLAYLIST_END"):p(o).trigger("HAPPlaylistManager.COUNTER_READY")},this.getCounter=function(){return s?h?c:d[c]:c},this.advanceHandler=function(t){h=!1,u?(u=!1,r-1<e+t?(c=r-1,p(o).trigger("HAPPlaylistManager.COUNTER_READY")):e+t<0?(c=0,p(o).trigger("HAPPlaylistManager.COUNTER_READY")):o.setCounter(e+t,!1)):o.setCounter(t)},this.processPlaylistRequest=function(t){h=!1,s&&(h=!0,n=t,u||(e=c,u=!0)),o.setCounter(t,!1)},this.setPlaylistItems=function(t,e){void 0===e&&(e=!0),e&&(c=-1),r=t,s&&i()},this.reSetCounter=function(t){void 0===t?c=-1:(t=parseInt(t,10),r?(r-1<t?t=r-1:t<0&&(t=0),c=t):c=-1)},this.setRandom=function(t){if((s=t)&&i(),s){var e=d.length;for(t=0;t<e;t++)if(d[t]==c){if(0==t)break;t=d.splice(t,1),d.unshift(parseInt(t,10));break}c=0}else u?(c=n,u=!1):c=d[c]},this.setLooping=function(t){a=t},this.getPosition=function(t){return d.indexOf(t)}}}(window,jQuery),function(){}.call(this),function(){var e;jQuery(function(){return Stripe.setPublishableKey($("meta[name='stripe-key']").attr("content")),$("#payment-form").submit(function(){var t;return t=$(this),$(".card-fields").hasClass("hidden")?t.get(0).submit():(t.find("button").prop("disabled",!0),Stripe.card.createToken(t,e)),!1}),$(".use-different-card").on("click",function(){return $(".card-on-file").hide(),$(".card-fields").removeClass("hidden")})}),e=function(t,e){var n,i;n=$("#payment-form"),e.error?(n.find(".payment-errors").text(e.error.message),n.find("button").prop("disabled",!1)):(i=e.id,n.append($('<input type="hidden" name="stripeToken" />').val(i)),n.append($('<input type="hidden" name="card_last4" />').val(e.card.last4)),n.append($('<input type="hidden" name="card_exp_month" />').val(e.card.exp_month)),n.append($('<input type="hidden" name="card_exp_year" />').val(e.card.exp_year)),n.append($('<input type="hidden" name="card_brand" />').val(e.card.brand)),n.get(0).submit())}}.call(this);